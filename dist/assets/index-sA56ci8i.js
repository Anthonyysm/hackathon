(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function JS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $1={exports:{}},dh={},B1={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bc=Symbol.for("react.element"),ZS=Symbol.for("react.portal"),ek=Symbol.for("react.fragment"),tk=Symbol.for("react.strict_mode"),rk=Symbol.for("react.profiler"),nk=Symbol.for("react.provider"),sk=Symbol.for("react.context"),ik=Symbol.for("react.forward_ref"),ok=Symbol.for("react.suspense"),ak=Symbol.for("react.memo"),lk=Symbol.for("react.lazy"),nw=Symbol.iterator;function ck(t){return t===null||typeof t!="object"?null:(t=nw&&t[nw]||t["@@iterator"],typeof t=="function"?t:null)}var q1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H1=Object.assign,W1={};function _a(t,e,r){this.props=t,this.context=e,this.refs=W1,this.updater=r||q1}_a.prototype.isReactComponent={};_a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G1(){}G1.prototype=_a.prototype;function ng(t,e,r){this.props=t,this.context=e,this.refs=W1,this.updater=r||q1}var sg=ng.prototype=new G1;sg.constructor=ng;H1(sg,_a.prototype);sg.isPureReactComponent=!0;var sw=Array.isArray,K1=Object.prototype.hasOwnProperty,ig={current:null},Q1={key:!0,ref:!0,__self:!0,__source:!0};function Y1(t,e,r){var n,s={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)K1.call(e,n)&&!Q1.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:bc,type:t,key:o,ref:a,props:s,_owner:ig.current}}function uk(t,e){return{$$typeof:bc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function og(t){return typeof t=="object"&&t!==null&&t.$$typeof===bc}function dk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var iw=/\/+/g;function Nm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dk(""+t.key):e.toString(36)}function Lu(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bc:case ZS:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Nm(a,0):n,sw(s)?(r="",t!=null&&(r=t.replace(iw,"$&/")+"/"),Lu(s,e,r,"",function(d){return d})):s!=null&&(og(s)&&(s=uk(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(iw,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",sw(t))for(var l=0;l<t.length;l++){o=t[l];var c=n+Nm(o,l);a+=Lu(o,e,r,c,s)}else if(c=ck(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=n+Nm(o,l++),a+=Lu(o,e,r,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function lu(t,e,r){if(t==null)return t;var n=[],s=0;return Lu(t,n,"","",function(o){return e.call(r,o,s++)}),n}function hk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cr={current:null},Ou={transition:null},mk={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:Ou,ReactCurrentOwner:ig};function X1(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:lu,forEach:function(t,e,r){lu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return lu(t,function(){e++}),e},toArray:function(t){return lu(t,function(e){return e})||[]},only:function(t){if(!og(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=_a;Ie.Fragment=ek;Ie.Profiler=rk;Ie.PureComponent=ng;Ie.StrictMode=tk;Ie.Suspense=ok;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;Ie.act=X1;Ie.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=H1({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ig.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)K1.call(e,c)&&!Q1.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:bc,type:t.type,key:s,ref:o,props:n,_owner:a}};Ie.createContext=function(t){return t={$$typeof:sk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nk,_context:t},t.Consumer=t};Ie.createElement=Y1;Ie.createFactory=function(t){var e=Y1.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:ik,render:t}};Ie.isValidElement=og;Ie.lazy=function(t){return{$$typeof:lk,_payload:{_status:-1,_result:t},_init:hk}};Ie.memo=function(t,e){return{$$typeof:ak,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Ou.transition;Ou.transition={};try{t()}finally{Ou.transition=e}};Ie.unstable_act=X1;Ie.useCallback=function(t,e){return cr.current.useCallback(t,e)};Ie.useContext=function(t){return cr.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return cr.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return cr.current.useEffect(t,e)};Ie.useId=function(){return cr.current.useId()};Ie.useImperativeHandle=function(t,e,r){return cr.current.useImperativeHandle(t,e,r)};Ie.useInsertionEffect=function(t,e){return cr.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return cr.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return cr.current.useMemo(t,e)};Ie.useReducer=function(t,e,r){return cr.current.useReducer(t,e,r)};Ie.useRef=function(t){return cr.current.useRef(t)};Ie.useState=function(t){return cr.current.useState(t)};Ie.useSyncExternalStore=function(t,e,r){return cr.current.useSyncExternalStore(t,e,r)};Ie.useTransition=function(){return cr.current.useTransition()};Ie.version="18.3.1";B1.exports=Ie;var w=B1.exports;const Jt=JS(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk=w,pk=Symbol.for("react.element"),gk=Symbol.for("react.fragment"),xk=Object.prototype.hasOwnProperty,wk=fk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yk={key:!0,ref:!0,__self:!0,__source:!0};function J1(t,e,r){var n,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)xk.call(e,n)&&!yk.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:pk,type:t,key:o,ref:a,props:s,_owner:wk.current}}dh.Fragment=gk;dh.jsx=J1;dh.jsxs=J1;$1.exports=dh;var i=$1.exports,Z1={exports:{}},Pr={},eb={exports:{}},tb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,q){var O=V.length;V.push(q);e:for(;0<O;){var ee=O-1>>>1,se=V[ee];if(0<s(se,q))V[ee]=q,V[O]=se,O=ee;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var q=V[0],O=V.pop();if(O!==q){V[0]=O;e:for(var ee=0,se=V.length,U=se>>>1;ee<U;){var Z=2*(ee+1)-1,me=V[Z],Te=Z+1,de=V[Te];if(0>s(me,O))Te<se&&0>s(de,me)?(V[ee]=de,V[Te]=O,ee=Te):(V[ee]=me,V[Z]=O,ee=Z);else if(Te<se&&0>s(de,O))V[ee]=de,V[Te]=O,ee=Te;else break e}}return q}function s(V,q){var O=V.sortIndex-q.sortIndex;return O!==0?O:V.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,y=!1,N=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var q=r(d);q!==null;){if(q.callback===null)n(d);else if(q.startTime<=V)n(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=r(d)}}function b(V){if(E=!1,x(V),!N)if(r(c)!==null)N=!0,ue(T);else{var q=r(d);q!==null&&Q(b,q.startTime-V)}}function T(V,q){N=!1,E&&(E=!1,v(j),j=-1),y=!0;var O=m;try{for(x(q),f=r(c);f!==null&&(!(f.expirationTime>q)||V&&!S());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,m=f.priorityLevel;var se=ee(f.expirationTime<=q);q=t.unstable_now(),typeof se=="function"?f.callback=se:f===r(c)&&n(c),x(q)}else n(c);f=r(c)}if(f!==null)var U=!0;else{var Z=r(d);Z!==null&&Q(b,Z.startTime-q),U=!1}return U}finally{f=null,m=O,y=!1}}var M=!1,I=null,j=-1,A=5,C=-1;function S(){return!(t.unstable_now()-C<A)}function D(){if(I!==null){var V=t.unstable_now();C=V;var q=!0;try{q=I(!0,V)}finally{q?R():(M=!1,I=null)}}else M=!1}var R;if(typeof g=="function")R=function(){g(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ie=$.port2;$.port1.onmessage=D,R=function(){ie.postMessage(null)}}else R=function(){k(D,0)};function ue(V){I=V,M||(M=!0,R())}function Q(V,q){j=k(function(){V(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){N||y||(N=!0,ue(T))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var O=m;m=q;try{return V()}finally{m=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var O=m;m=V;try{return q()}finally{m=O}},t.unstable_scheduleCallback=function(V,q,O){var ee=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ee+O:ee):O=ee,V){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=O+se,V={id:h++,callback:q,priorityLevel:V,startTime:O,expirationTime:se,sortIndex:-1},O>ee?(V.sortIndex=O,e(d,V),r(c)===null&&V===r(d)&&(E?(v(j),j=-1):E=!0,Q(b,O-ee))):(V.sortIndex=se,e(c,V),N||y||(N=!0,ue(T))),V},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(V){var q=m;return function(){var O=m;m=q;try{return V.apply(this,arguments)}finally{m=O}}}})(tb);eb.exports=tb;var vk=eb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bk=w,Rr=vk;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rb=new Set,Hl={};function ao(t,e){ia(t,e),ia(t+"Capture",e)}function ia(t,e){for(Hl[t]=e,t=0;t<e.length;t++)rb.add(e[t])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=Object.prototype.hasOwnProperty,Nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow={},aw={};function _k(t){return Ef.call(aw,t)?!0:Ef.call(ow,t)?!1:Nk.test(t)?aw[t]=!0:(ow[t]=!0,!1)}function jk(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ek(t,e,r,n){if(e===null||typeof e>"u"||jk(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ur(t,e,r,n,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new ur(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new ur(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new ur(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new ur(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new ur(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new ur(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new ur(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new ur(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new ur(t,5,!1,t.toLowerCase(),null,!1,!1)});var ag=/[\-:]([a-z])/g;function lg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ag,lg);$t[e]=new ur(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ag,lg);$t[e]=new ur(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ag,lg);$t[e]=new ur(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new ur(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new ur(t,1,!1,t.toLowerCase(),null,!0,!0)});function cg(t,e,r,n){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ek(e,r,s,n)&&(r=null),n||s===null?_k(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ws=bk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cu=Symbol.for("react.element"),Po=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),ug=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),nb=Symbol.for("react.provider"),sb=Symbol.for("react.context"),dg=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),Cf=Symbol.for("react.suspense_list"),hg=Symbol.for("react.memo"),As=Symbol.for("react.lazy"),ib=Symbol.for("react.offscreen"),lw=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=lw&&t[lw]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,_m;function fl(t){if(_m===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);_m=e&&e[1]||""}return`
`+_m+t}var jm=!1;function Em(t,e){if(!t||jm)return"";jm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=n.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{jm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?fl(t):""}function Sk(t){switch(t.tag){case 5:return fl(t.type);case 16:return fl("Lazy");case 13:return fl("Suspense");case 19:return fl("SuspenseList");case 0:case 2:case 15:return t=Em(t.type,!1),t;case 11:return t=Em(t.type.render,!1),t;case 1:return t=Em(t.type,!0),t;default:return""}}function Tf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Do:return"Fragment";case Po:return"Portal";case Sf:return"Profiler";case ug:return"StrictMode";case kf:return"Suspense";case Cf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sb:return(t.displayName||"Context")+".Consumer";case nb:return(t._context.displayName||"Context")+".Provider";case dg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hg:return e=t.displayName||null,e!==null?e:Tf(t.type)||"Memo";case As:e=t._payload,t=t._init;try{return Tf(t(e))}catch{}}return null}function kk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tf(e);case 8:return e===ug?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ob(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ck(t){var e=ob(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uu(t){t._valueTracker||(t._valueTracker=Ck(t))}function ab(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ob(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function cd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function If(t,e){var r=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cw(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Xs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lb(t,e){e=e.checked,e!=null&&cg(t,"checked",e,!1)}function Af(t,e){lb(t,e);var r=Xs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rf(t,e.type,r):e.hasOwnProperty("defaultValue")&&Rf(t,e.type,Xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uw(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Rf(t,e,r){(e!=="number"||cd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var pl=Array.isArray;function Wo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Xs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dw(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(J(92));if(pl(r)){if(1<r.length)throw Error(J(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Xs(r)}}function cb(t,e){var r=Xs(e.value),n=Xs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function hw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ub(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Df(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ub(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var du,db=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(du=du||document.createElement("div"),du.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=du.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tk=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(t){Tk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),El[e]=El[t]})});function hb(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||El.hasOwnProperty(t)&&El[t]?(""+e).trim():e+"px"}function mb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=hb(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Ik=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mf(t,e){if(e){if(Ik[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Of=null;function mg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vf=null,Go=null,Ko=null;function mw(t){if(t=jc(t)){if(typeof Vf!="function")throw Error(J(280));var e=t.stateNode;e&&(e=gh(e),Vf(t.stateNode,t.type,e))}}function fb(t){Go?Ko?Ko.push(t):Ko=[t]:Go=t}function pb(){if(Go){var t=Go,e=Ko;if(Ko=Go=null,mw(t),e)for(t=0;t<e.length;t++)mw(e[t])}}function gb(t,e){return t(e)}function xb(){}var Sm=!1;function wb(t,e,r){if(Sm)return t(e,r);Sm=!0;try{return gb(t,e,r)}finally{Sm=!1,(Go!==null||Ko!==null)&&(xb(),pb())}}function Gl(t,e){var r=t.stateNode;if(r===null)return null;var n=gh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(J(231,e,typeof r));return r}var Ff=!1;if(cs)try{var el={};Object.defineProperty(el,"passive",{get:function(){Ff=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{Ff=!1}function Ak(t,e,r,n,s,o,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var Sl=!1,ud=null,dd=!1,Uf=null,Rk={onError:function(t){Sl=!0,ud=t}};function Pk(t,e,r,n,s,o,a,l,c){Sl=!1,ud=null,Ak.apply(Rk,arguments)}function Dk(t,e,r,n,s,o,a,l,c){if(Pk.apply(this,arguments),Sl){if(Sl){var d=ud;Sl=!1,ud=null}else throw Error(J(198));dd||(dd=!0,Uf=d)}}function lo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function yb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fw(t){if(lo(t)!==t)throw Error(J(188))}function Mk(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(J(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return fw(s),t;if(o===n)return fw(s),e;o=o.sibling}throw Error(J(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(J(189))}}if(r.alternate!==n)throw Error(J(190))}if(r.tag!==3)throw Error(J(188));return r.stateNode.current===r?t:e}function vb(t){return t=Mk(t),t!==null?bb(t):null}function bb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bb(t);if(e!==null)return e;t=t.sibling}return null}var Nb=Rr.unstable_scheduleCallback,pw=Rr.unstable_cancelCallback,Lk=Rr.unstable_shouldYield,Ok=Rr.unstable_requestPaint,vt=Rr.unstable_now,Vk=Rr.unstable_getCurrentPriorityLevel,fg=Rr.unstable_ImmediatePriority,_b=Rr.unstable_UserBlockingPriority,hd=Rr.unstable_NormalPriority,Fk=Rr.unstable_LowPriority,jb=Rr.unstable_IdlePriority,hh=null,Tn=null;function Uk(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(hh,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:Bk,zk=Math.log,$k=Math.LN2;function Bk(t){return t>>>=0,t===0?32:31-(zk(t)/$k|0)|0}var hu=64,mu=4194304;function gl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function md(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=gl(l):(o&=a,o!==0&&(n=gl(o)))}else a=r&~s,a!==0?n=gl(a):o!==0&&(n=gl(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ln(e),s=1<<r,n|=t[r],e&=~s;return n}function qk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ln(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=qk(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function zf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Eb(){var t=hu;return hu<<=1,!(hu&4194240)&&(hu=64),t}function km(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Nc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=r}function Wk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ln(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function pg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ln(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var qe=0;function Sb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kb,gg,Cb,Tb,Ib,$f=!1,fu=[],Fs=null,Us=null,zs=null,Kl=new Map,Ql=new Map,Ps=[],Gk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gw(t,e){switch(t){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(e.pointerId)}}function tl(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=jc(e),e!==null&&gg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Kk(t,e,r,n,s){switch(e){case"focusin":return Fs=tl(Fs,t,e,r,n,s),!0;case"dragenter":return Us=tl(Us,t,e,r,n,s),!0;case"mouseover":return zs=tl(zs,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return Kl.set(o,tl(Kl.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Ql.set(o,tl(Ql.get(o)||null,t,e,r,n,s)),!0}return!1}function Ab(t){var e=Mi(t.target);if(e!==null){var r=lo(e);if(r!==null){if(e=r.tag,e===13){if(e=yb(r),e!==null){t.blockedOn=e,Ib(t.priority,function(){Cb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Bf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Of=n,r.target.dispatchEvent(n),Of=null}else return e=jc(r),e!==null&&gg(e),t.blockedOn=r,!1;e.shift()}return!0}function xw(t,e,r){Vu(t)&&r.delete(e)}function Qk(){$f=!1,Fs!==null&&Vu(Fs)&&(Fs=null),Us!==null&&Vu(Us)&&(Us=null),zs!==null&&Vu(zs)&&(zs=null),Kl.forEach(xw),Ql.forEach(xw)}function rl(t,e){t.blockedOn===e&&(t.blockedOn=null,$f||($f=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,Qk)))}function Yl(t){function e(s){return rl(s,t)}if(0<fu.length){rl(fu[0],t);for(var r=1;r<fu.length;r++){var n=fu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Fs!==null&&rl(Fs,t),Us!==null&&rl(Us,t),zs!==null&&rl(zs,t),Kl.forEach(e),Ql.forEach(e),r=0;r<Ps.length;r++)n=Ps[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ps.length&&(r=Ps[0],r.blockedOn===null);)Ab(r),r.blockedOn===null&&Ps.shift()}var Qo=ws.ReactCurrentBatchConfig,fd=!0;function Yk(t,e,r,n){var s=qe,o=Qo.transition;Qo.transition=null;try{qe=1,xg(t,e,r,n)}finally{qe=s,Qo.transition=o}}function Xk(t,e,r,n){var s=qe,o=Qo.transition;Qo.transition=null;try{qe=4,xg(t,e,r,n)}finally{qe=s,Qo.transition=o}}function xg(t,e,r,n){if(fd){var s=Bf(t,e,r,n);if(s===null)Om(t,e,n,pd,r),gw(t,n);else if(Kk(s,t,e,r,n))n.stopPropagation();else if(gw(t,n),e&4&&-1<Gk.indexOf(t)){for(;s!==null;){var o=jc(s);if(o!==null&&kb(o),o=Bf(t,e,r,n),o===null&&Om(t,e,n,pd,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Om(t,e,n,null,r)}}var pd=null;function Bf(t,e,r,n){if(pd=null,t=mg(n),t=Mi(t),t!==null)if(e=lo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=yb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pd=t,null}function Rb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vk()){case fg:return 1;case _b:return 4;case hd:case Fk:return 16;case jb:return 536870912;default:return 16}default:return 16}}var Ls=null,wg=null,Fu=null;function Pb(){if(Fu)return Fu;var t,e=wg,r=e.length,n,s="value"in Ls?Ls.value:Ls.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[o-n];n++);return Fu=s.slice(t,1<n?1-n:void 0)}function Uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pu(){return!0}function ww(){return!1}function Dr(t){function e(r,n,s,o,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pu:ww,this.isPropagationStopped=ww,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pu)},persist:function(){},isPersistent:pu}),e}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yg=Dr(ja),_c=lt({},ja,{view:0,detail:0}),Jk=Dr(_c),Cm,Tm,nl,mh=lt({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nl&&(nl&&t.type==="mousemove"?(Cm=t.screenX-nl.screenX,Tm=t.screenY-nl.screenY):Tm=Cm=0,nl=t),Cm)},movementY:function(t){return"movementY"in t?t.movementY:Tm}}),yw=Dr(mh),Zk=lt({},mh,{dataTransfer:0}),eC=Dr(Zk),tC=lt({},_c,{relatedTarget:0}),Im=Dr(tC),rC=lt({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),nC=Dr(rC),sC=lt({},ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iC=Dr(sC),oC=lt({},ja,{data:0}),vw=Dr(oC),aC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cC[t])?!!e[t]:!1}function vg(){return uC}var dC=lt({},_c,{key:function(t){if(t.key){var e=aC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vg,charCode:function(t){return t.type==="keypress"?Uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hC=Dr(dC),mC=lt({},mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bw=Dr(mC),fC=lt({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vg}),pC=Dr(fC),gC=lt({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),xC=Dr(gC),wC=lt({},mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yC=Dr(wC),vC=[9,13,27,32],bg=cs&&"CompositionEvent"in window,kl=null;cs&&"documentMode"in document&&(kl=document.documentMode);var bC=cs&&"TextEvent"in window&&!kl,Db=cs&&(!bg||kl&&8<kl&&11>=kl),Nw=" ",_w=!1;function Mb(t,e){switch(t){case"keyup":return vC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function NC(t,e){switch(t){case"compositionend":return Lb(e);case"keypress":return e.which!==32?null:(_w=!0,Nw);case"textInput":return t=e.data,t===Nw&&_w?null:t;default:return null}}function _C(t,e){if(Mo)return t==="compositionend"||!bg&&Mb(t,e)?(t=Pb(),Fu=wg=Ls=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Db&&e.locale!=="ko"?null:e.data;default:return null}}var jC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jC[t.type]:e==="textarea"}function Ob(t,e,r,n){fb(n),e=gd(e,"onChange"),0<e.length&&(r=new yg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Cl=null,Xl=null;function EC(t){Kb(t,0)}function fh(t){var e=Vo(t);if(ab(e))return t}function SC(t,e){if(t==="change")return e}var Vb=!1;if(cs){var Am;if(cs){var Rm="oninput"in document;if(!Rm){var Ew=document.createElement("div");Ew.setAttribute("oninput","return;"),Rm=typeof Ew.oninput=="function"}Am=Rm}else Am=!1;Vb=Am&&(!document.documentMode||9<document.documentMode)}function Sw(){Cl&&(Cl.detachEvent("onpropertychange",Fb),Xl=Cl=null)}function Fb(t){if(t.propertyName==="value"&&fh(Xl)){var e=[];Ob(e,Xl,t,mg(t)),wb(EC,e)}}function kC(t,e,r){t==="focusin"?(Sw(),Cl=e,Xl=r,Cl.attachEvent("onpropertychange",Fb)):t==="focusout"&&Sw()}function CC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fh(Xl)}function TC(t,e){if(t==="click")return fh(e)}function IC(t,e){if(t==="input"||t==="change")return fh(e)}function AC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:AC;function Jl(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ef.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function kw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cw(t,e){var r=kw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=kw(r)}}function Ub(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ub(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zb(){for(var t=window,e=cd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=cd(t.document)}return e}function Ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RC(t){var e=zb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Ub(r.ownerDocument.documentElement,r)){if(n!==null&&Ng(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Cw(r,o);var a=Cw(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PC=cs&&"documentMode"in document&&11>=document.documentMode,Lo=null,qf=null,Tl=null,Hf=!1;function Tw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hf||Lo==null||Lo!==cd(n)||(n=Lo,"selectionStart"in n&&Ng(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Tl&&Jl(Tl,n)||(Tl=n,n=gd(qf,"onSelect"),0<n.length&&(e=new yg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Lo)))}function gu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Oo={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},Pm={},$b={};cs&&($b=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function ph(t){if(Pm[t])return Pm[t];if(!Oo[t])return t;var e=Oo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in $b)return Pm[t]=e[r];return t}var Bb=ph("animationend"),qb=ph("animationiteration"),Hb=ph("animationstart"),Wb=ph("transitionend"),Gb=new Map,Iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(t,e){Gb.set(t,e),ao(e,[t])}for(var Dm=0;Dm<Iw.length;Dm++){var Mm=Iw[Dm],DC=Mm.toLowerCase(),MC=Mm[0].toUpperCase()+Mm.slice(1);ci(DC,"on"+MC)}ci(Bb,"onAnimationEnd");ci(qb,"onAnimationIteration");ci(Hb,"onAnimationStart");ci("dblclick","onDoubleClick");ci("focusin","onFocus");ci("focusout","onBlur");ci(Wb,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LC=new Set("cancel close invalid load scroll toggle".split(" ").concat(xl));function Aw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Dk(n,e,void 0,t),t.currentTarget=null}function Kb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;Aw(s,l,d),o=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;Aw(s,l,d),o=c}}}if(dd)throw t=Uf,dd=!1,Uf=null,t}function Je(t,e){var r=e[Yf];r===void 0&&(r=e[Yf]=new Set);var n=t+"__bubble";r.has(n)||(Qb(e,t,2,!1),r.add(n))}function Lm(t,e,r){var n=0;e&&(n|=4),Qb(r,t,n,e)}var xu="_reactListening"+Math.random().toString(36).slice(2);function Zl(t){if(!t[xu]){t[xu]=!0,rb.forEach(function(r){r!=="selectionchange"&&(LC.has(r)||Lm(r,!1,t),Lm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xu]||(e[xu]=!0,Lm("selectionchange",!1,e))}}function Qb(t,e,r,n){switch(Rb(e)){case 1:var s=Yk;break;case 4:s=Xk;break;default:s=xg}r=s.bind(null,e,r,t),s=void 0,!Ff||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Om(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Mi(l),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}l=l.parentNode}}n=n.return}wb(function(){var d=o,h=mg(r),f=[];e:{var m=Gb.get(t);if(m!==void 0){var y=yg,N=t;switch(t){case"keypress":if(Uu(r)===0)break e;case"keydown":case"keyup":y=hC;break;case"focusin":N="focus",y=Im;break;case"focusout":N="blur",y=Im;break;case"beforeblur":case"afterblur":y=Im;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=eC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=pC;break;case Bb:case qb:case Hb:y=nC;break;case Wb:y=xC;break;case"scroll":y=Jk;break;case"wheel":y=yC;break;case"copy":case"cut":case"paste":y=iC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=bw}var E=(e&4)!==0,k=!E&&t==="scroll",v=E?m!==null?m+"Capture":null:m;E=[];for(var g=d,x;g!==null;){x=g;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,v!==null&&(b=Gl(g,v),b!=null&&E.push(ec(g,b,x)))),k)break;g=g.return}0<E.length&&(m=new y(m,N,null,r,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&r!==Of&&(N=r.relatedTarget||r.fromElement)&&(Mi(N)||N[us]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(N=r.relatedTarget||r.toElement,y=d,N=N?Mi(N):null,N!==null&&(k=lo(N),N!==k||N.tag!==5&&N.tag!==6)&&(N=null)):(y=null,N=d),y!==N)){if(E=yw,b="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(E=bw,b="onPointerLeave",v="onPointerEnter",g="pointer"),k=y==null?m:Vo(y),x=N==null?m:Vo(N),m=new E(b,g+"leave",y,r,h),m.target=k,m.relatedTarget=x,b=null,Mi(h)===d&&(E=new E(v,g+"enter",N,r,h),E.target=x,E.relatedTarget=k,b=E),k=b,y&&N)t:{for(E=y,v=N,g=0,x=E;x;x=ko(x))g++;for(x=0,b=v;b;b=ko(b))x++;for(;0<g-x;)E=ko(E),g--;for(;0<x-g;)v=ko(v),x--;for(;g--;){if(E===v||v!==null&&E===v.alternate)break t;E=ko(E),v=ko(v)}E=null}else E=null;y!==null&&Rw(f,m,y,E,!1),N!==null&&k!==null&&Rw(f,k,N,E,!0)}}e:{if(m=d?Vo(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var T=SC;else if(jw(m))if(Vb)T=IC;else{T=CC;var M=kC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=TC);if(T&&(T=T(t,d))){Ob(f,T,r,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Rf(m,"number",m.value)}switch(M=d?Vo(d):window,t){case"focusin":(jw(M)||M.contentEditable==="true")&&(Lo=M,qf=d,Tl=null);break;case"focusout":Tl=qf=Lo=null;break;case"mousedown":Hf=!0;break;case"contextmenu":case"mouseup":case"dragend":Hf=!1,Tw(f,r,h);break;case"selectionchange":if(PC)break;case"keydown":case"keyup":Tw(f,r,h)}var I;if(bg)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Mo?Mb(t,r)&&(j="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(Db&&r.locale!=="ko"&&(Mo||j!=="onCompositionStart"?j==="onCompositionEnd"&&Mo&&(I=Pb()):(Ls=h,wg="value"in Ls?Ls.value:Ls.textContent,Mo=!0)),M=gd(d,j),0<M.length&&(j=new vw(j,t,null,r,h),f.push({event:j,listeners:M}),I?j.data=I:(I=Lb(r),I!==null&&(j.data=I)))),(I=bC?NC(t,r):_C(t,r))&&(d=gd(d,"onBeforeInput"),0<d.length&&(h=new vw("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=I))}Kb(f,e)})}function ec(t,e,r){return{instance:t,listener:e,currentTarget:r}}function gd(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Gl(t,r),o!=null&&n.unshift(ec(t,o,s)),o=Gl(t,e),o!=null&&n.push(ec(t,o,s))),t=t.return}return n}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rw(t,e,r,n,s){for(var o=e._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Gl(r,o),c!=null&&a.unshift(ec(r,c,l))):s||(c=Gl(r,o),c!=null&&a.push(ec(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var OC=/\r\n?/g,VC=/\u0000|\uFFFD/g;function Pw(t){return(typeof t=="string"?t:""+t).replace(OC,`
`).replace(VC,"")}function wu(t,e,r){if(e=Pw(e),Pw(t)!==e&&r)throw Error(J(425))}function xd(){}var Wf=null,Gf=null;function Kf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qf=typeof setTimeout=="function"?setTimeout:void 0,FC=typeof clearTimeout=="function"?clearTimeout:void 0,Dw=typeof Promise=="function"?Promise:void 0,UC=typeof queueMicrotask=="function"?queueMicrotask:typeof Dw<"u"?function(t){return Dw.resolve(null).then(t).catch(zC)}:Qf;function zC(t){setTimeout(function(){throw t})}function Vm(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Yl(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Yl(e)}function $s(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ea=Math.random().toString(36).slice(2),En="__reactFiber$"+Ea,tc="__reactProps$"+Ea,us="__reactContainer$"+Ea,Yf="__reactEvents$"+Ea,$C="__reactListeners$"+Ea,BC="__reactHandles$"+Ea;function Mi(t){var e=t[En];if(e)return e;for(var r=t.parentNode;r;){if(e=r[us]||r[En]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Mw(t);t!==null;){if(r=t[En])return r;t=Mw(t)}return e}t=r,r=t.parentNode}return null}function jc(t){return t=t[En]||t[us],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function gh(t){return t[tc]||null}var Xf=[],Fo=-1;function ui(t){return{current:t}}function et(t){0>Fo||(t.current=Xf[Fo],Xf[Fo]=null,Fo--)}function Qe(t,e){Fo++,Xf[Fo]=t.current,t.current=e}var Js={},Zt=ui(Js),wr=ui(!1),Gi=Js;function oa(t,e){var r=t.type.contextTypes;if(!r)return Js;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yr(t){return t=t.childContextTypes,t!=null}function wd(){et(wr),et(Zt)}function Lw(t,e,r){if(Zt.current!==Js)throw Error(J(168));Qe(Zt,e),Qe(wr,r)}function Yb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(J(108,kk(t)||"Unknown",s));return lt({},r,n)}function yd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Js,Gi=Zt.current,Qe(Zt,t),Qe(wr,wr.current),!0}function Ow(t,e,r){var n=t.stateNode;if(!n)throw Error(J(169));r?(t=Yb(t,e,Gi),n.__reactInternalMemoizedMergedChildContext=t,et(wr),et(Zt),Qe(Zt,t)):et(wr),Qe(wr,r)}var Gn=null,xh=!1,Fm=!1;function Xb(t){Gn===null?Gn=[t]:Gn.push(t)}function qC(t){xh=!0,Xb(t)}function di(){if(!Fm&&Gn!==null){Fm=!0;var t=0,e=qe;try{var r=Gn;for(qe=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Gn=null,xh=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(t+1)),Nb(fg,di),s}finally{qe=e,Fm=!1}}return null}var Uo=[],zo=0,vd=null,bd=0,Lr=[],Or=0,Ki=null,Jn=1,Zn="";function Ai(t,e){Uo[zo++]=bd,Uo[zo++]=vd,vd=t,bd=e}function Jb(t,e,r){Lr[Or++]=Jn,Lr[Or++]=Zn,Lr[Or++]=Ki,Ki=t;var n=Jn;t=Zn;var s=32-ln(n)-1;n&=~(1<<s),r+=1;var o=32-ln(e)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Jn=1<<32-ln(e)+s|r<<s|n,Zn=o+t}else Jn=1<<o|r<<s|n,Zn=t}function _g(t){t.return!==null&&(Ai(t,1),Jb(t,1,0))}function jg(t){for(;t===vd;)vd=Uo[--zo],Uo[zo]=null,bd=Uo[--zo],Uo[zo]=null;for(;t===Ki;)Ki=Lr[--Or],Lr[Or]=null,Zn=Lr[--Or],Lr[Or]=null,Jn=Lr[--Or],Lr[Or]=null}var Cr=null,Sr=null,rt=!1,tn=null;function Zb(t,e){var r=Fr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Vw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cr=t,Sr=$s(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cr=t,Sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ki!==null?{id:Jn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Cr=t,Sr=null,!0):!1;default:return!1}}function Jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zf(t){if(rt){var e=Sr;if(e){var r=e;if(!Vw(t,e)){if(Jf(t))throw Error(J(418));e=$s(r.nextSibling);var n=Cr;e&&Vw(t,e)?Zb(n,r):(t.flags=t.flags&-4097|2,rt=!1,Cr=t)}}else{if(Jf(t))throw Error(J(418));t.flags=t.flags&-4097|2,rt=!1,Cr=t}}}function Fw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cr=t}function yu(t){if(t!==Cr)return!1;if(!rt)return Fw(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kf(t.type,t.memoizedProps)),e&&(e=Sr)){if(Jf(t))throw e2(),Error(J(418));for(;e;)Zb(t,e),e=$s(e.nextSibling)}if(Fw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Sr=$s(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Sr=null}}else Sr=Cr?$s(t.stateNode.nextSibling):null;return!0}function e2(){for(var t=Sr;t;)t=$s(t.nextSibling)}function aa(){Sr=Cr=null,rt=!1}function Eg(t){tn===null?tn=[t]:tn.push(t)}var HC=ws.ReactCurrentBatchConfig;function sl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(J(309));var n=r.stateNode}if(!n)throw Error(J(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!r._owner)throw Error(J(290,t))}return t}function vu(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uw(t){var e=t._init;return e(t._payload)}function t2(t){function e(v,g){if(t){var x=v.deletions;x===null?(v.deletions=[g],v.flags|=16):x.push(g)}}function r(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=Ws(v,g),v.index=0,v.sibling=null,v}function o(v,g,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<g?(v.flags|=2,g):x):(v.flags|=2,g)):(v.flags|=1048576,g)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,g,x,b){return g===null||g.tag!==6?(g=Wm(x,v.mode,b),g.return=v,g):(g=s(g,x),g.return=v,g)}function c(v,g,x,b){var T=x.type;return T===Do?h(v,g,x.props.children,b,x.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===As&&Uw(T)===g.type)?(b=s(g,x.props),b.ref=sl(v,g,x),b.return=v,b):(b=Gu(x.type,x.key,x.props,null,v.mode,b),b.ref=sl(v,g,x),b.return=v,b)}function d(v,g,x,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Gm(x,v.mode,b),g.return=v,g):(g=s(g,x.children||[]),g.return=v,g)}function h(v,g,x,b,T){return g===null||g.tag!==7?(g=$i(x,v.mode,b,T),g.return=v,g):(g=s(g,x),g.return=v,g)}function f(v,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Wm(""+g,v.mode,x),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cu:return x=Gu(g.type,g.key,g.props,null,v.mode,x),x.ref=sl(v,null,g),x.return=v,x;case Po:return g=Gm(g,v.mode,x),g.return=v,g;case As:var b=g._init;return f(v,b(g._payload),x)}if(pl(g)||Za(g))return g=$i(g,v.mode,x,null),g.return=v,g;vu(v,g)}return null}function m(v,g,x,b){var T=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:l(v,g,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cu:return x.key===T?c(v,g,x,b):null;case Po:return x.key===T?d(v,g,x,b):null;case As:return T=x._init,m(v,g,T(x._payload),b)}if(pl(x)||Za(x))return T!==null?null:h(v,g,x,b,null);vu(v,x)}return null}function y(v,g,x,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(x)||null,l(g,v,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cu:return v=v.get(b.key===null?x:b.key)||null,c(g,v,b,T);case Po:return v=v.get(b.key===null?x:b.key)||null,d(g,v,b,T);case As:var M=b._init;return y(v,g,x,M(b._payload),T)}if(pl(b)||Za(b))return v=v.get(x)||null,h(g,v,b,T,null);vu(g,b)}return null}function N(v,g,x,b){for(var T=null,M=null,I=g,j=g=0,A=null;I!==null&&j<x.length;j++){I.index>j?(A=I,I=null):A=I.sibling;var C=m(v,I,x[j],b);if(C===null){I===null&&(I=A);break}t&&I&&C.alternate===null&&e(v,I),g=o(C,g,j),M===null?T=C:M.sibling=C,M=C,I=A}if(j===x.length)return r(v,I),rt&&Ai(v,j),T;if(I===null){for(;j<x.length;j++)I=f(v,x[j],b),I!==null&&(g=o(I,g,j),M===null?T=I:M.sibling=I,M=I);return rt&&Ai(v,j),T}for(I=n(v,I);j<x.length;j++)A=y(I,v,j,x[j],b),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?j:A.key),g=o(A,g,j),M===null?T=A:M.sibling=A,M=A);return t&&I.forEach(function(S){return e(v,S)}),rt&&Ai(v,j),T}function E(v,g,x,b){var T=Za(x);if(typeof T!="function")throw Error(J(150));if(x=T.call(x),x==null)throw Error(J(151));for(var M=T=null,I=g,j=g=0,A=null,C=x.next();I!==null&&!C.done;j++,C=x.next()){I.index>j?(A=I,I=null):A=I.sibling;var S=m(v,I,C.value,b);if(S===null){I===null&&(I=A);break}t&&I&&S.alternate===null&&e(v,I),g=o(S,g,j),M===null?T=S:M.sibling=S,M=S,I=A}if(C.done)return r(v,I),rt&&Ai(v,j),T;if(I===null){for(;!C.done;j++,C=x.next())C=f(v,C.value,b),C!==null&&(g=o(C,g,j),M===null?T=C:M.sibling=C,M=C);return rt&&Ai(v,j),T}for(I=n(v,I);!C.done;j++,C=x.next())C=y(I,v,j,C.value,b),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?j:C.key),g=o(C,g,j),M===null?T=C:M.sibling=C,M=C);return t&&I.forEach(function(D){return e(v,D)}),rt&&Ai(v,j),T}function k(v,g,x,b){if(typeof x=="object"&&x!==null&&x.type===Do&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case cu:e:{for(var T=x.key,M=g;M!==null;){if(M.key===T){if(T=x.type,T===Do){if(M.tag===7){r(v,M.sibling),g=s(M,x.props.children),g.return=v,v=g;break e}}else if(M.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===As&&Uw(T)===M.type){r(v,M.sibling),g=s(M,x.props),g.ref=sl(v,M,x),g.return=v,v=g;break e}r(v,M);break}else e(v,M);M=M.sibling}x.type===Do?(g=$i(x.props.children,v.mode,b,x.key),g.return=v,v=g):(b=Gu(x.type,x.key,x.props,null,v.mode,b),b.ref=sl(v,g,x),b.return=v,v=b)}return a(v);case Po:e:{for(M=x.key;g!==null;){if(g.key===M)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){r(v,g.sibling),g=s(g,x.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else e(v,g);g=g.sibling}g=Gm(x,v.mode,b),g.return=v,v=g}return a(v);case As:return M=x._init,k(v,g,M(x._payload),b)}if(pl(x))return N(v,g,x,b);if(Za(x))return E(v,g,x,b);vu(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(r(v,g.sibling),g=s(g,x),g.return=v,v=g):(r(v,g),g=Wm(x,v.mode,b),g.return=v,v=g),a(v)):r(v,g)}return k}var la=t2(!0),r2=t2(!1),Nd=ui(null),_d=null,$o=null,Sg=null;function kg(){Sg=$o=_d=null}function Cg(t){var e=Nd.current;et(Nd),t._currentValue=e}function ep(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yo(t,e){_d=t,Sg=$o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gr=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(Sg!==t)if(t={context:t,memoizedValue:e,next:null},$o===null){if(_d===null)throw Error(J(308));$o=t,_d.dependencies={lanes:0,firstContext:t}}else $o=$o.next=t;return e}var Li=null;function Tg(t){Li===null?Li=[t]:Li.push(t)}function n2(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Tg(e)):(r.next=s.next,s.next=r),e.interleaved=r,ds(t,n)}function ds(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Rs=!1;function Ig(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ns(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ds(t,r)}return s=n.interleaved,s===null?(e.next=e,Tg(n)):(e.next=s.next,s.next=e),n.interleaved=e,ds(t,r)}function zu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,pg(t,r)}}function zw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function jd(t,e,r,n){var s=t.updateQueue;Rs=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,h=d=c=null,l=o;do{var m=l.lane,y=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,E=l;switch(m=e,y=r,E.tag){case 1:if(N=E.payload,typeof N=="function"){f=N.call(y,f,m);break e}f=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=E.payload,m=typeof N=="function"?N.call(y,f,m):N,m==null)break e;f=lt({},f,m);break e;case 2:Rs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Yi|=a,t.lanes=a,t.memoizedState=f}}function $w(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(J(191,s));s.call(n)}}}var Ec={},In=ui(Ec),rc=ui(Ec),nc=ui(Ec);function Oi(t){if(t===Ec)throw Error(J(174));return t}function Ag(t,e){switch(Qe(nc,e),Qe(rc,t),Qe(In,Ec),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Df(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Df(e,t)}et(In),Qe(In,e)}function ca(){et(In),et(rc),et(nc)}function i2(t){Oi(nc.current);var e=Oi(In.current),r=Df(e,t.type);e!==r&&(Qe(rc,t),Qe(In,r))}function Rg(t){rc.current===t&&(et(In),et(rc))}var it=ui(0);function Ed(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Um=[];function Pg(){for(var t=0;t<Um.length;t++)Um[t]._workInProgressVersionPrimary=null;Um.length=0}var $u=ws.ReactCurrentDispatcher,zm=ws.ReactCurrentBatchConfig,Qi=0,at=null,Ct=null,Dt=null,Sd=!1,Il=!1,sc=0,WC=0;function Wt(){throw Error(J(321))}function Dg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!hn(t[r],e[r]))return!1;return!0}function Mg(t,e,r,n,s,o){if(Qi=o,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?YC:XC,t=r(n,s),Il){o=0;do{if(Il=!1,sc=0,25<=o)throw Error(J(301));o+=1,Dt=Ct=null,e.updateQueue=null,$u.current=JC,t=r(n,s)}while(Il)}if($u.current=kd,e=Ct!==null&&Ct.next!==null,Qi=0,Dt=Ct=at=null,Sd=!1,e)throw Error(J(300));return t}function Lg(){var t=sc!==0;return sc=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?at.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Br(){if(Ct===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Dt===null?at.memoizedState:Dt.next;if(e!==null)Dt=e,Ct=t;else{if(t===null)throw Error(J(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Dt===null?at.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function ic(t,e){return typeof e=="function"?e(t):e}function $m(t){var e=Br(),r=e.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=t;var n=Ct,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=a=null,c=null,d=o;do{var h=d.lane;if((Qi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,at.lanes|=h,Yi|=h}d=d.next}while(d!==null&&d!==o);c===null?a=n:c.next=l,hn(n,e.memoizedState)||(gr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,at.lanes|=o,Yi|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Bm(t){var e=Br(),r=e.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);hn(o,e.memoizedState)||(gr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function o2(){}function a2(t,e){var r=at,n=Br(),s=e(),o=!hn(n.memoizedState,s);if(o&&(n.memoizedState=s,gr=!0),n=n.queue,Og(u2.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Dt!==null&&Dt.memoizedState.tag&1){if(r.flags|=2048,oc(9,c2.bind(null,r,n,s,e),void 0,null),Mt===null)throw Error(J(349));Qi&30||l2(r,e,s)}return s}function l2(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function c2(t,e,r,n){e.value=r,e.getSnapshot=n,d2(e)&&h2(t)}function u2(t,e,r){return r(function(){d2(e)&&h2(t)})}function d2(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hn(t,r)}catch{return!0}}function h2(t){var e=ds(t,1);e!==null&&cn(e,t,1,-1)}function Bw(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:t},e.queue=t,t=t.dispatch=QC.bind(null,at,t),[e.memoizedState,t]}function oc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function m2(){return Br().memoizedState}function Bu(t,e,r,n){var s=Nn();at.flags|=t,s.memoizedState=oc(1|e,r,void 0,n===void 0?null:n)}function wh(t,e,r,n){var s=Br();n=n===void 0?null:n;var o=void 0;if(Ct!==null){var a=Ct.memoizedState;if(o=a.destroy,n!==null&&Dg(n,a.deps)){s.memoizedState=oc(e,r,o,n);return}}at.flags|=t,s.memoizedState=oc(1|e,r,o,n)}function qw(t,e){return Bu(8390656,8,t,e)}function Og(t,e){return wh(2048,8,t,e)}function f2(t,e){return wh(4,2,t,e)}function p2(t,e){return wh(4,4,t,e)}function g2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x2(t,e,r){return r=r!=null?r.concat([t]):null,wh(4,4,g2.bind(null,e,t),r)}function Vg(){}function w2(t,e){var r=Br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Dg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function y2(t,e){var r=Br();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Dg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function v2(t,e,r){return Qi&21?(hn(r,e)||(r=Eb(),at.lanes|=r,Yi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gr=!0),t.memoizedState=r)}function GC(t,e){var r=qe;qe=r!==0&&4>r?r:4,t(!0);var n=zm.transition;zm.transition={};try{t(!1),e()}finally{qe=r,zm.transition=n}}function b2(){return Br().memoizedState}function KC(t,e,r){var n=Hs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},N2(t))_2(e,r);else if(r=n2(t,e,r,n),r!==null){var s=ir();cn(r,t,n,s),j2(r,e,n)}}function QC(t,e,r){var n=Hs(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(N2(t))_2(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,hn(l,a)){var c=e.interleaved;c===null?(s.next=s,Tg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=n2(t,e,s,n),r!==null&&(s=ir(),cn(r,t,n,s),j2(r,e,n))}}function N2(t){var e=t.alternate;return t===at||e!==null&&e===at}function _2(t,e){Il=Sd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function j2(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,pg(t,r)}}var kd={readContext:$r,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},YC={readContext:$r,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:qw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Bu(4194308,4,g2.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bu(4,2,t,e)},useMemo:function(t,e){var r=Nn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Nn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=KC.bind(null,at,t),[n.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:Bw,useDebugValue:Vg,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=Bw(!1),e=t[0];return t=GC.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=at,s=Nn();if(rt){if(r===void 0)throw Error(J(407));r=r()}else{if(r=e(),Mt===null)throw Error(J(349));Qi&30||l2(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,qw(u2.bind(null,n,o,t),[t]),n.flags|=2048,oc(9,c2.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Nn(),e=Mt.identifierPrefix;if(rt){var r=Zn,n=Jn;r=(n&~(1<<32-ln(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=sc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=WC++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XC={readContext:$r,useCallback:w2,useContext:$r,useEffect:Og,useImperativeHandle:x2,useInsertionEffect:f2,useLayoutEffect:p2,useMemo:y2,useReducer:$m,useRef:m2,useState:function(){return $m(ic)},useDebugValue:Vg,useDeferredValue:function(t){var e=Br();return v2(e,Ct.memoizedState,t)},useTransition:function(){var t=$m(ic)[0],e=Br().memoizedState;return[t,e]},useMutableSource:o2,useSyncExternalStore:a2,useId:b2,unstable_isNewReconciler:!1},JC={readContext:$r,useCallback:w2,useContext:$r,useEffect:Og,useImperativeHandle:x2,useInsertionEffect:f2,useLayoutEffect:p2,useMemo:y2,useReducer:Bm,useRef:m2,useState:function(){return Bm(ic)},useDebugValue:Vg,useDeferredValue:function(t){var e=Br();return Ct===null?e.memoizedState=t:v2(e,Ct.memoizedState,t)},useTransition:function(){var t=Bm(ic)[0],e=Br().memoizedState;return[t,e]},useMutableSource:o2,useSyncExternalStore:a2,useId:b2,unstable_isNewReconciler:!1};function Zr(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function tp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:lt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var yh={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ir(),s=Hs(t),o=ns(n,s);o.payload=e,r!=null&&(o.callback=r),e=Bs(t,o,s),e!==null&&(cn(e,t,s,n),zu(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ir(),s=Hs(t),o=ns(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Bs(t,o,s),e!==null&&(cn(e,t,s,n),zu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ir(),n=Hs(t),s=ns(r,n);s.tag=2,e!=null&&(s.callback=e),e=Bs(t,s,n),e!==null&&(cn(e,t,n,r),zu(e,t,n))}};function Hw(t,e,r,n,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!Jl(r,n)||!Jl(s,o):!0}function E2(t,e,r){var n=!1,s=Js,o=e.contextType;return typeof o=="object"&&o!==null?o=$r(o):(s=yr(e)?Gi:Zt.current,n=e.contextTypes,o=(n=n!=null)?oa(t,s):Js),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ww(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&yh.enqueueReplaceState(e,e.state,null)}function rp(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Ig(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=$r(o):(o=yr(e)?Gi:Zt.current,s.context=oa(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(tp(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yh.enqueueReplaceState(s,s.state,null),jd(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ua(t,e){try{var r="",n=e;do r+=Sk(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function qm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function np(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ZC=typeof WeakMap=="function"?WeakMap:Map;function S2(t,e,r){r=ns(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Td||(Td=!0,mp=n),np(t,e)},r}function k2(t,e,r){r=ns(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){np(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){np(t,e),typeof n!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Gw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ZC;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=mT.bind(null,t,e,r),e.then(t,t))}function Kw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qw(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ns(-1,1),e.tag=2,Bs(r,e,1))),r.lanes|=1),t)}var eT=ws.ReactCurrentOwner,gr=!1;function nr(t,e,r,n){e.child=t===null?r2(e,null,r,n):la(e,t.child,r,n)}function Yw(t,e,r,n,s){r=r.render;var o=e.ref;return Yo(e,s),n=Mg(t,e,r,n,o,s),r=Lg(),t!==null&&!gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,hs(t,e,s)):(rt&&r&&_g(e),e.flags|=1,nr(t,e,n,s),e.child)}function Xw(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!Wg(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,C2(t,e,o,n,s)):(t=Gu(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Jl,r(a,n)&&t.ref===e.ref)return hs(t,e,s)}return e.flags|=1,t=Ws(o,n),t.ref=e.ref,t.return=e,e.child=t}function C2(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(Jl(o,n)&&t.ref===e.ref)if(gr=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(gr=!0);else return e.lanes=t.lanes,hs(t,e,s)}return sp(t,e,r,n,s)}function T2(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(qo,Er),Er|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(qo,Er),Er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Qe(qo,Er),Er|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Qe(qo,Er),Er|=n;return nr(t,e,s,r),e.child}function I2(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function sp(t,e,r,n,s){var o=yr(r)?Gi:Zt.current;return o=oa(e,o),Yo(e,s),r=Mg(t,e,r,n,o,s),n=Lg(),t!==null&&!gr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,hs(t,e,s)):(rt&&n&&_g(e),e.flags|=1,nr(t,e,r,s),e.child)}function Jw(t,e,r,n,s){if(yr(r)){var o=!0;yd(e)}else o=!1;if(Yo(e,s),e.stateNode===null)qu(t,e),E2(e,r,n),rp(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=$r(d):(d=yr(r)?Gi:Zt.current,d=oa(e,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ww(e,a,n,d),Rs=!1;var m=e.memoizedState;a.state=m,jd(e,n,a,s),c=e.memoizedState,l!==n||m!==c||wr.current||Rs?(typeof h=="function"&&(tp(e,r,h,n),c=e.memoizedState),(l=Rs||Hw(e,r,l,n,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=d,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,s2(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Zr(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=$r(c):(c=yr(r)?Gi:Zt.current,c=oa(e,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Ww(e,a,n,c),Rs=!1,m=e.memoizedState,a.state=m,jd(e,n,a,s);var N=e.memoizedState;l!==f||m!==N||wr.current||Rs?(typeof y=="function"&&(tp(e,r,y,n),N=e.memoizedState),(d=Rs||Hw(e,r,d,n,m,N,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,N,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=N),a.props=n,a.state=N,a.context=c,n=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return ip(t,e,r,n,o,s)}function ip(t,e,r,n,s,o){I2(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&Ow(e,r,!1),hs(t,e,o);n=e.stateNode,eT.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=la(e,t.child,null,o),e.child=la(e,null,l,o)):nr(t,e,l,o),e.memoizedState=n.state,s&&Ow(e,r,!0),e.child}function A2(t){var e=t.stateNode;e.pendingContext?Lw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lw(t,e.context,!1),Ag(t,e.containerInfo)}function Zw(t,e,r,n,s){return aa(),Eg(s),e.flags|=256,nr(t,e,r,n),e.child}var op={dehydrated:null,treeContext:null,retryLane:0};function ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function R2(t,e,r){var n=e.pendingProps,s=it.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qe(it,s&1),t===null)return Zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Nh(a,n,0,null),t=$i(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ap(r),e.memoizedState=op,t):Fg(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tT(t,e,a,n,l,s,r);if(o){o=n.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ws(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Ws(l,o):(o=$i(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?ap(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=op,n}return o=t.child,t=o.sibling,n=Ws(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Fg(t,e){return e=Nh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bu(t,e,r,n){return n!==null&&Eg(n),la(e,t.child,null,r),t=Fg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tT(t,e,r,n,s,o,a){if(r)return e.flags&256?(e.flags&=-257,n=qm(Error(J(422))),bu(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=Nh({mode:"visible",children:n.children},s,0,null),o=$i(o,s,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&la(e,t.child,null,a),e.child.memoizedState=ap(a),e.memoizedState=op,o);if(!(e.mode&1))return bu(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(J(419)),n=qm(o,n,void 0),bu(t,e,a,n)}if(l=(a&t.childLanes)!==0,gr||l){if(n=Mt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ds(t,s),cn(n,t,s,-1))}return Hg(),n=qm(Error(J(421))),bu(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fT.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Sr=$s(s.nextSibling),Cr=e,rt=!0,tn=null,t!==null&&(Lr[Or++]=Jn,Lr[Or++]=Zn,Lr[Or++]=Ki,Jn=t.id,Zn=t.overflow,Ki=e),e=Fg(e,n.children),e.flags|=4096,e)}function ey(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ep(t.return,e,r)}function Hm(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function P2(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(nr(t,e,n.children,r),n=it.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ey(t,r,e);else if(t.tag===19)ey(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Qe(it,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Ed(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Hm(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ed(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Hm(e,!0,r,null,o);break;case"together":Hm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,r=Ws(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ws(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function rT(t,e,r){switch(e.tag){case 3:A2(e),aa();break;case 5:i2(e);break;case 1:yr(e.type)&&yd(e);break;case 4:Ag(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Qe(Nd,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Qe(it,it.current&1),e.flags|=128,null):r&e.child.childLanes?R2(t,e,r):(Qe(it,it.current&1),t=hs(t,e,r),t!==null?t.sibling:null);Qe(it,it.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return P2(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(it,it.current),n)break;return null;case 22:case 23:return e.lanes=0,T2(t,e,r)}return hs(t,e,r)}var D2,lp,M2,L2;D2=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lp=function(){};M2=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Oi(In.current);var o=null;switch(r){case"input":s=If(t,s),n=If(t,n),o=[];break;case"select":s=lt({},s,{value:void 0}),n=lt({},n,{value:void 0}),o=[];break;case"textarea":s=Pf(t,s),n=Pf(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=xd)}Mf(r,n);var a;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Hl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Hl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Je("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};L2=function(t,e,r,n){r!==n&&(e.flags|=4)};function il(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function nT(t,e,r){var n=e.pendingProps;switch(jg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return yr(e.type)&&wd(),Gt(e),null;case 3:return n=e.stateNode,ca(),et(wr),et(Zt),Pg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(yu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(gp(tn),tn=null))),lp(t,e),Gt(e),null;case 5:Rg(e);var s=Oi(nc.current);if(r=e.type,t!==null&&e.stateNode!=null)M2(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(J(166));return Gt(e),null}if(t=Oi(In.current),yu(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[En]=e,n[tc]=o,t=(e.mode&1)!==0,r){case"dialog":Je("cancel",n),Je("close",n);break;case"iframe":case"object":case"embed":Je("load",n);break;case"video":case"audio":for(s=0;s<xl.length;s++)Je(xl[s],n);break;case"source":Je("error",n);break;case"img":case"image":case"link":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"input":cw(n,o),Je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Je("invalid",n);break;case"textarea":dw(n,o),Je("invalid",n)}Mf(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&wu(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&wu(n.textContent,l,t),s=["children",""+l]):Hl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Je("scroll",n)}switch(r){case"input":uu(n),uw(n,o,!0);break;case"textarea":uu(n),hw(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=xd)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ub(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[En]=e,t[tc]=n,D2(t,e,!1,!1),e.stateNode=t;e:{switch(a=Lf(r,n),r){case"dialog":Je("cancel",t),Je("close",t),s=n;break;case"iframe":case"object":case"embed":Je("load",t),s=n;break;case"video":case"audio":for(s=0;s<xl.length;s++)Je(xl[s],t);s=n;break;case"source":Je("error",t),s=n;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=n;break;case"details":Je("toggle",t),s=n;break;case"input":cw(t,n),s=If(t,n),Je("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=lt({},n,{value:void 0}),Je("invalid",t);break;case"textarea":dw(t,n),s=Pf(t,n),Je("invalid",t);break;default:s=n}Mf(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?mb(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&db(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wl(t,c):typeof c=="number"&&Wl(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Je("scroll",t):c!=null&&cg(t,o,c,a))}switch(r){case"input":uu(t),uw(t,n,!1);break;case"textarea":uu(t),hw(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Xs(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Wo(t,!!n.multiple,o,!1):n.defaultValue!=null&&Wo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)L2(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(J(166));if(r=Oi(nc.current),Oi(In.current),yu(e)){if(n=e.stateNode,r=e.memoizedProps,n[En]=e,(o=n.nodeValue!==r)&&(t=Cr,t!==null))switch(t.tag){case 3:wu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wu(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[En]=e,e.stateNode=n}return Gt(e),null;case 13:if(et(it),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Sr!==null&&e.mode&1&&!(e.flags&128))e2(),aa(),e.flags|=98560,o=!1;else if(o=yu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[En]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),o=!1}else tn!==null&&(gp(tn),tn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?Tt===0&&(Tt=3):Hg())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return ca(),lp(t,e),t===null&&Zl(e.stateNode.containerInfo),Gt(e),null;case 10:return Cg(e.type._context),Gt(e),null;case 17:return yr(e.type)&&wd(),Gt(e),null;case 19:if(et(it),o=e.memoizedState,o===null)return Gt(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)il(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ed(t),a!==null){for(e.flags|=128,il(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Qe(it,it.current&1|2),e.child}t=t.sibling}o.tail!==null&&vt()>da&&(e.flags|=128,n=!0,il(o,!1),e.lanes=4194304)}else{if(!n)if(t=Ed(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),il(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!rt)return Gt(e),null}else 2*vt()-o.renderingStartTime>da&&r!==1073741824&&(e.flags|=128,n=!0,il(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=vt(),e.sibling=null,r=it.current,Qe(it,n?r&1|2:r&1),e):(Gt(e),null);case 22:case 23:return qg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Er&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function sT(t,e){switch(jg(e),e.tag){case 1:return yr(e.type)&&wd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ca(),et(wr),et(Zt),Pg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rg(e),null;case 13:if(et(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(it),null;case 4:return ca(),null;case 10:return Cg(e.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var Nu=!1,Yt=!1,iT=typeof WeakSet=="function"?WeakSet:Set,le=null;function Bo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){mt(t,e,n)}else r.current=null}function cp(t,e,r){try{r()}catch(n){mt(t,e,n)}}var ty=!1;function oT(t,e){if(Wf=fd,t=zb(),Ng(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==o||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===r&&++d===s&&(l=a),m===o&&++h===n&&(c=a),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gf={focusedElem:t,selectionRange:r},fd=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var E=N.memoizedProps,k=N.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:Zr(e.type,E),k);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(b){mt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return N=ty,ty=!1,N}function Al(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&cp(e,r,o)}s=s.next}while(s!==n)}}function vh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function up(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function O2(t){var e=t.alternate;e!==null&&(t.alternate=null,O2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[tc],delete e[Yf],delete e[$C],delete e[BC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V2(t){return t.tag===5||t.tag===3||t.tag===4}function ry(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=xd));else if(n!==4&&(t=t.child,t!==null))for(dp(t,e,r),t=t.sibling;t!==null;)dp(t,e,r),t=t.sibling}function hp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(hp(t,e,r),t=t.sibling;t!==null;)hp(t,e,r),t=t.sibling}var Ot=null,en=!1;function ks(t,e,r){for(r=r.child;r!==null;)F2(t,e,r),r=r.sibling}function F2(t,e,r){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(hh,r)}catch{}switch(r.tag){case 5:Yt||Bo(r,e);case 6:var n=Ot,s=en;Ot=null,ks(t,e,r),Ot=n,en=s,Ot!==null&&(en?(t=Ot,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ot.removeChild(r.stateNode));break;case 18:Ot!==null&&(en?(t=Ot,r=r.stateNode,t.nodeType===8?Vm(t.parentNode,r):t.nodeType===1&&Vm(t,r),Yl(t)):Vm(Ot,r.stateNode));break;case 4:n=Ot,s=en,Ot=r.stateNode.containerInfo,en=!0,ks(t,e,r),Ot=n,en=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&cp(r,e,a),s=s.next}while(s!==n)}ks(t,e,r);break;case 1:if(!Yt&&(Bo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){mt(r,e,l)}ks(t,e,r);break;case 21:ks(t,e,r);break;case 22:r.mode&1?(Yt=(n=Yt)||r.memoizedState!==null,ks(t,e,r),Yt=n):ks(t,e,r);break;default:ks(t,e,r)}}function ny(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new iT),e.forEach(function(n){var s=pT.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Yr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ot=l.stateNode,en=!1;break e;case 3:Ot=l.stateNode.containerInfo,en=!0;break e;case 4:Ot=l.stateNode.containerInfo,en=!0;break e}l=l.return}if(Ot===null)throw Error(J(160));F2(o,a,s),Ot=null,en=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){mt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U2(e,t),e=e.sibling}function U2(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yr(e,t),bn(t),n&4){try{Al(3,t,t.return),vh(3,t)}catch(E){mt(t,t.return,E)}try{Al(5,t,t.return)}catch(E){mt(t,t.return,E)}}break;case 1:Yr(e,t),bn(t),n&512&&r!==null&&Bo(r,r.return);break;case 5:if(Yr(e,t),bn(t),n&512&&r!==null&&Bo(r,r.return),t.flags&32){var s=t.stateNode;try{Wl(s,"")}catch(E){mt(t,t.return,E)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&lb(s,o),Lf(l,a);var d=Lf(l,o);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?mb(s,f):h==="dangerouslySetInnerHTML"?db(s,f):h==="children"?Wl(s,f):cg(s,h,f,d)}switch(l){case"input":Af(s,o);break;case"textarea":cb(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?Wo(s,!!o.multiple,y,!1):m!==!!o.multiple&&(o.defaultValue!=null?Wo(s,!!o.multiple,o.defaultValue,!0):Wo(s,!!o.multiple,o.multiple?[]:"",!1))}s[tc]=o}catch(E){mt(t,t.return,E)}}break;case 6:if(Yr(e,t),bn(t),n&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(E){mt(t,t.return,E)}}break;case 3:if(Yr(e,t),bn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Yl(e.containerInfo)}catch(E){mt(t,t.return,E)}break;case 4:Yr(e,t),bn(t);break;case 13:Yr(e,t),bn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||($g=vt())),n&4&&ny(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Yt=(d=Yt)||h,Yr(e,t),Yt=d):Yr(e,t),bn(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(le=t,h=t.child;h!==null;){for(f=le=h;le!==null;){switch(m=le,y=m.child,m.tag){case 0:case 11:case 14:case 15:Al(4,m,m.return);break;case 1:Bo(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(E){mt(n,r,E)}}break;case 5:Bo(m,m.return);break;case 22:if(m.memoizedState!==null){iy(f);continue}}y!==null?(y.return=m,le=y):iy(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hb("display",a))}catch(E){mt(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(E){mt(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yr(e,t),bn(t),n&4&&ny(t);break;case 21:break;default:Yr(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(V2(r)){var n=r;break e}r=r.return}throw Error(J(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Wl(s,""),n.flags&=-33);var o=ry(t);hp(t,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=ry(t);dp(t,l,a);break;default:throw Error(J(161))}}catch(c){mt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aT(t,e,r){le=t,z2(t)}function z2(t,e,r){for(var n=(t.mode&1)!==0;le!==null;){var s=le,o=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Nu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Yt;l=Nu;var d=Yt;if(Nu=a,(Yt=c)&&!d)for(le=s;le!==null;)a=le,c=a.child,a.tag===22&&a.memoizedState!==null?oy(s):c!==null?(c.return=a,le=c):oy(s);for(;o!==null;)le=o,z2(o),o=o.sibling;le=s,Nu=l,Yt=d}sy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,le=o):sy(t)}}function sy(t){for(;le!==null;){var e=le;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||vh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Yt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Zr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&$w(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}$w(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Yl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Yt||e.flags&512&&up(e)}catch(m){mt(e,e.return,m)}}if(e===t){le=null;break}if(r=e.sibling,r!==null){r.return=e.return,le=r;break}le=e.return}}function iy(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var r=e.sibling;if(r!==null){r.return=e.return,le=r;break}le=e.return}}function oy(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{vh(4,e)}catch(c){mt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){mt(e,s,c)}}var o=e.return;try{up(e)}catch(c){mt(e,o,c)}break;case 5:var a=e.return;try{up(e)}catch(c){mt(e,a,c)}}}catch(c){mt(e,e.return,c)}if(e===t){le=null;break}var l=e.sibling;if(l!==null){l.return=e.return,le=l;break}le=e.return}}var lT=Math.ceil,Cd=ws.ReactCurrentDispatcher,Ug=ws.ReactCurrentOwner,zr=ws.ReactCurrentBatchConfig,Oe=0,Mt=null,Nt=null,zt=0,Er=0,qo=ui(0),Tt=0,ac=null,Yi=0,bh=0,zg=0,Rl=null,mr=null,$g=0,da=1/0,Wn=null,Td=!1,mp=null,qs=null,_u=!1,Os=null,Id=0,Pl=0,fp=null,Hu=-1,Wu=0;function ir(){return Oe&6?vt():Hu!==-1?Hu:Hu=vt()}function Hs(t){return t.mode&1?Oe&2&&zt!==0?zt&-zt:HC.transition!==null?(Wu===0&&(Wu=Eb()),Wu):(t=qe,t!==0||(t=window.event,t=t===void 0?16:Rb(t.type)),t):1}function cn(t,e,r,n){if(50<Pl)throw Pl=0,fp=null,Error(J(185));Nc(t,r,n),(!(Oe&2)||t!==Mt)&&(t===Mt&&(!(Oe&2)&&(bh|=r),Tt===4&&Ds(t,zt)),vr(t,n),r===1&&Oe===0&&!(e.mode&1)&&(da=vt()+500,xh&&di()))}function vr(t,e){var r=t.callbackNode;Hk(t,e);var n=md(t,t===Mt?zt:0);if(n===0)r!==null&&pw(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&pw(r),e===1)t.tag===0?qC(ay.bind(null,t)):Xb(ay.bind(null,t)),UC(function(){!(Oe&6)&&di()}),r=null;else{switch(Sb(n)){case 1:r=fg;break;case 4:r=_b;break;case 16:r=hd;break;case 536870912:r=jb;break;default:r=hd}r=Q2(r,$2.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function $2(t,e){if(Hu=-1,Wu=0,Oe&6)throw Error(J(327));var r=t.callbackNode;if(Xo()&&t.callbackNode!==r)return null;var n=md(t,t===Mt?zt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ad(t,n);else{e=n;var s=Oe;Oe|=2;var o=q2();(Mt!==t||zt!==e)&&(Wn=null,da=vt()+500,zi(t,e));do try{dT();break}catch(l){B2(t,l)}while(!0);kg(),Cd.current=o,Oe=s,Nt!==null?e=0:(Mt=null,zt=0,e=Tt)}if(e!==0){if(e===2&&(s=zf(t),s!==0&&(n=s,e=pp(t,s))),e===1)throw r=ac,zi(t,0),Ds(t,n),vr(t,vt()),r;if(e===6)Ds(t,n);else{if(s=t.current.alternate,!(n&30)&&!cT(s)&&(e=Ad(t,n),e===2&&(o=zf(t),o!==0&&(n=o,e=pp(t,o))),e===1))throw r=ac,zi(t,0),Ds(t,n),vr(t,vt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(J(345));case 2:Ri(t,mr,Wn);break;case 3:if(Ds(t,n),(n&130023424)===n&&(e=$g+500-vt(),10<e)){if(md(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){ir(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qf(Ri.bind(null,t,mr,Wn),e);break}Ri(t,mr,Wn);break;case 4:if(Ds(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-ln(n);o=1<<a,a=e[a],a>s&&(s=a),n&=~o}if(n=s,n=vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*lT(n/1960))-n,10<n){t.timeoutHandle=Qf(Ri.bind(null,t,mr,Wn),n);break}Ri(t,mr,Wn);break;case 5:Ri(t,mr,Wn);break;default:throw Error(J(329))}}}return vr(t,vt()),t.callbackNode===r?$2.bind(null,t):null}function pp(t,e){var r=Rl;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=Ad(t,e),t!==2&&(e=mr,mr=r,e!==null&&gp(e)),t}function gp(t){mr===null?mr=t:mr.push.apply(mr,t)}function cT(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!hn(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ds(t,e){for(e&=~zg,e&=~bh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ln(e),n=1<<r;t[r]=-1,e&=~n}}function ay(t){if(Oe&6)throw Error(J(327));Xo();var e=md(t,0);if(!(e&1))return vr(t,vt()),null;var r=Ad(t,e);if(t.tag!==0&&r===2){var n=zf(t);n!==0&&(e=n,r=pp(t,n))}if(r===1)throw r=ac,zi(t,0),Ds(t,e),vr(t,vt()),r;if(r===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,mr,Wn),vr(t,vt()),null}function Bg(t,e){var r=Oe;Oe|=1;try{return t(e)}finally{Oe=r,Oe===0&&(da=vt()+500,xh&&di())}}function Xi(t){Os!==null&&Os.tag===0&&!(Oe&6)&&Xo();var e=Oe;Oe|=1;var r=zr.transition,n=qe;try{if(zr.transition=null,qe=1,t)return t()}finally{qe=n,zr.transition=r,Oe=e,!(Oe&6)&&di()}}function qg(){Er=qo.current,et(qo)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,FC(r)),Nt!==null)for(r=Nt.return;r!==null;){var n=r;switch(jg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wd();break;case 3:ca(),et(wr),et(Zt),Pg();break;case 5:Rg(n);break;case 4:ca();break;case 13:et(it);break;case 19:et(it);break;case 10:Cg(n.type._context);break;case 22:case 23:qg()}r=r.return}if(Mt=t,Nt=t=Ws(t.current,null),zt=Er=e,Tt=0,ac=null,zg=bh=Yi=0,mr=Rl=null,Li!==null){for(e=0;e<Li.length;e++)if(r=Li[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,n.next=a}r.pending=n}Li=null}return t}function B2(t,e){do{var r=Nt;try{if(kg(),$u.current=kd,Sd){for(var n=at.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Sd=!1}if(Qi=0,Dt=Ct=at=null,Il=!1,sc=0,Ug.current=null,r===null||r.return===null){Tt=1,ac=e,Nt=null;break}e:{var o=t,a=r.return,l=r,c=e;if(e=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Kw(a);if(y!==null){y.flags&=-257,Qw(y,a,l,o,e),y.mode&1&&Gw(o,d,e),e=y,c=d;var N=e.updateQueue;if(N===null){var E=new Set;E.add(c),e.updateQueue=E}else N.add(c);break e}else{if(!(e&1)){Gw(o,d,e),Hg();break e}c=Error(J(426))}}else if(rt&&l.mode&1){var k=Kw(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Qw(k,a,l,o,e),Eg(ua(c,l));break e}}o=c=ua(c,l),Tt!==4&&(Tt=2),Rl===null?Rl=[o]:Rl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=S2(o,c,e);zw(o,v);break e;case 1:l=c;var g=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(qs===null||!qs.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=k2(o,l,e);zw(o,b);break e}}o=o.return}while(o!==null)}W2(r)}catch(T){e=T,Nt===r&&r!==null&&(Nt=r=r.return);continue}break}while(!0)}function q2(){var t=Cd.current;return Cd.current=kd,t===null?kd:t}function Hg(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Mt===null||!(Yi&268435455)&&!(bh&268435455)||Ds(Mt,zt)}function Ad(t,e){var r=Oe;Oe|=2;var n=q2();(Mt!==t||zt!==e)&&(Wn=null,zi(t,e));do try{uT();break}catch(s){B2(t,s)}while(!0);if(kg(),Oe=r,Cd.current=n,Nt!==null)throw Error(J(261));return Mt=null,zt=0,Tt}function uT(){for(;Nt!==null;)H2(Nt)}function dT(){for(;Nt!==null&&!Lk();)H2(Nt)}function H2(t){var e=K2(t.alternate,t,Er);t.memoizedProps=t.pendingProps,e===null?W2(t):Nt=e,Ug.current=null}function W2(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=sT(r,e),r!==null){r.flags&=32767,Nt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,Nt=null;return}}else if(r=nT(r,e,Er),r!==null){Nt=r;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ri(t,e,r){var n=qe,s=zr.transition;try{zr.transition=null,qe=1,hT(t,e,r,n)}finally{zr.transition=s,qe=n}return null}function hT(t,e,r,n){do Xo();while(Os!==null);if(Oe&6)throw Error(J(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(Wk(t,o),t===Mt&&(Nt=Mt=null,zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_u||(_u=!0,Q2(hd,function(){return Xo(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=zr.transition,zr.transition=null;var a=qe;qe=1;var l=Oe;Oe|=4,Ug.current=null,oT(t,r),U2(r,t),RC(Gf),fd=!!Wf,Gf=Wf=null,t.current=r,aT(r),Ok(),Oe=l,qe=a,zr.transition=o}else t.current=r;if(_u&&(_u=!1,Os=t,Id=s),o=t.pendingLanes,o===0&&(qs=null),Uk(r.stateNode),vr(t,vt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Td)throw Td=!1,t=mp,mp=null,t;return Id&1&&t.tag!==0&&Xo(),o=t.pendingLanes,o&1?t===fp?Pl++:(Pl=0,fp=t):Pl=0,di(),null}function Xo(){if(Os!==null){var t=Sb(Id),e=zr.transition,r=qe;try{if(zr.transition=null,qe=16>t?16:t,Os===null)var n=!1;else{if(t=Os,Os=null,Id=0,Oe&6)throw Error(J(331));var s=Oe;for(Oe|=4,le=t.current;le!==null;){var o=le,a=o.child;if(le.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(le=d;le!==null;){var h=le;switch(h.tag){case 0:case 11:case 15:Al(8,h,o)}var f=h.child;if(f!==null)f.return=h,le=f;else for(;le!==null;){h=le;var m=h.sibling,y=h.return;if(O2(h),h===d){le=null;break}if(m!==null){m.return=y,le=m;break}le=y}}}var N=o.alternate;if(N!==null){var E=N.child;if(E!==null){N.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}le=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,le=a;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Al(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,le=v;break e}le=o.return}}var g=t.current;for(le=g;le!==null;){a=le;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,le=x;else e:for(a=g;le!==null;){if(l=le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vh(9,l)}}catch(T){mt(l,l.return,T)}if(l===a){le=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,le=b;break e}le=l.return}}if(Oe=s,di(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(hh,t)}catch{}n=!0}return n}finally{qe=r,zr.transition=e}}return!1}function ly(t,e,r){e=ua(r,e),e=S2(t,e,1),t=Bs(t,e,1),e=ir(),t!==null&&(Nc(t,1,e),vr(t,e))}function mt(t,e,r){if(t.tag===3)ly(t,t,r);else for(;e!==null;){if(e.tag===3){ly(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qs===null||!qs.has(n))){t=ua(r,t),t=k2(e,t,1),e=Bs(e,t,1),t=ir(),e!==null&&(Nc(e,1,t),vr(e,t));break}}e=e.return}}function mT(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ir(),t.pingedLanes|=t.suspendedLanes&r,Mt===t&&(zt&r)===r&&(Tt===4||Tt===3&&(zt&130023424)===zt&&500>vt()-$g?zi(t,0):zg|=r),vr(t,e)}function G2(t,e){e===0&&(t.mode&1?(e=mu,mu<<=1,!(mu&130023424)&&(mu=4194304)):e=1);var r=ir();t=ds(t,e),t!==null&&(Nc(t,e,r),vr(t,r))}function fT(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),G2(t,r)}function pT(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(J(314))}n!==null&&n.delete(e),G2(t,r)}var K2;K2=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||wr.current)gr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return gr=!1,rT(t,e,r);gr=!!(t.flags&131072)}else gr=!1,rt&&e.flags&1048576&&Jb(e,bd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;qu(t,e),t=e.pendingProps;var s=oa(e,Zt.current);Yo(e,r),s=Mg(null,e,n,t,s,r);var o=Lg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yr(n)?(o=!0,yd(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ig(e),s.updater=yh,e.stateNode=s,s._reactInternals=e,rp(e,n,t,r),e=ip(null,e,n,!0,o,r)):(e.tag=0,rt&&o&&_g(e),nr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(qu(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=xT(n),t=Zr(n,t),s){case 0:e=sp(null,e,n,t,r);break e;case 1:e=Jw(null,e,n,t,r);break e;case 11:e=Yw(null,e,n,t,r);break e;case 14:e=Xw(null,e,n,Zr(n.type,t),r);break e}throw Error(J(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),sp(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),Jw(t,e,n,s,r);case 3:e:{if(A2(e),t===null)throw Error(J(387));n=e.pendingProps,o=e.memoizedState,s=o.element,s2(t,e),jd(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ua(Error(J(423)),e),e=Zw(t,e,n,r,s);break e}else if(n!==s){s=ua(Error(J(424)),e),e=Zw(t,e,n,r,s);break e}else for(Sr=$s(e.stateNode.containerInfo.firstChild),Cr=e,rt=!0,tn=null,r=r2(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(aa(),n===s){e=hs(t,e,r);break e}nr(t,e,n,r)}e=e.child}return e;case 5:return i2(e),t===null&&Zf(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,Kf(n,s)?a=null:o!==null&&Kf(n,o)&&(e.flags|=32),I2(t,e),nr(t,e,a,r),e.child;case 6:return t===null&&Zf(e),null;case 13:return R2(t,e,r);case 4:return Ag(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=la(e,null,n,r):nr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),Yw(t,e,n,s,r);case 7:return nr(t,e,e.pendingProps,r),e.child;case 8:return nr(t,e,e.pendingProps.children,r),e.child;case 12:return nr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Qe(Nd,n._currentValue),n._currentValue=a,o!==null)if(hn(o.value,a)){if(o.children===s.children&&!wr.current){e=hs(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=ns(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),ep(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(J(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),ep(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}nr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Yo(e,r),s=$r(s),n=n(s),e.flags|=1,nr(t,e,n,r),e.child;case 14:return n=e.type,s=Zr(n,e.pendingProps),s=Zr(n.type,s),Xw(t,e,n,s,r);case 15:return C2(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Zr(n,s),qu(t,e),e.tag=1,yr(n)?(t=!0,yd(e)):t=!1,Yo(e,r),E2(e,n,s),rp(e,n,s,r),ip(null,e,n,!0,t,r);case 19:return P2(t,e,r);case 22:return T2(t,e,r)}throw Error(J(156,e.tag))};function Q2(t,e){return Nb(t,e)}function gT(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,e,r,n){return new gT(t,e,r,n)}function Wg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xT(t){if(typeof t=="function")return Wg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dg)return 11;if(t===hg)return 14}return 2}function Ws(t,e){var r=t.alternate;return r===null?(r=Fr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Gu(t,e,r,n,s,o){var a=2;if(n=t,typeof t=="function")Wg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Do:return $i(r.children,s,o,e);case ug:a=8,s|=8;break;case Sf:return t=Fr(12,r,e,s|2),t.elementType=Sf,t.lanes=o,t;case kf:return t=Fr(13,r,e,s),t.elementType=kf,t.lanes=o,t;case Cf:return t=Fr(19,r,e,s),t.elementType=Cf,t.lanes=o,t;case ib:return Nh(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nb:a=10;break e;case sb:a=9;break e;case dg:a=11;break e;case hg:a=14;break e;case As:a=16,n=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Fr(a,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function $i(t,e,r,n){return t=Fr(7,t,n,e),t.lanes=r,t}function Nh(t,e,r,n){return t=Fr(22,t,n,e),t.elementType=ib,t.lanes=r,t.stateNode={isHidden:!1},t}function Wm(t,e,r){return t=Fr(6,t,null,e),t.lanes=r,t}function Gm(t,e,r){return e=Fr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wT(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=km(0),this.expirationTimes=km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=km(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gg(t,e,r,n,s,o,a,l,c){return t=new wT(t,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Fr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ig(o),t}function yT(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Po,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Y2(t){if(!t)return Js;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var r=t.type;if(yr(r))return Yb(t,r,e)}return e}function X2(t,e,r,n,s,o,a,l,c){return t=Gg(r,n,!0,t,s,o,a,l,c),t.context=Y2(null),r=t.current,n=ir(),s=Hs(r),o=ns(n,s),o.callback=e??null,Bs(r,o,s),t.current.lanes=s,Nc(t,s,n),vr(t,n),t}function _h(t,e,r,n){var s=e.current,o=ir(),a=Hs(s);return r=Y2(r),e.context===null?e.context=r:e.pendingContext=r,e=ns(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bs(s,e,a),t!==null&&(cn(t,s,a,o),zu(t,s,a)),a}function Rd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Kg(t,e){cy(t,e),(t=t.alternate)&&cy(t,e)}function vT(){return null}var J2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qg(t){this._internalRoot=t}jh.prototype.render=Qg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));_h(t,e,null,null)};jh.prototype.unmount=Qg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xi(function(){_h(null,t,null,null)}),e[us]=null}};function jh(t){this._internalRoot=t}jh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ps.length&&e!==0&&e<Ps[r].priority;r++);Ps.splice(r,0,t),r===0&&Ab(t)}};function Yg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Eh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uy(){}function bT(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var d=Rd(a);o.call(d)}}var a=X2(e,n,t,0,null,!1,!1,"",uy);return t._reactRootContainer=a,t[us]=a.current,Zl(t.nodeType===8?t.parentNode:t),Xi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Rd(c);l.call(d)}}var c=Gg(t,0,!1,null,null,!1,!1,"",uy);return t._reactRootContainer=c,t[us]=c.current,Zl(t.nodeType===8?t.parentNode:t),Xi(function(){_h(e,c,r,n)}),c}function Sh(t,e,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Rd(a);l.call(c)}}_h(e,a,t,s)}else a=bT(r,e,t,s,n);return Rd(a)}kb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=gl(e.pendingLanes);r!==0&&(pg(e,r|1),vr(e,vt()),!(Oe&6)&&(da=vt()+500,di()))}break;case 13:Xi(function(){var n=ds(t,1);if(n!==null){var s=ir();cn(n,t,1,s)}}),Kg(t,1)}};gg=function(t){if(t.tag===13){var e=ds(t,134217728);if(e!==null){var r=ir();cn(e,t,134217728,r)}Kg(t,134217728)}};Cb=function(t){if(t.tag===13){var e=Hs(t),r=ds(t,e);if(r!==null){var n=ir();cn(r,t,e,n)}Kg(t,e)}};Tb=function(){return qe};Ib=function(t,e){var r=qe;try{return qe=t,e()}finally{qe=r}};Vf=function(t,e,r){switch(e){case"input":if(Af(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=gh(n);if(!s)throw Error(J(90));ab(n),Af(n,s)}}}break;case"textarea":cb(t,r);break;case"select":e=r.value,e!=null&&Wo(t,!!r.multiple,e,!1)}};gb=Bg;xb=Xi;var NT={usingClientEntryPoint:!1,Events:[jc,Vo,gh,fb,pb,Bg]},ol={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_T={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vb(t),t===null?null:t.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||vT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{hh=ju.inject(_T),Tn=ju}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NT;Pr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yg(e))throw Error(J(200));return yT(t,e,null,r)};Pr.createRoot=function(t,e){if(!Yg(t))throw Error(J(299));var r=!1,n="",s=J2;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gg(t,1,!1,null,null,r,!1,n,s),t[us]=e.current,Zl(t.nodeType===8?t.parentNode:t),new Qg(e)};Pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=vb(e),t=t===null?null:t.stateNode,t};Pr.flushSync=function(t){return Xi(t)};Pr.hydrate=function(t,e,r){if(!Eh(e))throw Error(J(200));return Sh(null,t,e,!0,r)};Pr.hydrateRoot=function(t,e,r){if(!Yg(t))throw Error(J(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",a=J2;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=X2(e,null,t,1,r??null,s,!1,o,a),t[us]=e.current,Zl(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new jh(e)};Pr.render=function(t,e,r){if(!Eh(e))throw Error(J(200));return Sh(null,t,e,!1,r)};Pr.unmountComponentAtNode=function(t){if(!Eh(t))throw Error(J(40));return t._reactRootContainer?(Xi(function(){Sh(null,null,t,!1,function(){t._reactRootContainer=null,t[us]=null})}),!0):!1};Pr.unstable_batchedUpdates=Bg;Pr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Eh(r))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Sh(t,e,r,!1,n)};Pr.version="18.3.1-next-f1338f8080-20240426";function Z2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z2)}catch(t){console.error(t)}}Z2(),Z1.exports=Pr;var jT=Z1.exports,eN,dy=jT;eN=dy.createRoot,dy.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hy="popstate";function ET(t={}){function e(n,s){let{pathname:o,search:a,hash:l}=n.location;return xp("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:lc(s)}return kT(e,r,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ST(){return Math.random().toString(36).substring(2,10)}function my(t,e){return{usr:t.state,key:t.key,idx:e}}function xp(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Sa(e):e,state:r,key:e&&e.key||n||ST()}}function lc({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Sa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function kT(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,a=s.history,l="POP",c=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function f(){l="POP";let k=h(),v=k==null?null:k-d;d=k,c&&c({action:l,location:E.location,delta:v})}function m(k,v){l="PUSH";let g=xp(E.location,k,v);d=h()+1;let x=my(g,d),b=E.createHref(g);try{a.pushState(x,"",b)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(b)}o&&c&&c({action:l,location:E.location,delta:1})}function y(k,v){l="REPLACE";let g=xp(E.location,k,v);d=h();let x=my(g,d),b=E.createHref(g);a.replaceState(x,"",b),o&&c&&c({action:l,location:E.location,delta:0})}function N(k){return CT(k)}let E={get action(){return l},get location(){return t(s,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(hy,f),c=k,()=>{s.removeEventListener(hy,f),c=null}},createHref(k){return e(s,k)},createURL:N,encodeLocation(k){let v=N(k);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(k){return a.go(k)}};return E}function CT(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),nt(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:lc(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function tN(t,e,r="/"){return TT(t,e,r,!1)}function TT(t,e,r,n){let s=typeof e=="string"?Sa(e):e,o=ms(s.pathname||"/",r);if(o==null)return null;let a=rN(t);IT(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=zT(o);l=FT(a[c],d,n)}return l}function rN(t,e=[],r=[],n="",s=!1){let o=(a,l,c=s,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;nt(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let f=ss([n,h.relativePath]),m=r.concat(h);a.children&&a.children.length>0&&(nt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),rN(a.children,e,m,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:OT(f,a.index),routesMeta:m})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))o(a,l);else for(let d of nN(a.path))o(a,l,!0,d)}),e}function nN(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let a=nN(n.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function IT(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:VT(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var AT=/^:[\w-]+$/,RT=3,PT=2,DT=1,MT=10,LT=-2,fy=t=>t==="*";function OT(t,e){let r=t.split("/"),n=r.length;return r.some(fy)&&(n+=LT),e&&(n+=PT),r.filter(s=>!fy(s)).reduce((s,o)=>s+(AT.test(o)?RT:o===""?DT:MT),n)}function VT(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function FT(t,e,r=!1){let{routesMeta:n}=t,s={},o="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=o==="/"?e:e.slice(o.length)||"/",f=Pd({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=Pd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:ss([o,f.pathname]),pathnameBase:HT(ss([o,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(o=ss([o,f.pathnameBase]))}return a}function Pd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=UT(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:f},m)=>{if(h==="*"){let N=l[m]||"";a=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const y=l[m];return f&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function UT(t,e=!1,r=!0){mn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function zT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ms(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function $T(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Sa(t):t;return{pathname:r?r.startsWith("/")?r:BT(r,e):e,search:WT(n),hash:GT(s)}}function BT(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Km(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qT(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Xg(t){let e=qT(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function Jg(t,e,r,n=!1){let s;typeof t=="string"?s=Sa(t):(s={...t},nt(!s.pathname||!s.pathname.includes("?"),Km("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),Km("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),Km("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=$T(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var ss=t=>t.join("/").replace(/\/\/+/g,"/"),HT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var sN=["POST","PUT","PATCH","DELETE"];new Set(sN);var QT=["GET",...sN];new Set(QT);var ka=w.createContext(null);ka.displayName="DataRouter";var kh=w.createContext(null);kh.displayName="DataRouterState";w.createContext(!1);var iN=w.createContext({isTransitioning:!1});iN.displayName="ViewTransition";var YT=w.createContext(new Map);YT.displayName="Fetchers";var XT=w.createContext(null);XT.displayName="Await";var wn=w.createContext(null);wn.displayName="Navigation";var Sc=w.createContext(null);Sc.displayName="Location";var yn=w.createContext({outlet:null,matches:[],isDataRoute:!1});yn.displayName="Route";var Zg=w.createContext(null);Zg.displayName="RouteError";function JT(t,{relative:e}={}){nt(Ca(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(wn),{hash:s,pathname:o,search:a}=Cc(t,{relative:e}),l=o;return r!=="/"&&(l=o==="/"?r:ss([r,o])),n.createHref({pathname:l,search:a,hash:s})}function Ca(){return w.useContext(Sc)!=null}function Un(){return nt(Ca(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Sc).location}var oN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aN(t){w.useContext(wn).static||w.useLayoutEffect(t)}function xt(){let{isDataRoute:t}=w.useContext(yn);return t?dI():ZT()}function ZT(){nt(Ca(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(ka),{basename:e,navigator:r}=w.useContext(wn),{matches:n}=w.useContext(yn),{pathname:s}=Un(),o=JSON.stringify(Xg(n)),a=w.useRef(!1);return aN(()=>{a.current=!0}),w.useCallback((c,d={})=>{if(mn(a.current,oN),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Jg(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ss([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}w.createContext(null);function kc(){let{matches:t}=w.useContext(yn),e=t[t.length-1];return e?e.params:{}}function Cc(t,{relative:e}={}){let{matches:r}=w.useContext(yn),{pathname:n}=Un(),s=JSON.stringify(Xg(r));return w.useMemo(()=>Jg(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function eI(t,e){return lN(t,e)}function lN(t,e,r,n,s){var g;nt(Ca(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=w.useContext(wn),{matches:a}=w.useContext(yn),l=a[a.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let x=f&&f.path||"";cN(d,!f||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let m=Un(),y;if(e){let x=typeof e=="string"?Sa(e):e;nt(h==="/"||((g=x.pathname)==null?void 0:g.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),y=x}else y=m;let N=y.pathname||"/",E=N;if(h!=="/"){let x=h.replace(/^\//,"").split("/");E="/"+N.replace(/^\//,"").split("/").slice(x.length).join("/")}let k=tN(t,{pathname:E});mn(f||k!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),mn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=iI(k&&k.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:ss([h,o.encodeLocation?o.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:ss([h,o.encodeLocation?o.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,r,n,s);return e&&v?w.createElement(Sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},v):v}function tI(){let t=uI(),e=KT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),r?w.createElement("pre",{style:s},r):null,a)}var rI=w.createElement(tI,null),nI=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?w.createElement(yn.Provider,{value:this.props.routeContext},w.createElement(Zg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sI({routeContext:t,match:e,children:r}){let n=w.useContext(ka);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(yn.Provider,{value:t},r)}function iI(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=r==null?void 0:r.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);nt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,y=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,y=!1,N=null,E=null;r&&(m=a&&h.route.id?a[h.route.id]:void 0,N=h.route.errorElement||rI,l&&(c<0&&f===0?(cN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,E=null):c===f&&(y=!0,E=h.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,f+1)),v=()=>{let g;return m?g=N:y?g=E:h.route.Component?g=w.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,w.createElement(sI,{match:h,routeContext:{outlet:d,matches:k,isDataRoute:r!=null},children:g})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(nI,{location:r.location,revalidation:r.revalidation,component:N,error:m,children:v(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:n}):v()},null)}function e0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oI(t){let e=w.useContext(ka);return nt(e,e0(t)),e}function aI(t){let e=w.useContext(kh);return nt(e,e0(t)),e}function lI(t){let e=w.useContext(yn);return nt(e,e0(t)),e}function t0(t){let e=lI(t),r=e.matches[e.matches.length-1];return nt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function cI(){return t0("useRouteId")}function uI(){var n;let t=w.useContext(Zg),e=aI("useRouteError"),r=t0("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function dI(){let{router:t}=oI("useNavigate"),e=t0("useNavigate"),r=w.useRef(!1);return aN(()=>{r.current=!0}),w.useCallback(async(s,o={})=>{mn(r.current,oN),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var py={};function cN(t,e,r){!e&&!py[t]&&(py[t]=!0,mn(!1,r))}w.memo(hI);function hI({routes:t,future:e,state:r,unstable_onError:n}){return lN(t,void 0,r,n,e)}function ha({to:t,replace:e,state:r,relative:n}){nt(Ca(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(wn);mn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(yn),{pathname:a}=Un(),l=xt(),c=Jg(t,Xg(o),a,n==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:e,state:r,relative:n})},[l,d,n,e,r]),null}function uN(t){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mI({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:o=!1}){nt(!Ca(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:a,navigator:s,static:o,future:{}}),[a,s,o]);typeof r=="string"&&(r=Sa(r));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:m="default"}=r,y=w.useMemo(()=>{let N=ms(c,a);return N==null?null:{location:{pathname:N,search:d,hash:h,state:f,key:m},navigationType:n}},[a,c,d,h,f,m,n]);return mn(y!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:w.createElement(wn.Provider,{value:l},w.createElement(Sc.Provider,{children:e,value:y}))}function fI({children:t,location:e}){return eI(wp(t),e)}function wp(t,e=[]){let r=[];return w.Children.forEach(t,(n,s)=>{if(!w.isValidElement(n))return;let o=[...e,s];if(n.type===w.Fragment){r.push.apply(r,wp(n.props.children,o));return}nt(n.type===uN,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=wp(n.props.children,o)),r.push(a)}),r}var Ku="get",Qu="application/x-www-form-urlencoded";function Ch(t){return t!=null&&typeof t.tagName=="string"}function pI(t){return Ch(t)&&t.tagName.toLowerCase()==="button"}function gI(t){return Ch(t)&&t.tagName.toLowerCase()==="form"}function xI(t){return Ch(t)&&t.tagName.toLowerCase()==="input"}function wI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yI(t,e){return t.button===0&&(!e||e==="_self")&&!wI(t)}var Eu=null;function vI(){if(Eu===null)try{new FormData(document.createElement("form"),0),Eu=!1}catch{Eu=!0}return Eu}var bI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qm(t){return t!=null&&!bI.has(t)?(mn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qu}"`),null):t}function NI(t,e){let r,n,s,o,a;if(gI(t)){let l=t.getAttribute("action");n=l?ms(l,e):null,r=t.getAttribute("method")||Ku,s=Qm(t.getAttribute("enctype"))||Qu,o=new FormData(t)}else if(pI(t)||xI(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?ms(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Ku,s=Qm(t.getAttribute("formenctype"))||Qm(l.getAttribute("enctype"))||Qu,o=new FormData(l,t),!vI()){let{name:d,type:h,value:f}=t;if(h==="image"){let m=d?`${d}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else d&&o.append(d,f)}}else{if(Ch(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ku,n=null,s=Qu,a=t}return o&&s==="text/plain"&&(a=o,o=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function r0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _I(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&ms(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function jI(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function SI(t,e,r){let n=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let a=await jI(o,r);return a.links?a.links():[]}return[]}));return II(n.flat(1).filter(EI).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function gy(t,e,r,n,s,o){let a=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var h;return r[d].pathname!==c.pathname||((h=r[d].route.path)==null?void 0:h.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,d)=>a(c,d)||l(c,d)):o==="data"?e.filter((c,d)=>{var f;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function kI(t,e,{includeHydrateFallback:r}={}){return CI(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function CI(t){return[...new Set(t)]}function TI(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function II(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let o=JSON.stringify(TI(s));return r.has(o)||(r.add(o),n.push({key:o,link:s})),n},[])}function dN(){let t=w.useContext(ka);return r0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function AI(){let t=w.useContext(kh);return r0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var n0=w.createContext(void 0);n0.displayName="FrameworkContext";function hN(){let t=w.useContext(n0);return r0(t,"You must render this element inside a <HydratedRouter> element"),t}function RI(t,e){let r=w.useContext(n0),[n,s]=w.useState(!1),[o,a]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=e,m=w.useRef(null);w.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let E=v=>{v.forEach(g=>{a(g.isIntersecting)})},k=new IntersectionObserver(E,{threshold:.5});return m.current&&k.observe(m.current),()=>{k.disconnect()}}},[t]),w.useEffect(()=>{if(n){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[n]);let y=()=>{s(!0)},N=()=>{s(!1),a(!1)};return r?t!=="intent"?[o,m,{}]:[o,m,{onFocus:al(l,y),onBlur:al(c,N),onMouseEnter:al(d,y),onMouseLeave:al(h,N),onTouchStart:al(f,y)}]:[!1,m,{}]}function al(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function PI({page:t,...e}){let{router:r}=dN(),n=w.useMemo(()=>tN(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?w.createElement(MI,{page:t,matches:n,...e}):null}function DI(t){let{manifest:e,routeModules:r}=hN(),[n,s]=w.useState([]);return w.useEffect(()=>{let o=!1;return SI(t,e,r).then(a=>{o||s(a)}),()=>{o=!0}},[t,e,r]),n}function MI({page:t,matches:e,...r}){let n=Un(),{manifest:s,routeModules:o}=hN(),{basename:a}=dN(),{loaderData:l,matches:c}=AI(),d=w.useMemo(()=>gy(t,e,c,s,n,"data"),[t,e,c,s,n]),h=w.useMemo(()=>gy(t,e,c,s,n,"assets"),[t,e,c,s,n]),f=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let N=new Set,E=!1;if(e.forEach(v=>{var x;let g=s.routes[v.route.id];!g||!g.hasLoader||(!d.some(b=>b.route.id===v.route.id)&&v.route.id in l&&((x=o[v.route.id])!=null&&x.shouldRevalidate)||g.hasClientLoader?E=!0:N.add(v.route.id))}),N.size===0)return[];let k=_I(t,a,"data");return E&&N.size>0&&k.searchParams.set("_routes",e.filter(v=>N.has(v.route.id)).map(v=>v.route.id).join(",")),[k.pathname+k.search]},[a,l,n,s,d,e,t,o]),m=w.useMemo(()=>kI(h,s),[h,s]),y=DI(h);return w.createElement(w.Fragment,null,f.map(N=>w.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...r})),m.map(N=>w.createElement("link",{key:N,rel:"modulepreload",href:N,...r})),y.map(({key:N,link:E})=>w.createElement("link",{key:N,nonce:r.nonce,...E})))}function LI(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var mN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mN&&(window.__reactRouterVersion="7.8.2")}catch{}function OI({basename:t,children:e,window:r}){let n=w.useRef();n.current==null&&(n.current=ET({window:r,v5Compat:!0}));let s=n.current,[o,a]=w.useState({action:s.action,location:s.location}),l=w.useCallback(c=>{w.startTransition(()=>a(c))},[a]);return w.useLayoutEffect(()=>s.listen(l),[s,l]),w.createElement(mI,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var fN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pN=w.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:o,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f,...m},y){let{basename:N}=w.useContext(wn),E=typeof d=="string"&&fN.test(d),k,v=!1;if(typeof d=="string"&&E&&(k=d,mN))try{let A=new URL(window.location.href),C=d.startsWith("//")?new URL(A.protocol+d):new URL(d),S=ms(C.pathname,N);C.origin===A.origin&&S!=null?d=S+C.search+C.hash:v=!0}catch{mn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=JT(d,{relative:s}),[x,b,T]=RI(n,m),M=zI(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function I(A){e&&e(A),A.defaultPrevented||M(A)}let j=w.createElement("a",{...m,...T,href:k||g,onClick:v||o?e:I,ref:LI(y,b),target:c,"data-discover":!E&&r==="render"?"true":void 0});return x&&!E?w.createElement(w.Fragment,null,j,w.createElement(PI,{page:g})):j});pN.displayName="Link";var VI=w.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:o,to:a,viewTransition:l,children:c,...d},h){let f=Cc(a,{relative:d.relative}),m=Un(),y=w.useContext(kh),{navigator:N,basename:E}=w.useContext(wn),k=y!=null&&WI(f)&&l===!0,v=N.encodeLocation?N.encodeLocation(f).pathname:f.pathname,g=m.pathname,x=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(g=g.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&E&&(x=ms(x,E)||x);const b=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let T=g===v||!s&&g.startsWith(v)&&g.charAt(b)==="/",M=x!=null&&(x===v||!s&&x.startsWith(v)&&x.charAt(v.length)==="/"),I={isActive:T,isPending:M,isTransitioning:k},j=T?e:void 0,A;typeof n=="function"?A=n(I):A=[n,T?"active":null,M?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let C=typeof o=="function"?o(I):o;return w.createElement(pN,{...d,"aria-current":j,className:A,ref:h,style:C,to:a,viewTransition:l},typeof c=="function"?c(I):c)});VI.displayName="NavLink";var FI=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:o,method:a=Ku,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:f,...m},y)=>{let N=qI(),E=HI(l,{relative:d}),k=a.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&fN.test(l),g=x=>{if(c&&c(x),x.defaultPrevented)return;x.preventDefault();let b=x.nativeEvent.submitter,T=(b==null?void 0:b.getAttribute("formmethod"))||a;N(b||x.currentTarget,{fetcherKey:e,method:T,navigate:r,replace:s,state:o,relative:d,preventScrollReset:h,viewTransition:f})};return w.createElement("form",{ref:y,method:k,action:E,onSubmit:n?c:g,...m,"data-discover":!v&&t==="render"?"true":void 0})});FI.displayName="Form";function UI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gN(t){let e=w.useContext(ka);return nt(e,UI(t)),e}function zI(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:o,viewTransition:a}={}){let l=xt(),c=Un(),d=Cc(t,{relative:o});return w.useCallback(h=>{if(yI(h,e)){h.preventDefault();let f=r!==void 0?r:lc(c)===lc(d);l(t,{replace:f,state:n,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,n,e,t,s,o,a])}var $I=0,BI=()=>`__${String(++$I)}__`;function qI(){let{router:t}=gN("useSubmit"),{basename:e}=w.useContext(wn),r=cI();return w.useCallback(async(n,s={})=>{let{action:o,method:a,encType:l,formData:c,body:d}=NI(n,e);if(s.navigate===!1){let h=s.fetcherKey||BI();await t.fetch(h,r,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function HI(t,{relative:e}={}){let{basename:r}=w.useContext(wn),n=w.useContext(yn);nt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Cc(t||".",{relative:e})},a=Un();if(t==null){o.search=a.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:ss([r,o.pathname])),lc(o)}function WI(t,{relative:e}={}){let r=w.useContext(iN);nt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=gN("useViewTransitionState"),s=Cc(t,{relative:e});if(!r.isTransitioning)return!1;let o=ms(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=ms(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Pd(s.pathname,a)!=null||Pd(s.pathname,o)!=null}const GI=()=>{};var xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},KI=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[r++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[r++],a=t[r++],l=t[r++],c=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const o=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},wN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=o>>2,f=(o&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(m=64)),n.push(r[h],r[f],r[m],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const o=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,o==null||l==null||d==null||f==null)throw new QI;const m=o<<2|l>>4;if(n.push(m),d!==64){const y=l<<4&240|d>>2;if(n.push(y),f!==64){const N=d<<6&192|f;n.push(N)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YI=function(t){const e=xN(t);return wN.encodeByteArray(e,!0)},Dd=function(t){return YI(t).replace(/\./g,"")},yN=function(t){try{return wN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=()=>XI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof xy>"u")return;const t=xy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},e4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yN(t[1]);return e&&JSON.parse(e)},Th=()=>{try{return GI()||JI()||ZI()||e4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vN=t=>{var e,r;return(r=(e=Th())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},bN=t=>{const e=vN(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},NN=()=>{var t;return(t=Th())==null?void 0:t.config},_N=t=>{var e;return(e=Th())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function s0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dd(JSON.stringify(r)),Dd(JSON.stringify(a)),""].join(".")}const Dl={};function r4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Dl))Dl[e]?t.emulator.push(e):t.prod.push(e);return t}function n4(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let wy=!1;function i0(t,e){if(typeof window>"u"||typeof document>"u"||!hi(window.location.host)||Dl[t]===e||Dl[t]||wy)return;Dl[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",o=r4().prod.length>0;function a(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{wy=!0,a()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=n4(n),y=r("text"),N=document.getElementById(y)||document.createElement("span"),E=r("learnmore"),k=document.getElementById(E)||document.createElement("a"),v=r("preprendIcon"),g=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;l(x),h(k,E);const b=d();c(g,v),x.append(g,N,k,b),document.body.appendChild(x)}o?(N.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function i4(){var e;const t=(e=Th())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function a4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l4(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function c4(){return!i4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SN(){try{return typeof indexedDB=="object"}catch{return!1}}function kN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function u4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="FirebaseError";class Kr extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=d4,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,co.prototype.create)}}class co{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?h4(o,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Kr(s,l,n)}}function h4(t,e){return t.replace(m4,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const m4=/\{\$([^}]+)}/g;function f4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ln(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const o=t[s],a=e[s];if(yy(o)&&yy(a)){if(!Ln(o,a))return!1}else if(o!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function yy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function wl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function yl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function p4(t,e){const r=new g4(t,e);return r.subscribe.bind(r)}class g4{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");x4(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Ym),s.error===void 0&&(s.error=Ym),s.complete===void 0&&(s.complete=Ym);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x4(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=1e3,y4=2,v4=4*60*60*1e3,b4=.5;function vy(t,e=w4,r=y4){const n=e*Math.pow(r,t),s=Math.round(b4*n*(Math.random()-.5)*2);return Math.min(v4,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class qr{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new t4;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j4(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);n===l&&a.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_4(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _4(t){return t===Pi?void 0:t}function j4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new N4(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const S4={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},k4=Re.INFO,C4={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},T4=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=C4[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ih{constructor(e){this.name=e,this._logLevel=k4,this._logHandler=T4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const I4=(t,e)=>e.some(r=>t instanceof r);let by,Ny;function A4(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R4(){return Ny||(Ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CN=new WeakMap,yp=new WeakMap,TN=new WeakMap,Xm=new WeakMap,o0=new WeakMap;function P4(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{r(Gs(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&CN.set(r,t)}).catch(()=>{}),o0.set(e,t),e}function D4(t){if(yp.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});yp.set(t,e)}let vp={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TN.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Gs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M4(t){vp=t(vp)}function L4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Jm(this),e,...r);return TN.set(n,e.sort?e.sort():[e]),Gs(n)}:R4().includes(t)?function(...e){return t.apply(Jm(this),e),Gs(CN.get(this))}:function(...e){return Gs(t.apply(Jm(this),e))}}function O4(t){return typeof t=="function"?L4(t):(t instanceof IDBTransaction&&D4(t),I4(t,A4())?new Proxy(t,vp):t)}function Gs(t){if(t instanceof IDBRequest)return P4(t);if(Xm.has(t))return Xm.get(t);const e=O4(t);return e!==t&&(Xm.set(t,e),o0.set(e,t)),e}const Jm=t=>o0.get(t);function IN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),l=Gs(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Gs(a.result),c.oldVersion,c.newVersion,Gs(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const V4=["get","getKey","getAll","getAllKeys","count"],F4=["put","add","delete","clear"],Zm=new Map;function _y(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zm.get(e))return Zm.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=F4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||V4.includes(r)))return;const o=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),s&&c.done]))[0]};return Zm.set(e,o),o}M4(t=>({...t,get:(e,r,n)=>_y(e,r)||t.get(e,r,n),has:(e,r)=>!!_y(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(z4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function z4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bp="@firebase/app",jy="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Ih("@firebase/app"),$4="@firebase/app-compat",B4="@firebase/analytics-compat",q4="@firebase/analytics",H4="@firebase/app-check-compat",W4="@firebase/app-check",G4="@firebase/auth",K4="@firebase/auth-compat",Q4="@firebase/database",Y4="@firebase/data-connect",X4="@firebase/database-compat",J4="@firebase/functions",Z4="@firebase/functions-compat",eA="@firebase/installations",tA="@firebase/installations-compat",rA="@firebase/messaging",nA="@firebase/messaging-compat",sA="@firebase/performance",iA="@firebase/performance-compat",oA="@firebase/remote-config",aA="@firebase/remote-config-compat",lA="@firebase/storage",cA="@firebase/storage-compat",uA="@firebase/firestore",dA="@firebase/ai",hA="@firebase/firestore-compat",mA="firebase",fA="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]",pA={[bp]:"fire-core",[$4]:"fire-core-compat",[q4]:"fire-analytics",[B4]:"fire-analytics-compat",[W4]:"fire-app-check",[H4]:"fire-app-check-compat",[G4]:"fire-auth",[K4]:"fire-auth-compat",[Q4]:"fire-rtdb",[Y4]:"fire-data-connect",[X4]:"fire-rtdb-compat",[J4]:"fire-fn",[Z4]:"fire-fn-compat",[eA]:"fire-iid",[tA]:"fire-iid-compat",[rA]:"fire-fcm",[nA]:"fire-fcm-compat",[sA]:"fire-perf",[iA]:"fire-perf-compat",[oA]:"fire-rc",[aA]:"fire-rc-compat",[lA]:"fire-gcs",[cA]:"fire-gcs-compat",[uA]:"fire-fst",[hA]:"fire-fst-compat",[dA]:"fire-vertex","fire-js":"fire-js",[mA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Map,gA=new Map,_p=new Map;function Ey(t,e){try{t.container.addComponent(e)}catch(r){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function fn(t){const e=t.name;if(_p.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,t);for(const r of Md.values())Ey(r,t);for(const r of gA.values())Ey(r,t);return!0}function mi(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function fr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new co("app","Firebase",xA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=fA;function AN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Np,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw Ks.create("bad-app-name",{appName:String(s)});if(r||(r=NN()),!r)throw Ks.create("no-options");const o=Md.get(s);if(o){if(Ln(r,o.options)&&Ln(n,o.config))return o;throw Ks.create("duplicate-app",{appName:s})}const a=new E4(s);for(const c of _p.values())a.addComponent(c);const l=new wA(r,n,a);return Md.set(s,l),l}function Ah(t=Np){const e=Md.get(t);if(!e&&t===Np&&NN())return AN();if(!e)throw Ks.create("no-app",{appName:t});return e}function br(t,e,r){let n=pA[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${n}" with version "${e}":`];s&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(a.join(" "));return}fn(new qr(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="firebase-heartbeat-database",vA=1,cc="firebase-heartbeat-store";let ef=null;function RN(){return ef||(ef=IN(yA,vA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cc)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),ef}async function bA(t){try{const r=(await RN()).transaction(cc),n=await r.objectStore(cc).get(PN(t));return await r.done,n}catch(e){if(e instanceof Kr)fs.warn(e.message);else{const r=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(r.message)}}}async function Sy(t,e){try{const n=(await RN()).transaction(cc,"readwrite");await n.objectStore(cc).put(e,PN(t)),await n.done}catch(r){if(r instanceof Kr)fs.warn(r.message);else{const n=Ks.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});fs.warn(n.message)}}}function PN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=1024,_A=30;class jA{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new SA(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ky();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>_A){const a=kA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){fs.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=ky(),{heartbeatsToSend:n,unsentEntries:s}=EA(this._heartbeatsCache.heartbeats),o=Dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return fs.warn(r),""}}}function ky(){return new Date().toISOString().substring(0,10)}function EA(t,e=NA){const r=[];let n=t.slice();for(const s of t){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Cy(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Cy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class SA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SN()?kN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await bA(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Sy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Sy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Cy(t){return Dd(JSON.stringify({version:2,heartbeats:t})).length}function kA(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){fn(new qr("platform-logger",e=>new U4(e),"PRIVATE")),fn(new qr("heartbeat",e=>new jA(e),"PRIVATE")),br(bp,jy,t),br(bp,jy,"esm2020"),br("fire-js","")}CA("");const DN="@firebase/installations",a0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=1e4,LN=`w:${a0}`,ON="FIS_v2",TA="https://firebaseinstallations.googleapis.com/v1",IA=60*60*1e3,AA="installations",RA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ji=new co(AA,RA,PA);function VN(t){return t instanceof Kr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN({projectId:t}){return`${TA}/projects/${t}/installations`}function UN(t){return{token:t.token,requestStatus:2,expiresIn:MA(t.expiresIn),creationTime:Date.now()}}async function zN(t,e){const n=(await e.json()).error;return Ji.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function $N({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function DA(t,{refreshToken:e}){const r=$N(t);return r.append("Authorization",LA(e)),r}async function BN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function MA(t){return Number(t.replace("s","000"))}function LA(t){return`${ON} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=FN(t),s=$N(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:r,authVersion:ON,appId:t.appId,sdkVersion:LN},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await BN(()=>fetch(n,l));if(c.ok){const d=await c.json();return{fid:d.fid||r,registrationStatus:2,refreshToken:d.refreshToken,authToken:UN(d.authToken)}}else throw await zN("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=/^[cdef][\w-]{21}$/,jp="";function UA(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=zA(t);return FA.test(r)?r:jp}catch{return jp}}function zA(t){return VA(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Map;function WN(t,e){const r=Rh(t);GN(r,e),$A(r,e)}function GN(t,e){const r=HN.get(t);if(r)for(const n of r)n(e)}function $A(t,e){const r=BA();r&&r.postMessage({key:t,fid:e}),qA()}let Vi=null;function BA(){return!Vi&&"BroadcastChannel"in self&&(Vi=new BroadcastChannel("[Firebase] FID Change"),Vi.onmessage=t=>{GN(t.data.key,t.data.fid)}),Vi}function qA(){HN.size===0&&Vi&&(Vi.close(),Vi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firebase-installations-database",WA=1,Zi="firebase-installations-store";let tf=null;function l0(){return tf||(tf=IN(HA,WA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zi)}}})),tf}async function Ld(t,e){const r=Rh(t),s=(await l0()).transaction(Zi,"readwrite"),o=s.objectStore(Zi),a=await o.get(r);return await o.put(e,r),await s.done,(!a||a.fid!==e.fid)&&WN(t,e.fid),e}async function KN(t){const e=Rh(t),n=(await l0()).transaction(Zi,"readwrite");await n.objectStore(Zi).delete(e),await n.done}async function Ph(t,e){const r=Rh(t),s=(await l0()).transaction(Zi,"readwrite"),o=s.objectStore(Zi),a=await o.get(r),l=e(a);return l===void 0?await o.delete(r):await o.put(l,r),await s.done,l&&(!a||a.fid!==l.fid)&&WN(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(t){let e;const r=await Ph(t.appConfig,n=>{const s=GA(n),o=KA(t,s);return e=o.registrationPromise,o.installationEntry});return r.fid===jp?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function GA(t){const e=t||{fid:UA(),registrationStatus:0};return QN(e)}function KA(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ji.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=QA(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:YA(t)}:{installationEntry:e}}async function QA(t,e){try{const r=await OA(t,e);return Ld(t.appConfig,r)}catch(r){throw VN(r)&&r.customData.serverCode===409?await KN(t.appConfig):await Ld(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function YA(t){let e=await Ty(t.appConfig);for(;e.registrationStatus===1;)await qN(100),e=await Ty(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await c0(t);return n||r}return e}function Ty(t){return Ph(t,e=>{if(!e)throw Ji.create("installation-not-found");return QN(e)})}function QN(t){return XA(t)?{fid:t.fid,registrationStatus:0}:t}function XA(t){return t.registrationStatus===1&&t.registrationTime+MN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA({appConfig:t,heartbeatServiceProvider:e},r){const n=ZA(t,r),s=DA(t,r),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:LN,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await BN(()=>fetch(n,l));if(c.ok){const d=await c.json();return UN(d)}else throw await zN("Generate Auth Token",c)}function ZA(t,{fid:e}){return`${FN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(t,e=!1){let r;const n=await Ph(t.appConfig,o=>{if(!YN(o))throw Ji.create("not-registered");const a=o.authToken;if(!e&&rR(a))return o;if(a.requestStatus===1)return r=eR(t,e),o;{if(!navigator.onLine)throw Ji.create("app-offline");const l=sR(o);return r=tR(t,l),l}});return r?await r:n.authToken}async function eR(t,e){let r=await Iy(t.appConfig);for(;r.authToken.requestStatus===1;)await qN(100),r=await Iy(t.appConfig);const n=r.authToken;return n.requestStatus===0?u0(t,e):n}function Iy(t){return Ph(t,e=>{if(!YN(e))throw Ji.create("not-registered");const r=e.authToken;return iR(r)?{...e,authToken:{requestStatus:0}}:e})}async function tR(t,e){try{const r=await JA(t,e),n={...e,authToken:r};return await Ld(t.appConfig,n),r}catch(r){if(VN(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await KN(t.appConfig);else{const n={...e,authToken:{requestStatus:0}};await Ld(t.appConfig,n)}throw r}}function YN(t){return t!==void 0&&t.registrationStatus===2}function rR(t){return t.requestStatus===2&&!nR(t)}function nR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+IA}function sR(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function iR(t){return t.requestStatus===1&&t.requestTime+MN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t){const e=t,{installationEntry:r,registrationPromise:n}=await c0(e);return n?n.catch(console.error):u0(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e=!1){const r=t;return await lR(r),(await u0(r,e)).token}async function lR(t){const{registrationPromise:e}=await c0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){if(!t||!t.options)throw rf("App Configuration");if(!t.name)throw rf("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw rf(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function rf(t){return Ji.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="installations",uR="installations-internal",dR=t=>{const e=t.getProvider("app").getImmediate(),r=cR(e),n=mi(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},hR=t=>{const e=t.getProvider("app").getImmediate(),r=mi(e,XN).getImmediate();return{getId:()=>oR(r),getToken:s=>aR(r,s)}};function mR(){fn(new qr(XN,dR,"PUBLIC")),fn(new qr(uR,hR,"PRIVATE"))}mR();br(DN,a0);br(DN,a0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="analytics",fR="firebase_id",pR="origin",gR=60*1e3,xR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",d0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Ih("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Tr=new co("analytics","Analytics",wR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){if(!t.startsWith(d0)){const e=Tr.create("invalid-gtag-resource",{gtagURL:t});return Nr.warn(e.message),""}return t}function JN(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function vR(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function bR(t,e){const r=vR("firebase-js-sdk-policy",{createScriptURL:yR}),n=document.createElement("script"),s=`${d0}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function NR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _R(t,e,r,n,s,o){const a=n[s];try{if(a)await e[a];else{const c=(await JN(r)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){Nr.error(l)}t("config",s,o)}async function jR(t,e,r,n,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await JN(r);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",n,s||{})}catch(o){Nr.error(o)}}function ER(t,e,r,n){async function s(o,...a){try{if(o==="event"){const[l,c]=a;await jR(t,e,r,l,c)}else if(o==="config"){const[l,c]=a;await _R(t,e,r,n,l,c)}else if(o==="consent"){const[l,c]=a;t("consent",l,c)}else if(o==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(o==="set"){const[l]=a;t("set",l)}else t(o,...a)}catch(l){Nr.error(l)}}return s}function SR(t,e,r,n,s){let o=function(...a){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=ER(o,t,e,r),{gtagCore:o,wrappedGtag:window[s]}}function kR(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(d0)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=30,TR=1e3;class IR{constructor(e={},r=TR){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ZN=new IR;function AR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function RR(t){var a;const{appId:e,apiKey:r}=t,n={method:"GET",headers:AR(r)},s=xR.replace("{app-id}",e),o=await fetch(s,n);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Tr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function PR(t,e=ZN,r){const{appId:n,apiKey:s,measurementId:o}=t.options;if(!n)throw Tr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:n};throw Tr.create("no-api-key")}const a=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new LR;return setTimeout(async()=>{l.abort()},gR),e_({appId:n,apiKey:s,measurementId:o},a,l,e)}async function e_(t,{throttleEndTimeMillis:e,backoffCount:r},n,s=ZN){var l;const{appId:o,measurementId:a}=t;try{await DR(n,e)}catch(c){if(a)return Nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await RR(t);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!MR(d)){if(s.deleteThrottleMetadata(o),a)return Nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?vy(r,s.intervalMillis,CR):vy(r,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:r+1};return s.setThrottleMetadata(o,f),Nr.debug(`Calling attemptFetch again in ${h} millis`),e_(t,f,n,s)}}function DR(t,e){return new Promise((r,n)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(r,s);t.addEventListener(()=>{clearTimeout(o),n(Tr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function MR(t){if(!(t instanceof Kr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class LR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function OR(t,e,r,n,s){if(s&&s.global){t("event",r,n);return}else{const o=await e,a={...n,send_to:o};t("event",r,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(){if(SN())try{await kN()}catch(t){return Nr.warn(Tr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Nr.warn(Tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function FR(t,e,r,n,s,o,a){const l=PR(t);l.then(m=>{r[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Nr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Nr.error(m)),e.push(l);const c=VR().then(m=>{if(m)return n.getId()}),[d,h]=await Promise.all([l,c]);kR(o)||bR(o,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[pR]="firebase",f.update=!0,h!=null&&(f[fR]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.app=e}_delete(){return delete Ml[this.app.options.appId],Promise.resolve()}}let Ml={},Ay=[];const Ry={};let nf="dataLayer",zR="gtag",Py,t_,Dy=!1;function $R(){const t=[];if(EN()&&t.push("This is a browser extension environment."),u4()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,s)=>`(${s+1}) ${n}`).join(" "),r=Tr.create("invalid-analytics-context",{errorInfo:e});Nr.warn(r.message)}}function BR(t,e,r){$R();const n=t.options.appId;if(!n)throw Tr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Tr.create("no-api-key");if(Ml[n]!=null)throw Tr.create("already-exists",{id:n});if(!Dy){NR(nf);const{wrappedGtag:o,gtagCore:a}=SR(Ml,Ay,Ry,nf,zR);t_=o,Py=a,Dy=!0}return Ml[n]=FR(t,Ay,Ry,e,Py,nf,r),new UR(t)}function qR(t=Ah()){t=We(t);const e=mi(t,Od);return e.isInitialized()?e.getImmediate():HR(t)}function HR(t,e={}){const r=mi(t,Od);if(r.isInitialized()){const s=r.getImmediate();if(Ln(e,r.getOptions()))return s;throw Tr.create("already-initialized")}return r.initialize({options:e})}function WR(t,e,r,n){t=We(t),OR(t_,Ml[t.app.options.appId],e,r,n).catch(s=>Nr.error(s))}const My="@firebase/analytics",Ly="0.10.18";function GR(){fn(new qr(Od,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return BR(n,s,r)},"PUBLIC")),fn(new qr("analytics-internal",t,"PRIVATE")),br(My,Ly),br(My,Ly,"esm2020");function t(e){try{const r=e.getProvider(Od).getImmediate();return{logEvent:(n,s,o)=>WR(r,n,s,o)}}catch(r){throw Tr.create("interop-component-reg-failed",{reason:r})}}}GR();function r_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n_=r_,s_=new co("auth","Firebase",r_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Ih("@firebase/auth");function KR(t,...e){Vd.logLevel<=Re.WARN&&Vd.warn(`Auth (${uo}): ${t}`,...e)}function Yu(t,...e){Vd.logLevel<=Re.ERROR&&Vd.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,...e){throw m0(t,...e)}function un(t,...e){return m0(t,...e)}function h0(t,e,r){const n={...n_(),[e]:r};return new co("auth","Firebase",n).create(e,{appName:t.name})}function is(t){return h0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QR(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Hr(t,"argument-error"),h0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function m0(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return s_.create(t,...e)}function ye(t,e,...r){if(!t)throw m0(e,...r)}function es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yu(e),new Error(e)}function ps(t,e){t||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YR(){return Oy()==="http:"||Oy()==="https:"}function Oy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YR()||EN()||"connection"in navigator)?navigator.onLine:!0}function JR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,r){this.shortDelay=e,this.longDelay=r,ps(r>e,"Short delay should be less than long delay!"),this.isMobile=s4()||a4()}get(){return XR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t,e){ps(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],t3=new Ic(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zn(t,e,r,n,s={}){return o_(t,s,async()=>{let o={},a={};n&&(e==="GET"?a=n:o={body:JSON.stringify(n)});const l=Tc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...o};return o4()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&hi(t.emulatorConfig.host)&&(d.credentials="include"),i_.fetch()(await a_(t,t.config.apiHost,r,l),d)})}async function o_(t,e,r){t._canInitEmulator=!1;const n={...ZR,...e};try{const s=new n3(t),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Su(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Su(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Su(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Su(t,"user-disabled",a);const h=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw h0(t,h,d);Hr(t,h)}}catch(s){if(s instanceof Kr)throw s;Hr(t,"network-request-failed",{message:String(s)})}}async function Ac(t,e,r,n,s={}){const o=await zn(t,e,r,n,s);return"mfaPendingCredential"in o&&Hr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function a_(t,e,r,n){const s=`${e}${r}?${n}`,o=t,a=o.config.emulator?f0(t.config,s):`${t.config.apiScheme}://${s}`;return e3.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function r3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class n3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(un(this.auth,"network-request-failed")),t3.get())})}}function Su(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=un(t,e,n);return s.customData._tokenResponse=r,s}function Vy(t){return t!==void 0&&t.enterprise!==void 0}class s3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return r3(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function i3(t,e){return zn(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(t,e){return zn(t,"POST","/v1/accounts:delete",e)}async function Fd(t,e){return zn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l_(t,e=!1){const r=We(t),n=await r.getIdToken(e),s=p0(n);ye(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:n,authTime:Ll(sf(s.auth_time)),issuedAtTime:Ll(sf(s.iat)),expirationTime:Ll(sf(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function sf(t){return Number(t)*1e3}function p0(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const s=yN(r);return s?JSON.parse(s):(Yu("Failed to decode base64 JWT payload"),null)}catch(s){return Yu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Fy(t){const e=p0(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Kr&&a3(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function a3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t){var f;const e=t.auth,r=await t.getIdToken(),n=await ma(t,Fd(e,{idToken:r}));ye(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const o=(f=s.providerUserInfo)!=null&&f.length?u_(s.providerUserInfo):[],a=c3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Sp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function c_(t){const e=We(t);await Ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c3(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function u_(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(t,e){const r=await o_(t,{},async()=>{const n=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,a=await a_(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&hi(t.emulatorConfig.host)&&(c.credentials="include"),i_.fetch()(a,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function d3(t,e){return zn(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const r=Fy(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:o}=await u3(e,r);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:o}=r,a=new Jo;return n&&(ye(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(ye(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(ye(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new l3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await ma(this,this.stsTokenManager.getToken(this.auth,e));return ye(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return l_(this,e)}reload(){return c_(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Ud(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await ma(this,o3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,d=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:N,stsTokenManager:E}=r;ye(f&&E,e,"internal-error");const k=Jo.fromJSON(this.name,E);ye(typeof f=="string",e,"internal-error"),Cs(n,e.name),Cs(s,e.name),ye(typeof m=="boolean",e,"internal-error"),ye(typeof y=="boolean",e,"internal-error"),Cs(o,e.name),Cs(a,e.name),Cs(l,e.name),Cs(c,e.name),Cs(d,e.name),Cs(h,e.name);const v=new sn({uid:f,auth:e,email:s,emailVerified:m,displayName:n,isAnonymous:y,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:k,createdAt:d,lastLoginAt:h});return N&&Array.isArray(N)&&(v.providerData=N.map(g=>({...g}))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,r,n=!1){const s=new Jo;s.updateFromServerResponse(r);const o=new sn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Ud(o),o}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];ye(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?u_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new Jo;l.updateFromIdToken(n);const c=new sn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Sp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new Map;function ts(t){ps(t instanceof Function,"Expected a class definition");let e=Uy.get(t);return e?(ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}d_.type="NONE";const kp=d_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t,e,r){return`firebase:${t}:${e}:${r}`}class Zo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Xu(this.userKey,s.apiKey,o),this.fullPersistenceKey=Xu("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Fd(this.auth,{idToken:e}).catch(()=>{});return r?sn._fromGetAccountInfoResponse(this.auth,r,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Zo(ts(kp),e,n);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=s[0]||ts(kp);const a=Xu(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await Fd(e,{idToken:h}).catch(()=>{});if(!m)break;f=await sn._fromGetAccountInfoResponse(e,m,h)}else f=sn._fromJSON(e,h);d!==o&&(l=f),o=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Zo(o,e,n):(o=c[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==o)try{await d._remove(a)}catch{}})),new Zo(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x_(e))return"Blackberry";if(w_(e))return"Webos";if(m_(e))return"Safari";if((e.includes("chrome/")||f_(e))&&!e.includes("edge/"))return"Chrome";if(g_(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function h_(t=er()){return/firefox\//i.test(t)}function m_(t=er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f_(t=er()){return/crios\//i.test(t)}function p_(t=er()){return/iemobile/i.test(t)}function g_(t=er()){return/android/i.test(t)}function x_(t=er()){return/blackberry/i.test(t)}function w_(t=er()){return/webos/i.test(t)}function g0(t=er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h3(t=er()){var e;return g0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function m3(){return l4()&&document.documentMode===10}function y_(t=er()){return g0(t)||g_(t)||w_(t)||x_(t)||/windows phone/i.test(t)||p_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e=[]){let r;switch(t){case"Browser":r=zy(er());break;case"Worker":r=`${zy(er())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${uo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((a,l)=>{try{const c=e(o);a(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(t,e={}){return zn(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=6;class x3{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??g3,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $y(this),this.idTokenSubscription=new $y(this),this.beforeStateQueue=new f3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ts(r)),this._initializationPromise=this.queue(async()=>{var n,s,o;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Fd(this,{idToken:e}),n=await sn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(fr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(n=c.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Ud(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(is(this));const r=e?We(e):null;return r&&ye(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await p3(this),r=new x3(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new co("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await d3(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ts(e)||this._popupRedirectResolver;ye(r,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[ts(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{a=!0,c()}}else{const c=e.addObserver(r);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&KR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vs(t){return We(t)}class $y{constructor(e){this.auth=e,this.observer=null,this.addObserver=p4(r=>this.observer=r)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y3(t){Dh=t}function b_(t){return Dh.loadJS(t)}function v3(){return Dh.recaptchaEnterpriseScript}function b3(){return Dh.gapiScript}function N3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class _3{constructor(){this.enterprise=new j3}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class j3{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const E3="recaptcha-enterprise",N_="NO_RECAPTCHA";class S3{constructor(e){this.type=E3,this.auth=vs(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,l)=>{i3(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new s3(c);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(o,a,l){const c=window.grecaptcha;Vy(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(d=>{a(d)}).catch(()=>{a(N_)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _3().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{n(this.auth).then(l=>{if(!r&&Vy(window.grecaptcha))s(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=v3();c.length!==0&&(c+=l),b_(c).then(()=>{s(l,o,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function By(t,e,r,n=!1,s=!1){const o=new S3(t);let a;if(s)a=N_;else try{a=await o.verify(r)}catch{a=await o.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function zd(t,e,r,n,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await By(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await By(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e){const r=mi(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(Ln(o,e??{}))return s;Hr(s,"already-initialized")}return r.initialize({options:e})}function k3(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ts);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function j_(t,e,r){const n=vs(t);ye(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!!(r!=null&&r.disableWarnings),o=E_(e),{host:a,port:l}=C3(e),c=l===null?"":`:${l}`,d={url:`${o}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){ye(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ye(Ln(d,n.config.emulator)&&Ln(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,hi(a)?(s0(`${o}//${a}${c}`),i0("Auth",!0)):T3()}function E_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function C3(t){const e=E_(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:qy(n.substr(o.length+1))}}else{const[o,a]=n.split(":");return{host:o,port:qy(a)}}}function qy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function T3(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,r){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function I3(t,e){return zn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(t,e){return Ac(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}async function R3(t,e){return zn(t,"POST","/v1/accounts:sendOobCode",ys(t,e))}async function P3(t,e){return R3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D3(t,e){return Ac(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function M3(t,e){return Ac(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Mh{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new fa(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new fa(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zd(e,r,"signInWithPassword",A3);case"emailLink":return D3(e,{email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zd(e,n,"signUpPassword",I3);case"emailLink":return M3(e,{idToken:r,email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e){return Ac(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="http://localhost";class Zs extends Mh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Hr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=r;if(!n||!s)return null;const a=new Zs(n,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return ea(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ea(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ea(e,r)}buildRequest(){const e={requestUri:L3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Tc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V3(t){const e=wl(yl(t)).link,r=e?wl(yl(e)).deep_link_id:null,n=wl(yl(t)).deep_link_id;return(n?wl(yl(n)).link:null)||n||r||e||t}class Lh{constructor(e){const r=wl(yl(e)),n=r.apiKey??null,s=r.oobCode??null,o=O3(r.mode??null);ye(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=V3(e);try{return new Lh(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,r){return fa._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Lh.parseLink(r);return ye(n,"argument-error"),fa._fromEmailAndCode(e,n.code,n.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends x0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends Rc{constructor(){super("facebook.com")}static credential(e){return Zs._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch{return null}}}Kn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Zs._fromParams({providerId:Sn.PROVIDER_ID,signInMethod:Sn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Sn.credentialFromTaggedObject(e)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Sn.credential(r,n)}catch{return null}}}Sn.GOOGLE_SIGN_IN_METHOD="google.com";Sn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Rc{constructor(){super("github.com")}static credential(e){return Zs._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.GITHUB_SIGN_IN_METHOD="github.com";Qn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends Rc{constructor(){super("twitter.com")}static credential(e,r){return Zs._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Yn.credential(r,n)}catch{return null}}}Yn.TWITTER_SIGN_IN_METHOD="twitter.com";Yn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(t,e){return Ac(t,"POST","/v1/accounts:signUp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const o=await sn._fromIdTokenResponse(e,n,s),a=Hy(n);return new eo({user:o,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Hy(n);return new eo({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Hy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends Kr{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new $d(e,r,n,s)}}function S_(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(t,o,e,n):o})}async function U3(t,e,r=!1){const n=await ma(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return eo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t,e,r=!1){const{auth:n}=t;if(fr(n.app))return Promise.reject(is(n));const s="reauthenticate";try{const o=await ma(t,S_(n,s,e,t),r);ye(o.idToken,n,"internal-error");const a=p0(o.idToken);ye(a,n,"internal-error");const{sub:l}=a;return ye(t.uid===l,n,"user-mismatch"),eo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Hr(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k_(t,e,r=!1){if(fr(t.app))return Promise.reject(is(t));const n="signIn",s=await S_(t,n,e),o=await eo._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(o.user),o}async function C_(t,e){return k_(vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t,e,r){var n;ye(((n=r.url)==null?void 0:n.length)>0,t,"invalid-continue-uri"),ye(typeof r.dynamicLinkDomain>"u"||r.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ye(typeof r.linkDomain>"u"||r.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=r.url,e.dynamicLinkDomain=r.dynamicLinkDomain,e.linkDomain=r.linkDomain,e.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(ye(r.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=r.iOS.bundleId),r.android&&(ye(r.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=r.android.installApp,e.androidMinimumVersionCode=r.android.minimumVersion,e.androidPackageName=r.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T_(t){const e=vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B3(t,e,r){const n=vs(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};r&&$3(n,s,r),await zd(n,s,"getOobCode",P3)}async function I_(t,e,r){if(fr(t.app))return Promise.reject(is(t));const n=vs(t),a=await zd(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",F3).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&T_(t),c}),l=await eo._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function w0(t,e,r){return fr(t.app)?Promise.reject(is(t)):C_(We(t),ho.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&T_(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(t,e){return zn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=We(t),o={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await ma(n,q3(n.auth,o));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function R_(t,e,r,n){return We(t).onIdTokenChanged(e,r,n)}function P_(t,e,r){return We(t).beforeAuthStateChanged(e,r)}async function D_(t){return We(t).delete()}const Bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Bd,"1"),this.storage.removeItem(Bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=1e3,W3=10;class L_ extends M_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},o=this.storage.getItem(n);m3()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,W3):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},H3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}L_.type="LOCAL";const O_=L_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends M_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}V_.type="SESSION";const y0=V_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Oh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(a).map(async d=>d(r.origin,o)),c=await G3(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const d=v0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function Q3(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function Y3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function J3(){return F_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="firebaseLocalStorageDb",Z3=1,qd="firebaseLocalStorage",z_="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Vh(t,e){return t.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function eP(){const t=indexedDB.deleteDatabase(U_);return new Pc(t).toPromise()}function Cp(){const t=indexedDB.open(U_,Z3);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(qd,{keyPath:z_})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(qd)?e(n):(n.close(),await eP(),e(await Cp()))})})}async function Wy(t,e,r){const n=Vh(t,!0).put({[z_]:e,value:r});return new Pc(n).toPromise()}async function tP(t,e){const r=Vh(t,!1).get(e),n=await new Pc(r).toPromise();return n===void 0?null:n.value}function Gy(t,e){const r=Vh(t,!0).delete(e);return new Pc(r).toPromise()}const rP=800,nP=3;class $_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>nP)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(J3()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Y3(),!this.activeServiceWorker)return;this.sender=new K3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await Wy(e,Bd,"1"),await Gy(e,Bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wy(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>tP(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gy(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Vh(s,!1).getAll();return new Pc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$_.type="LOCAL";const B_=$_;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t,e){return e?ts(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends Mh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ea(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ea(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function sP(t){return k_(t.auth,new b0(t),t.bypassAuthState)}function iP(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),z3(r,new b0(t),t.bypassAuthState)}async function oP(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),U3(r,new b0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,r,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sP;case"linkViaPopup":case"linkViaRedirect":return oP;case"reauthViaPopup":case"reauthViaRedirect":return iP;default:Hr(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new Ic(2e3,1e4);async function W_(t,e,r){if(fr(t.app))return Promise.reject(un(t,"operation-not-supported-in-this-environment"));const n=vs(t);QR(t,e,x0);const s=q_(n,r);return new Fi(n,"signInViaPopup",e,s).executeNotNull()}class Fi extends H_{constructor(e,r,n,s,o){super(e,r,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Fi.currentPopupAction&&Fi.currentPopupAction.cancel(),Fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=v0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aP.get())};e()}}Fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="pendingRedirect",Ju=new Map;class cP extends H_{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const n=await uP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uP(t,e){const r=mP(e),n=hP(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function dP(t,e){Ju.set(t._key(),e)}function hP(t){return ts(t._redirectPersistence)}function mP(t){return Xu(lP,t.config.apiKey,t.name)}async function fP(t,e,r=!1){if(fr(t.app))return Promise.reject(is(t));const n=vs(t),s=q_(n,e),a=await new cP(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=10*60*1e3;class gP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xP(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!G_(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(un(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ky(e))}saveEventToCache(e){this.cachedEventUids.add(Ky(e)),this.lastProcessedEventTime=Date.now()}}function Ky(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function G_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e={}){return zn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vP=/^https?/;async function bP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wP(t);for(const r of e)try{if(NP(r))return}catch{}Hr(t,"unauthorized-domain")}function NP(t){const e=Ep(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!vP.test(r))return!1;if(yP.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=new Ic(3e4,6e4);function Qy(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function jP(t){return new Promise((e,r)=>{var s,o,a;function n(){Qy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qy(),r(un(t,"network-request-failed"))},timeout:_P.get()})}if((o=(s=An().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=An().gapi)!=null&&a.load)n();else{const l=N3("iframefcb");return An()[l]=()=>{gapi.load?n():r(un(t,"network-request-failed"))},b_(`${b3()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function EP(t){return Zu=Zu||jP(t),Zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=new Ic(5e3,15e3),kP="__/auth/iframe",CP="emulator/auth/iframe",TP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AP(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?f0(e,CP):`https://${t.config.authDomain}/${kP}`,n={apiKey:e.apiKey,appName:t.name,v:uo},s=IP.get(t.config.apiHost);s&&(n.eid=s);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${Tc(n).slice(1)}`}async function RP(t){const e=await EP(t),r=An().gapi;return ye(r,t,"internal-error"),e.open({where:document.body,url:AP(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TP,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const a=un(t,"network-request-failed"),l=An().setTimeout(()=>{o(a)},SP.get());function c(){An().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DP=500,MP=600,LP="_blank",OP="http://localhost";class Yy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VP(t,e,r,n=DP,s=MP){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...PP,width:n.toString(),height:s.toString(),top:o,left:a},d=er().toLowerCase();r&&(l=f_(d)?LP:r),h_(d)&&(e=e||OP,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,N])=>`${m}${y}=${N},`,"");if(h3(d)&&l!=="_self")return FP(e||"",l),new Yy(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new Yy(f)}function FP(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="__/auth/handler",zP="emulator/auth/handler",$P=encodeURIComponent("fac");async function Xy(t,e,r,n,s,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:uo,eventId:s};if(e instanceof x0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",f4(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof Rc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${$P}=${encodeURIComponent(c)}`:"";return`${BP(t)}?${Tc(l).slice(1)}${d}`}function BP({config:t}){return t.emulator?f0(t,zP):`https://${t.authDomain}/${UP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="webStorageSupport";class qP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y0,this._completeRedirectFn=fP,this._overrideRedirectResult=dP}async _openPopup(e,r,n,s){var a;ps((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Xy(e,r,n,Ep(),s);return VP(e,o,v0())}async _openRedirect(e,r,n,s){await this._originValidation(e);const o=await Xy(e,r,n,Ep(),s);return Q3(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(ps(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await RP(e),n=new gP(e);return r.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(of,{type:of},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[of];o!==void 0&&r(!!o),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=bP(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return y_()||m_()||g0()}}const K_=qP;var Jy="@firebase/auth",Zy="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GP(t){fn(new qr("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;ye(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v_(t)},d=new w3(n,s,o,c);return k3(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),fn(new qr("auth-internal",e=>{const r=vs(e.getProvider("auth").getImmediate());return(n=>new HP(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(Jy,Zy,WP(t)),br(Jy,Zy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=5*60,QP=_N("authIdTokenMaxAge")||KP;let ev=null;const YP=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>QP)return;const s=r==null?void 0:r.token;ev!==s&&(ev=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Q_(t=Ah()){const e=mi(t,"auth");if(e.isInitialized())return e.getImmediate();const r=__(t,{popupRedirectResolver:K_,persistence:[B_,O_,y0]}),n=_N("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const a=YP(o.toString());P_(r,a,()=>a(r.currentUser)),R_(r,l=>a(l))}}const s=vN("auth");return s&&j_(r,`http://${s}`),r}function XP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}y3({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const o=un("internal-error");o.customData=s,r(o)},n.type="text/javascript",n.charset="UTF-8",XP().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GP("Browser");const JP=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Lh,AuthCredential:Mh,EmailAuthCredential:fa,EmailAuthProvider:ho,FacebookAuthProvider:Kn,GithubAuthProvider:Qn,GoogleAuthProvider:Sn,OAuthCredential:Zs,TwitterAuthProvider:Yn,beforeAuthStateChanged:P_,browserLocalPersistence:O_,browserPopupRedirectResolver:K_,browserSessionPersistence:y0,connectAuthEmulator:j_,createUserWithEmailAndPassword:I_,deleteUser:D_,getAuth:Q_,getIdTokenResult:l_,inMemoryPersistence:kp,indexedDBLocalPersistence:B_,initializeAuth:__,onIdTokenChanged:R_,prodErrorMap:n_,reload:c_,sendPasswordResetEmail:B3,signInWithCredential:C_,signInWithEmailAndPassword:w0,signInWithPopup:W_,updateProfile:A_},Symbol.toStringTag,{value:"Module"}));var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,Y_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,j){function A(){}A.prototype=j.prototype,I.D=j.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(C,S,D){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return j.prototype[S].apply(C,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,j,A){A||(A=0);var C=Array(16);if(typeof j=="string")for(var S=0;16>S;++S)C[S]=j.charCodeAt(A++)|j.charCodeAt(A++)<<8|j.charCodeAt(A++)<<16|j.charCodeAt(A++)<<24;else for(S=0;16>S;++S)C[S]=j[A++]|j[A++]<<8|j[A++]<<16|j[A++]<<24;j=I.g[0],A=I.g[1],S=I.g[2];var D=I.g[3],R=j+(D^A&(S^D))+C[0]+3614090360&4294967295;j=A+(R<<7&4294967295|R>>>25),R=D+(S^j&(A^S))+C[1]+3905402710&4294967295,D=j+(R<<12&4294967295|R>>>20),R=S+(A^D&(j^A))+C[2]+606105819&4294967295,S=D+(R<<17&4294967295|R>>>15),R=A+(j^S&(D^j))+C[3]+3250441966&4294967295,A=S+(R<<22&4294967295|R>>>10),R=j+(D^A&(S^D))+C[4]+4118548399&4294967295,j=A+(R<<7&4294967295|R>>>25),R=D+(S^j&(A^S))+C[5]+1200080426&4294967295,D=j+(R<<12&4294967295|R>>>20),R=S+(A^D&(j^A))+C[6]+2821735955&4294967295,S=D+(R<<17&4294967295|R>>>15),R=A+(j^S&(D^j))+C[7]+4249261313&4294967295,A=S+(R<<22&4294967295|R>>>10),R=j+(D^A&(S^D))+C[8]+1770035416&4294967295,j=A+(R<<7&4294967295|R>>>25),R=D+(S^j&(A^S))+C[9]+2336552879&4294967295,D=j+(R<<12&4294967295|R>>>20),R=S+(A^D&(j^A))+C[10]+4294925233&4294967295,S=D+(R<<17&4294967295|R>>>15),R=A+(j^S&(D^j))+C[11]+2304563134&4294967295,A=S+(R<<22&4294967295|R>>>10),R=j+(D^A&(S^D))+C[12]+1804603682&4294967295,j=A+(R<<7&4294967295|R>>>25),R=D+(S^j&(A^S))+C[13]+4254626195&4294967295,D=j+(R<<12&4294967295|R>>>20),R=S+(A^D&(j^A))+C[14]+2792965006&4294967295,S=D+(R<<17&4294967295|R>>>15),R=A+(j^S&(D^j))+C[15]+1236535329&4294967295,A=S+(R<<22&4294967295|R>>>10),R=j+(S^D&(A^S))+C[1]+4129170786&4294967295,j=A+(R<<5&4294967295|R>>>27),R=D+(A^S&(j^A))+C[6]+3225465664&4294967295,D=j+(R<<9&4294967295|R>>>23),R=S+(j^A&(D^j))+C[11]+643717713&4294967295,S=D+(R<<14&4294967295|R>>>18),R=A+(D^j&(S^D))+C[0]+3921069994&4294967295,A=S+(R<<20&4294967295|R>>>12),R=j+(S^D&(A^S))+C[5]+3593408605&4294967295,j=A+(R<<5&4294967295|R>>>27),R=D+(A^S&(j^A))+C[10]+38016083&4294967295,D=j+(R<<9&4294967295|R>>>23),R=S+(j^A&(D^j))+C[15]+3634488961&4294967295,S=D+(R<<14&4294967295|R>>>18),R=A+(D^j&(S^D))+C[4]+3889429448&4294967295,A=S+(R<<20&4294967295|R>>>12),R=j+(S^D&(A^S))+C[9]+568446438&4294967295,j=A+(R<<5&4294967295|R>>>27),R=D+(A^S&(j^A))+C[14]+3275163606&4294967295,D=j+(R<<9&4294967295|R>>>23),R=S+(j^A&(D^j))+C[3]+4107603335&4294967295,S=D+(R<<14&4294967295|R>>>18),R=A+(D^j&(S^D))+C[8]+1163531501&4294967295,A=S+(R<<20&4294967295|R>>>12),R=j+(S^D&(A^S))+C[13]+2850285829&4294967295,j=A+(R<<5&4294967295|R>>>27),R=D+(A^S&(j^A))+C[2]+4243563512&4294967295,D=j+(R<<9&4294967295|R>>>23),R=S+(j^A&(D^j))+C[7]+1735328473&4294967295,S=D+(R<<14&4294967295|R>>>18),R=A+(D^j&(S^D))+C[12]+2368359562&4294967295,A=S+(R<<20&4294967295|R>>>12),R=j+(A^S^D)+C[5]+4294588738&4294967295,j=A+(R<<4&4294967295|R>>>28),R=D+(j^A^S)+C[8]+2272392833&4294967295,D=j+(R<<11&4294967295|R>>>21),R=S+(D^j^A)+C[11]+1839030562&4294967295,S=D+(R<<16&4294967295|R>>>16),R=A+(S^D^j)+C[14]+4259657740&4294967295,A=S+(R<<23&4294967295|R>>>9),R=j+(A^S^D)+C[1]+2763975236&4294967295,j=A+(R<<4&4294967295|R>>>28),R=D+(j^A^S)+C[4]+1272893353&4294967295,D=j+(R<<11&4294967295|R>>>21),R=S+(D^j^A)+C[7]+4139469664&4294967295,S=D+(R<<16&4294967295|R>>>16),R=A+(S^D^j)+C[10]+3200236656&4294967295,A=S+(R<<23&4294967295|R>>>9),R=j+(A^S^D)+C[13]+681279174&4294967295,j=A+(R<<4&4294967295|R>>>28),R=D+(j^A^S)+C[0]+3936430074&4294967295,D=j+(R<<11&4294967295|R>>>21),R=S+(D^j^A)+C[3]+3572445317&4294967295,S=D+(R<<16&4294967295|R>>>16),R=A+(S^D^j)+C[6]+76029189&4294967295,A=S+(R<<23&4294967295|R>>>9),R=j+(A^S^D)+C[9]+3654602809&4294967295,j=A+(R<<4&4294967295|R>>>28),R=D+(j^A^S)+C[12]+3873151461&4294967295,D=j+(R<<11&4294967295|R>>>21),R=S+(D^j^A)+C[15]+530742520&4294967295,S=D+(R<<16&4294967295|R>>>16),R=A+(S^D^j)+C[2]+3299628645&4294967295,A=S+(R<<23&4294967295|R>>>9),R=j+(S^(A|~D))+C[0]+4096336452&4294967295,j=A+(R<<6&4294967295|R>>>26),R=D+(A^(j|~S))+C[7]+1126891415&4294967295,D=j+(R<<10&4294967295|R>>>22),R=S+(j^(D|~A))+C[14]+2878612391&4294967295,S=D+(R<<15&4294967295|R>>>17),R=A+(D^(S|~j))+C[5]+4237533241&4294967295,A=S+(R<<21&4294967295|R>>>11),R=j+(S^(A|~D))+C[12]+1700485571&4294967295,j=A+(R<<6&4294967295|R>>>26),R=D+(A^(j|~S))+C[3]+2399980690&4294967295,D=j+(R<<10&4294967295|R>>>22),R=S+(j^(D|~A))+C[10]+4293915773&4294967295,S=D+(R<<15&4294967295|R>>>17),R=A+(D^(S|~j))+C[1]+2240044497&4294967295,A=S+(R<<21&4294967295|R>>>11),R=j+(S^(A|~D))+C[8]+1873313359&4294967295,j=A+(R<<6&4294967295|R>>>26),R=D+(A^(j|~S))+C[15]+4264355552&4294967295,D=j+(R<<10&4294967295|R>>>22),R=S+(j^(D|~A))+C[6]+2734768916&4294967295,S=D+(R<<15&4294967295|R>>>17),R=A+(D^(S|~j))+C[13]+1309151649&4294967295,A=S+(R<<21&4294967295|R>>>11),R=j+(S^(A|~D))+C[4]+4149444226&4294967295,j=A+(R<<6&4294967295|R>>>26),R=D+(A^(j|~S))+C[11]+3174756917&4294967295,D=j+(R<<10&4294967295|R>>>22),R=S+(j^(D|~A))+C[2]+718787259&4294967295,S=D+(R<<15&4294967295|R>>>17),R=A+(D^(S|~j))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+j&4294967295,I.g[1]=I.g[1]+(S+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+D&4294967295}n.prototype.u=function(I,j){j===void 0&&(j=I.length);for(var A=j-this.blockSize,C=this.B,S=this.h,D=0;D<j;){if(S==0)for(;D<=A;)s(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<j;)if(C[S++]=I.charCodeAt(D++),S==this.blockSize){s(this,C),S=0;break}}else for(;D<j;)if(C[S++]=I[D++],S==this.blockSize){s(this,C),S=0;break}}this.h=S,this.o+=j},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var j=1;j<I.length-8;++j)I[j]=0;var A=8*this.o;for(j=I.length-8;j<I.length;++j)I[j]=A&255,A/=256;for(this.u(I),I=Array(16),j=A=0;4>j;++j)for(var C=0;32>C;C+=8)I[A++]=this.g[j]>>>C&255;return I};function o(I,j){var A=l;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=j(I)}function a(I,j){this.h=j;for(var A=[],C=!0,S=I.length-1;0<=S;S--){var D=I[S]|0;C&&D==j||(A[S]=D,C=!1)}this.g=A}var l={};function c(I){return-128<=I&&128>I?o(I,function(j){return new a([j|0],0>j?-1:0)}):new a([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return k(d(-I));for(var j=[],A=1,C=0;I>=A;C++)j[C]=I/A|0,A*=4294967296;return new a(j,0)}function h(I,j){if(I.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(I.charAt(0)=="-")return k(h(I.substring(1),j));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(j,8)),C=f,S=0;S<I.length;S+=8){var D=Math.min(8,I.length-S),R=parseInt(I.substring(S,S+D),j);8>D?(D=d(Math.pow(j,D)),C=C.j(D).add(d(R))):(C=C.j(A),C=C.add(d(R)))}return C}var f=c(0),m=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(E(this))return-k(this).m();for(var I=0,j=1,A=0;A<this.g.length;A++){var C=this.i(A);I+=(0<=C?C:4294967296+C)*j,j*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(E(this))return"-"+k(this).toString(I);for(var j=d(Math.pow(I,6)),A=this,C="";;){var S=b(A,j).g;A=v(A,S.j(j));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=S,N(A))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var j=0;j<I.g.length;j++)if(I.g[j]!=0)return!1;return!0}function E(I){return I.h==-1}t.l=function(I){return I=v(this,I),E(I)?-1:N(I)?0:1};function k(I){for(var j=I.g.length,A=[],C=0;C<j;C++)A[C]=~I.g[C];return new a(A,~I.h).add(m)}t.abs=function(){return E(this)?k(this):this},t.add=function(I){for(var j=Math.max(this.g.length,I.g.length),A=[],C=0,S=0;S<=j;S++){var D=C+(this.i(S)&65535)+(I.i(S)&65535),R=(D>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);C=R>>>16,D&=65535,R&=65535,A[S]=R<<16|D}return new a(A,A[A.length-1]&-2147483648?-1:0)};function v(I,j){return I.add(k(j))}t.j=function(I){if(N(this)||N(I))return f;if(E(this))return E(I)?k(this).j(k(I)):k(k(this).j(I));if(E(I))return k(this.j(k(I)));if(0>this.l(y)&&0>I.l(y))return d(this.m()*I.m());for(var j=this.g.length+I.g.length,A=[],C=0;C<2*j;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var S=0;S<I.g.length;S++){var D=this.i(C)>>>16,R=this.i(C)&65535,$=I.i(S)>>>16,ie=I.i(S)&65535;A[2*C+2*S]+=R*ie,g(A,2*C+2*S),A[2*C+2*S+1]+=D*ie,g(A,2*C+2*S+1),A[2*C+2*S+1]+=R*$,g(A,2*C+2*S+1),A[2*C+2*S+2]+=D*$,g(A,2*C+2*S+2)}for(C=0;C<j;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=j;C<2*j;C++)A[C]=0;return new a(A,0)};function g(I,j){for(;(I[j]&65535)!=I[j];)I[j+1]+=I[j]>>>16,I[j]&=65535,j++}function x(I,j){this.g=I,this.h=j}function b(I,j){if(N(j))throw Error("division by zero");if(N(I))return new x(f,f);if(E(I))return j=b(k(I),j),new x(k(j.g),k(j.h));if(E(j))return j=b(I,k(j)),new x(k(j.g),j.h);if(30<I.g.length){if(E(I)||E(j))throw Error("slowDivide_ only works with positive integers.");for(var A=m,C=j;0>=C.l(I);)A=T(A),C=T(C);var S=M(A,1),D=M(C,1);for(C=M(C,2),A=M(A,2);!N(C);){var R=D.add(C);0>=R.l(I)&&(S=S.add(A),D=R),C=M(C,1),A=M(A,1)}return j=v(I,S.j(j)),new x(S,j)}for(S=f;0<=I.l(j);){for(A=Math.max(1,Math.floor(I.m()/j.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=d(A),R=D.j(j);E(R)||0<R.l(I);)A-=C,D=d(A),R=D.j(j);N(D)&&(D=m),S=S.add(D),I=v(I,R)}return new x(S,I)}t.A=function(I){return b(this,I).h},t.and=function(I){for(var j=Math.max(this.g.length,I.g.length),A=[],C=0;C<j;C++)A[C]=this.i(C)&I.i(C);return new a(A,this.h&I.h)},t.or=function(I){for(var j=Math.max(this.g.length,I.g.length),A=[],C=0;C<j;C++)A[C]=this.i(C)|I.i(C);return new a(A,this.h|I.h)},t.xor=function(I){for(var j=Math.max(this.g.length,I.g.length),A=[],C=0;C<j;C++)A[C]=this.i(C)^I.i(C);return new a(A,this.h^I.h)};function T(I){for(var j=I.g.length+1,A=[],C=0;C<j;C++)A[C]=I.i(C)<<1|I.i(C-1)>>>31;return new a(A,I.h)}function M(I,j){var A=j>>5;j%=32;for(var C=I.g.length-A,S=[],D=0;D<C;D++)S[D]=0<j?I.i(D+A)>>>j|I.i(D+A+1)<<32-j:I.i(D+A);return new a(S,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Y_=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Qs=a}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X_,vl,J_,ed,Tp,Z_,ej,tj;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ku=="object"&&ku];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=r(this);function s(u,p){if(p)e:{var _=n;u=u.split(".");for(var P=0;P<u.length-1;P++){var F=u[P];if(!(F in _))break e;_=_[F]}u=u[u.length-1],P=_[u],p=p(P),p!=P&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,P=!1,F={next:function(){if(!P&&_<u.length){var z=_++;return{value:p(z,u[z]),done:!1}}return P=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function d(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,_){return u.call.apply(u.bind,arguments)}function f(u,p,_){if(!u)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,P),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function m(u,p,_){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var P=_.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function N(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(P,F,z){for(var te=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)te[Ge-2]=arguments[Ge];return p.prototype[F].apply(P,te)}}function E(u){const p=u.length;if(0<p){const _=Array(p);for(let P=0;P<p;P++)_[P]=u[P];return _}return[]}function k(u,p){for(let _=1;_<arguments.length;_++){const P=arguments[_];if(c(P)){const F=u.length||0,z=P.length||0;u.length=F+z;for(let te=0;te<z;te++)u[F+te]=P[te]}else u.push(P)}}class v{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function g(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var T=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function M(u,p,_){for(const P in u)p.call(_,u[P],P,u)}function I(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function j(u){const p={};for(const _ in u)p[_]=u[_];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let _,P;for(let F=1;F<arguments.length;F++){P=arguments[F];for(_ in P)u[_]=P[_];for(let z=0;z<A.length;z++)_=A[z],Object.prototype.hasOwnProperty.call(P,_)&&(u[_]=P[_])}}function S(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function D(u){l.setTimeout(()=>{throw u},0)}function R(){var u=q;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ${constructor(){this.h=this.g=null}add(p,_){const P=ie.get();P.set(p,_),this.h?this.h.next=P:this.g=P,this.h=P}}var ie=new v(()=>new ue,u=>u.reset());class ue{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,V=!1,q=new $,O=()=>{const u=l.Promise.resolve(void 0);Q=()=>{u.then(ee)}};var ee=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){D(_)}var p=ie;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}V=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,p),l.removeEventListener("test",_,p)}catch{}return u}();function me(u,p){if(U.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(T){e:{try{b(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Te[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&me.aa.h.call(this)}}N(me,U);var Te={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),tr=0;function Me(u,p,_,P,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!P,this.ha=F,this.key=++tr,this.da=this.fa=!1}function St(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function $n(u){this.src=u,this.g={},this.h=0}$n.prototype.add=function(u,p,_,P,F){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var te=dr(u,p,P,F);return-1<te?(p=u[te],_||(p.fa=!1)):(p=new Me(p,this.src,z,!!P,F),p.fa=_,u.push(p)),p};function Mr(u,p){var _=p.type;if(_ in u.g){var P=u.g[_],F=Array.prototype.indexOf.call(P,p,void 0),z;(z=0<=F)&&Array.prototype.splice.call(P,F,1),z&&(St(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function dr(u,p,_,P){for(var F=0;F<u.length;++F){var z=u[F];if(!z.da&&z.listener==p&&z.capture==!!_&&z.ha==P)return F}return-1}var xi="closure_lm_"+(1e6*Math.random()|0),wi={};function yo(u,p,_,P,F){if(Array.isArray(p)){for(var z=0;z<p.length;z++)yo(u,p[z],_,P,F);return null}return _=Y(_),u&&u[de]?u.K(p,_,d(P)?!!P.capture:!!P,F):yi(u,p,_,!1,P,F)}function yi(u,p,_,P,F,z){if(!p)throw Error("Invalid event type");var te=d(F)?!!F.capture:!!F,Ge=Ni(u);if(Ge||(u[xi]=Ge=new $n(u)),_=Ge.add(p,_,P,te,z),_.proxy)return _;if(P=La(),_.proxy=P,P.src=u,P.listener=_,u.addEventListener)Z||(F=te),F===void 0&&(F=!1),u.addEventListener(p.toString(),P,F);else if(u.attachEvent)u.attachEvent(vo(p.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return _}function La(){function u(_){return p.call(u.src,u.listener,_)}const p=Oa;return u}function vi(u,p,_,P,F){if(Array.isArray(p))for(var z=0;z<p.length;z++)vi(u,p[z],_,P,F);else P=d(P)?!!P.capture:!!P,_=Y(_),u&&u[de]?(u=u.i,p=String(p).toString(),p in u.g&&(z=u.g[p],_=dr(z,_,P,F),-1<_&&(St(z[_]),Array.prototype.splice.call(z,_,1),z.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ni(u))&&(p=u.g[p.toString()],u=-1,p&&(u=dr(p,_,P,F)),(_=-1<u?p[u]:null)&&bi(_))}function bi(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[de])Mr(p.i,u);else{var _=u.type,P=u.proxy;p.removeEventListener?p.removeEventListener(_,P,u.capture):p.detachEvent?p.detachEvent(vo(_),P):p.addListener&&p.removeListener&&p.removeListener(P),(_=Ni(p))?(Mr(_,u),_.h==0&&(_.src=null,p[xi]=null)):St(u)}}}function vo(u){return u in wi?wi[u]:wi[u]="on"+u}function Oa(u,p){if(u.da)u=!0;else{p=new me(p,this);var _=u.listener,P=u.ha||u.src;u.fa&&bi(u),u=_.call(P,p)}return u}function Ni(u){return u=u[xi],u instanceof $n?u:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(u){return typeof u=="function"?u:(u[Fe]||(u[Fe]=function(p){return u.handleEvent(p)}),u[Fe])}function B(){se.call(this),this.i=new $n(this),this.M=this,this.F=null}N(B,se),B.prototype[de]=!0,B.prototype.removeEventListener=function(u,p,_,P){vi(this,u,p,_,P)};function pe(u,p){var _,P=u.F;if(P)for(_=[];P;P=P.F)_.push(P);if(u=u.M,P=p.type||p,typeof p=="string")p=new U(p,u);else if(p instanceof U)p.target=p.target||u;else{var F=p;p=new U(P,u),C(p,F)}if(F=!0,_)for(var z=_.length-1;0<=z;z--){var te=p.g=_[z];F=Be(te,P,!0,p)&&F}if(te=p.g=u,F=Be(te,P,!0,p)&&F,F=Be(te,P,!1,p)&&F,_)for(z=0;z<_.length;z++)te=p.g=_[z],F=Be(te,P,!1,p)&&F}B.prototype.N=function(){if(B.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],P=0;P<_.length;P++)St(_[P]);delete u.g[p],u.h--}}this.F=null},B.prototype.K=function(u,p,_,P){return this.i.add(String(u),p,!1,_,P)},B.prototype.L=function(u,p,_,P){return this.i.add(String(u),p,!0,_,P)};function Be(u,p,_,P){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,z=0;z<p.length;++z){var te=p[z];if(te&&!te.da&&te.capture==_){var Ge=te.listener,Lt=te.ha||te.src;te.fa&&Mr(u.i,te),F=Ge.call(Lt,P)!==!1&&F}}return F&&!P.defaultPrevented}function Ns(u,p,_){if(typeof u=="function")_&&(u=m(u,_));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:l.setTimeout(u,p||0)}function _i(u){u.g=Ns(()=>{u.g=null,u.i&&(u.i=!1,_i(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class bo extends se{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_i(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(u){se.call(this),this.h=u,this.g={}}N(ji,se);var Va=[];function Fa(u){M(u.g,function(p,_){this.g.hasOwnProperty(_)&&bi(p)},u),u.g={}}ji.prototype.N=function(){ji.aa.N.call(this),Fa(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ua=l.JSON.stringify,cm=l.JSON.parse,um=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function No(){}No.prototype.h=null;function Hc(u){return u.h||(u.h=u.i())}function Wc(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function za(){U.call(this,"d")}N(za,U);function $a(){U.call(this,"c")}N($a,U);var vn={},Gc=null;function _o(){return Gc=Gc||new B}vn.La="serverreachability";function Kc(u){U.call(this,vn.La,u)}N(Kc,U);function Si(u){const p=_o();pe(p,new Kc(p))}vn.STAT_EVENT="statevent";function Ba(u,p){U.call(this,vn.STAT_EVENT,u),this.stat=p}N(Ba,U);function kt(u){const p=_o();pe(p,new Ba(p,u))}vn.Ma="timingevent";function dm(u,p){U.call(this,vn.Ma,u),this.size=p}N(dm,U);function _s(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function js(){this.g=!0}js.prototype.xa=function(){this.g=!1};function Qc(u,p,_,P,F,z){u.info(function(){if(u.g)if(z)for(var te="",Ge=z.split("&"),Lt=0;Lt<Ge.length;Lt++){var Ve=Ge[Lt].split("=");if(1<Ve.length){var qt=Ve[0];Ve=Ve[1];var Ht=qt.split("_");te=2<=Ht.length&&Ht[1]=="type"?te+(qt+"="+Ve+"&"):te+(qt+"=redacted&")}}else te=null;else te=z;return"XMLHTTP REQ ("+P+") [attempt "+F+"]: "+p+`
`+_+`
`+te})}function L(u,p,_,P,F,z,te){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+F+"]: "+p+`
`+_+`
`+z+" "+te})}function W(u,p,_,P){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ne(u,_)+(P?" "+P:"")})}function oe(u,p){u.info(function(){return"TIMEOUT: "+p})}js.prototype.info=function(){};function Ne(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var P=_[u];if(!(2>P.length)){var F=P[1];if(Array.isArray(F)&&!(1>F.length)){var z=F[0];if(z!="noop"&&z!="stop"&&z!="close")for(var te=1;te<F.length;te++)F[te]=""}}}}return Ua(_)}catch{return p}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ae;function he(){}N(he,No),he.prototype.g=function(){return new XMLHttpRequest},he.prototype.i=function(){return{}},Ae=new he;function Rt(u,p,_,P){this.j=u,this.i=p,this.l=_,this.R=P||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _r}function _r(){this.i=null,this.g="",this.h=!1}var hm={},ki={};function qa(u,p,_){u.L=1,u.v=Zc(Bn(p)),u.m=_,u.P=!0,bx(u,null)}function bx(u,p){u.F=Date.now(),Yc(u),u.A=Bn(u.v);var _=u.A,P=u.R;Array.isArray(P)||(P=[String(P)]),Mx(_.i,"t",P),u.C=0,_=u.j.J,u.h=new _r,u.g=Zx(u.j,_?p:null,!u.m),0<u.O&&(u.M=new bo(m(u.Y,u,u.g),u.O)),p=u.U,_=u.g,P=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Va[0]=F.toString()),F=Va);for(var z=0;z<F.length;z++){var te=yo(_,F[z],P||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=u.H?j(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Si(),Qc(u.i,u.u,u.A,u.l,u.R,u.m)}Rt.prototype.ca=function(u){u=u.target;const p=this.M;p&&qn(u)==3?p.j():this.Y(u)},Rt.prototype.Y=function(u){try{if(u==this.g)e:{const Ht=qn(this.g);var p=this.g.Ba();const So=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||$x(this.g)))){this.J||Ht!=4||p==7||(p==8||0>=So?Si(3):Si(2)),mm(this);var _=this.g.Z();this.X=_;t:if(Nx(this)){var P=$x(this.g);u="";var F=P.length,z=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ci(this),Ha(this);var te="";break t}this.h.i=new l.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(P[p],{stream:!(z&&p==F-1)});P.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,L(this.i,this.u,this.A,this.l,this.R,Ht,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Lt=this.g;if((Ge=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(Ge)){var Ve=Ge;break t}}Ve=null}if(_=Ve)W(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fm(this,_);else{this.o=!1,this.s=3,kt(12),Ci(this),Ha(this);break e}}if(this.P){_=!0;let Qr;for(;!this.J&&this.C<te.length;)if(Qr=PS(this,te),Qr==ki){Ht==4&&(this.s=4,kt(14),_=!1),W(this.i,this.l,null,"[Incomplete Response]");break}else if(Qr==hm){this.s=4,kt(15),W(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else W(this.i,this.l,Qr,null),fm(this,Qr);if(Nx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||te.length!=0||this.h.h||(this.s=1,kt(16),_=!1),this.o=this.o&&_,!_)W(this.i,this.l,te,"[Invalid Chunked Response]"),Ci(this),Ha(this);else if(0<te.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),vm(qt),qt.M=!0,kt(11))}}else W(this.i,this.l,te,null),fm(this,te);Ht==4&&Ci(this),this.o&&!this.J&&(Ht==4?Qx(this.j,this):(this.o=!1,Yc(this)))}else YS(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Ci(this),Ha(this)}}}catch{}finally{}};function Nx(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function PS(u,p){var _=u.C,P=p.indexOf(`
`,_);return P==-1?ki:(_=Number(p.substring(_,P)),isNaN(_)?hm:(P+=1,P+_>p.length?ki:(p=p.slice(P,P+_),u.C=P+_,p)))}Rt.prototype.cancel=function(){this.J=!0,Ci(this)};function Yc(u){u.S=Date.now()+u.I,_x(u,u.I)}function _x(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_s(m(u.ba,u),p)}function mm(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Rt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(oe(this.i,this.A),this.L!=2&&(Si(),kt(17)),Ci(this),this.s=2,Ha(this)):_x(this,this.S-u)};function Ha(u){u.j.G==0||u.J||Qx(u.j,u)}function Ci(u){mm(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Fa(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function fm(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||pm(_.h,u))){if(!u.K&&pm(_.h,u)&&_.G==3){try{var P=_.Da.g.parse(p)}catch{P=null}if(Array.isArray(P)&&P.length==3){var F=P;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)iu(_),nu(_);else break e;ym(_),kt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=_s(m(_.Za,_),6e3));if(1>=Sx(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ii(_,11)}else if((u.K||_.g==u)&&iu(_),!g(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Ve=F[p];if(_.T=Ve[0],Ve=Ve[1],_.G==2)if(Ve[0]=="c"){_.K=Ve[1],_.ia=Ve[2];const qt=Ve[3];qt!=null&&(_.la=qt,_.j.info("VER="+_.la));const Ht=Ve[4];Ht!=null&&(_.Aa=Ht,_.j.info("SVER="+_.Aa));const So=Ve[5];So!=null&&typeof So=="number"&&0<So&&(P=1.5*So,_.L=P,_.j.info("backChannelRequestTimeoutMs_="+P)),P=_;const Qr=u.g;if(Qr){const au=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(au){var z=P.h;z.g||au.indexOf("spdy")==-1&&au.indexOf("quic")==-1&&au.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(gm(z,z.h),z.h=null))}if(P.D){const bm=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;bm&&(P.ya=bm,Ye(P.I,P.D,bm))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),P=_;var te=u;if(P.qa=Jx(P,P.J?P.ia:null,P.W),te.K){kx(P.h,te);var Ge=te,Lt=P.L;Lt&&(Ge.I=Lt),Ge.B&&(mm(Ge),Yc(Ge)),P.g=te}else Gx(P);0<_.i.length&&su(_)}else Ve[0]!="stop"&&Ve[0]!="close"||Ii(_,7);else _.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Ii(_,7):wm(_):Ve[0]!="noop"&&_.l&&_.l.ta(Ve),_.v=0)}}Si(4)}catch{}}var DS=class{constructor(u,p){this.g=u,this.map=p}};function jx(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ex(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Sx(u){return u.h?1:u.g?u.g.size:0}function pm(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function gm(u,p){u.g?u.g.add(p):u.h=p}function kx(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}jx.prototype.cancel=function(){if(this.i=Cx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Cx(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return E(u.i)}function MS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],_=u.length,P=0;P<_;P++)p.push(u[P]);return p}p=[],_=0;for(P in u)p[_++]=u[P];return p}function LS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const P in u)p[_++]=P;return p}}}function Tx(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=LS(u),P=MS(u),F=P.length,z=0;z<F;z++)p.call(void 0,P[z],_&&_[z],u)}var Ix=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OS(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var P=u[_].indexOf("="),F=null;if(0<=P){var z=u[_].substring(0,P);F=u[_].substring(P+1)}else z=u[_];p(z,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ti){this.h=u.h,Xc(this,u.j),this.o=u.o,this.g=u.g,Jc(this,u.s),this.l=u.l;var p=u.i,_=new Ka;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Ax(this,_),this.m=u.m}else u&&(p=String(u).match(Ix))?(this.h=!1,Xc(this,p[1]||"",!0),this.o=Wa(p[2]||""),this.g=Wa(p[3]||"",!0),Jc(this,p[4]),this.l=Wa(p[5]||"",!0),Ax(this,p[6]||"",!0),this.m=Wa(p[7]||"")):(this.h=!1,this.i=new Ka(null,this.h))}Ti.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ga(p,Rx,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ga(p,Rx,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ga(_,_.charAt(0)=="/"?US:FS,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ga(_,$S)),u.join("")};function Bn(u){return new Ti(u)}function Xc(u,p,_){u.j=_?Wa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Jc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ax(u,p,_){p instanceof Ka?(u.i=p,BS(u.i,u.h)):(_||(p=Ga(p,zS)),u.i=new Ka(p,u.h))}function Ye(u,p,_){u.i.set(p,_)}function Zc(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Wa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ga(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,VS),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function VS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Rx=/[#\/\?@]/g,FS=/[#\?:]/g,US=/[#\?]/g,zS=/[#\?@]/g,$S=/#/g;function Ka(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Es(u){u.g||(u.g=new Map,u.h=0,u.i&&OS(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=Ka.prototype,t.add=function(u,p){Es(this),this.i=null,u=jo(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Px(u,p){Es(u),p=jo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Dx(u,p){return Es(u),p=jo(u,p),u.g.has(p)}t.forEach=function(u,p){Es(this),this.g.forEach(function(_,P){_.forEach(function(F){u.call(p,F,P,this)},this)},this)},t.na=function(){Es(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let P=0;P<p.length;P++){const F=u[P];for(let z=0;z<F.length;z++)_.push(p[P])}return _},t.V=function(u){Es(this);let p=[];if(typeof u=="string")Dx(this,u)&&(p=p.concat(this.g.get(jo(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return Es(this),this.i=null,u=jo(this,u),Dx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Mx(u,p,_){Px(u,p),0<_.length&&(u.i=null,u.g.set(jo(u,p),E(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var P=p[_];const z=encodeURIComponent(String(P)),te=this.V(P);for(P=0;P<te.length;P++){var F=z;te[P]!==""&&(F+="="+encodeURIComponent(String(te[P]))),u.push(F)}}return this.i=u.join("&")};function jo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function BS(u,p){p&&!u.j&&(Es(u),u.i=null,u.g.forEach(function(_,P){var F=P.toLowerCase();P!=F&&(Px(this,P),Mx(this,F,_))},u)),u.j=p}function qS(u,p){const _=new js;if(l.Image){const P=new Image;P.onload=y(Ss,_,"TestLoadImage: loaded",!0,p,P),P.onerror=y(Ss,_,"TestLoadImage: error",!1,p,P),P.onabort=y(Ss,_,"TestLoadImage: abort",!1,p,P),P.ontimeout=y(Ss,_,"TestLoadImage: timeout",!1,p,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else p(!1)}function HS(u,p){const _=new js,P=new AbortController,F=setTimeout(()=>{P.abort(),Ss(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:P.signal}).then(z=>{clearTimeout(F),z.ok?Ss(_,"TestPingServer: ok",!0,p):Ss(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Ss(_,"TestPingServer: error",!1,p)})}function Ss(u,p,_,P,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),P(_)}catch{}}function WS(){this.g=new um}function GS(u,p,_){const P=_||"";try{Tx(u,function(F,z){let te=F;d(F)&&(te=Ua(F)),p.push(P+z+"="+encodeURIComponent(te))})}catch(F){throw p.push(P+"type="+encodeURIComponent("_badmap")),F}}function eu(u){this.l=u.Ub||null,this.j=u.eb||!1}N(eu,No),eu.prototype.g=function(){return new tu(this.l,this.j)},eu.prototype.i=function(u){return function(){return u}}({});function tu(u,p){B.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(tu,B),t=tu.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ya(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||l).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ya(this)),this.g&&(this.readyState=3,Ya(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lx(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lx(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Qa(this):Ya(this),this.readyState==3&&Lx(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Qa(this))},t.Qa=function(u){this.g&&(this.response=u,Qa(this))},t.ga=function(){this.g&&Qa(this)};function Qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ya(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Ya(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ox(u){let p="";return M(u,function(_,P){p+=P,p+=":",p+=_,p+=`\r
`}),p}function xm(u,p,_){e:{for(P in _){var P=!1;break e}P=!0}P||(_=Ox(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ye(u,p,_))}function ht(u){B.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ht,B);var KS=/^https?$/i,QS=["POST","PUT"];t=ht.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?Hc(this.o):Hc(Ae),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(z){Vx(this,z);return}if(u=_||"",_=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var F in P)_.set(F,P[F]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const z of P.keys())_.set(z,P.get(z));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(QS,p,void 0))||P||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,te]of _)this.g.setRequestHeader(z,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zx(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){Vx(this,z)}};function Vx(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Fx(u),ru(u)}function Fx(u){u.A||(u.A=!0,pe(u,"complete"),pe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,pe(this,"complete"),pe(this,"abort"),ru(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ru(this,!0)),ht.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ux(this):this.bb())},t.bb=function(){Ux(this)};function Ux(u){if(u.h&&typeof a<"u"&&(!u.v[1]||qn(u)!=4||u.Z()!=2)){if(u.u&&qn(u)==4)Ns(u.Ea,0,u);else if(pe(u,"readystatechange"),qn(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var P;if(P=te===0){var F=String(u.D).match(Ix)[1]||null;!F&&l.self&&l.self.location&&(F=l.self.location.protocol.slice(0,-1)),P=!KS.test(F?F.toLowerCase():"")}_=P}if(_)pe(u,"complete"),pe(u,"success");else{u.m=6;try{var z=2<qn(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",Fx(u)}}finally{ru(u)}}}}function ru(u,p){if(u.g){zx(u);const _=u.g,P=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||pe(u,"ready");try{_.onreadystatechange=P}catch{}}}function zx(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function qn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),cm(p)}};function $x(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function YS(u){const p={};u=(u.g&&2<=qn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(g(u[P]))continue;var _=S(u[P]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=p[F]||[];p[F]=z,z.push(_)}I(p,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Bx(u){this.Aa=0,this.i=[],this.j=new js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,u),this.cb=Xa("retryDelaySeedMs",1e4,u),this.Wa=Xa("forwardChannelMaxRetries",2,u),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new jx(u&&u.concurrentRequestLimit),this.Da=new WS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bx.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,P){kt(0),this.W=u,this.H=p||{},_&&P!==void 0&&(this.H.OSID=_,this.H.OAID=P),this.F=this.X,this.I=Jx(this,null,this.W),su(this)};function wm(u){if(qx(u),u.G==3){var p=u.U++,_=Bn(u.I);if(Ye(_,"SID",u.K),Ye(_,"RID",p),Ye(_,"TYPE","terminate"),Ja(u,_),p=new Rt(u,u.j,p),p.L=2,p.v=Zc(Bn(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=p.v,_=!0),_||(p.g=Zx(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Yc(p)}Xx(u)}function nu(u){u.g&&(vm(u),u.g.cancel(),u.g=null)}function qx(u){nu(u),u.u&&(l.clearTimeout(u.u),u.u=null),iu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function su(u){if(!Ex(u.h)&&!u.s){u.s=!0;var p=u.Ga;Q||O(),V||(Q(),V=!0),q.add(p,u),u.B=0}}function XS(u,p){return Sx(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_s(m(u.Ga,u,p),Yx(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Rt(this,this.j,u);let z=this.o;if(this.S&&(z?(z=j(z),C(z,this.S)):z=this.S),this.m!==null||this.O||(F.H=z,z=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var P=this.i[_];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(p+=P,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Wx(this,F,p),_=Bn(this.I),Ye(_,"RID",u),Ye(_,"CVER",22),this.D&&Ye(_,"X-HTTP-Session-Id",this.D),Ja(this,_),z&&(this.O?p="headers="+encodeURIComponent(String(Ox(z)))+"&"+p:this.m&&xm(_,this.m,z)),gm(this.h,F),this.Ua&&Ye(_,"TYPE","init"),this.P?(Ye(_,"$req",p),Ye(_,"SID","null"),F.T=!0,qa(F,_,null)):qa(F,_,p),this.G=2}}else this.G==3&&(u?Hx(this,u):this.i.length==0||Ex(this.h)||Hx(this))};function Hx(u,p){var _;p?_=p.l:_=u.U++;const P=Bn(u.I);Ye(P,"SID",u.K),Ye(P,"RID",_),Ye(P,"AID",u.T),Ja(u,P),u.m&&u.o&&xm(P,u.m,u.o),_=new Rt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Wx(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),gm(u.h,_),qa(_,P,p)}function Ja(u,p){u.H&&M(u.H,function(_,P){Ye(p,P,_)}),u.l&&Tx({},function(_,P){Ye(p,P,_)})}function Wx(u,p,_){_=Math.min(u.i.length,_);var P=u.l?m(u.l.Na,u.l,u):null;e:{var F=u.i;let z=-1;for(;;){const te=["count="+_];z==-1?0<_?(z=F[0].g,te.push("ofs="+z)):z=0:te.push("ofs="+z);let Ge=!0;for(let Lt=0;Lt<_;Lt++){let Ve=F[Lt].g;const qt=F[Lt].map;if(Ve-=z,0>Ve)z=Math.max(0,F[Lt].g-100),Ge=!1;else try{GS(qt,te,"req"+Ve+"_")}catch{P&&P(qt)}}if(Ge){P=te.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,P}function Gx(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Q||O(),V||(Q(),V=!0),q.add(p,u),u.v=0}}function ym(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_s(m(u.Fa,u),Yx(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Kx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_s(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),nu(this),Kx(this))};function vm(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function Kx(u){u.g=new Rt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Bn(u.qa);Ye(p,"RID","rpc"),Ye(p,"SID",u.K),Ye(p,"AID",u.T),Ye(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(p,"TO",u.ja),Ye(p,"TYPE","xmlhttp"),Ja(u,p),u.m&&u.o&&xm(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Zc(Bn(p)),_.m=null,_.P=!0,bx(_,u)}t.Za=function(){this.C!=null&&(this.C=null,nu(this),ym(this),kt(19))};function iu(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Qx(u,p){var _=null;if(u.g==p){iu(u),vm(u),u.g=null;var P=2}else if(pm(u.h,p))_=p.D,kx(u.h,p),P=1;else return;if(u.G!=0){if(p.o)if(P==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;P=_o(),pe(P,new dm(P,_)),su(u)}else Gx(u);else if(F=p.s,F==3||F==0&&0<p.X||!(P==1&&XS(u,p)||P==2&&ym(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:Ii(u,5);break;case 4:Ii(u,10);break;case 3:Ii(u,6);break;default:Ii(u,2)}}}function Yx(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Ii(u,p){if(u.j.info("Error code "+p),p==2){var _=m(u.fb,u),P=u.Xa;const F=!P;P=new Ti(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xc(P,"https"),Zc(P),F?qS(P.toString(),_):HS(P.toString(),_)}else kt(2);u.G=0,u.l&&u.l.sa(p),Xx(u),qx(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Xx(u){if(u.G=0,u.ka=[],u.l){const p=Cx(u.h);(p.length!=0||u.i.length!=0)&&(k(u.ka,p),k(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function Jx(u,p,_){var P=_ instanceof Ti?Bn(_):new Ti(_);if(P.g!="")p&&(P.g=p+"."+P.g),Jc(P,P.s);else{var F=l.location;P=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var z=new Ti(null);P&&Xc(z,P),p&&(z.g=p),F&&Jc(z,F),_&&(z.l=_),P=z}return _=u.D,p=u.ya,_&&p&&Ye(P,_,p),Ye(P,"VER",u.la),Ja(u,P),P}function Zx(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ht(new eu({eb:_})):new ht(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ew(){}t=ew.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ou(){}ou.prototype.g=function(u,p){return new jr(u,p)};function jr(u,p){B.call(this),this.g=new Bx(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!g(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!g(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Eo(this)}N(jr,B),jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){wm(this.g)},jr.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ua(u),u=_);p.i.push(new DS(p.Ya++,u)),p.G==3&&su(p)},jr.prototype.N=function(){this.g.l=null,delete this.j,wm(this.g),delete this.g,jr.aa.N.call(this)};function tw(u){za.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}N(tw,za);function rw(){$a.call(this),this.status=1}N(rw,$a);function Eo(u){this.g=u}N(Eo,ew),Eo.prototype.ua=function(){pe(this.g,"a")},Eo.prototype.ta=function(u){pe(this.g,new tw(u))},Eo.prototype.sa=function(u){pe(this.g,new rw)},Eo.prototype.ra=function(){pe(this.g,"b")},ou.prototype.createWebChannel=ou.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,tj=function(){return new ou},ej=function(){return _o()},Z_=vn,Tp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,ed=ce,xe.COMPLETE="complete",J_=xe,Wc.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",B.prototype.listen=B.prototype.K,vl=Wc,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,X_=ht}).apply(typeof ku<"u"?ku:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",nv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Ih("@firebase/firestore");function To(){return to.logLevel}function ae(t,...e){if(to.logLevel<=Re.DEBUG){const r=e.map(N0);to.debug(`Firestore (${Ta}): ${t}`,...r)}}function gs(t,...e){if(to.logLevel<=Re.ERROR){const r=e.map(N0);to.error(`Firestore (${Ta}): ${t}`,...r)}}function pa(t,...e){if(to.logLevel<=Re.WARN){const r=e.map(N0);to.warn(`Firestore (${Ta}): ${t}`,...r)}}function N0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,rj(t,n,r)}function rj(t,e,r){let n=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw gs(n),new Error(n)}function ze(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||rj(e,s,n)}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Kr{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Qt.UNAUTHENTICATED))}shutdown(){}}class e5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class t5{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ze(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let o=new os;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new os,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new os)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ze(typeof n.accessToken=="string",31837,{l:n}),new nj(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class r5{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n5{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new r5(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s5{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){ze(this.o===void 0,3512);const n=o=>{o.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const s=o=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ze(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new sv(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=i5(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<r&&(n+=e.charAt(s[o]%62))}return n}}function Pe(t,e){return t<e?-1:t>e?1:0}function Ip(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),o=e.charAt(n);if(s!==o)return af(s)===af(o)?Pe(s,o):af(s)?1:-1}return Pe(t.length,e.length)}const o5=55296,a5=57343;function af(t){const e=t.charCodeAt(0);return e>=o5&&e<=a5}function ga(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="__name__";class _n{constructor(e,r,n){r===void 0?r=0:r>e.length&&be(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&be(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const o=_n.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return Pe(e.length,r.length)}static compareSegments(e,r){const n=_n.isNumericId(e),s=_n.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?_n.extractNumericId(e).compare(_n.extractNumericId(r)):Ip(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}}class Ke extends _n{construct(e,r,n){return new Ke(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ne(H.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Ke(r)}static emptyPath(){return new Ke([])}}const l5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends _n{construct(e,r,n){return new Ft(e,r,n)}static isValidIdentifier(e){return l5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iv}static keyField(){return new Ft([iv])}static fromServerFormat(e){const r=[];let n="",s=0;const o=()=>{if(n.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ne(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(n+=l,s++):(o(),s++)}if(o(),a)throw new ne(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(r)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Ke.fromString(e))}static fromName(e){return new ge(Ke.fromString(e).popFirst(5))}static empty(){return new ge(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ke.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t,e,r){if(!r)throw new ne(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function c5(t,e,r,n){if(e===!0&&n===!0)throw new ne(H.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function ov(t){if(!ge.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function av(t){if(ge.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ij(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Fh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be(12329,{type:typeof t})}function or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Fh(t);throw new ne(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function u5(t,e){if(e<=0)throw new ne(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){const r={typeString:t};return e&&(r.value=e),r}function Dc(t,e){if(!ij(t))throw new ne(H.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(s&&typeof a!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){r=`Expected '${n}' field to equal '${o.value}'`;break}}if(r)throw new ne(H.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=-62135596800,cv=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*cv);return new Ze(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<lv)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dc(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Et("string",Ze._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ze(0,0))}static max(){return new Ee(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=-1;function d5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(n===1e9?new Ze(r+1,0):new Ze(r,n));return new ei(s,ge.empty(),e)}function h5(t){return new ei(t.readTime,t.key,uc)}class ei{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ei(Ee.min(),ge.empty(),uc)}static max(){return new ei(Ee.max(),ge.empty(),uc)}}function m5(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ge.comparator(t.documentKey,e.documentKey),r!==0?r:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==f5)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new K((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof K?r:K.resolve(r)}catch(r){return K.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):K.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):K.reject(r)}static resolve(e){return new K((r,n)=>{r(e)})}static reject(e){return new K((r,n)=>{n(e)})}static waitFor(e){return new K((r,n)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},c=>n(c))}),a=!0,o===s&&r()})}static or(e){let r=K.resolve(!1);for(const n of e)r=r.next(s=>s?K.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,o)=>{n.push(r.call(this,s,o))}),this.waitFor(n)}static mapArray(e,r){return new K((n,s)=>{const o=e.length,a=new Array(o);let l=0;for(let c=0;c<o;c++){const d=c;r(e[d]).next(h=>{a[d]=h,++l,l===o&&n(a)},h=>s(h))}})}static doWhile(e,r){return new K((n,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):n()};o()})}}function g5(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=-1;function zh(t){return t==null}function Hd(t){return t===0&&1/t==-1/0}function x5(t){return typeof t=="number"&&Number.isInteger(t)&&!Hd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="";function w5(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=uv(e)),e=y5(t.get(r),e);return uv(e)}function y5(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const o=t.charAt(s);switch(o){case"\0":r+="";break;case oj:r+="";break;default:r+=o}}return r}function uv(t){return t+oj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function fi(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function aj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,r){this.comparator=e,this.root=r||Vt.EMPTY}insert(e,r){return new ct(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,r,n,s,o){this.key=e,this.value=r,this.color=n??Vt.RED,this.left=s??Vt.EMPTY,this.right=o??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,o){return new Vt(e??this.key,r??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,n),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Vt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,r,n,s,o){return this}insert(e,r,n){return new Vt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new It(this.comparator);return r.data=e,r}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new kr([])}unionWith(e){let r=new It(Ft.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new kr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lj("Invalid base64 string: "+o):o}}(e);return new Bt(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new Bt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const v5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const r=v5.exec(t);if(ze(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="server_timestamp",uj="__type__",dj="__previous_value__",hj="__local_write_time__";function E0(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[uj])==null?void 0:n.stringValue)===cj}function $h(t){const e=t.mapValue.fields[dj];return E0(e)?$h(e):e}function dc(t){const e=ti(t.mapValue.fields[hj].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,r,n,s,o,a,l,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Wd="(default)";class hc{constructor(e,r){this.projectId=e,this.database=r||Wd}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===Wd}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="__type__",fj="__max__",Tu={mapValue:{fields:{__type__:{stringValue:fj}}}},pj="__vector__",Gd="value";function ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?E0(t)?4:_5(t)?9007199254740991:N5(t)?10:11:be(28295,{value:t})}function On(t,e){if(t===e)return!0;const r=ni(t);if(r!==ni(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dc(t).isEqual(dc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=ti(s.timestampValue),l=ti(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return ri(s.bytesValue).isEqual(ri(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return wt(s.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(s.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return wt(s.integerValue)===wt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=wt(s.doubleValue),l=wt(o.doubleValue);return a===l?Hd(a)===Hd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(dv(a)!==dv(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!On(a[c],l[c])))return!1;return!0}(t,e);default:return be(52216,{left:t})}}function mc(t,e){return(t.values||[]).find(r=>On(r,e))!==void 0}function xa(t,e){if(t===e)return 0;const r=ni(t),n=ni(e);if(r!==n)return Pe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=wt(o.integerValue||o.doubleValue),c=wt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return mv(t.timestampValue,e.timestampValue);case 4:return mv(dc(t),dc(e));case 5:return Ip(t.stringValue,e.stringValue);case 6:return function(o,a){const l=ri(o),c=ri(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Pe(l[d],c[d]);if(h!==0)return h}return Pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=Pe(wt(o.latitude),wt(a.latitude));return l!==0?l:Pe(wt(o.longitude),wt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fv(t.arrayValue,e.arrayValue);case 10:return function(o,a){var m,y,N,E;const l=o.fields||{},c=a.fields||{},d=(m=l[Gd])==null?void 0:m.arrayValue,h=(y=c[Gd])==null?void 0:y.arrayValue,f=Pe(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return f!==0?f:fv(d,h)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Tu.mapValue&&a===Tu.mapValue)return 0;if(o===Tu.mapValue)return 1;if(a===Tu.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Ip(c[f],h[f]);if(m!==0)return m;const y=xa(l[c[f]],d[h[f]]);if(y!==0)return y}return Pe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw be(23264,{he:r})}}function mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const r=ti(t),n=ti(e),s=Pe(r.seconds,n.seconds);return s!==0?s:Pe(r.nanos,n.nanos)}function fv(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const o=xa(r[s],n[s]);if(o)return o}return Pe(r.length,n.length)}function wa(t){return Ap(t)}function Ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ti(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ri(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ge.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const o of r.values||[])s?s=!1:n+=",",n+=Ap(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of n)o?o=!1:s+=",",s+=`${a}:${Ap(r.fields[a])}`;return s+"}"}(t.mapValue):be(61005,{value:t})}function td(t){switch(ni(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$h(t);return e?16+td(e):16;case 5:return 2*t.stringValue.length;case 6:return ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,o)=>s+td(o),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return fi(n.fields,(o,a)=>{s+=o.length+td(a)}),s}(t.mapValue);default:throw be(13486,{value:t})}}function pv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rp(t){return!!t&&"integerValue"in t}function S0(t){return!!t&&"arrayValue"in t}function gv(t){return!!t&&"nullValue"in t}function xv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rd(t){return!!t&&"mapValue"in t}function N5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[mj])==null?void 0:n.stringValue)===pj}function Ol(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return fi(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ol(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ol(t.arrayValue.values[r]);return e}return{...t}}function _5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!rd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(r)}setAll(e){let r=Ft.emptyPath(),n={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}a?n[l.lastSegment()]=Ol(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,s)}delete(e){const r=this.field(e.popLast());rd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];rd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){fi(r,(s,o)=>e[s]=o);for(const s of n)delete e[s]}clone(){return new pr(Ol(this.value))}}function gj(t){const e=[];return fi(t.fields,(r,n)=>{const s=new Ft([r]);if(rd(n)){const o=gj(n.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,r,n,s,o,a,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Xt(e,0,Ee.min(),Ee.min(),Ee.min(),pr.empty(),0)}static newFoundDocument(e,r,n,s){return new Xt(e,1,r,Ee.min(),n,s,0)}static newNoDocument(e,r){return new Xt(e,2,r,Ee.min(),Ee.min(),pr.empty(),0)}static newUnknownDocument(e,r){return new Xt(e,3,r,Ee.min(),Ee.min(),pr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,r){this.position=e,this.inclusive=r}}function wv(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?n=ge.comparator(ge.fromName(a.referenceValue),r.key):n=xa(a,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function yv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!On(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,r="asc"){this.field=e,this.dir=r}}function j5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xj=class{};class _t extends xj{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new S5(e,r,n):r==="array-contains"?new T5(e,n):r==="in"?new I5(e,n):r==="not-in"?new A5(e,n):r==="array-contains-any"?new R5(e,n):new _t(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new k5(e,n):new C5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(xa(r,this.value)):r!==null&&ni(this.value)===ni(r)&&this.matchesComparison(xa(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends xj{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new pn(e,r)}matches(e){return wj(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wj(t){return t.op==="and"}function yj(t){return E5(t)&&wj(t)}function E5(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function Pp(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(yj(t))return t.filters.map(e=>Pp(e)).join(",");{const e=t.filters.map(r=>Pp(r)).join(",");return`${t.op}(${e})`}}function vj(t,e){return t instanceof _t?function(n,s){return s instanceof _t&&n.op===s.op&&n.field.isEqual(s.field)&&On(n.value,s.value)}(t,e):t instanceof pn?function(n,s){return s instanceof pn&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((o,a,l)=>o&&vj(a,s.filters[l]),!0):!1}(t,e):void be(19439)}function bj(t){return t instanceof _t?function(r){return`${r.field.canonicalString()} ${r.op} ${wa(r.value)}`}(t):t instanceof pn?function(r){return r.op.toString()+" {"+r.getFilters().map(bj).join(" ,")+"}"}(t):"Filter"}class S5 extends _t{constructor(e,r,n){super(e,r,n),this.key=ge.fromName(n.referenceValue)}matches(e){const r=ge.comparator(e.key,this.key);return this.matchesComparison(r)}}class k5 extends _t{constructor(e,r){super(e,"in",r),this.keys=Nj("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class C5 extends _t{constructor(e,r){super(e,"not-in",r),this.keys=Nj("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Nj(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>ge.fromName(n.referenceValue))}class T5 extends _t{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return S0(r)&&mc(r.arrayValue,this.value)}}class I5 extends _t{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&mc(this.value.arrayValue,r)}}class A5 extends _t{constructor(e,r){super(e,"not-in",r)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!mc(this.value.arrayValue,r)}}class R5 extends _t{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!S0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>mc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,r=null,n=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function vv(t,e=null,r=[],n=[],s=null,o=null,a=null){return new P5(t,e,r,n,s,o,a)}function k0(t){const e=Se(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Pp(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),zh(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>wa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>wa(n)).join(",")),e.Te=r}return e.Te}function C0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!j5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!vj(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yv(t.startAt,e.startAt)&&yv(t.endAt,e.endAt)}function Dp(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,r=null,n=[],s=[],o=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function D5(t,e,r,n,s,o,a,l){return new Ra(t,e,r,n,s,o,a,l)}function Bh(t){return new Ra(t)}function bv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _j(t){return t.collectionGroup!==null}function Vl(t){const e=Se(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new It(Ft.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new fc(o,n))}),r.has(Ft.keyField().canonicalString())||e.Ie.push(new fc(Ft.keyField(),n))}return e.Ie}function Rn(t){const e=Se(t);return e.Ee||(e.Ee=M5(e,Vl(t))),e.Ee}function M5(t,e){if(t.limitType==="F")return vv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new fc(s.field,o)});const r=t.endAt?new Kd(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Kd(t.startAt.position,t.startAt.inclusive):null;return vv(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Mp(t,e){const r=t.filters.concat([e]);return new Ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Qd(t,e,r){return new Ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function qh(t,e){return C0(Rn(t),Rn(e))&&t.limitType===e.limitType}function jj(t){return`${k0(Rn(t))}|lt:${t.limitType}`}function Io(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>bj(s)).join(", ")}]`),zh(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>wa(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>wa(s)).join(",")),`Target(${n})`}(Rn(t))}; limitType=${t.limitType})`}function Hh(t,e){return e.isFoundDocument()&&function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ge.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,s){for(const o of Vl(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,l,c){const d=wv(a,l,c);return a.inclusive?d<=0:d<0}(n.startAt,Vl(n),s)||n.endAt&&!function(a,l,c){const d=wv(a,l,c);return a.inclusive?d>=0:d>0}(n.endAt,Vl(n),s))}(t,e)}function L5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ej(t){return(e,r)=>{let n=!1;for(const s of Vl(t)){const o=O5(s,e,r);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function O5(t,e,r){const n=t.field.isKeyField()?ge.comparator(e.key,r.key):function(o,a,l){const c=a.data.field(o),d=l.data.field(o);return c!==null&&d!==null?xa(c,d):be(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,(r,n)=>{for(const[s,o]of n)e(s,o)})}isEmpty(){return aj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=new ct(ge.comparator);function xs(){return V5}const Sj=new ct(ge.comparator);function bl(...t){let e=Sj;for(const r of t)e=e.insert(r.key,r);return e}function kj(t){let e=Sj;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ui(){return Fl()}function Cj(){return Fl()}function Fl(){return new mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const F5=new ct(ge.comparator),U5=new It(ge.comparator);function De(...t){let e=U5;for(const r of t)e=e.add(r);return e}const z5=new It(Pe);function $5(){return z5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hd(e)?"-0":e}}function Tj(t){return{integerValue:""+t}}function Ij(t,e){return x5(e)?Tj(e):T0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function B5(t,e,r){return t instanceof pc?function(s,o){const a={fields:{[uj]:{stringValue:cj},[hj]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&E0(o)&&(o=$h(o)),o&&(a.fields[dj]=o),{mapValue:a}}(r,e):t instanceof ya?Rj(t,e):t instanceof va?Pj(t,e):function(s,o){const a=Aj(s,o),l=Nv(a)+Nv(s.Ae);return Rp(a)&&Rp(s.Ae)?Tj(l):T0(s.serializer,l)}(t,e)}function q5(t,e,r){return t instanceof ya?Rj(t,e):t instanceof va?Pj(t,e):r}function Aj(t,e){return t instanceof gc?function(n){return Rp(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class pc extends Wh{}class ya extends Wh{constructor(e){super(),this.elements=e}}function Rj(t,e){const r=Dj(e);for(const n of t.elements)r.some(s=>On(s,n))||r.push(n);return{arrayValue:{values:r}}}class va extends Wh{constructor(e){super(),this.elements=e}}function Pj(t,e){let r=Dj(e);for(const n of t.elements)r=r.filter(s=>!On(s,n));return{arrayValue:{values:r}}}class gc extends Wh{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function Nv(t){return wt(t.integerValue||t.doubleValue)}function Dj(t){return S0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,r){this.field=e,this.transform=r}}function H5(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ya&&s instanceof ya||n instanceof va&&s instanceof va?ga(n.elements,s.elements,On):n instanceof gc&&s instanceof gc?On(n.Ae,s.Ae):n instanceof pc&&s instanceof pc}(t.transform,e.transform)}class W5{constructor(e,r){this.version=e,this.transformResults=r}}class ar{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kh{}function Mj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qh(t.key,ar.none()):new Mc(t.key,t.data,ar.none());{const r=t.data,n=pr.empty();let s=new It(Ft.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?n.delete(o):n.set(o,a),s=s.add(o)}return new pi(t.key,n,new kr(s.toArray()),ar.none())}}function G5(t,e,r){t instanceof Mc?function(s,o,a){const l=s.value.clone(),c=jv(s.fieldTransforms,o,a.transformResults);l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof pi?function(s,o,a){if(!nd(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=jv(s.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(Lj(s)),c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Ul(t,e,r,n){return t instanceof Mc?function(o,a,l,c){if(!nd(o.precondition,a))return l;const d=o.value.clone(),h=Ev(o.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof pi?function(o,a,l,c){if(!nd(o.precondition,a))return l;const d=Ev(o.fieldTransforms,c,a),h=a.data;return h.setAll(Lj(o)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(o,a,l){return nd(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function K5(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),o=Aj(n.transform,s||null);o!=null&&(r===null&&(r=pr.empty()),r.set(n.field,o))}return r||null}function _v(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ga(n,s,(o,a)=>H5(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mc extends Kh{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class pi extends Kh{constructor(e,r,n,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Lj(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function jv(t,e,r){const n=new Map;ze(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const o=t[s],a=o.transform,l=e.data.field(o.field);n.set(o.field,q5(a,l,r[s]))}return n}function Ev(t,e,r){const n=new Map;for(const s of t){const o=s.transform,a=r.data.field(s.field);n.set(s.field,B5(o,a,e))}return n}class Qh extends Kh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q5 extends Kh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&G5(o,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Ul(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Ul(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Cj();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const c=Mj(a,l);c!==null&&n.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Ee.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),De())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(r,n)=>_v(r,n))&&ga(this.baseMutations,e.baseMutations,(r,n)=>_v(r,n))}}class I0{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){ze(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return F5}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,n[a].version);return new I0(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Le;function Z5(t){switch(t){case H.OK:return be(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return be(15467,{code:t})}}function Oj(t){if(t===void 0)return gs("GRPC error has no .code"),H.UNKNOWN;switch(t){case bt.OK:return H.OK;case bt.CANCELLED:return H.CANCELLED;case bt.UNKNOWN:return H.UNKNOWN;case bt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case bt.INTERNAL:return H.INTERNAL;case bt.UNAVAILABLE:return H.UNAVAILABLE;case bt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case bt.NOT_FOUND:return H.NOT_FOUND;case bt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case bt.ABORTED:return H.ABORTED;case bt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case bt.DATA_LOSS:return H.DATA_LOSS;default:return be(39323,{code:t})}}(Le=bt||(bt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new Qs([4294967295,4294967295],0);function Sv(t){const e=eD().encode(t),r=new Y_;return r.update(e),new Uint8Array(r.digest())}function kv(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qs([r,n],0),new Qs([s,o],0)]}class A0{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Nl(`Invalid padding: ${r}`);if(n<0)throw new Nl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Qs.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(Qs.fromNumber(n)));return s.compare(tD)===1&&(s=new Qs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Sv(e),[n,s]=kv(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(n,s,o);if(!this.we(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new A0(o,s,r);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=Sv(e),[n,s]=kv(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(n,s,o);this.Se(a)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,r,n,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Yh(Ee.min(),s,new ct(Pe),xs(),De())}}class Lc{constructor(e,r,n,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Lc(n,r,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class Vj{constructor(e,r){this.targetId=e,this.Ce=r}}class Fj{constructor(e,r,n=Bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class Cv{constructor(){this.ve=0,this.Fe=Tv(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),r=De(),n=De();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:be(38017,{changeType:o})}}),new Lc(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=Tv()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rD{constructor(e){this.Ge=e,this.ze=new Map,this.je=xs(),this.Je=Iu(),this.He=Iu(),this.Ye=new ct(Pe)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:be(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const o=s.target;if(Dp(o))if(n===0){const a=new ge(o.path);this.et(r,a,Xt.newNoDocument(a,Ee.min()))}else ze(n===1,20013,{expectedCount:n});else{const a=this._t(r);if(a!==n){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(r);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=ri(n).toUint8Array()}catch(c){if(c instanceof lj)return pa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new A0(a,s,o)}catch(c){return pa(c instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(r,o,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&Dp(l.target)){const c=new ge(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Xt.newNoDocument(c,e))}o.Be&&(r.set(a,o.ke()),o.qe())}});let n=De();this.He.forEach((o,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Yh(e,r,this.Ye,this.je,n);return this.je=xs(),this.Je=Iu(),this.He=Iu(),this.Ye=new ct(Pe),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new Cv,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new It(Pe),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new It(Pe),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||ae("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cv),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Iu(){return new ct(ge.comparator)}function Tv(){return new ct(ge.comparator)}const nD={asc:"ASCENDING",desc:"DESCENDING"},sD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iD={and:"AND",or:"OR"};class oD{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Lp(t,e){return t.useProto3Json||zh(e)?e:{value:e}}function Yd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aD(t,e){return Yd(t,e.toTimestamp())}function Pn(t){return ze(!!t,49232),Ee.fromTimestamp(function(r){const n=ti(r);return new Ze(n.seconds,n.nanos)}(t))}function R0(t,e){return Op(t,e).canonicalString()}function Op(t,e){const r=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function zj(t){const e=Ke.fromString(t);return ze(Wj(e),10190,{key:e.toString()}),e}function Vp(t,e){return R0(t.databaseId,e.path)}function lf(t,e){const r=zj(e);if(r.get(1)!==t.databaseId.projectId)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ge(Bj(r))}function $j(t,e){return R0(t.databaseId,e)}function lD(t){const e=zj(t);return e.length===4?Ke.emptyPath():Bj(e)}function Fp(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bj(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Iv(t,e,r){return{name:Vp(t,e),fields:r.value.mapValue.fields}}function cD(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:be(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(ze(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?H.UNKNOWN:Oj(d.code);return new ne(h,d.message||"")}(a);r=new Fj(n,s,o,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=lf(t,n.document.name),o=Pn(n.document.updateTime),a=n.document.createTime?Pn(n.document.createTime):Ee.min(),l=new pr({mapValue:{fields:n.document.fields}}),c=Xt.newFoundDocument(s,o,a,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new sd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=lf(t,n.document),o=n.readTime?Pn(n.readTime):Ee.min(),a=Xt.newNoDocument(s,o),l=n.removedTargetIds||[];r=new sd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=lf(t,n.document),o=n.removedTargetIds||[];r=new sd([],o,s,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,a=new J5(s,o),l=n.targetId;r=new Vj(l,a)}}return r}function uD(t,e){let r;if(e instanceof Mc)r={update:Iv(t,e.key,e.value)};else if(e instanceof Qh)r={delete:Vp(t,e.key)};else if(e instanceof pi)r={update:Iv(t,e.key,e.data),updateMask:yD(e.fieldMask)};else{if(!(e instanceof Q5))return be(16599,{Vt:e.type});r={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,a){const l=a.transform;if(l instanceof pc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ya)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof va)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw be(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:aD(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:be(27497)}(t,e.precondition)),r}function dD(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(r=>function(s,o){let a=s.updateTime?Pn(s.updateTime):Pn(o);return a.isEqual(Ee.min())&&(a=Pn(o)),new W5(a,s.transformResults||[])}(r,e))):[]}function hD(t,e){return{documents:[$j(t,e.path)]}}function mD(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=$j(t,s);const o=function(d){if(d.length!==0)return Hj(pn.create(d,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ao(m.field),direction:gD(m.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=Lp(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:s}}function fD(t){let e=lD(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){ze(n===1,65062);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];r.where&&(o=function(f){const m=qj(f);return m instanceof pn&&yj(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(m=>function(N){return new fc(Ro(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,zh(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new Kd(y,m)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const m=!f.before,y=f.values||[];return new Kd(y,m)}(r.endAt)),D5(e,s,a,o,l,"F",c,d)}function pD(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function qj(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ro(r.unaryFilter.field);return _t.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ro(r.unaryFilter.field);return _t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ro(r.unaryFilter.field);return _t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ro(r.unaryFilter.field);return _t.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}}(t):t.fieldFilter!==void 0?function(r){return _t.create(Ro(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return pn.create(r.compositeFilter.filters.map(n=>qj(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return be(1026)}}(r.compositeFilter.op))}(t):be(30097,{filter:t})}function gD(t){return nD[t]}function xD(t){return sD[t]}function wD(t){return iD[t]}function Ao(t){return{fieldPath:t.canonicalString()}}function Ro(t){return Ft.fromServerFormat(t.fieldPath)}function Hj(t){return t instanceof _t?function(r){if(r.op==="=="){if(xv(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NAN"}};if(gv(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(xv(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NOT_NAN"}};if(gv(r.value))return{unaryFilter:{field:Ao(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(r.field),op:xD(r.op),value:r.value}}}(t):t instanceof pn?function(r){const n=r.getFilters().map(s=>Hj(s));return n.length===1?n[0]:{compositeFilter:{op:wD(r.op),filters:n}}}(t):be(54877,{filter:t})}function yD(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Wj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,r,n,s,o=Ee.min(),a=Ee.min(),l=Bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.yt=e}}function bD(t){const e=fD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.Cn=new _D}addToCollectionParentIndex(e,r){return this.Cn.add(r),K.resolve()}getCollectionParents(e,r){return K.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return K.resolve()}deleteFieldIndex(e,r){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,r){return K.resolve()}getDocumentsMatchingTarget(e,r){return K.resolve(null)}getIndexType(e,r){return K.resolve(0)}getFieldIndexes(e,r){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,r){return K.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,r){return K.resolve(ei.min())}updateCollectionGroup(e,r,n){return K.resolve()}updateIndexEntries(e,r){return K.resolve()}}class _D{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new It(Ke.comparator),o=!s.has(n);return this.index[r]=s.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new It(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gj=41943040;class hr{static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(Gj,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ba(0)}static cr(){return new ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="LruGarbageCollector",jD=1048576;function Pv([t,e],[r,n]){const s=Pe(t,r);return s===0?Pe(e,n):s}class ED{constructor(e){this.Ir=e,this.buffer=new It(Pv),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Pv(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class SD{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(Rv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Aa(r)?ae(Rv,"Ignoring IndexedDB error during garbage collection: ",r):await Ia(r)}await this.Vr(3e5)})}}class kD{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return K.resolve(Uh.ce);const n=new ED(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Av)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Av):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,o,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(d=Date.now(),To()<=Re.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:f})))}}function CD(t,e){return new kD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.changes=new mo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?K.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Ul(n.mutation,s,kr.empty(),Ze.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,De()).next(()=>n))}getLocalViewOfDocuments(e,r,n=De()){const s=Ui();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(o=>{let a=bl();return o.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Ui();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,De()))}populateOverlays(e,r,n){const s=[];return n.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,n,s){let o=xs();const a=Fl(),l=function(){return Fl()}();return r.forEach((c,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof pi)?o=o.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Ul(h.mutation,d,h.mutation.getFieldMask(),Ze.now())):a.set(d.key,kr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>a.set(d,h)),r.forEach((d,h)=>l.set(d,new ID(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,r){const n=Fl();let s=new ct((a,l)=>a-l),o=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=r.get(c);if(d===null)return;let h=n.get(c)||kr.empty();h=l.applyToLocalView(d,h),n.set(c,h);const f=(s.get(l.batchId)||De()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=Cj();h.forEach(m=>{if(!o.has(m)){const y=Mj(r.get(m),n.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return K.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):_j(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-o.size):K.resolve(Ui());let l=uc,c=o;return a.next(d=>K.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),o.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,De())).next(h=>({batchId:l,changes:kj(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ge(r)).next(n=>{let s=bl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const o=r.collectionGroup;let a=bl();return this.indexManager.getCollectionParents(e,o).next(l=>K.forEach(l,c=>{const d=function(f,m){return new Ra(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,s))).next(a=>{o.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Xt.newInvalidDocument(h)))});let l=bl();return a.forEach((c,d)=>{const h=o.get(c);h!==void 0&&Ul(h.mutation,d,kr.empty(),Ze.now()),Hh(r,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return K.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Pn(s.createTime)}}(r)),K.resolve()}getNamedQuery(e,r){return K.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:bD(s.bundledQuery),readTime:Pn(s.readTime)}}(r)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.overlays=new ct(ge.comparator),this.qr=new Map}getOverlay(e,r){return K.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ui();return K.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&n.set(s,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,o)=>{this.St(e,r,o)}),K.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(n)),K.resolve()}getOverlaysForCollection(e,r,n){const s=Ui(),o=r.length+1,a=new ge(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>n&&s.set(c.getKey(),c)}return K.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let o=new ct((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=o.get(d.largestBatchId);h===null&&(h=Ui(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ui(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return K.resolve(l)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new X5(r,n));let o=this.qr.get(r);o===void 0&&(o=De(),this.qr.set(r,o)),this.qr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.Qr=new It(Pt.$r),this.Ur=new It(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Pt(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Pt(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new ge(new Ke([])),n=new Pt(r,e),s=new Pt(r,e+1),o=[];return this.Ur.forEachInRange([n,s],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new ge(new Ke([])),n=new Pt(r,e),s=new Pt(r,e+1);let o=De();return this.Ur.forEachInRange([n,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new Pt(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Pt{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return ge.comparator(e.key,r.key)||Pe(e.Yr,r.Yr)}static Kr(e,r){return Pe(e.Yr,r.Yr)||ge.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new It(Pt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Y5(o,r,n,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Pt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,r){return K.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?j0:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Pt(r,0),s=new Pt(r,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],a=>{const l=this.Xr(a.Yr);o.push(l)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new It(Pe);return r.forEach(s=>{const o=new Pt(s,0),a=new Pt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],l=>{n=n.add(l.Yr)})}),K.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let o=n;ge.isDocumentKey(o)||(o=o.child(""));const a=new Pt(new ge(o),0);let l=new It(Pe);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),K.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){ze(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return K.forEach(r.mutations,s=>{const o=new Pt(s.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Pt(r,0),s=this.Zr.firstAfterOrEqual(n);return K.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.ri=e,this.docs=function(){return new ct(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),o=s?s.size:0,a=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return K.resolve(n?n.document.mutableCopy():Xt.newInvalidDocument(r))}getEntries(e,r){let n=xs();return r.forEach(s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():Xt.newInvalidDocument(s))}),K.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let o=xs();const a=r.path,l=new ge(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||m5(h5(h),n)<=0||(s.has(h.key)||Hh(r,h))&&(o=o.insert(h.key,h.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,r,n,s){be(9500)}ii(e,r){return K.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new OD(this)}getSize(e){return K.resolve(this.size)}}class OD extends TD{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),K.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.persistence=e,this.si=new mo(r=>k0(r),C0),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new P0,this.targetCount=0,this.ai=ba.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),K.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new ba(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,K.resolve()}updateTargetData(e,r){return this.Pr(r),K.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,r,n){let s=0;const o=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),K.waitFor(o).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return K.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),K.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),K.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return K.resolve(n)}containsKey(e,r){return K.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,r){this.ui={},this.overlays={},this.ci=new Uh(0),this.li=!1,this.li=!0,this.hi=new DD,this.referenceDelegate=e(this),this.Pi=new VD(this),this.indexManager=new ND,this.remoteDocumentCache=function(s){return new LD(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new vD(r),this.Ii=new RD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new PD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new MD(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){ae("MemoryPersistence","Starting transaction:",e);const s=new FD(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,r){return K.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class FD extends p5{constructor(e){super(),this.currentSequenceNumber=e}}class D0{constructor(e){this.persistence=e,this.Ri=new P0,this.Vi=null}static mi(e){return new D0(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),K.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),K.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),K.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,n=>{const s=ge.fromPath(n);return this.gi(e,s).next(o=>{o||r.removeEntry(s,Ee.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return K.or([()=>K.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class Xd{constructor(e,r){this.persistence=e,this.pi=new mo(n=>w5(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=CD(this,r)}static mi(e,r){return new Xd(e,r)}Ei(){}di(e){return K.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return K.forEach(this.pi,(n,s)=>this.br(e,n,s).next(o=>o?K.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,r).next(l=>{l||(n++,o.removeEntry(a,Ee.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=td(e.data.value)),r}br(e,r,n){return K.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return K.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=De(),s=De();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new M0(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return c4()?8:g5(er())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const o={result:null};return this.ys(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,r,s,n).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new UD;return this.Ss(e,r,a).next(l=>{if(o.result=l,this.Vs)return this.bs(e,r,a,l.size)})}).next(()=>o.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(To()<=Re.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Io(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(To()<=Re.DEBUG&&ae("QueryEngine","Query:",Io(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(To()<=Re.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Io(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(r))):K.resolve())}ys(e,r){if(bv(r))return K.resolve(null);let n=Rn(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Qd(r,null,"F"),n=Rn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const a=De(...o);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const d=this.Ds(r,l);return this.Cs(r,d,a,c.readTime)?this.ys(e,Qd(r,null,"F")):this.vs(e,d,r,c)}))})))}ws(e,r,n,s){return bv(r)||s.isEqual(Ee.min())?K.resolve(null):this.ps.getDocuments(e,n).next(o=>{const a=this.Ds(r,o);return this.Cs(r,a,n,s)?K.resolve(null):(To()<=Re.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Io(r)),this.vs(e,a,r,d5(s,uc)).next(l=>l))})}Ds(e,r){let n=new It(Ej(e));return r.forEach((s,o)=>{Hh(e,o)&&(n=n.add(o))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,r,n){return To()<=Re.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Io(r)),this.ps.getDocumentsMatchingQuery(e,r,ei.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="LocalStore",$D=3e8;class BD{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new ct(Pe),this.xs=new mo(o=>k0(o),C0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function qD(t,e,r,n){return new BD(t,e,r,n)}async function Qj(t,e){const r=Se(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(o=>(s=o,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const a=[],l=[];let c=De();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of o){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return r.localDocuments.getDocuments(n,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function HD(t,e){const r=Se(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),o=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let y=K.resolve();return m.forEach(N=>{y=y.next(()=>h.getEntry(c,N)).next(E=>{const k=d.docVersions.get(N);ze(k!==null,48541),E.version.compareTo(k)<0&&(f.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=De();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function Yj(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function WD(t,e){const r=Se(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(r.Pi.removeMatchingKeys(o,h.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(o,h.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Bt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,n)),s=s.insert(f,y),function(E,k,v){return E.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=$D?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,h)&&l.push(r.Pi.updateTargetData(o,y))});let c=xs(),d=De();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(GD(o,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!n.isEqual(Ee.min())){const h=r.Pi.getLastRemoteSnapshotVersion(o).next(f=>r.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n));l.push(h)}return K.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(r.Ms=s,o))}function GD(t,e,r){let n=De(),s=De();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let a=xs();return r.forEach((l,c)=>{const d=o.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ae(L0,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function KD(t,e){const r=Se(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=j0),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function QD(t,e){const r=Se(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(o=>o?(s=o,K.resolve(s)):r.Pi.allocateTargetId(n).next(a=>(s=new Vs(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Up(t,e,r){const n=Se(t),s=n.Ms.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Aa(a))throw a;ae(L0,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function Dv(t,e,r){const n=Se(t);let s=Ee.min(),o=De();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=Se(c),m=f.xs.get(h);return m!==void 0?K.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(n,a,Rn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{o=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,r?s:Ee.min(),r?o:De())).next(l=>(YD(n,L5(e),l),{documents:l,Qs:o})))}function YD(t,e,r){let n=t.Os.get(e)||Ee.min();r.forEach((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.Os.set(e,n)}class Mv{constructor(){this.activeTargetIds=$5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XD{constructor(){this.Mo=new Mv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mv,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="ConnectivityMonitor";class Ov{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(Lv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(Lv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au=null;function zp(){return Au===null?Au=function(){return 268435456+Math.round(2147483648*Math.random())}():Au++,"0x"+Au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="RestConnection",ZD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===Wd?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,o){const a=zp(),l=this.zo(e,r.toUriEncodedString());ae(cf,`Sending RPC '${e}' ${a}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,o);const{host:d}=new URL(l),h=hi(d);return this.Jo(e,l,c,n,h).then(f=>(ae(cf,`Received RPC '${e}' ${a}: `,f),f),f=>{throw pa(cf,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(e,r,n,s,o,a){return this.Go(e,r,n,s,o)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ta}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),n&&n.headers.forEach((s,o)=>e[o]=s)}zo(e,r){const n=ZD[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class r6 extends e6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,o){const a=zp();return new Promise((l,c)=>{const d=new X_;d.setWithCredentials(!0),d.listenOnce(J_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ed.NO_ERROR:const f=d.getResponseJson();ae(Kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case ed.TIMEOUT:ae(Kt,`RPC '${e}' ${a} timed out`),c(new ne(H.DEADLINE_EXCEEDED,"Request time out"));break;case ed.HTTP_ERROR:const m=d.getStatus();if(ae(Kt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const N=y==null?void 0:y.error;if(N&&N.status&&N.message){const E=function(v){const g=v.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(g)>=0?g:H.UNKNOWN}(N.status);c(new ne(E,N.message))}else c(new ne(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(H.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ae(Kt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);ae(Kt,`RPC '${e}' ${a} sending request:`,s),d.send(r,"POST",h,n,15)})}T_(e,r,n){const s=zp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=tj(),l=ej(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const h=o.join("");ae(Kt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,y=!1;const N=new t6({Yo:k=>{y?ae(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(ae(Kt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),ae(Kt,`RPC '${e}' stream ${s} sending:`,k),f.send(k))},Zo:()=>f.close()}),E=(k,v,g)=>{k.listen(v,x=>{try{g(x)}catch(b){setTimeout(()=>{throw b},0)}})};return E(f,vl.EventType.OPEN,()=>{y||(ae(Kt,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),E(f,vl.EventType.CLOSE,()=>{y||(y=!0,ae(Kt,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(f))}),E(f,vl.EventType.ERROR,k=>{y||(y=!0,pa(Kt,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new ne(H.UNAVAILABLE,"The operation could not be completed")))}),E(f,vl.EventType.MESSAGE,k=>{var v;if(!y){const g=k.data[0];ze(!!g,16349);const x=g,b=(x==null?void 0:x.error)||((v=x[0])==null?void 0:v.error);if(b){ae(Kt,`RPC '${e}' stream ${s} received error:`,b);const T=b.status;let M=function(A){const C=bt[A];if(C!==void 0)return Oj(C)}(T),I=b.message;M===void 0&&(M=H.INTERNAL,I="Unknown error status: "+T+" with message "+b.message),y=!0,N.a_(new ne(M,I)),f.close()}else ae(Kt,`RPC '${e}' stream ${s} received:`,g),N.u_(g)}}),E(l,Z_.STAT_EVENT,k=>{k.stat===Tp.PROXY?ae(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Tp.NOPROXY&&ae(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){return new oD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,r,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="PersistentStream";class Jj{constructor(e,r,n,s,o,a,l,c){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xj(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===H.RESOURCE_EXHAUSTED?(gs(r.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new ne(H.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ae(Vv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(ae(Vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n6 extends Jj{constructor(e,r,n,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=cD(this.serializer,e),n=function(o){if(!("targetChange"in o))return Ee.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?Pn(a.readTime):Ee.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Fp(this.serializer),r.addTarget=function(o,a){let l;const c=a.target;if(l=Dp(c)?{documents:hD(o,c)}:{query:mD(o,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Uj(o,a.resumeToken);const d=Lp(o,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ee.min())>0){l.readTime=Yd(o,a.snapshotVersion.toTimestamp());const d=Lp(o,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=pD(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Fp(this.serializer),r.removeTarget=e,this.q_(r)}}class s6 extends Jj{constructor(e,r,n,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=dD(e.writeResults,e.commitTime),n=Pn(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Fp(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>uD(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{}class o6 extends i6{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Op(r,n),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(H.UNKNOWN,o.toString())})}Ho(e,r,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Op(r,n),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ne(H.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class a6{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gs(r),this.aa=!1):ae("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class l6{constructor(e,r,n,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{fo(this)&&(ae(ro,"Restarting streams for network reachability change."),await async function(c){const d=Se(c);d.Ea.add(4),await Oc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Jh(d)}(this))})}),this.Ra=new a6(n,s)}}async function Jh(t){if(fo(t))for(const e of t.da)await e(!0)}async function Oc(t){for(const e of t.da)await e(!1)}function Zj(t,e){const r=Se(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),U0(r)?F0(r):Pa(r).O_()&&V0(r,e))}function O0(t,e){const r=Se(t),n=Pa(r);r.Ia.delete(e),n.O_()&&eE(r,e),r.Ia.size===0&&(n.O_()?n.L_():fo(r)&&r.Ra.set("Unknown"))}function V0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Pa(t).Y_(e)}function eE(t,e){t.Va.Ue(e),Pa(t).Z_(e)}function F0(t){t.Va=new rD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pa(t).start(),t.Ra.ua()}function U0(t){return fo(t)&&!Pa(t).x_()&&t.Ia.size>0}function fo(t){return Se(t).Ea.size===0}function tE(t){t.Va=void 0}async function c6(t){t.Ra.set("Online")}async function u6(t){t.Ia.forEach((e,r)=>{V0(t,e)})}async function d6(t,e){tE(t),U0(t)?(t.Ra.ha(e),F0(t)):t.Ra.set("Unknown")}async function h6(t,e,r){if(t.Ra.set("Online"),e instanceof Fj&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(n){ae(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Jd(t,n)}else if(e instanceof sd?t.Va.Ze(e):e instanceof Vj?t.Va.st(e):t.Va.tt(e),!r.isEqual(Ee.min()))try{const n=await Yj(t.localStore);r.compareTo(n)>=0&&await function(o,a){const l=o.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),eE(o,c);const f=new Vs(h.target,c,d,h.sequenceNumber);V0(o,f)}),o.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){ae(ro,"Failed to raise snapshot:",n),await Jd(t,n)}}async function Jd(t,e,r){if(!Aa(e))throw e;t.Ea.add(1),await Oc(t),t.Ra.set("Offline"),r||(r=()=>Yj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae(ro,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Jh(t)})}function rE(t,e){return e().catch(r=>Jd(t,r,e))}async function Zh(t){const e=Se(t),r=si(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j0;for(;m6(e);)try{const s=await KD(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,f6(e,s)}catch(s){await Jd(e,s)}nE(e)&&sE(e)}function m6(t){return fo(t)&&t.Ta.length<10}function f6(t,e){t.Ta.push(e);const r=si(t);r.O_()&&r.X_&&r.ea(e.mutations)}function nE(t){return fo(t)&&!si(t).x_()&&t.Ta.length>0}function sE(t){si(t).start()}async function p6(t){si(t).ra()}async function g6(t){const e=si(t);for(const r of t.Ta)e.ea(r.mutations)}async function x6(t,e,r){const n=t.Ta.shift(),s=I0.from(n,e,r);await rE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zh(t)}async function w6(t,e){e&&si(t).X_&&await async function(n,s){if(function(a){return Z5(a)&&a!==H.ABORTED}(s.code)){const o=n.Ta.shift();si(n).B_(),await rE(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Zh(n)}}(t,e),nE(t)&&sE(t)}async function Fv(t,e){const r=Se(t);r.asyncQueue.verifyOperationInProgress(),ae(ro,"RemoteStore received new credentials");const n=fo(r);r.Ea.add(3),await Oc(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Jh(r)}async function y6(t,e){const r=Se(t);e?(r.Ea.delete(2),await Jh(r)):e||(r.Ea.add(2),await Oc(r),r.Ra.set("Unknown"))}function Pa(t){return t.ma||(t.ma=function(r,n,s){const o=Se(r);return o.sa(),new n6(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:c6.bind(null,t),t_:u6.bind(null,t),r_:d6.bind(null,t),H_:h6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),U0(t)?F0(t):t.Ra.set("Unknown")):(await t.ma.stop(),tE(t))})),t.ma}function si(t){return t.fa||(t.fa=function(r,n,s){const o=Se(r);return o.sa(),new s6(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:p6.bind(null,t),r_:w6.bind(null,t),ta:g6.bind(null,t),na:x6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zh(t)):(await t.fa.stop(),t.Ta.length>0&&(ae(ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,r,n,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,o){const a=Date.now()+n,l=new z0(e,r,a,s,o);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $0(t,e){if(gs("AsyncQueue",`${e}: ${t}`),Aa(t))return new ne(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static emptySet(e){return new ta(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||ge.comparator(r.key,n.key):(r,n)=>ge.comparator(r.key,n.key),this.keyedMap=bl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ta;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this.ga=new ct(ge.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Na{constructor(e,r,n,s,o,a,l,c,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new Na(e,r,ta.emptySet(r),a,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class b6{constructor(){this.queries=zv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=Se(r),o=s.queries;s.queries=zv(),o.forEach((a,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new ne(H.ABORTED,"Firestore shutting down"))}}function zv(){return new mo(t=>jj(t),qh)}async function B0(t,e){const r=Se(t);let n=3;const s=e.query;let o=r.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new v6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await r.onListen(s,!0);break;case 1:o.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=$0(a,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.Sa.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&H0(r)}async function q0(t,e){const r=Se(t),n=e.query;let s=3;const o=r.queries.get(n);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function N6(t,e){const r=Se(t);let n=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.Sa)l.Fa(s)&&(n=!0);a.wa=s}}n&&H0(r)}function _6(t,e,r){const n=Se(t),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(r);n.queries.delete(e)}function H0(t){t.Ca.forEach(e=>{e.next()})}var $p,$v;($v=$p||($p={})).Ma="default",$v.Cache="cache";class W0{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Na(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.key=e}}class oE{constructor(e){this.key=e}}class j6{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=Ej(e),this.tu=new ta(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new Uv,s=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Hh(this.query,f)?f:null,N=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let k=!1;m&&y?m.data.isEqual(y.data)?N!==E&&(n.track({type:3,doc:y}),k=!0):this.su(m,y)||(n.track({type:2,doc:y}),k=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!m&&y?(n.track({type:0,doc:y}),k=!0):m&&!y&&(n.track({type:1,doc:m}),k=!0,(c||d)&&(l=!0)),k&&(y?(a=a.add(y),o=E?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),n.track({type:1,doc:h})}return{tu:a,iu:n,Cs:l,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(y,N){const E=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:k})}};return E(y)-E(N)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(n),s=s??!1;const l=r&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new Na(this.query,e.tu,o,a,e.mutatedKeys,c===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Uv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new oE(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new iE(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=De();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const G0="SyncEngine";class E6{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class S6{constructor(e){this.key=e,this.hu=!1}}class k6{constructor(e,r,n,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new mo(l=>jj(l),qh),this.Iu=new Map,this.Eu=new Set,this.du=new ct(ge.comparator),this.Au=new Map,this.Ru=new P0,this.Vu={},this.mu=new Map,this.fu=ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C6(t,e,r=!0){const n=hE(t);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await aE(n,e,r,!0),s}async function T6(t,e){const r=hE(t);await aE(r,e,!0,!1)}async function aE(t,e,r,n){const s=await QD(t.localStore,Rn(e)),o=s.targetId,a=t.sharedClientState.addLocalQueryTarget(o,r);let l;return n&&(l=await I6(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&Zj(t.remoteStore,s),l}async function I6(t,e,r,n,s){t.pu=(f,m,y)=>async function(E,k,v,g){let x=k.view.ru(v);x.Cs&&(x=await Dv(E.localStore,k.query,!1).then(({documents:I})=>k.view.ru(I,x)));const b=g&&g.targetChanges.get(k.targetId),T=g&&g.targetMismatches.get(k.targetId)!=null,M=k.view.applyChanges(x,E.isPrimaryClient,b,T);return qv(E,k.targetId,M.au),M.snapshot}(t,f,m,y);const o=await Dv(t.localStore,e,!0),a=new j6(e,o.Qs),l=a.ru(o.documents),c=Lc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);qv(t,r,d.au);const h=new E6(e,r,a);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function A6(t,e,r){const n=Se(t),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter(a=>!qh(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Up(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&O0(n.remoteStore,s.targetId),Bp(n,s.targetId)}).catch(Ia)):(Bp(n,s.targetId),await Up(n.localStore,s.targetId,!0))}async function R6(t,e){const r=Se(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),O0(r.remoteStore,n.targetId))}async function P6(t,e,r){const n=U6(t);try{const s=await function(a,l){const c=Se(a),d=Ze.now(),h=l.reduce((y,N)=>y.add(N.key),De());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let N=xs(),E=De();return c.Ns.getEntries(y,h).next(k=>{N=k,N.forEach((v,g)=>{g.isValidDocument()||(E=E.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,N)).next(k=>{f=k;const v=[];for(const g of l){const x=K5(g,f.get(g.key).overlayedDocument);x!=null&&v.push(new pi(g.key,x,gj(x.value.mapValue),ar.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,v,l)}).next(k=>{m=k;const v=k.applyToLocalDocumentSet(f,E);return c.documentOverlayCache.saveOverlays(y,k.batchId,v)})}).then(()=>({batchId:m.batchId,changes:kj(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new ct(Pe)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(n,s.batchId,r),await Vc(n,s.changes),await Zh(n.remoteStore)}catch(s){const o=$0(s,"Failed to persist write");r.reject(o)}}async function lE(t,e){const r=Se(t);try{const n=await WD(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Au.get(o);a&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ze(a.hu,14607):s.removedDocuments.size>0&&(ze(a.hu,42227),a.hu=!1))}),await Vc(r,n,e)}catch(n){await Ia(n)}}function Bv(t,e,r){const n=Se(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Se(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&H0(c)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function D6(t,e,r){const n=Se(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),o=s&&s.key;if(o){let a=new ct(ge.comparator);a=a.insert(o,Xt.newNoDocument(o,Ee.min()));const l=De().add(o),c=new Yh(Ee.min(),new Map,new ct(Pe),a,l);await lE(n,c),n.du=n.du.remove(o),n.Au.delete(e),K0(n)}else await Up(n.localStore,e,!1).then(()=>Bp(n,e,r)).catch(Ia)}async function M6(t,e){const r=Se(t),n=e.batch.batchId;try{const s=await HD(r.localStore,e);uE(r,n,null),cE(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Vc(r,s)}catch(s){await Ia(s)}}async function L6(t,e,r){const n=Se(t);try{const s=await function(a,l){const c=Se(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(ze(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(n.localStore,e);uE(n,e,r),cE(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Vc(n,s)}catch(s){await Ia(s)}}function cE(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function uE(t,e,r){const n=Se(t);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function Bp(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||dE(t,n)})}function dE(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(O0(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),K0(t))}function qv(t,e,r){for(const n of r)n instanceof iE?(t.Ru.addReference(n.key,e),O6(t,n)):n instanceof oE?(ae(G0,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||dE(t,n.key)):be(19791,{wu:n})}function O6(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(ae(G0,"New document in limbo: "+r),t.Eu.add(n),K0(t))}function K0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new ge(Ke.fromString(e)),n=t.fu.next();t.Au.set(n,new S6(r)),t.du=t.du.insert(r,n),Zj(t.remoteStore,new Vs(Rn(Bh(r.path)),n,"TargetPurposeLimboResolution",Uh.ce))}}async function Vc(t,e,r){const n=Se(t),s=[],o=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{a.push(n.pu(c,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const f=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=M0.As(c.targetId,d);o.push(f)}}))}),await Promise.all(a),n.Pu.H_(s),await async function(c,d){const h=Se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(d,m=>K.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>K.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Aa(f))throw f;ae(L0,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),N=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(m,E)}}}(n.localStore,o))}async function V6(t,e){const r=Se(t);if(!r.currentUser.isEqual(e)){ae(G0,"User change. New user:",e.toKey());const n=await Qj(r.localStore,e);r.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(c=>{c.reject(new ne(H.CANCELLED,a))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Vc(r,n.Ls)}}function F6(t,e){const r=Se(t),n=r.Au.get(e);if(n&&n.hu)return De().add(n.key);{let s=De();const o=r.Iu.get(e);if(!o)return s;for(const a of o){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function hE(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D6.bind(null,e),e.Pu.H_=N6.bind(null,e.eventManager),e.Pu.yu=_6.bind(null,e.eventManager),e}function U6(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L6.bind(null,e),e}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return qD(this.persistence,new zD,e.initialUser,this.serializer)}Cu(e){return new Kj(D0.mi,this.serializer)}Du(e){return new XD}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class z6 extends Zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){ze(this.persistence.referenceDelegate instanceof Xd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new SD(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new Kj(n=>Xd.mi(n,r),this.serializer)}}class qp{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Bv(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=V6.bind(null,this.syncEngine),await y6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b6}()}createDatastore(e){const r=Xh(e.databaseInfo.databaseId),n=function(o){return new r6(o)}(e.databaseInfo);return function(o,a,l,c){return new o6(o,a,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,o,a,l){return new l6(n,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>Bv(this.syncEngine,r,0),function(){return Ov.v()?new Ov:new JD}())}createSyncEngine(e,r){return function(s,o,a,l,c,d,h){const f=new k6(s,o,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=Se(s);ae(ro,"RemoteStore shutting down."),o.Ea.add(5),await Oc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}qp.provider={build:()=>new qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="FirestoreClient";class $6{constructor(e,r,n,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Qt.UNAUTHENTICATED,this.clientId=_0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async a=>{ae(ii,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ae(ii,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=$0(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function df(t,e){t.asyncQueue.verifyOperationInProgress(),ae(ii,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await Qj(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hv(t,e){t.asyncQueue.verifyOperationInProgress();const r=await B6(t);ae(ii,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Fv(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>Fv(e.remoteStore,s)),t._onlineComponents=e}async function B6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae(ii,"Using user provided OfflineComponentProvider");try{await df(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;pa("Error using user provided cache. Falling back to memory cache: "+r),await df(t,new Zd)}}else ae(ii,"Using default OfflineComponentProvider"),await df(t,new z6(void 0));return t._offlineComponents}async function mE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae(ii,"Using user provided OnlineComponentProvider"),await Hv(t,t._uninitializedComponentsProvider._online)):(ae(ii,"Using default OnlineComponentProvider"),await Hv(t,new qp))),t._onlineComponents}function q6(t){return mE(t).then(e=>e.syncEngine)}async function eh(t){const e=await mE(t),r=e.eventManager;return r.onListen=C6.bind(null,e.syncEngine),r.onUnlisten=A6.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=T6.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=R6.bind(null,e.syncEngine),r}function H6(t,e,r={}){const n=new os;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,d){const h=new Q0({next:m=>{h.Nu(),a.enqueueAndForget(()=>q0(o,f));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new ne(H.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new ne(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new W0(Bh(l.path),h,{includeMetadataChanges:!0,qa:!0});return B0(o,f)}(await eh(t),t.asyncQueue,e,r,n)),n.promise}function W6(t,e,r={}){const n=new os;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,d){const h=new Q0({next:m=>{h.Nu(),a.enqueueAndForget(()=>q0(o,f)),m.fromCache&&c.source==="server"?d.reject(new ne(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new W0(l,h,{includeMetadataChanges:!0,qa:!0});return B0(o,f)}(await eh(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firestore.googleapis.com",Gv=!0;class Kv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pE,this.ssl=Gv}else this.host=e.host,this.ssl=e.ssl??Gv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Gj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jD)throw new ne(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fE(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class em{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ZP;switch(n.type){case"firstParty":return new n5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ne(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Wv.get(r);n&&(ae("ComponentProvider","Removing Datastore"),Wv.delete(r),n.terminate())}(this),Promise.resolve()}}function G6(t,e,r,n={}){var d;t=or(t,em);const s=hi(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;s&&(s0(`https://${l}`),i0("Firestore",!0)),o.host!==pE&&o.host!==l&&pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:s,emulatorOptions:n};if(!Ln(c,a)&&(t._setSettings(c),n.mockUserToken)){let h,f;if(typeof n.mockUserToken=="string")h=n.mockUserToken,f=Qt.MOCK_USER;else{h=jN(n.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new ne(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qt(m)}t._authCredentials=new e5(new nj(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class gt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Dc(r,gt._jsonSchema))return new gt(e,n||null,new ge(Ke.fromString(r.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:Et("string",gt._jsonSchemaVersion),referencePath:Et("string")};class Ys extends bs{constructor(e,r,n){super(e,r,Bh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ge(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function we(t,e,...r){if(t=We(t),sj("collection","path",e),t instanceof em){const n=Ke.fromString(e,...r);return av(n),new Ys(t,null,n)}{if(!(t instanceof gt||t instanceof Ys))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ke.fromString(e,...r));return av(n),new Ys(t.firestore,null,n)}}function fe(t,e,...r){if(t=We(t),arguments.length===1&&(e=_0.newId()),sj("doc","path",e),t instanceof em){const n=Ke.fromString(e,...r);return ov(n),new gt(t,null,new ge(n))}{if(!(t instanceof gt||t instanceof Ys))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ke.fromString(e,...r));return ov(n),new gt(t.firestore,t instanceof Ys?t.converter:null,new ge(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="AsyncQueue";class Yv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xj(this,"async_queue_retry"),this._c=()=>{const n=uf();n&&ae(Qv,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=uf();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=uf();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new os;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Aa(e))throw e;ae(Qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,gs("INTERNAL UNHANDLED ERROR: ",Xv(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=z0.createAndSchedule(this,e,r,n,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&be(47125,{Pc:Xv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function Xv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Vn extends em{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Yv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yv(e),this._firestoreClient=void 0,await e}}}function K6(t,e){const r=typeof t=="object"?t:Ah(),n=typeof t=="string"?t:Wd,s=mi(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=bN("firestore");o&&G6(s,...o)}return s}function Fc(t){if(t._terminated)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Q6(t),t._firestoreClient}function Q6(t){var n,s,o;const e=t._freezeSettings(),r=function(l,c,d,h){return new b5(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $6(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(Bt.fromBase64String(e))}catch(r){throw new ne(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Vr(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dc(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:Et("string",Vr._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ne(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ne(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ne(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(Dc(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:Et("string",Dn._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dc(e,Mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Mn(e.vectorValues);throw new ne(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:Et("string",Mn._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=/^__.*__$/;class X6{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new pi(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mc(e,this.data,r,this.fieldTransforms)}}class gE{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new pi(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function xE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:t})}}class tm{constructor(e,r,n,s,o,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xE(this.Ac)&&Y6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J6{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Xh(e)}Cc(e,r,n,s=!1){return new tm({Ac:e,methodName:r,Dc:n,path:Ft.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zc(t){const e=t._freezeSettings(),r=Xh(t._databaseId);return new J6(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Y0(t,e,r,n,s,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,r,s);tx("Data must be an object, but it was:",a,n);const l=bE(n,a);let c,d;if(o.merge)c=new kr(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const m=Hp(e,f,r);if(!a.contains(m))throw new ne(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_E(h,m)||h.push(m)}c=new kr(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new X6(new pr(l),c,d)}class rm extends po{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rm}}function wE(t,e,r){return new tm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class X0 extends po{_toFieldTransform(e){return new Gh(e.path,new pc)}isEqual(e){return e instanceof X0}}class J0 extends po{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=wE(this,e,!0),n=this.vc.map(o=>go(o,r)),s=new ya(n);return new Gh(e.path,s)}isEqual(e){return e instanceof J0&&Ln(this.vc,e.vc)}}class Z0 extends po{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=wE(this,e,!0),n=this.vc.map(o=>go(o,r)),s=new va(n);return new Gh(e.path,s)}isEqual(e){return e instanceof Z0&&Ln(this.vc,e.vc)}}class ex extends po{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new gc(e.serializer,Ij(e.serializer,this.Fc));return new Gh(e.path,r)}isEqual(e){return e instanceof ex&&this.Fc===e.Fc}}function yE(t,e,r,n){const s=t.Cc(1,e,r);tx("Data must be an object, but it was:",s,n);const o=[],a=pr.empty();fi(n,(c,d)=>{const h=rx(e,c,r);d=We(d);const f=s.yc(h);if(d instanceof rm)o.push(h);else{const m=go(d,f);m!=null&&(o.push(h),a.set(h,m))}});const l=new kr(o);return new gE(a,l,s.fieldTransforms)}function vE(t,e,r,n,s,o){const a=t.Cc(1,e,r),l=[Hp(e,n,r)],c=[s];if(o.length%2!=0)throw new ne(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(Hp(e,o[m])),c.push(o[m+1]);const d=[],h=pr.empty();for(let m=l.length-1;m>=0;--m)if(!_E(d,l[m])){const y=l[m];let N=c[m];N=We(N);const E=a.yc(y);if(N instanceof rm)d.push(y);else{const k=go(N,E);k!=null&&(d.push(y),h.set(y,k))}}const f=new kr(d);return new gE(h,f,a.fieldTransforms)}function Z6(t,e,r,n=!1){return go(r,t.Cc(n?4:3,e))}function go(t,e){if(NE(t=We(t)))return tx("Unsupported field value:",e,t),bE(t,e);if(t instanceof po)return function(n,s){if(!xE(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const o=[];let a=0;for(const l of n){let c=go(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(n,s){if((n=We(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Ij(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Ze.fromDate(n);return{timestampValue:Yd(s.serializer,o)}}if(n instanceof Ze){const o=new Ze(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yd(s.serializer,o)}}if(n instanceof Dn)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vr)return{bytesValue:Uj(s.serializer,n._byteString)};if(n instanceof gt){const o=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:R0(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Mn)return function(a,l){return{mapValue:{fields:{[mj]:{stringValue:pj},[Gd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return T0(l.serializer,d)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Fh(n)}`)}(t,e)}function bE(t,e){const r={};return aj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(t,(n,s)=>{const o=go(s,e.mc(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function NE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof Dn||t instanceof Vr||t instanceof gt||t instanceof po||t instanceof Mn)}function tx(t,e,r){if(!NE(r)||!ij(r)){const n=Fh(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Hp(t,e,r){if((e=We(e))instanceof Uc)return e._internalPath;if(typeof e=="string")return rx(t,e);throw th("Field path arguments must be of type string or ",t,!1,void 0,r)}const eM=new RegExp("[~\\*/\\[\\]]");function rx(t,e,r){if(e.search(eM)>=0)throw th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Uc(...e.split("."))._internalPath}catch{throw th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function th(t,e,r,n,s){const o=n&&!n.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${n}`),a&&(c+=` in document ${s}`),c+=")"),new ne(H.INVALID_ARGUMENT,l+t+c)}function _E(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,r,n,s,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class tM extends jE{data(){return super.data()}}function nm(t,e){return typeof e=="string"?rx(t,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nx{}class sx extends nx{}function _e(t,e,...r){let n=[];e instanceof nx&&n.push(e),n=n.concat(r),function(o){const a=o.filter(c=>c instanceof ix).length,l=o.filter(c=>c instanceof sm).length;if(a>1||a>0&&l>0)throw new ne(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class sm extends sx{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new sm(e,r,n)}_apply(e){const r=this._parse(e);return SE(e._query,r),new bs(e.firestore,e.converter,Mp(e._query,r))}_parse(e){const r=zc(e.firestore);return function(o,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){e1(f,h);const N=[];for(const E of f)N.push(Zv(c,o,E));m={arrayValue:{values:N}}}else m=Zv(c,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||e1(f,h),m=Z6(l,a,f,h==="in"||h==="not-in");return _t.create(d,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function ve(t,e,r){const n=e,s=nm("where",t);return sm._create(s,n,r)}class ix extends nx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ix(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:pn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,o){let a=s;const l=o.getFlattenedFilters();for(const c of l)SE(a,c),a=Mp(a,c)}(e._query,r),new bs(e.firestore,e.converter,Mp(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ox extends sx{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ox(e,r)}_apply(e){const r=function(s,o,a){if(s.startAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fc(o,a)}(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,function(s,o){const a=s.explicitOrderBy.concat([o]);return new Ra(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function He(t,e="asc"){const r=e,n=nm("orderBy",t);return ox._create(n,r)}class ax extends sx{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new ax(e,r,n)}_apply(e){return new bs(e.firestore,e.converter,Qd(e._query,this._limit,this._limitType))}}function Wr(t){return u5("limit",t),ax._create("limit",t,"F")}function Zv(t,e,r){if(typeof(r=We(r))=="string"){if(r==="")throw new ne(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_j(e)&&r.indexOf("/")!==-1)throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Ke.fromString(r));if(!ge.isDocumentKey(n))throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return pv(t,new ge(n))}if(r instanceof gt)return pv(t,r._key);throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(r)}.`)}function e1(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SE(t,e){const r=function(s,o){for(const a of s)for(const l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class rM{convertValue(e,r="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return fi(e,(s,o)=>{n[s]=this.convertValue(o,r)}),n}convertVectorValue(e){var n,s,o;const r=(o=(s=(n=e.fields)==null?void 0:n[Gd].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>wt(a.doubleValue));return new Mn(r)}convertGeoPoint(e){return new Dn(wt(e.latitude),wt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=$h(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const r=ti(e);return new Ze(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Ke.fromString(e);ze(Wj(n),9688,{name:e});const s=new hc(n.get(1),n.get(3)),o=new ge(n.popFirst(5));return s.isEqual(r)||gs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class _l{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bi extends jE{constructor(e,r,n,s,o,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(nm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Bi._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bi._jsonSchema={type:Et("string",Bi._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class id extends Bi{data(e={}){return super.data(e)}}class qi{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new _l(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new id(this._firestore,this._userDataWriter,n.key,n,new _l(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ne(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new id(s._firestore,s._userDataWriter,l.doc.key,l.doc,new _l(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new id(s._firestore,s._userDataWriter,l.doc.key,l.doc,new _l(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:nM(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){t=or(t,gt);const e=or(t.firestore,Vn);return H6(Fc(e),t._key).then(r=>kE(e,t,r))}qi._jsonSchemaVersion="firestore/querySnapshot/1.0",qi._jsonSchema={type:Et("string",qi._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class cx extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,r)}}function Ce(t){t=or(t,bs);const e=or(t.firestore,Vn),r=Fc(e),n=new cx(e);return EE(t._query),W6(r,t._query).then(s=>new qi(e,n,t,s))}function xc(t,e,r){t=or(t,gt);const n=or(t.firestore,Vn),s=lx(t.converter,e,r);return $c(n,[Y0(zc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ar.none())])}function Ue(t,e,r,...n){t=or(t,gt);const s=or(t.firestore,Vn),o=zc(s);let a;return a=typeof(e=We(e))=="string"||e instanceof Uc?vE(o,"updateDoc",t._key,e,r,n):yE(o,"updateDoc",t._key,e),$c(s,[a.toMutation(t._key,ar.exists(!0))])}function Ur(t){return $c(or(t.firestore,Vn),[new Qh(t._key,ar.none())])}function Ir(t,e){const r=or(t.firestore,Vn),n=fe(t),s=lx(t.converter,e);return $c(r,[Y0(zc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,ar.exists(!1))]).then(()=>n)}function Wp(t,...e){var c,d,h;t=We(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Jv(e[n])||(r=e[n++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(Jv(e[n])){const f=e[n];e[n]=(c=f.next)==null?void 0:c.bind(f),e[n+1]=(d=f.error)==null?void 0:d.bind(f),e[n+2]=(h=f.complete)==null?void 0:h.bind(f)}let o,a,l;if(t instanceof gt)a=or(t.firestore,Vn),l=Bh(t._key.path),o={next:f=>{e[n]&&e[n](kE(a,t,f))},error:e[n+1],complete:e[n+2]};else{const f=or(t,bs);a=or(f.firestore,Vn),l=f._query;const m=new cx(a);o={next:y=>{e[n]&&e[n](new qi(a,m,f,y))},error:e[n+1],complete:e[n+2]},EE(t._query)}return function(m,y,N,E){const k=new Q0(E),v=new W0(y,k,N);return m.asyncQueue.enqueueAndForget(async()=>B0(await eh(m),v)),()=>{k.Nu(),m.asyncQueue.enqueueAndForget(async()=>q0(await eh(m),v))}}(Fc(a),l,s,o)}function $c(t,e){return function(n,s){const o=new os;return n.asyncQueue.enqueueAndForget(async()=>P6(await q6(n),s,o)),o.promise}(Fc(t),e)}function kE(t,e,r){const n=r.docs.get(e._key),s=new cx(t);return new Bi(t,s,e._key,n,new _l(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=zc(e)}set(e,r,n){this._verifyNotCommitted();const s=hf(e,this._firestore),o=lx(s.converter,r,n),a=Y0(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,ar.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const o=hf(e,this._firestore);let a;return a=typeof(r=We(r))=="string"||r instanceof Uc?vE(this._dataReader,"WriteBatch.update",o._key,r,n,s):yE(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(a.toMutation(o._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=hf(e,this._firestore);return this._mutations=this._mutations.concat(new Qh(r._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hf(t,e){if((t=We(t)).firestore!==e)throw new ne(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function je(){return new X0("serverTimestamp")}function rh(...t){return new J0("arrayUnion",t)}function iM(...t){return new Z0("arrayRemove",t)}function nh(t){return new ex("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){return Fc(t=or(t,Vn)),new sM(t,e=>$c(t,e))}(function(e,r=!0){(function(s){Ta=s})(uo),fn(new qr("firestore",(n,{instanceIdentifier:s,options:o})=>{const a=n.getProvider("app").getImmediate(),l=new Vn(new t5(n.getProvider("auth-internal")),new s5(a,n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(d.options.projectId,h)}(a,s),a);return o={useFetchStreams:r,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),br(rv,nv,e),br(rv,nv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebasestorage.googleapis.com",TE="storageBucket",oM=2*60*1e3,aM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends Kr{constructor(e,r,n=0){super(mf(e),`Firebase Storage: ${r} (${mf(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function mf(t){return"storage/"+t}function ux(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(ut.UNKNOWN,t)}function lM(t){return new dt(ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cM(t){return new dt(ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ut.UNAUTHENTICATED,t)}function dM(){return new dt(ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hM(t){return new dt(ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function mM(){return new dt(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fM(){return new dt(ut.CANCELED,"User canceled the upload/download.")}function pM(t){return new dt(ut.INVALID_URL,"Invalid URL '"+t+"'.")}function gM(t){return new dt(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function xM(){return new dt(ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TE+"' property when initializing the app?")}function wM(){return new dt(ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yM(){return new dt(ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vM(t){return new dt(ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ih(t){return new dt(ut.INVALID_ARGUMENT,t)}function IE(){return new dt(ut.APP_DELETED,"The Firebase app was deleted.")}function AE(t){return new dt(ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zl(t,e){return new dt(ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ll(t){throw new dt(ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=xr.makeFromUrl(e,r)}catch{return new xr(e,"")}if(n.path==="")return n;throw gM(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const h="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),N={bucket:1,path:3},E=r===CE?"(?:storage.googleapis.com|storage.cloud.google.com)":r,k="([^?#]*)",v=new RegExp(`^https?://${E}/${s}/${k}`,"i"),x=[{regex:l,indices:c,postModify:o},{regex:y,indices:N,postModify:d},{regex:v,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<x.length;b++){const T=x[b],M=T.regex.exec(e);if(M){const I=M[T.indices.bucket];let j=M[T.indices.path];j||(j=""),n=new xr(I,j),T.postModify(n);break}}if(n==null)throw pM(e);return n}}class bM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t,e,r){let n=1,s=null,o=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function f(k){s=setTimeout(()=>{s=null,t(y,c())},k)}function m(){o&&clearTimeout(o)}function y(k,...v){if(d){m();return}if(k){m(),h.call(null,k,...v);return}if(c()||a){m(),h.call(null,k,...v);return}n<64&&(n*=2);let x;l===1?(l=2,x=0):x=(n+Math.random())*1e3,f(x)}let N=!1;function E(k){N||(N=!0,m(),!d&&(s!==null?(k||(l=2),clearTimeout(s),f(0)):k||(l=1)))}return f(0),o=setTimeout(()=>{a=!0,E(!0)},r),E}function _M(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){return t!==void 0}function EM(t){return typeof t=="object"&&!Array.isArray(t)}function dx(t){return typeof t=="string"||t instanceof String}function t1(t){return hx()&&t instanceof Blob}function hx(){return typeof Blob<"u"}function r1(t,e,r,n){if(n<e)throw ih(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw ih(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function RE(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Hi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hi||(Hi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,r,n,s,o,a,l,c,d,h,f,m=!0,y=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,E)=>{this.resolve_=N,this.reject_=E,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Ru(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const l=o.getErrorCode()===Hi.NO_ERROR,c=o.getStatus();if(!l||SM(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===Hi.ABORT;n(!1,new Ru(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;n(!0,new Ru(d,o))})},r=(n,s)=>{const o=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());jM(c)?o(c):o()}catch(c){a(c)}else if(l!==null){const c=ux();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?IE():fM();a(c)}else{const c=mM();a(c)}};this.canceled_?r(!1,new Ru(!1,null,!0)):this.backoffId_=NM(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_M(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ru{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function CM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function TM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function AM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function RM(t,e,r,n,s,o,a=!0,l=!1){const c=RE(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return IM(h,e),CM(h,r),TM(h,o),AM(h,n),new kM(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DM(...t){const e=PM();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(hx())return new Blob(t);throw new dt(ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MM(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t){if(typeof atob>"u")throw vM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ff{constructor(e,r){this.data=e,this.contentType=r||null}}function PE(t,e){switch(t){case on.RAW:return new ff(DE(e));case on.BASE64:case on.BASE64URL:return new ff(ME(t,e));case on.DATA_URL:return new ff(VM(e),FM(e))}throw ux()}function DE(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const o=n,a=t.charCodeAt(++r);n=65536|(o&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function OM(t){let e;try{e=decodeURIComponent(t)}catch{throw zl(on.DATA_URL,"Malformed data URL.")}return DE(e)}function ME(t,e){switch(t){case on.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw zl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case on.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw zl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=LM(e)}catch(s){throw s.message.includes("polyfill")?s:zl(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class LE{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw zl(on.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=UM(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function VM(t){const e=new LE(t);return e.base64?ME(on.BASE64,e.rest):OM(e.rest)}function FM(t){return new LE(t).contentType}function UM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,r){let n=0,s="";t1(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(t1(this.data_)){const n=this.data_,s=MM(n,e,r);return s===null?null:new Xn(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Xn(n,!0)}}static getBlob(...e){if(hx()){const r=e.map(n=>n instanceof Xn?n.data_:n);return new Xn(DM.apply(null,r))}else{const r=e.map(a=>dx(a)?PE(on.RAW,a).data:a.data_);let n=0;r.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let o=0;return r.forEach(a=>{for(let l=0;l<a.length;l++)s[o++]=a[l]}),new Xn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){let e;try{e=JSON.parse(t)}catch{return null}return EM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $M(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function VE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t,e){return e}class rr{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||BM}}let Pu=null;function qM(t){return!dx(t)||t.length<2?t:VE(t)}function FE(){if(Pu)return Pu;const t=[];t.push(new rr("bucket")),t.push(new rr("generation")),t.push(new rr("metageneration")),t.push(new rr("name","fullPath",!0));function e(o,a){return qM(a)}const r=new rr("name");r.xform=e,t.push(r);function n(o,a){return a!==void 0?Number(a):a}const s=new rr("size");return s.xform=n,t.push(s),t.push(new rr("timeCreated")),t.push(new rr("updated")),t.push(new rr("md5Hash",null,!0)),t.push(new rr("cacheControl",null,!0)),t.push(new rr("contentDisposition",null,!0)),t.push(new rr("contentEncoding",null,!0)),t.push(new rr("contentLanguage",null,!0)),t.push(new rr("contentType",null,!0)),t.push(new rr("metadata","customMetadata",!0)),Pu=t,Pu}function HM(t,e){function r(){const n=t.bucket,s=t.fullPath,o=new xr(n,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:r})}function WM(t,e,r){const n={};n.type="file";const s=r.length;for(let o=0;o<s;o++){const a=r[o];n[a.local]=a.xform(n,e[a.server])}return HM(n,t),n}function UE(t,e,r){const n=OE(e);return n===null?null:WM(t,n,r)}function GM(t,e,r,n){const s=OE(e);if(s===null||!dx(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(d=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),y=im(m,r,n),N=RE({alt:"media",token:d});return y+N})[0]}function KM(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const o=e[s];o.writable&&(r[o.server]=t[o.local])}return JSON.stringify(r)}class mx{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){if(!t)throw ux()}function QM(t,e){function r(n,s){const o=UE(t,s,e);return zE(o!==null),o}return r}function YM(t,e){function r(n,s){const o=UE(t,s,e);return zE(o!==null),GM(o,s,t.host,t._protocol)}return r}function $E(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=dM():s=uM():r.getStatus()===402?s=cM(t.bucket):r.getStatus()===403?s=hM(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function BE(t){const e=$E(t);function r(n,s){let o=e(n,s);return n.getStatus()===404&&(o=lM(t.path)),o.serverResponse=s.serverResponse,o}return r}function XM(t,e,r){const n=e.fullServerUrl(),s=im(n,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,l=new mx(s,o,YM(t,r),a);return l.errorHandler=BE(e),l}function JM(t,e){const r=e.fullServerUrl(),n=im(r,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function a(c,d){}const l=new mx(n,s,a,o);return l.successCodes=[200,204],l.errorHandler=BE(e),l}function ZM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eL(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=ZM(null,e)),n}function tL(t,e,r,n,s){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let x="";for(let b=0;b<2;b++)x=x+Math.random().toString().slice(2);return x}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=eL(e,n,s),h=KM(d,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",y=Xn.getBlob(f,n,m);if(y===null)throw wM();const N={name:d.fullPath},E=im(o,t.host,t._protocol),k="POST",v=t.maxUploadRetryTime,g=new mx(E,k,QM(t,r),v);return g.urlParams=N,g.headers=a,g.body=y.uploadData(),g.errorHandler=$E(e),g}class rL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s,o){if(this.sent_)throw ll("cannot .send() more than once");if(hi(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ll("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ll("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ll("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ll("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nL extends rL{initXhr(){this.xhr_.responseType="text"}}function fx(){return new nL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,r){this._service=e,r instanceof xr?this._location=r:this._location=xr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new no(e,r)}get root(){const e=new xr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VE(this._location.path)}get storage(){return this._service}get parent(){const e=zM(this._location.path);if(e===null)return null;const r=new xr(this._location.bucket,e);return new no(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw AE(e)}}function sL(t,e,r){t._throwIfRoot("uploadBytes");const n=tL(t.storage,t._location,FE(),new Xn(e,!0),r);return t.storage.makeRequestWithTokens(n,fx).then(s=>({metadata:s,ref:t}))}function iL(t){t._throwIfRoot("getDownloadURL");const e=XM(t.storage,t._location,FE());return t.storage.makeRequestWithTokens(e,fx).then(r=>{if(r===null)throw yM();return r})}function oL(t){t._throwIfRoot("deleteObject");const e=JM(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fx)}function aL(t,e){const r=$M(t._location.path,e),n=new xr(t._location.bucket,r);return new no(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){return/^[A-Za-z]+:\/\//.test(t)}function cL(t,e){return new no(t,e)}function qE(t,e){if(t instanceof px){const r=t;if(r._bucket==null)throw xM();const n=new no(r,r._bucket);return e!=null?qE(n,e):n}else return e!==void 0?aL(t,e):t}function uL(t,e){if(e&&lL(e)){if(t instanceof px)return cL(t,e);throw ih("To use ref(service, url), the first argument must be a Storage instance.")}else return qE(t,e)}function n1(t,e){const r=e==null?void 0:e[TE];return r==null?null:xr.makeFromBucketSpec(r,t)}function dL(t,e,r,n={}){t.host=`${e}:${r}`;const s=hi(e);s&&(s0(`https://${t.host}/b`),i0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(t._overrideAuthToken=typeof o=="string"?o:jN(o,t.app.options.projectId))}class px{constructor(e,r,n,s,o,a=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=CE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oM,this._maxUploadRetryTime=aM,this._requests=new Set,s!=null?this._bucket=xr.makeFromBucketSpec(s,this._host):this._bucket=n1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xr.makeFromBucketSpec(this._url,e):this._bucket=n1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){r1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){r1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new no(this,e)}_makeRequest(e,r,n,s,o=!0){if(this._deleted)return new bM(IE());{const a=RM(e,this._appId,n,s,r,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const s1="@firebase/storage",i1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="storage";function hL(t,e,r){return t=We(t),sL(t,e,r)}function mL(t){return t=We(t),iL(t)}function fL(t){return t=We(t),oL(t)}function pL(t,e){return t=We(t),uL(t,e)}function WE(t=Ah(),e){t=We(t);const n=mi(t,HE).getImmediate({identifier:e}),s=bN("storage");return s&&GE(n,...s),n}function GE(t,e,r,n={}){dL(t,e,r,n)}function gL(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new px(r,n,s,e,uo)}function xL(){fn(new qr(HE,gL,"PUBLIC").setMultipleInstances(!0)),br(s1,i1,""),br(s1,i1,"esm2020")}xL();const o1=Object.freeze(Object.defineProperty({__proto__:null,StorageError:dt,get StorageErrorCode(){return ut},StringFormat:on,_FbsBlob:Xn,_Location:xr,_dataFromString:PE,_invalidArgument:ih,_invalidRootOperation:AE,connectStorageEmulator:GE,deleteObject:fL,getDownloadURL:mL,getStorage:WE,ref:pL,uploadBytes:hL},Symbol.toStringTag,{value:"Module"}));var wL="firebase",yL="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(wL,yL,"app");const KE={apiKey:"AIzaSyDkPhYGNEdBtRdEeWwHCWfCFtLWqmGBTO8",authDomain:"hackathon-8b0e1.firebaseapp.com",projectId:"hackathon-8b0e1",storageBucket:"hackathon-8b0e1.firebasestorage.app",messagingSenderId:"523976123580",appId:"1:523976123580:web:1f781a5403c7aa6540dcb9",measurementId:"G-GQHD2SXYJ2"},om=AN(KE);let vL;if(typeof window<"u"&&KE.measurementId)try{vL=qR(om)}catch{}const jt=Q_(om),QE=new Sn,G=K6(om),bL=WE(om),Gp=Object.freeze(Object.defineProperty({__proto__:null,auth:jt,db:G,googleProvider:QE,signInWithEmailAndPassword:w0,storage:bL},Symbol.toStringTag,{value:"Module"})),YE=w.createContext(),NL=({children:t})=>{const[e,r]=w.useState(null),[n,s]=w.useState(!0),[o,a]=w.useState(null),[l,c]=w.useState(!1),[d,h]=w.useState(!1);w.useEffect(()=>{const N=jt.onAuthStateChanged(async E=>{s(!0),a(null);try{if(E){const k=await E.getIdToken(),v=fe(G,"users",E.uid),g=await pt(v),x=g.exists()?g.data():{};x.username&&x.phone&&x.birthDate||h(!0),r({...E,role:x.role||"cliente",displayName:x.displayName||E.displayName,photoURL:x.photoURL||E.photoURL,profileData:x,idToken:k});const T=localStorage.getItem(`tour-${E.uid}`),M=x.hasSeenTour;!T&&!M?c(!0):(c(!1),M&&!T&&localStorage.setItem(`tour-${E.uid}`,"true"))}else r(null),c(!1),h(!1)}catch(k){console.error("Erro ao buscar dados do usuário:",k),a("Erro ao carregar dados do usuário"),r(E)}finally{s(!1)}});return()=>N()},[]);const f=async()=>{if(e){localStorage.setItem(`tour-${e.uid}`,"true"),c(!1);try{const N=fe(G,"users",e.uid);await xc(N,{hasSeenTour:!0,tourSeenAt:new Date().toISOString()},{merge:!0}),console.log("Tour marcado como visto com sucesso")}catch(N){console.error("Erro ao salvar status do tour:",N)}}},m=async()=>{if(e){h(!1);try{const N=fe(G,"users",e.uid),E=await pt(N);if(E.exists()){const k=E.data();r(v=>({...v,profileData:k}))}}catch(N){console.error("Erro ao atualizar dados do usuário:",N)}}},y={user:e,loading:n,error:o,isAuthenticated:!!e,isAdmin:(e==null?void 0:e.role)==="admin",isPsychologist:(e==null?void 0:e.role)==="psicologo",isClient:(e==null?void 0:e.role)==="cliente",isFirstTime:l,needsProfileCompletion:d,markTourAsSeen:f,markProfileAsComplete:m};return i.jsx(YE.Provider,{value:y,children:t})},$e=()=>{const t=w.useContext(YE);if(!t)throw new Error("useAuth deve ser usado dentro de AuthProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _L={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(t,e)=>{const r=w.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:l="",children:c,...d},h)=>w.createElement("svg",{ref:h,..._L,width:s,height:s,stroke:n,strokeWidth:a?Number(o)*24/Number(s):o,className:["lucide",`lucide-${jL(t)}`,l].join(" "),...d},[...e.map(([f,m])=>w.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=re("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=re("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=re("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=re("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=re("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=re("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=re("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=re("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=re("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=re("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=re("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=re("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=re("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=re("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=re("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=re("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=re("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=re("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=re("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),lS=Jt.memo(({scrolled:t,scrollToSection:e})=>{const[r,n]=w.useState(!1),[s,o]=w.useState(!1),[a,l]=w.useState(!1),c=xt(),d=w.useRef(null),h=w.useRef(null);w.useEffect(()=>{l(!0)},[]);const f=w.useCallback(()=>{n(v=>!v),o(!1)},[]),m=w.useCallback(()=>{n(!1),o(!1)},[]),y=w.useMemo(()=>[{name:"Início",action:"home",id:"home"},{name:"Recursos",action:"services",id:"services"},{name:"Comunidade",action:"projects",id:"community"},{name:"Depoimentos",action:"testimonials",id:"testimonials"},{name:"Missão",action:"about",id:"about"}],[]),N=w.useCallback(v=>{v==="home"?window.scrollTo({top:0,behavior:"smooth"}):e(v),m()},[e,m]),E=w.useCallback(()=>{c("/"),window.scrollTo({top:0,behavior:"smooth"}),m()},[c,m]),k=w.useCallback(()=>{e("contact"),m()},[e,m]);return w.useEffect(()=>{const v=g=>{d.current&&!d.current.contains(g.target)&&m()};return r&&(document.addEventListener("mousedown",v),document.addEventListener("touchstart",v)),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[r,m]),w.useEffect(()=>{const v=g=>{g.key==="Escape"&&m()};return r&&document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[r]),w.useEffect(()=>{r&&h.current&&h.current.focus()},[r]),w.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),i.jsx("header",{className:`fixed top-2 md:top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-6xl px-4 md:px-6 transition-all duration-1000 transform ${a?"translate-y-0 opacity-100":"-translate-y-8 opacity-0"}`,children:i.jsxs("nav",{ref:d,className:`
          bg-white/5 border border-white/10 rounded-2xl 
          shadow-lg shadow-black/20 transition-all duration-500 backdrop-blur-md
          ${t?"bg-white/8 border-white/15 shadow-2xl shadow-black/30":"bg-white/5 border-white/20"}
        `,role:"navigation","aria-label":"Navegação principal",children:[i.jsxs("div",{className:"flex items-center justify-between px-5 md:px-6 py-3",children:[i.jsxs("button",{onClick:E,className:"flex items-center space-x-3 md:space-x-4 group","aria-label":"Ir para página inicial",children:[i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-xl flex items-center justify-center transition-all duration-300 overflow-hidden bg-white/10 border border-white/20 backdrop-blur-md group-hover:bg-white/15 group-hover:border-white/30 group-hover:shadow-lg group-hover:shadow-white/10 group-hover:scale-105",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1 group-hover:scale-110 transition-transform duration-300",loading:"eager",width:"48",height:"48"})}),i.jsx("span",{className:"text-lg md:text-xl font-light text-white tracking-wide group-hover:text-white/90 transition-colors",children:"Sereno"})]}),i.jsxs("div",{className:"hidden lg:flex items-center space-x-6 xl:space-x-8",children:[y.map((v,g)=>i.jsxs("button",{onClick:()=>N(v.action),className:"relative text-white/70 hover:text-white transition-all duration-300 text-sm font-light tracking-wide group","aria-label":`Ir para seção ${v.name}`,style:{transitionDelay:`${g*100}ms`},children:[v.name,i.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]},v.name)),i.jsx("button",{onClick:k,className:"group relative bg-white text-black px-6 py-2.5 rounded-lg transition-all duration-300 text-sm font-light tracking-wide transform hover:bg-white/90 hover:scale-105 backdrop-blur-md shadow-lg hover:shadow-xl","aria-label":"Ir para seção de contato",children:i.jsx("span",{className:"relative z-10",children:"Começar Agora"})})]}),i.jsx("button",{className:"lg:hidden text-white hover:bg-white/10 p-2.5 rounded-lg transition-all duration-300 backdrop-blur-md hover:scale-105",onClick:f,"aria-label":r?"Fechar menu":"Abrir menu","aria-expanded":r,"aria-controls":"mobile-menu","aria-haspopup":"true",children:r?i.jsx(lr,{className:"w-5 h-5"}):i.jsx(iS,{className:"w-5 h-5"})})]}),r&&i.jsx("div",{id:"mobile-menu",className:"lg:hidden border-t border-white/10 px-5 py-5 bg-white/5 backdrop-blur-md animate-in slide-in-from-top-2 duration-300",role:"menu","aria-label":"Menu de navegação móvel",children:i.jsxs("div",{className:"flex flex-col space-y-3",children:[y.map((v,g)=>i.jsx("button",{ref:g===0?h:null,onClick:()=>N(v.action),className:"text-white/70 hover:text-white transition-all duration-300 py-2.5 text-sm text-left font-light tracking-wide hover:bg-white/5 rounded-lg px-3",role:"menuitem","aria-label":`Ir para seção ${v.name}`,style:{transitionDelay:`${g*100}ms`},children:v.name},v.name)),i.jsx("button",{onClick:k,className:"bg-white text-black px-6 py-3 rounded-lg hover:bg-white/90 transition-all duration-300 w-full text-sm font-light tracking-wide mt-3 backdrop-blur-md hover:scale-105",role:"menuitem","aria-label":"Ir para seção de contato",children:"Começar Agora"})]})})]})})});lS.displayName="Navbar";function ql(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function eg(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function $L(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function h1(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function m1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function BL(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function qL(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function pf(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function HL(t,e){let r=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(r*r+n*n+s*s)}function WL(t,e){let r=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return r*r+n*n+s*s}function f1(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function GL(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function KL(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function tg(t,e){let r=e[0],n=e[1],s=e[2],o=r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function cS(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function p1(t,e,r){let n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];return t[0]=s*c-o*l,t[1]=o*a-n*c,t[2]=n*l-s*a,t}function QL(t,e,r,n){let s=e[0],o=e[1],a=e[2];return t[0]=s+n*(r[0]-s),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}function YL(t,e,r,n,s){const o=Math.exp(-n*s);let a=e[0],l=e[1],c=e[2];return t[0]=r[0]+(a-r[0])*o,t[1]=r[1]+(l-r[1])*o,t[2]=r[2]+(c-r[2])*o,t}function XL(t,e,r){let n=e[0],s=e[1],o=e[2],a=r[3]*n+r[7]*s+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*s+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*s+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*s+r[10]*o+r[14])/a,t}function JL(t,e,r){let n=e[0],s=e[1],o=e[2],a=r[3]*n+r[7]*s+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*s+r[8]*o)/a,t[1]=(r[1]*n+r[5]*s+r[9]*o)/a,t[2]=(r[2]*n+r[6]*s+r[10]*o)/a,t}function ZL(t,e,r){let n=e[0],s=e[1],o=e[2];return t[0]=n*r[0]+s*r[3]+o*r[6],t[1]=n*r[1]+s*r[4]+o*r[7],t[2]=n*r[2]+s*r[5]+o*r[8],t}function eO(t,e,r){let n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2],d=r[3],h=l*o-c*s,f=c*n-a*o,m=a*s-l*n,y=l*m-c*f,N=c*h-a*m,E=a*f-l*h,k=d*2;return h*=k,f*=k,m*=k,y*=2,N*=2,E*=2,t[0]=n+h+y,t[1]=s+f+N,t[2]=o+m+E,t}const tO=function(){const t=[0,0,0],e=[0,0,0];return function(r,n){eg(t,r),eg(e,n),tg(t,t),tg(e,e);let s=cS(t,e);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function rO(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class an extends Array{constructor(e=0,r=e,n=e){return super(e,r,n),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,r=e,n=e){return e.length?this.copy(e):($L(this,e,r,n),this)}copy(e){return eg(this,e),this}add(e,r){return r?h1(this,e,r):h1(this,this,e),this}sub(e,r){return r?m1(this,e,r):m1(this,this,e),this}multiply(e){return e.length?BL(this,this,e):pf(this,this,e),this}divide(e){return e.length?qL(this,this,e):pf(this,this,1/e),this}inverse(e=this){return KL(this,e),this}len(){return ql(this)}distance(e){return e?HL(this,e):ql(this)}squaredLen(){return f1(this)}squaredDistance(e){return e?WL(this,e):f1(this)}negate(e=this){return GL(this,e),this}cross(e,r){return r?p1(this,e,r):p1(this,this,e),this}scale(e){return pf(this,this,e),this}normalize(){return tg(this,this),this}dot(e){return cS(this,e)}equals(e){return rO(this,e)}applyMatrix3(e){return ZL(this,this,e),this}applyMatrix4(e){return XL(this,this,e),this}scaleRotateMatrix4(e){return JL(this,this,e),this}applyQuaternion(e){return eO(this,this,e),this}angle(e){return tO(this,e)}lerp(e,r){return QL(this,this,e,r),this}smoothLerp(e,r,n){return YL(this,this,e,r,n),this}clone(){return new an(this[0],this[1],this[2])}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}transformDirection(e){const r=this[0],n=this[1],s=this[2];return this[0]=e[0]*r+e[4]*n+e[8]*s,this[1]=e[1]*r+e[5]*n+e[9]*s,this[2]=e[2]*r+e[6]*n+e[10]*s,this.normalize()}}const g1=new an;let nO=1,sO=1,x1=!1;class iO{constructor(e,r={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=r,this.id=nO++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in r)this.addAttribute(n,r[n])}addAttribute(e,r){if(this.attributes[e]=r,r.id=sO++,r.size=r.size||1,r.type=r.type||(r.data.constructor===Float32Array?this.gl.FLOAT:r.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),r.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,r.normalized=r.normalized||!1,r.stride=r.stride||0,r.offset=r.offset||0,r.count=r.count||(r.stride?r.data.byteLength/r.stride:r.data.length/r.size),r.divisor=r.instanced||0,r.needsUpdate=!1,r.usage=r.usage||this.gl.STATIC_DRAW,r.buffer||this.updateAttribute(r),r.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==r.count*r.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,r.count*r.divisor);this.instancedCount=r.count*r.divisor}else e==="index"?this.drawRange.count=r.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,r.count))}updateAttribute(e){const r=!e.buffer;r&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),r?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((r,{name:n,type:s})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const o=this.attributes[n];this.gl.bindBuffer(o.target,o.buffer),this.glState.boundBuffer=o.buffer;let a=1;s===35674&&(a=2),s===35675&&(a=3),s===35676&&(a=4);const l=o.size/a,c=a===1?0:a*a*4,d=a===1?0:a*4;for(let h=0;h<a;h++)this.gl.vertexAttribPointer(r+h,l,o.type,o.normalized,o.stride+c,o.offset+h*d),this.gl.enableVertexAttribArray(r+h),this.gl.renderer.vertexAttribDivisor(r+h,o.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:r=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((o,{name:a})=>{const l=this.attributes[a];l.needsUpdate&&this.updateAttribute(l)});let n=2;((s=this.attributes.index)==null?void 0:s.type)===this.gl.UNSIGNED_INT&&(n=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n,this.instancedCount):this.gl.renderer.drawArraysInstanced(r,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n):this.gl.drawArrays(r,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!x1)return console.warn("No position buffer data found to compute bounds"),x1=!0}computeBoundingBox(e){e||(e=this.getPosition());const r=e.data,n=e.size;this.bounds||(this.bounds={min:new an,max:new an,center:new an,scale:new an,radius:1/0});const s=this.bounds.min,o=this.bounds.max,a=this.bounds.center,l=this.bounds.scale;s.set(1/0),o.set(-1/0);for(let c=0,d=r.length;c<d;c+=n){const h=r[c],f=r[c+1],m=r[c+2];s.x=Math.min(h,s.x),s.y=Math.min(f,s.y),s.z=Math.min(m,s.z),o.x=Math.max(h,o.x),o.y=Math.max(f,o.y),o.z=Math.max(m,o.z)}l.sub(o,s),a.add(s,o).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const r=e.data,n=e.size;this.bounds||this.computeBoundingBox(e);let s=0;for(let o=0,a=r.length;o<a;o+=n)g1.fromArray(r,o),s=Math.max(s,this.bounds.center.squaredDistance(g1));this.bounds.radius=Math.sqrt(s)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let oO=1;const w1={};class aO{constructor(e,{vertex:r,fragment:n,uniforms:s={},transparent:o=!1,cullFace:a=e.BACK,frontFace:l=e.CCW,depthTest:c=!0,depthWrite:d=!0,depthFunc:h=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=s,this.id=oO++,r||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=o,this.cullFace=a,this.frontFace=l,this.depthTest=c,this.depthWrite=d,this.depthFunc=h,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:r,fragment:n})}setShaders({vertex:e,fragment:r}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${y1(e)}`)),r&&(this.gl.shaderSource(this.fragmentShader,r),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${y1(r)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<n;a++){let l=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(l,this.gl.getUniformLocation(this.program,l.name));const c=l.name.match(/(\w+)/g);l.uniformName=c[0],l.nameComponents=c.slice(1)}this.attributeLocations=new Map;const s=[],o=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<o;a++){const l=this.gl.getActiveAttrib(this.program,a),c=this.gl.getAttribLocation(this.program,l.name);c!==-1&&(s[c]=l.name,this.attributeLocations.set(l,c))}this.attributeOrder=s.join("")}setBlendFunc(e,r,n,s){this.blendFunc.src=e,this.blendFunc.dst=r,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=s,e&&(this.transparent=!0)}setBlendEquation(e,r){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=r}setStencilFunc(e,r,n){this.stencilRef=r,this.stencilFunc.func=e,this.stencilFunc.ref=r,this.stencilFunc.mask=n}setStencilOp(e,r,n){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=r,this.stencilOp.depthPass=n}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let r=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((s,o)=>{let a=this.uniforms[o.uniformName];for(const l of o.nameComponents){if(!a)break;if(l in a)a=a[l];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return v1(`Active uniform ${o.name} has not been supplied`);if(a&&a.value===void 0)return v1(`${o.name} uniform is missing a value parameter`);if(a.value.texture)return r=r+1,a.value.update(r),gf(this.gl,o.type,s,r);if(a.value.length&&a.value[0].texture){const l=[];return a.value.forEach(c=>{r=r+1,c.update(r),l.push(r)}),gf(this.gl,o.type,s,l)}gf(this.gl,o.type,s,a.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function gf(t,e,r,n){n=n.length?lO(n):n;const s=t.renderer.state.uniformLocations.get(r);if(n.length)if(s===void 0||s.length!==n.length)t.renderer.state.uniformLocations.set(r,n.slice(0));else{if(cO(s,n))return;s.set?s.set(n):uO(s,n),t.renderer.state.uniformLocations.set(r,s)}else{if(s===n)return;t.renderer.state.uniformLocations.set(r,n)}switch(e){case 5126:return n.length?t.uniform1fv(r,n):t.uniform1f(r,n);case 35664:return t.uniform2fv(r,n);case 35665:return t.uniform3fv(r,n);case 35666:return t.uniform4fv(r,n);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return n.length?t.uniform1iv(r,n):t.uniform1i(r,n);case 35671:case 35667:return t.uniform2iv(r,n);case 35672:case 35668:return t.uniform3iv(r,n);case 35673:case 35669:return t.uniform4iv(r,n);case 35674:return t.uniformMatrix2fv(r,!1,n);case 35675:return t.uniformMatrix3fv(r,!1,n);case 35676:return t.uniformMatrix4fv(r,!1,n)}}function y1(t){let e=t.split(`
`);for(let r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join(`
`)}function lO(t){const e=t.length,r=t[0].length;if(r===void 0)return t;const n=e*r;let s=w1[n];s||(w1[n]=s=new Float32Array(n));for(let o=0;o<e;o++)s.set(t[o],o*r);return s}function cO(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function uO(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e[r]}let xf=0;function v1(t){xf>100||(console.warn(t),xf++,xf>100&&console.warn("More than 100 program warnings - stopping logs."))}const wf=new an;let dO=1;class hO{constructor({canvas:e=document.createElement("canvas"),width:r=300,height:n=150,dpr:s=1,alpha:o=!1,depth:a=!0,stencil:l=!1,antialias:c=!1,premultipliedAlpha:d=!1,preserveDrawingBuffer:h=!1,powerPreference:f="default",autoClear:m=!0,webgl:y=2}={}){const N={alpha:o,depth:a,stencil:l,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:h,powerPreference:f};this.dpr=s,this.alpha=o,this.color=!0,this.depth=a,this.stencil=l,this.premultipliedAlpha=d,this.autoClear=m,this.id=dO++,y===2&&(this.gl=e.getContext("webgl2",N)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",N)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(r,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,r){this.width=e,this.height=r,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=r*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:r+"px"})}setViewport(e,r,n=0,s=0){this.state.viewport.width===e&&this.state.viewport.height===r||(this.state.viewport.width=e,this.state.viewport.height=r,this.state.viewport.x=n,this.state.viewport.y=s,this.gl.viewport(n,s,e,r))}setScissor(e,r,n=0,s=0){this.gl.scissor(n,s,e,r)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,r,n,s){this.state.blendFunc.src===e&&this.state.blendFunc.dst===r&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=e,this.state.blendFunc.dst=r,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=s,n!==void 0?this.gl.blendFuncSeparate(e,r,n,s):this.gl.blendFunc(e,r))}setBlendEquation(e,r){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===r)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=r,r!==void 0?this.gl.blendEquationSeparate(e,r):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,r,n){this.state.stencilFunc===e&&this.state.stencilRef===r&&this.state.stencilFuncMask===n||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=r||0,this.state.stencilFuncMask=n||0,this.gl.stencilFunc(e||this.gl.ALWAYS,r||0,n||0))}setStencilOp(e,r,n){this.state.stencilFail===e&&this.state.stencilDepthFail===r&&this.state.stencilDepthPass===n||(this.state.stencilFail=e,this.state.stencilDepthFail=r,this.state.stencilDepthPass=n,this.gl.stencilOp(e,r,n))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:r=null}={}){this.state.framebuffer!==r&&(this.state.framebuffer=r,this.gl.bindFramebuffer(e,r))}getExtension(e,r,n){return r&&this.gl[r]?this.gl[r].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),r?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:e.zDepth!==r.zDepth?e.zDepth-r.zDepth:r.id-e.id}sortTransparent(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.zDepth!==r.zDepth?r.zDepth-e.zDepth:r.id-e.id}sortUI(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:r.id-e.id}getRenderList({scene:e,camera:r,frustumCull:n,sort:s}){let o=[];if(r&&n&&r.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;a.draw&&(n&&a.frustumCulled&&r&&!r.frustumIntersectsMesh(a)||o.push(a))}),s){const a=[],l=[],c=[];o.forEach(d=>{d.program.transparent?d.program.depthTest?l.push(d):c.push(d):a.push(d),d.zDepth=0,!(d.renderOrder!==0||!d.program.depthTest||!r)&&(d.worldMatrix.getTranslation(wf),wf.applyMatrix4(r.projectionViewMatrix),d.zDepth=wf.z)}),a.sort(this.sortOpaque),l.sort(this.sortTransparent),c.sort(this.sortUI),o=a.concat(l,c)}return o}render({scene:e,camera:r,target:n=null,update:s=!0,sort:o=!0,frustumCull:a=!0,clear:l}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(l||this.autoClear&&l!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!n||n.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&e.updateMatrixWorld(),r&&r.updateMatrixWorld(),this.getRenderList({scene:e,camera:r,frustumCull:a,sort:o}).forEach(d=>{d.draw({camera:r})})}}function mO(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function fO(t,e,r,n,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t}function pO(t,e){let r=e[0],n=e[1],s=e[2],o=e[3],a=r*r+n*n+s*s+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=s*a,t[3]=o*a,t}function gO(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function xO(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function wO(t,e,r){r=r*.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function b1(t,e,r){let n=e[0],s=e[1],o=e[2],a=e[3],l=r[0],c=r[1],d=r[2],h=r[3];return t[0]=n*h+a*l+s*d-o*c,t[1]=s*h+a*c+o*l-n*d,t[2]=o*h+a*d+n*c-s*l,t[3]=a*h-n*l-s*c-o*d,t}function yO(t,e,r){r*=.5;let n=e[0],s=e[1],o=e[2],a=e[3],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*l,t[1]=s*c+o*l,t[2]=o*c-s*l,t[3]=a*c-n*l,t}function vO(t,e,r){r*=.5;let n=e[0],s=e[1],o=e[2],a=e[3],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c-o*l,t[1]=s*c+a*l,t[2]=o*c+n*l,t[3]=a*c-s*l,t}function bO(t,e,r){r*=.5;let n=e[0],s=e[1],o=e[2],a=e[3],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+s*l,t[1]=s*c-n*l,t[2]=o*c+a*l,t[3]=a*c-o*l,t}function NO(t,e,r,n){let s=e[0],o=e[1],a=e[2],l=e[3],c=r[0],d=r[1],h=r[2],f=r[3],m,y,N,E,k;return y=s*c+o*d+a*h+l*f,y<0&&(y=-y,c=-c,d=-d,h=-h,f=-f),1-y>1e-6?(m=Math.acos(y),N=Math.sin(m),E=Math.sin((1-n)*m)/N,k=Math.sin(n*m)/N):(E=1-n,k=n),t[0]=E*s+k*c,t[1]=E*o+k*d,t[2]=E*a+k*h,t[3]=E*l+k*f,t}function _O(t,e){let r=e[0],n=e[1],s=e[2],o=e[3],a=r*r+n*n+s*s+o*o,l=a?1/a:0;return t[0]=-r*l,t[1]=-n*l,t[2]=-s*l,t[3]=o*l,t}function jO(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function EO(t,e){let r=e[0]+e[4]+e[8],n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[s*3+s]&&(s=2);let o=(s+1)%3,a=(s+2)%3;n=Math.sqrt(e[s*3+s]-e[o*3+o]-e[a*3+a]+1),t[s]=.5*n,n=.5/n,t[3]=(e[o*3+a]-e[a*3+o])*n,t[o]=(e[o*3+s]+e[s*3+o])*n,t[a]=(e[a*3+s]+e[s*3+a])*n}return t}function SO(t,e,r="YXZ"){let n=Math.sin(e[0]*.5),s=Math.cos(e[0]*.5),o=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),l=Math.sin(e[2]*.5),c=Math.cos(e[2]*.5);return r==="XYZ"?(t[0]=n*a*c+s*o*l,t[1]=s*o*c-n*a*l,t[2]=s*a*l+n*o*c,t[3]=s*a*c-n*o*l):r==="YXZ"?(t[0]=n*a*c+s*o*l,t[1]=s*o*c-n*a*l,t[2]=s*a*l-n*o*c,t[3]=s*a*c+n*o*l):r==="ZXY"?(t[0]=n*a*c-s*o*l,t[1]=s*o*c+n*a*l,t[2]=s*a*l+n*o*c,t[3]=s*a*c-n*o*l):r==="ZYX"?(t[0]=n*a*c-s*o*l,t[1]=s*o*c+n*a*l,t[2]=s*a*l-n*o*c,t[3]=s*a*c+n*o*l):r==="YZX"?(t[0]=n*a*c+s*o*l,t[1]=s*o*c+n*a*l,t[2]=s*a*l-n*o*c,t[3]=s*a*c-n*o*l):r==="XZY"&&(t[0]=n*a*c-s*o*l,t[1]=s*o*c-n*a*l,t[2]=s*a*l+n*o*c,t[3]=s*a*c+n*o*l),t}const kO=mO,CO=fO,TO=gO,IO=pO;class AO extends Array{constructor(e=0,r=0,n=0,s=1){super(e,r,n,s),this.onChange=()=>{},this._target=this;const o=["0","1","2","3"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&o.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return xO(this._target),this.onChange(),this}set(e,r,n,s){return e.length?this.copy(e):(CO(this._target,e,r,n,s),this.onChange(),this)}rotateX(e){return yO(this._target,this._target,e),this.onChange(),this}rotateY(e){return vO(this._target,this._target,e),this.onChange(),this}rotateZ(e){return bO(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return _O(this._target,e),this.onChange(),this}conjugate(e=this._target){return jO(this._target,e),this.onChange(),this}copy(e){return kO(this._target,e),this.onChange(),this}normalize(e=this._target){return IO(this._target,e),this.onChange(),this}multiply(e,r){return r?b1(this._target,e,r):b1(this._target,this._target,e),this.onChange(),this}dot(e){return TO(this._target,e)}fromMatrix3(e){return EO(this._target,e),this.onChange(),this}fromEuler(e,r){return SO(this._target,e,e.order),r||this.onChange(),this}fromAxisAngle(e,r){return wO(this._target,e,r),this.onChange(),this}slerp(e,r){return NO(this._target,this._target,e,r),this.onChange(),this}fromArray(e,r=0){return this._target[0]=e[r],this._target[1]=e[r+1],this._target[2]=e[r+2],this._target[3]=e[r+3],this.onChange(),this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e}}const RO=1e-6;function PO(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function DO(t,e,r,n,s,o,a,l,c,d,h,f,m,y,N,E,k){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t[4]=o,t[5]=a,t[6]=l,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=m,t[12]=y,t[13]=N,t[14]=E,t[15]=k,t}function MO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function LO(t,e){let r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],N=e[12],E=e[13],k=e[14],v=e[15],g=r*l-n*a,x=r*c-s*a,b=r*d-o*a,T=n*c-s*l,M=n*d-o*l,I=s*d-o*c,j=h*E-f*N,A=h*k-m*N,C=h*v-y*N,S=f*k-m*E,D=f*v-y*E,R=m*v-y*k,$=g*R-x*D+b*S+T*C-M*A+I*j;return $?($=1/$,t[0]=(l*R-c*D+d*S)*$,t[1]=(s*D-n*R-o*S)*$,t[2]=(E*I-k*M+v*T)*$,t[3]=(m*M-f*I-y*T)*$,t[4]=(c*C-a*R-d*A)*$,t[5]=(r*R-s*C+o*A)*$,t[6]=(k*b-N*I-v*x)*$,t[7]=(h*I-m*b+y*x)*$,t[8]=(a*D-l*C+d*j)*$,t[9]=(n*C-r*D-o*j)*$,t[10]=(N*M-E*b+v*g)*$,t[11]=(f*b-h*M-y*g)*$,t[12]=(l*A-a*S-c*j)*$,t[13]=(r*S-n*A+s*j)*$,t[14]=(E*x-N*T-k*g)*$,t[15]=(h*T-f*x+m*g)*$,t):null}function uS(t){let e=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],h=t[9],f=t[10],m=t[11],y=t[12],N=t[13],E=t[14],k=t[15],v=e*a-r*o,g=e*l-n*o,x=e*c-s*o,b=r*l-n*a,T=r*c-s*a,M=n*c-s*l,I=d*N-h*y,j=d*E-f*y,A=d*k-m*y,C=h*E-f*N,S=h*k-m*N,D=f*k-m*E;return v*D-g*S+x*C+b*A-T*j+M*I}function N1(t,e,r){let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=e[9],y=e[10],N=e[11],E=e[12],k=e[13],v=e[14],g=e[15],x=r[0],b=r[1],T=r[2],M=r[3];return t[0]=x*n+b*l+T*f+M*E,t[1]=x*s+b*c+T*m+M*k,t[2]=x*o+b*d+T*y+M*v,t[3]=x*a+b*h+T*N+M*g,x=r[4],b=r[5],T=r[6],M=r[7],t[4]=x*n+b*l+T*f+M*E,t[5]=x*s+b*c+T*m+M*k,t[6]=x*o+b*d+T*y+M*v,t[7]=x*a+b*h+T*N+M*g,x=r[8],b=r[9],T=r[10],M=r[11],t[8]=x*n+b*l+T*f+M*E,t[9]=x*s+b*c+T*m+M*k,t[10]=x*o+b*d+T*y+M*v,t[11]=x*a+b*h+T*N+M*g,x=r[12],b=r[13],T=r[14],M=r[15],t[12]=x*n+b*l+T*f+M*E,t[13]=x*s+b*c+T*m+M*k,t[14]=x*o+b*d+T*y+M*v,t[15]=x*a+b*h+T*N+M*g,t}function OO(t,e,r){let n=r[0],s=r[1],o=r[2],a,l,c,d,h,f,m,y,N,E,k,v;return e===t?(t[12]=e[0]*n+e[4]*s+e[8]*o+e[12],t[13]=e[1]*n+e[5]*s+e[9]*o+e[13],t[14]=e[2]*n+e[6]*s+e[10]*o+e[14],t[15]=e[3]*n+e[7]*s+e[11]*o+e[15]):(a=e[0],l=e[1],c=e[2],d=e[3],h=e[4],f=e[5],m=e[6],y=e[7],N=e[8],E=e[9],k=e[10],v=e[11],t[0]=a,t[1]=l,t[2]=c,t[3]=d,t[4]=h,t[5]=f,t[6]=m,t[7]=y,t[8]=N,t[9]=E,t[10]=k,t[11]=v,t[12]=a*n+h*s+N*o+e[12],t[13]=l*n+f*s+E*o+e[13],t[14]=c*n+m*s+k*o+e[14],t[15]=d*n+y*s+v*o+e[15]),t}function VO(t,e,r){let n=r[0],s=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function FO(t,e,r,n){let s=n[0],o=n[1],a=n[2],l=Math.hypot(s,o,a),c,d,h,f,m,y,N,E,k,v,g,x,b,T,M,I,j,A,C,S,D,R,$,ie;return Math.abs(l)<RO?null:(l=1/l,s*=l,o*=l,a*=l,c=Math.sin(r),d=Math.cos(r),h=1-d,f=e[0],m=e[1],y=e[2],N=e[3],E=e[4],k=e[5],v=e[6],g=e[7],x=e[8],b=e[9],T=e[10],M=e[11],I=s*s*h+d,j=o*s*h+a*c,A=a*s*h-o*c,C=s*o*h-a*c,S=o*o*h+d,D=a*o*h+s*c,R=s*a*h+o*c,$=o*a*h-s*c,ie=a*a*h+d,t[0]=f*I+E*j+x*A,t[1]=m*I+k*j+b*A,t[2]=y*I+v*j+T*A,t[3]=N*I+g*j+M*A,t[4]=f*C+E*S+x*D,t[5]=m*C+k*S+b*D,t[6]=y*C+v*S+T*D,t[7]=N*C+g*S+M*D,t[8]=f*R+E*$+x*ie,t[9]=m*R+k*$+b*ie,t[10]=y*R+v*$+T*ie,t[11]=N*R+g*$+M*ie,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function UO(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function dS(t,e){let r=e[0],n=e[1],s=e[2],o=e[4],a=e[5],l=e[6],c=e[8],d=e[9],h=e[10];return t[0]=Math.hypot(r,n,s),t[1]=Math.hypot(o,a,l),t[2]=Math.hypot(c,d,h),t}function zO(t){let e=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],d=t[10];const h=e*e+r*r+n*n,f=s*s+o*o+a*a,m=l*l+c*c+d*d;return Math.sqrt(Math.max(h,f,m))}const hS=function(){const t=[1,1,1];return function(e,r){let n=t;dS(n,r);let s=1/n[0],o=1/n[1],a=1/n[2],l=r[0]*s,c=r[1]*o,d=r[2]*a,h=r[4]*s,f=r[5]*o,m=r[6]*a,y=r[8]*s,N=r[9]*o,E=r[10]*a,k=l+f+E,v=0;return k>0?(v=Math.sqrt(k+1)*2,e[3]=.25*v,e[0]=(m-N)/v,e[1]=(y-d)/v,e[2]=(c-h)/v):l>f&&l>E?(v=Math.sqrt(1+l-f-E)*2,e[3]=(m-N)/v,e[0]=.25*v,e[1]=(c+h)/v,e[2]=(y+d)/v):f>E?(v=Math.sqrt(1+f-l-E)*2,e[3]=(y-d)/v,e[0]=(c+h)/v,e[1]=.25*v,e[2]=(m+N)/v):(v=Math.sqrt(1+E-l-f)*2,e[3]=(c-h)/v,e[0]=(y+d)/v,e[1]=(m+N)/v,e[2]=.25*v),e}}();function $O(t,e,r,n){let s=ql([t[0],t[1],t[2]]);const o=ql([t[4],t[5],t[6]]),a=ql([t[8],t[9],t[10]]);uS(t)<0&&(s=-s),r[0]=t[12],r[1]=t[13],r[2]=t[14];const c=t.slice(),d=1/s,h=1/o,f=1/a;c[0]*=d,c[1]*=d,c[2]*=d,c[4]*=h,c[5]*=h,c[6]*=h,c[8]*=f,c[9]*=f,c[10]*=f,hS(e,c),n[0]=s,n[1]=o,n[2]=a}function BO(t,e,r,n){const s=t,o=e[0],a=e[1],l=e[2],c=e[3],d=o+o,h=a+a,f=l+l,m=o*d,y=o*h,N=o*f,E=a*h,k=a*f,v=l*f,g=c*d,x=c*h,b=c*f,T=n[0],M=n[1],I=n[2];return s[0]=(1-(E+v))*T,s[1]=(y+b)*T,s[2]=(N-x)*T,s[3]=0,s[4]=(y-b)*M,s[5]=(1-(m+v))*M,s[6]=(k+g)*M,s[7]=0,s[8]=(N+x)*I,s[9]=(k-g)*I,s[10]=(1-(m+E))*I,s[11]=0,s[12]=r[0],s[13]=r[1],s[14]=r[2],s[15]=1,s}function qO(t,e){let r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,c=s+s,d=r*a,h=n*a,f=n*l,m=s*a,y=s*l,N=s*c,E=o*a,k=o*l,v=o*c;return t[0]=1-f-N,t[1]=h+v,t[2]=m-k,t[3]=0,t[4]=h-v,t[5]=1-d-N,t[6]=y+E,t[7]=0,t[8]=m+k,t[9]=y-E,t[10]=1-d-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function HO(t,e,r,n,s){let o=1/Math.tan(e/2),a=1/(n-s);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(s+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*s*n*a,t[15]=0,t}function WO(t,e,r,n,s,o,a){let l=1/(e-r),c=1/(n-s),d=1/(o-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*l,t[13]=(s+n)*c,t[14]=(a+o)*d,t[15]=1,t}function GO(t,e,r,n){let s=e[0],o=e[1],a=e[2],l=n[0],c=n[1],d=n[2],h=s-r[0],f=o-r[1],m=a-r[2],y=h*h+f*f+m*m;y===0?m=1:(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let N=c*m-d*f,E=d*h-l*m,k=l*f-c*h;return y=N*N+E*E+k*k,y===0&&(d?l+=1e-6:c?d+=1e-6:c+=1e-6,N=c*m-d*f,E=d*h-l*m,k=l*f-c*h,y=N*N+E*E+k*k),y=1/Math.sqrt(y),N*=y,E*=y,k*=y,t[0]=N,t[1]=E,t[2]=k,t[3]=0,t[4]=f*k-m*E,t[5]=m*N-h*k,t[6]=h*E-f*N,t[7]=0,t[8]=h,t[9]=f,t[10]=m,t[11]=0,t[12]=s,t[13]=o,t[14]=a,t[15]=1,t}function _1(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function j1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function KO(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}class uh extends Array{constructor(e=1,r=0,n=0,s=0,o=0,a=1,l=0,c=0,d=0,h=0,f=1,m=0,y=0,N=0,E=0,k=1){return super(e,r,n,s,o,a,l,c,d,h,f,m,y,N,E,k),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,r,n,s,o,a,l,c,d,h,f,m,y,N,E,k){return e.length?this.copy(e):(DO(this,e,r,n,s,o,a,l,c,d,h,f,m,y,N,E,k),this)}translate(e,r=this){return OO(this,r,e),this}rotate(e,r,n=this){return FO(this,n,e,r),this}scale(e,r=this){return VO(this,r,typeof e=="number"?[e,e,e]:e),this}add(e,r){return r?_1(this,e,r):_1(this,this,e),this}sub(e,r){return r?j1(this,e,r):j1(this,this,e),this}multiply(e,r){return e.length?r?N1(this,e,r):N1(this,this,e):KO(this,this,e),this}identity(){return MO(this),this}copy(e){return PO(this,e),this}fromPerspective({fov:e,aspect:r,near:n,far:s}={}){return HO(this,e,r,n,s),this}fromOrthogonal({left:e,right:r,bottom:n,top:s,near:o,far:a}){return WO(this,e,r,n,s,o,a),this}fromQuaternion(e){return qO(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return LO(this,e),this}compose(e,r,n){return BO(this,e,r,n),this}decompose(e,r,n){return $O(this,e,r,n),this}getRotation(e){return hS(e,this),this}getTranslation(e){return UO(e,this),this}getScaling(e){return dS(e,this),this}getMaxScaleOnAxis(){return zO(this)}lookAt(e,r,n){return GO(this,e,r,n),this}determinant(){return uS(this)}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this[3]=e[r+3],this[4]=e[r+4],this[5]=e[r+5],this[6]=e[r+6],this[7]=e[r+7],this[8]=e[r+8],this[9]=e[r+9],this[10]=e[r+10],this[11]=e[r+11],this[12]=e[r+12],this[13]=e[r+13],this[14]=e[r+14],this[15]=e[r+15],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e[r+4]=this[4],e[r+5]=this[5],e[r+6]=this[6],e[r+7]=this[7],e[r+8]=this[8],e[r+9]=this[9],e[r+10]=this[10],e[r+11]=this[11],e[r+12]=this[12],e[r+13]=this[13],e[r+14]=this[14],e[r+15]=this[15],e}}function QO(t,e,r="YXZ"){return r==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):r==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):r==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):r==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):r==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):r==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const E1=new uh;class YO extends Array{constructor(e=0,r=e,n=e,s="YXZ"){super(e,r,n),this.order=s,this.onChange=()=>{},this._target=this;const o=["0","1","2"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&o.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,r=e,n=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=r,this._target[2]=n,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,r=this.order){return QO(this._target,e,r),this.onChange(),this}fromQuaternion(e,r=this.order,n){return E1.fromQuaternion(e),this._target.fromRotationMatrix(E1,r),n||this.onChange(),this}fromArray(e,r=0){return this._target[0]=e[r],this._target[1]=e[r+1],this._target[2]=e[r+2],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}}class XO{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new uh,this.worldMatrix=new uh,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new an,this.quaternion=new AO,this.scale=new an(1),this.rotation=new YO,this.up=new an(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,r=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,r&&e&&e.addChild(this,!1)}addChild(e,r=!0){~this.children.indexOf(e)||this.children.push(e),r&&e.setParent(this,!1)}removeChild(e,r=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),r&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let r=0,n=this.children.length;r<n;r++)this.children[r].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let r=0,n=this.children.length;r<n;r++)this.children[r].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,r=!1){r?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function JO(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function ZO(t,e){let r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,c=s+s,d=r*a,h=n*a,f=n*l,m=s*a,y=s*l,N=s*c,E=o*a,k=o*l,v=o*c;return t[0]=1-f-N,t[3]=h-v,t[6]=m+k,t[1]=h+v,t[4]=1-d-N,t[7]=y-E,t[2]=m-k,t[5]=y+E,t[8]=1-d-f,t}function eV(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function tV(t,e,r,n,s,o,a,l,c,d){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t[4]=o,t[5]=a,t[6]=l,t[7]=c,t[8]=d,t}function rV(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function nV(t,e){let r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=h*a-l*d,m=-h*o+l*c,y=d*o-a*c,N=r*f+n*m+s*y;return N?(N=1/N,t[0]=f*N,t[1]=(-h*n+s*d)*N,t[2]=(l*n-s*a)*N,t[3]=m*N,t[4]=(h*r-s*c)*N,t[5]=(-l*r+s*o)*N,t[6]=y*N,t[7]=(-d*r+n*c)*N,t[8]=(a*r-n*o)*N,t):null}function S1(t,e,r){let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=r[0],y=r[1],N=r[2],E=r[3],k=r[4],v=r[5],g=r[6],x=r[7],b=r[8];return t[0]=m*n+y*a+N*d,t[1]=m*s+y*l+N*h,t[2]=m*o+y*c+N*f,t[3]=E*n+k*a+v*d,t[4]=E*s+k*l+v*h,t[5]=E*o+k*c+v*f,t[6]=g*n+x*a+b*d,t[7]=g*s+x*l+b*h,t[8]=g*o+x*c+b*f,t}function sV(t,e,r){let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=r[0],y=r[1];return t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c,t[6]=m*n+y*a+d,t[7]=m*s+y*l+h,t[8]=m*o+y*c+f,t}function iV(t,e,r){let n=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=Math.sin(r),y=Math.cos(r);return t[0]=y*n+m*a,t[1]=y*s+m*l,t[2]=y*o+m*c,t[3]=y*a-m*n,t[4]=y*l-m*s,t[5]=y*c-m*o,t[6]=d,t[7]=h,t[8]=f,t}function oV(t,e,r){let n=r[0],s=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function aV(t,e){let r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],N=e[12],E=e[13],k=e[14],v=e[15],g=r*l-n*a,x=r*c-s*a,b=r*d-o*a,T=n*c-s*l,M=n*d-o*l,I=s*d-o*c,j=h*E-f*N,A=h*k-m*N,C=h*v-y*N,S=f*k-m*E,D=f*v-y*E,R=m*v-y*k,$=g*R-x*D+b*S+T*C-M*A+I*j;return $?($=1/$,t[0]=(l*R-c*D+d*S)*$,t[1]=(c*C-a*R-d*A)*$,t[2]=(a*D-l*C+d*j)*$,t[3]=(s*D-n*R-o*S)*$,t[4]=(r*R-s*C+o*A)*$,t[5]=(n*C-r*D-o*j)*$,t[6]=(E*I-k*M+v*T)*$,t[7]=(k*b-N*I-v*x)*$,t[8]=(N*M-E*b+v*g)*$,t):null}class lV extends Array{constructor(e=1,r=0,n=0,s=0,o=1,a=0,l=0,c=0,d=1){return super(e,r,n,s,o,a,l,c,d),this}set(e,r,n,s,o,a,l,c,d){return e.length?this.copy(e):(tV(this,e,r,n,s,o,a,l,c,d),this)}translate(e,r=this){return sV(this,r,e),this}rotate(e,r=this){return iV(this,r,e),this}scale(e,r=this){return oV(this,r,e),this}multiply(e,r){return r?S1(this,e,r):S1(this,this,e),this}identity(){return rV(this),this}copy(e){return eV(this,e),this}fromMatrix4(e){return JO(this,e),this}fromQuaternion(e){return ZO(this,e),this}fromBasis(e,r,n){return this.set(e[0],e[1],e[2],r[0],r[1],r[2],n[0],n[1],n[2]),this}inverse(e=this){return nV(this,e),this}getNormalMatrix(e){return aV(this,e),this}}let cV=0;class uV extends XO{constructor(e,{geometry:r,program:n,mode:s=e.TRIANGLES,frustumCulled:o=!0,renderOrder:a=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=cV++,this.geometry=r,this.program=n,this.mode=s,this.frustumCulled=o,this.renderOrder=a,this.modelViewMatrix=new uh,this.normalMatrix=new lV,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}));let r=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:r}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}))}}class dV extends iO{constructor(e,{attributes:r={}}={}){Object.assign(r,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,r)}}const hV="#ffffff",k1=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:[1,1,1]},C1=(t,e,r)=>{switch(t){case"top-left":return{anchor:[0,-.2*r],dir:[0,1]};case"top-right":return{anchor:[e,-.2*r],dir:[0,1]};case"left":return{anchor:[-.2*e,.5*r],dir:[1,0]};case"right":return{anchor:[(1+.2)*e,.5*r],dir:[-1,0]};case"bottom-left":return{anchor:[0,(1+.2)*r],dir:[0,-1]};case"bottom-center":return{anchor:[.5*e,(1+.2)*r],dir:[0,-1]};case"bottom-right":return{anchor:[e,(1+.2)*r],dir:[0,-1]};default:return{anchor:[.5*e,-.2*r],dir:[0,1]}}},wx=({raysOrigin:t="top-center",raysColor:e=hV,raysSpeed:r=1,lightSpread:n=1,rayLength:s=2,pulsating:o=!1,fadeDistance:a=1,saturation:l=1,followMouse:c=!0,mouseInfluence:d=.1,noiseAmount:h=0,distortion:f=0,className:m=""})=>{const y=w.useRef(null),N=w.useRef(null),E=w.useRef(null),k=w.useRef({x:.5,y:.5}),v=w.useRef({x:.5,y:.5}),g=w.useRef(null),x=w.useRef(null),b=w.useRef(null),[T,M]=w.useState(!1),I=w.useRef(null),[j,A]=w.useState(!1);w.useEffect(()=>{const D=()=>{A(window.innerWidth<768)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]);const C={raysSpeed:r*.6,lightSpread:n*1.2,rayLength:s*.9,followMouse:!1,mouseInfluence:0,noiseAmount:h*.5,distortion:f*.5},S=j?C:{raysSpeed:r,lightSpread:n,rayLength:s,followMouse:c,mouseInfluence:d,noiseAmount:h,distortion:f};return w.useEffect(()=>{if(y.current)return I.current=new IntersectionObserver(D=>{const R=D[0];M(R.isIntersecting)},{threshold:.1}),I.current.observe(y.current),()=>{I.current&&(I.current.disconnect(),I.current=null)}},[]),w.useEffect(()=>!T||!y.current?void 0:(b.current&&(b.current(),b.current=null),(async()=>{if(!y.current||(await new Promise(U=>setTimeout(U,10)),!y.current))return;const R=new hO({dpr:Math.min(window.devicePixelRatio,2),alpha:!0});E.current=R;const $=R.gl;for($.canvas.style.width="100%",$.canvas.style.height="100%";y.current.firstChild;)y.current.removeChild(y.current.firstChild);y.current.appendChild($.canvas);const ie=`
attribute vec2 position;
varying vec2 vUv;
void main() {
  vUv = position * 0.5 + 0.5;
  gl_Position = vec4(position, 0.0, 1.0);
}`,ue=`precision highp float;

uniform float iTime;
uniform vec2  iResolution;

uniform vec2  rayPos;
uniform vec2  rayDir;
uniform vec3  raysColor;
uniform float raysSpeed;
uniform float lightSpread;
uniform float rayLength;
uniform float pulsating;
uniform float fadeDistance;
uniform float saturation;
uniform vec2  mousePos;
uniform float mouseInfluence;
uniform float noiseAmount;
uniform float distortion;

varying vec2 vUv;

float noise(vec2 st) {
  return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
}

float rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord,
                  float seedA, float seedB, float speed) {
  vec2 sourceToCoord = coord - raySource;
  vec2 dirNorm = normalize(sourceToCoord);
  float cosAngle = dot(dirNorm, rayRefDirection);

  float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;
  
  float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));

  float distance = length(sourceToCoord);
  float maxDistance = iResolution.x * rayLength;
  float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);
  
  float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);
  float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;

  float baseStrength = clamp(
    (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +
    (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),
    0.0, 1.0
  );

  return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);
  
  vec2 finalRayDir = rayDir;
  if (mouseInfluence > 0.0) {
    vec2 mouseScreenPos = mousePos * iResolution.xy;
    vec2 mouseDirection = normalize(mouseScreenPos - rayPos);
    finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));
  }

  vec4 rays1 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349,
                           1.5 * raysSpeed);
  vec4 rays2 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234,
                           1.1 * raysSpeed);

  fragColor = rays1 * 0.5 + rays2 * 0.4;

  if (noiseAmount > 0.0) {
    float n = noise(coord * 0.01 + iTime * 0.1);
    fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);
  }

  float brightness = 1.0 - (coord.y / iResolution.y);
  fragColor.x *= 0.1 + brightness * 0.8;
  fragColor.y *= 0.3 + brightness * 0.6;
  fragColor.z *= 0.5 + brightness * 0.5;

  if (saturation != 1.0) {
    float gray = dot(fragColor.rgb, vec3(0.299, 0.587, 0.114));
    fragColor.rgb = mix(vec3(gray), fragColor.rgb, saturation);
  }

  fragColor.rgb *= raysColor;
}

void main() {
  vec4 color;
  mainImage(color, gl_FragCoord.xy);
  gl_FragColor  = color;
}`,Q={iTime:{value:0},iResolution:{value:[1,1]},rayPos:{value:[0,0]},rayDir:{value:[0,1]},raysColor:{value:k1(e)},raysSpeed:{value:S.raysSpeed},lightSpread:{value:S.lightSpread},rayLength:{value:S.rayLength},pulsating:{value:o?1:0},fadeDistance:{value:a},saturation:{value:l},mousePos:{value:[.5,.5]},mouseInfluence:{value:S.mouseInfluence},noiseAmount:{value:S.noiseAmount},distortion:{value:S.distortion}};N.current=Q;const V=new dV($),q=new aO($,{vertex:ie,fragment:ue,uniforms:Q}),O=new uV($,{geometry:V,program:q});x.current=O;const ee=()=>{if(!y.current||!R)return;R.dpr=Math.min(window.devicePixelRatio,2);const{clientWidth:U,clientHeight:Z}=y.current;R.setSize(U,Z);const me=R.dpr,Te=U*me,de=Z*me;Q.iResolution.value=[Te,de];const{anchor:tr,dir:Me}=C1(t,Te,de);Q.rayPos.value=tr,Q.rayDir.value=Me},se=U=>{if(!(!E.current||!N.current||!x.current)){Q.iTime.value=U*.001,c&&d>0&&(v.current.x=v.current.x*.92+k.current.x*(1-.92),v.current.y=v.current.y*.92+k.current.y*(1-.92),Q.mousePos.value=[v.current.x,v.current.y]);try{R.render({scene:O}),g.current=requestAnimationFrame(se)}catch(Z){console.warn("WebGL rendering error:",Z);return}}};window.addEventListener("resize",ee),ee(),g.current=requestAnimationFrame(se),b.current=()=>{if(g.current&&(cancelAnimationFrame(g.current),g.current=null),window.removeEventListener("resize",ee),R)try{const U=R.gl.canvas,Z=R.gl.getExtension("WEBGL_lose_context");Z&&Z.loseContext(),U&&U.parentNode&&U.parentNode.removeChild(U)}catch(U){console.warn("Error during WebGL cleanup:",U)}E.current=null,N.current=null,x.current=null}})(),()=>{b.current&&(b.current(),b.current=null)}),[T,t,e,S.raysSpeed,S.lightSpread,S.rayLength,o,a,l,S.followMouse,S.mouseInfluence,S.noiseAmount,S.distortion]),w.useEffect(()=>{if(!N.current||!y.current||!E.current)return;const D=N.current,R=E.current;D.raysColor.value=k1(e),D.raysSpeed.value=S.raysSpeed,D.lightSpread.value=S.lightSpread,D.rayLength.value=S.rayLength,D.pulsating.value=o?1:0,D.fadeDistance.value=a,D.saturation.value=l,D.mouseInfluence.value=S.mouseInfluence,D.noiseAmount.value=S.noiseAmount,D.distortion.value=S.distortion;const{clientWidth:$,clientHeight:ie}=y.current,ue=R.dpr,{anchor:Q,dir:V}=C1(t,$*ue,ie*ue);D.rayPos.value=Q,D.rayDir.value=V},[e,S.raysSpeed,S.lightSpread,t,S.rayLength,o,a,l,S.mouseInfluence,S.noiseAmount,S.distortion]),w.useEffect(()=>{const D=R=>{if(!y.current||!E.current)return;const $=y.current.getBoundingClientRect(),ie=(R.clientX-$.left)/$.width,ue=(R.clientY-$.top)/$.height;k.current={x:ie,y:ue}};if(S.followMouse)return window.addEventListener("mousemove",D),()=>window.removeEventListener("mousemove",D)},[S.followMouse]),i.jsx("div",{ref:y,className:`absolute inset-0 w-full h-full pointer-events-none z-0 overflow-hidden ${m}`.trim()})},mV=()=>{const[t,e]=w.useState(0);return w.useEffect(()=>{const r=()=>{const n=window.pageYOffset,s=document.documentElement.scrollHeight-window.innerHeight,o=n/s*100;e(o)};return window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)},[]),i.jsx("div",{className:"scroll-indicator",children:i.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-white to-white/80 transition-all duration-100 ease-out",style:{width:`${t}%`}})})},mS=Jt.memo(({scrollToSection:t})=>{const[e,r]=w.useState(!1),[n,s]=w.useState(!1);w.useEffect(()=>{r(!0);const l=setTimeout(()=>{s(!0)},500);return()=>clearTimeout(l)},[]);const o=w.useCallback(()=>{t("services")},[t]),a=w.useMemo(()=>[{icon:Ar,text:"Comunidade Segura"},{icon:oo,text:"Apoio Profissional"},{icon:Ar,text:"Crescimento Pessoal"}],[]);return i.jsxs("section",{className:"relative pb-12 min-h-screen flex items-center z-20","aria-labelledby":"hero-title",role:"banner",children:[i.jsx("div",{className:"container-responsive relative",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsxs("div",{className:`inline-flex items-center space-x-3 backdrop-blur-md bg-white/5 border border-white/10 rounded-full px-5 py-2.5 mb-6 md:mb-8 transition-all duration-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),i.jsx("span",{className:"text-white/80 text-xs md:text-sm font-light tracking-wider uppercase",children:"Saúde Mental • Comunidade • Apoio"})]}),i.jsx("div",{className:"mb-6 md:mb-8",children:i.jsxs("h1",{id:"hero-title",className:"text-3xl md:text-5xl lg:text-6xl font-extralight mb-4 md:mb-5 leading-[0.9] md:leading-[0.85] tracking-tight",children:[i.jsx("span",{className:`block text-white transition-all duration-1000 delay-300 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-12"}`,children:"Compartilhe,"}),i.jsxs("span",{className:`block text-white transition-all duration-1000 delay-500 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-12"}`,children:["Entenda-se,"," ",i.jsx("span",{className:`font-semibold transition-all duration-1000 delay-700 ${n?"opacity-100":"opacity-0"}`,children:"Evolua."})]})]})}),i.jsx("p",{className:`text-base md:text-lg text-white/70 mb-8 md:mb-12 max-w-2xl mx-auto leading-relaxed font-light tracking-wide transition-all duration-1000 delay-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:"Conecte-se com uma comunidade acolhedora, compartilhe suas experiências sem julgamentos e tenha acesso a profissionais de saúde mental verificados."}),i.jsx("div",{className:`flex justify-center items-center space-x-6 mb-6 transition-all duration-1000 delay-1200 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:a.map((l,c)=>i.jsxs("div",{className:"flex items-center space-x-2 text-white/60 text-xs md:text-sm",style:{animationDelay:`${1200+c*200}ms`},children:[i.jsx(l.icon,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"}),i.jsx("span",{children:l.text})]},c))}),i.jsx("div",{className:`flex justify-center items-center transition-all duration-1000 delay-1200 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:i.jsx("button",{onClick:o,className:"group relative bg-transparent border border-white/30 text-white px-6 py-3 md:px-8 md:py-4 rounded-xl transition-all duration-300 text-sm md:text-base font-light tracking-wide hover:bg-white/5 backdrop-blur-md focus-ring hover:scale-105","aria-label":"Explorar recursos e funcionalidades da plataforma",children:i.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2 md:space-x-3",children:[i.jsx("span",{children:"Explorar Recursos"}),i.jsx(Ar,{className:"w-3.5 h-3.5 md:w-4 md:h-4 transition-all duration-300 group-hover:scale-110","aria-hidden":"true"})]})})}),i.jsx("div",{className:`mt-12 transition-all duration-1000 delay-1500 ${e?"opacity-100":"opacity-0"}`,children:i.jsxs("div",{className:"flex flex-col items-center space-y-2 text-white/40 text-xs",children:[i.jsx("span",{children:"Role para descobrir mais"}),i.jsx("div",{className:"w-5 h-8 border-2 border-white/20 rounded-full flex justify-center",children:i.jsx("div",{className:"w-1 h-2.5 bg-white/40 rounded-full mt-1.5 animate-bounce"})})]})})]})}),i.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[i.jsx("div",{className:`absolute top-16 left-8 w-1.5 h-1.5 bg-white/20 rounded-full transition-all duration-2000 delay-500 ${e?"opacity-100 scale-100":"opacity-0 scale-0"}`}),i.jsx("div",{className:`absolute top-32 right-16 w-1 h-1 bg-white/30 rounded-full transition-all duration-2000 delay-700 ${e?"opacity-100 scale-100":"opacity-0 scale-0"}`}),i.jsx("div",{className:`absolute bottom-32 left-16 w-1.5 h-1.5 bg-white/25 rounded-full transition-all duration-2000 delay-900 ${e?"opacity-100 scale-100":"opacity-0 scale-0"}`})]})]})});mS.displayName="HeroSection";const fS=Jt.memo(({icon:t,title:e,description:r,delay:n,inView:s})=>{const o=w.useCallback(()=>{console.log(`Feature clicked: ${e}`)},[e]);return i.jsxs("div",{className:`glass-card p-6 md:p-8 transition-all duration-1000 transform hover:-translate-y-2 hover:shadow-xl hover:shadow-white/10 backdrop-blur-md cursor-pointer group ${s?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:`${n}ms`},onClick:o,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),o())},role:"button",tabIndex:0,"aria-label":`Recurso: ${e}. ${r}`,children:[i.jsx("div",{className:"flex items-center justify-center w-14 h-14 md:w-16 md:h-16 rounded-xl bg-white/5 border border-white/10 mb-5 backdrop-blur-md group-hover:bg-white/10 transition-all duration-300 group-hover:scale-110",children:i.jsx(t,{className:"w-7 h-7 md:w-8 md:h-8 text-white/80 group-hover:text-white transition-colors duration-300","aria-hidden":"true"})}),i.jsx("h3",{className:"text-lg md:text-xl font-light mb-3 text-white tracking-wide group-hover:text-white/90 transition-colors duration-300",children:e}),i.jsx("p",{className:"text-white/70 leading-relaxed text-sm md:text-base font-light group-hover:text-white/80 transition-colors duration-300",children:r}),i.jsx("div",{className:"mt-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("div",{className:"w-10 h-0.5 bg-gradient-to-r from-white/30 to-white/10"})})]})});fS.displayName="FeatureCard";const fV=Jt.memo(({title:t,desc:e,icon:r,index:n,inView:s,delay:o})=>{const[a,l]=w.useState(!1),c=w.useCallback(()=>{l(!0)},[]),d=w.useCallback(()=>{l(!1)},[]),h=w.useCallback(()=>{console.log(`Community group clicked: ${t}`)},[t]),f=w.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),h())},[h]);return i.jsxs("div",{className:`group relative overflow-hidden rounded-xl aspect-square bg-white/5 border border-white/10 transition-all duration-1000 transform hover:scale-[1.02] hover:shadow-xl hover:shadow-white/10 backdrop-blur-md cursor-pointer ${s?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:`${o}ms`},onMouseEnter:c,onMouseLeave:d,onClick:h,onKeyDown:f,role:"button",tabIndex:0,"aria-label":`Grupo de comunidade: ${t}. ${e}`,children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 md:w-18 md:h-18 rounded-xl bg-white/10 flex items-center justify-center mx-auto mb-4 border border-white/20 backdrop-blur-md transition-all duration-300 group-hover:bg-white/15 group-hover:border-white/30 group-hover:scale-110",children:i.jsx(r,{className:"w-8 h-8 md:w-9 md:h-9 text-white/80 transition-all duration-300 group-hover:scale-110","aria-hidden":"true"})}),i.jsx("h3",{className:"text-lg md:text-xl font-light mb-2 text-white tracking-wide transition-all duration-300 group-hover:text-white/90",children:t}),i.jsx("p",{className:"text-white/70 text-sm md:text-base font-light transition-all duration-300 group-hover:text-white/80 leading-relaxed",children:e})]})}),i.jsx("div",{className:`absolute inset-0 bg-black/80 transition-all duration-500 flex items-end p-6 ${a?"opacity-100":"opacity-0"}`,children:i.jsx("button",{className:"w-full bg-white text-black py-3 rounded-lg font-light transform transition-all duration-500 text-base tracking-wide backdrop-blur-md hover:bg-white/90 hover:scale-105",style:{transform:a?"translateY(0)":"translateY(4px)"},"aria-label":`Participar do grupo ${t}`,children:"Participar"})}),i.jsx("div",{className:`absolute top-4 right-4 w-2.5 h-2.5 bg-white/40 rounded-full transition-all duration-300 ${a?"opacity-100 scale-100":"opacity-0 scale-0"}`})]})});fV.displayName="CommunityCard";const pS=Jt.memo(({name:t,role:e,content:r})=>i.jsxs("div",{className:"glass-card p-8 md:p-10 hover:bg-white/10 transition-all duration-300 hover:scale-105",role:"article","aria-labelledby":"testimonial-author",children:[i.jsx("div",{className:"flex justify-end mb-5",children:i.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center",children:i.jsx(VL,{className:"w-5 h-5 text-white/60","aria-hidden":"true"})})}),i.jsx("div",{className:"flex items-center mb-5",role:"img","aria-label":"Avaliação de 5 estrelas",children:[...Array(5)].map((n,s)=>i.jsx(Fn,{className:"w-4 h-4 md:w-5 md:h-5 text-yellow-400 fill-current mr-1","aria-hidden":"true"},s))}),i.jsx("blockquote",{className:"text-white/80 mb-6 italic text-base md:text-lg leading-relaxed font-light",children:i.jsxs("p",{className:"relative",children:[i.jsx("span",{className:"text-3xl text-white/20 absolute -left-2 -top-2",children:'"'}),r,i.jsx("span",{className:"text-3xl text-white/20 absolute -right-2 -bottom-2",children:'"'})]})}),i.jsxs("footer",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{id:"testimonial-author",className:"font-semibold text-base md:text-lg text-white tracking-wide mb-1",children:t}),i.jsx("p",{className:"text-white/60 text-sm font-light",children:e})]}),i.jsx("div",{className:"w-10 h-px bg-gradient-to-r from-white/20 to-transparent"})]})]}));pS.displayName="TestimonialCard";const pV=()=>i.jsx("footer",{className:"relative z-10 py-16 md:py-20 border-t border-white/10 bg-white/5 backdrop-blur-md",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-7xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-12 mb-12",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center overflow-hidden bg-white/10 border border-white/20 backdrop-blur-md",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1",loading:"lazy"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-2xl font-light text-white tracking-wide block",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm font-light",children:"Saúde mental para todos"})]})]}),i.jsx("p",{className:"text-white/70 text-base leading-relaxed max-w-md",children:"Conectando pessoas através da tecnologia e comunidade para promover o bem-estar mental e emocional."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Links Rápidos"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Sobre Nós"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Nossos Serviços"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Comunidade"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Blog"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Contato"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsxs("li",{className:"flex items-center space-x-3 text-white/60 text-sm font-light",children:[i.jsx(Da,{className:"w-4 h-4"}),i.jsx("span",{children:"contato@sereno.com"})]}),i.jsxs("li",{className:"flex items-center space-x-3 text-white/60 text-sm font-light",children:[i.jsx(gn,{className:"w-4 h-4"}),i.jsx("span",{children:"+55 (11) 99999-9999"})]}),i.jsxs("li",{className:"flex items-center space-x-3 text-white/60 text-sm font-light",children:[i.jsx(vc,{className:"w-4 h-4"}),i.jsx("span",{children:"São Paulo, SP"})]})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center pt-8 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-6 mb-6 md:mb-0",children:[i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(PL,{className:"w-5 h-5 text-white/60 hover:text-white"})}),i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(TL,{className:"w-5 h-5 text-white/60 hover:text-white"})}),i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(UL,{className:"w-5 h-5 text-white/60 hover:text-white"})}),i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(DL,{className:"w-5 h-5 text-white/60 hover:text-white"})})]}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 mb-6 md:mb-0",children:[i.jsx("a",{href:"#",className:"text-white/50 hover:text-white transition-all duration-300 text-sm font-light",children:"Termos de Uso"}),i.jsx("a",{href:"#",className:"text-white/50 hover:text-white transition-all duration-300 text-sm font-light",children:"Política de Privacidade"}),i.jsx("a",{href:"#",className:"text-white/50 hover:text-white transition-all duration-300 text-sm font-light",children:"Cookies"})]}),i.jsxs("p",{className:"text-white/50 text-sm font-light text-center md:text-right",children:["© ",new Date().getFullYear()," Sereno. Feito com ",i.jsx(Ar,{className:"w-4 h-4 inline text-red-400"})," para você."]})]})]})}),T1={async cleanupAnonymousPosts(){try{const t=we(G,"posts"),e=new Date(Date.now()-24*60*60*1e3),r=_e(t,ve("isAnonymous","==",!0),ve("createdAt","<",e)),n=await Ce(r);if(n.empty)return console.log("Nenhum post anônimo antigo encontrado para limpeza"),{deletedCount:0};const s=n.docs.map(async a=>{const l=a.id,c=we(G,"comments"),d=_e(c,ve("postId","==",l)),f=(await Ce(d)).docs.map(m=>Ur(m.ref));return await Promise.all(f),await Ur(a.ref),l}),o=await Promise.all(s);return console.log(`Limpeza concluída: ${o.length} posts anônimos antigos foram deletados`),{deletedCount:o.length,deletedPostIds:o}}catch(t){throw console.error("Erro durante limpeza de posts anônimos:",t),t}},async cleanupPrivatePosts(){try{const t=we(G,"posts"),e=new Date(Date.now()-7*24*60*60*1e3),r=_e(t,ve("visibility","==","private"),ve("createdAt","<",e)),n=await Ce(r);if(n.empty)return console.log("Nenhum post privado antigo encontrado para limpeza"),{deletedCount:0};const s=n.docs.map(async a=>{const l=a.id,c=we(G,"comments"),d=_e(c,ve("postId","==",l)),f=(await Ce(d)).docs.map(m=>Ur(m.ref));return await Promise.all(f),await Ur(a.ref),l}),o=await Promise.all(s);return console.log(`Limpeza concluída: ${o.length} posts privados antigos foram deletados`),{deletedCount:o.length,deletedPostIds:o}}catch(t){throw console.error("Erro durante limpeza de posts privados:",t),t}},async cleanupOldNotifications(){try{const t=we(G,"notifications"),e=new Date;e.setDate(e.getDate()-30);const r=_e(t,ve("createdAt","<",e)),n=await Ce(r);if(n.empty){console.log("Nenhuma notificação antiga para limpar");return}const s=sh(G);n.docs.forEach(o=>{s.delete(o.ref)}),await s.commit(),console.log(`Limpeza de notificações: ${n.docs.length} notificações antigas removidas`)}catch(t){console.error("Erro ao limpar notificações antigas:",t)}},async runAllCleanups(){console.log("Iniciando limpeza automática...");try{await Promise.all([this.cleanupAnonymousPosts(),this.cleanupPrivatePosts(),this.cleanupOldNotifications()]),console.log("Limpeza automática concluída com sucesso")}catch(t){console.error("Erro durante limpeza automática:",t)}}};typeof window<"u"&&(setInterval(()=>{T1.runAllCleanups().catch(t=>{console.error("Erro na limpeza automática:",t)})},60*60*1e3),setTimeout(()=>{T1.runAllCleanups().catch(t=>{console.error("Erro na limpeza inicial:",t)})},5*60*1e3));const cl=(t=.1,e="0px 0px -100px 0px")=>{const[r,n]=w.useState(null),[s,o]=w.useState(!1);return w.useEffect(()=>{if(!r)return;const a=new IntersectionObserver(([l])=>{l.isIntersecting&&o(!0)},{threshold:t,rootMargin:e});return a.observe(r),()=>a.disconnect()},[r,t,e]),[n,s]};function gV(){const t=xt(),[e,r]=w.useState(!1),[n,s]=w.useState(!1),[o,a]=cl(.15,"0px 0px -50px 0px"),[l,c]=cl(.15,"0px 0px -50px 0px"),[d,h]=cl(.15,"0px 0px -50px 0px"),[f,m]=cl(.15,"0px 0px -50px 0px"),[y,N]=cl(.15,"0px 0px -50px 0px"),[E,k]=w.useState(0),[v,g]=w.useState({x:0,y:0}),x=w.useRef(null);w.useEffect(()=>{const S=D=>{g({x:D.clientX/window.innerWidth*2-1,y:D.clientY/window.innerHeight*2-1})};return window.addEventListener("mousemove",S,{passive:!0}),()=>window.removeEventListener("mousemove",S)},[]);const b=w.useMemo(()=>[{name:"Eduardo Silva Pimenta da Mota",role:"Usuário do Sereno",content:"O Sereno me ajudou a encontrar uma comunidade que entende o que estou passando. É incrível poder compartilhar sem medo de julgamentos."},{name:"Bruno de Medeiros Rodrigues",role:"Aluno de Sistemas da Informação",content:"O Sereno me permite alcançar mais pessoas que precisam de ajuda. A plataforma é intuitiva e segura."},{name:"Pedro Henrique Cavalcante dos Santos",role:"Membro da Comunidade",content:"Os grupos de apoio me deram força para enfrentar a ansiedade. Encontrei pessoas que realmente me entendem."}],[]),T=w.useMemo(()=>[{icon:Ar,title:"Compartilhamento Seguro",description:"Compartilhe seus sentimentos de forma anônima ou pública, em um ambiente livre de julgamentos e acolhedor."},{icon:At,title:"Grupos de Apoio",description:"Participe de comunidades temáticas focadas em desafios específicos como ansiedade, TDAH, autoconfiança e mais."},{icon:ft,title:"Chat com Profissionais",description:"Conecte-se diretamente com psicólogos verificados para atendimento personalizado e orientação especializada."},{icon:Wi,title:"Autoavaliação Diária",description:"Acompanhe seu bem-estar mental através de questionários diários e gráficos de evolução personalizados."}],[]),M=w.useMemo(()=>[{title:"Ansiedade",desc:"Grupo de apoio para gerenciar ansiedade",icon:Wi,color:"from-white to-gray-200"},{title:"Autoconfiança",desc:"Desenvolvimento pessoal e autoestima",icon:oo,color:"from-white to-gray-200"},{title:"TDAH & Foco",desc:"Estratégias e suporte para TDAH",icon:od,color:"from-white to-gray-200"}],[]),I=w.useCallback(()=>{const S=window.scrollY;r(S>50)},[]),j=w.useCallback(S=>{const D=document.getElementById(S);if(D){const ie=D.getBoundingClientRect().top+window.pageYOffset-120;D.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),setTimeout(()=>{window.scrollTo({top:ie,behavior:"smooth"})},100)}},[]),A=w.useCallback(S=>{k(S),x.current&&(clearInterval(x.current),x.current=setInterval(()=>{k(D=>(D+1)%b.length)},8e3))},[b.length]);w.useEffect(()=>{s(!0),document.documentElement.style.scrollBehavior="smooth";let S=!1;const D=()=>{S||(requestAnimationFrame(()=>{I(),S=!1}),S=!0)};return window.addEventListener("scroll",D,{passive:!0}),x.current=setInterval(()=>{k(R=>(R+1)%b.length)},8e3),()=>{window.removeEventListener("scroll",D),document.documentElement.style.scrollBehavior="auto",x.current&&clearInterval(x.current)}},[I,b.length]);const C=Jt.memo(()=>i.jsx("div",{className:"relative z-10 py-8",children:i.jsxs("div",{className:"relative mx-8 md:mx-16 lg:mx-32",children:[i.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),i.jsx("div",{className:"absolute inset-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent blur-sm"}),i.jsx("div",{className:"absolute left-1/4 -top-1 w-1 h-1 bg-white/30 rounded-full animate-pulse"}),i.jsx("div",{className:"absolute left-3/4 -top-0.5 w-0.5 h-0.5 bg-white/20 rounded-full animate-pulse",style:{animationDelay:"1s"}})]})}));return i.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden relative",children:[i.jsx(mV,{}),i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-48 h-48 bg-white/[0.01] rounded-full blur-2xl animate-pulse",style:{transform:`translate(${v.x*10}px, ${v.y*10}px)`,animationDuration:"6s"}}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-white/[0.005] rounded-full blur-2xl animate-pulse",style:{transform:`translate(${v.x*-8}px, ${v.y*-8}px)`,animationDuration:"8s",animationDelay:"3s"}})]}),i.jsx(lS,{scrolled:e,scrollToSection:j}),i.jsxs("section",{className:"relative z-10 min-h-screen flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 z-0",children:i.jsx(wx,{raysOrigin:"top-center",raysColor:"#ffffff",raysSpeed:.8,lightSpread:1.2,rayLength:1.8,followMouse:!0,mouseInfluence:.08,noiseAmount:.02,distortion:.008,className:"w-full h-full"})}),i.jsx("div",{className:"relative z-10",children:i.jsx(mS,{scrollToSection:j,inView:n})})]}),i.jsx("section",{id:"services",ref:o,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-6xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-8",children:i.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${a?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"Como Funciona"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${a?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Descubra como o Sereno pode transformar sua jornada de saúde mental através da tecnologia e comunidade."}),i.jsxs("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:[i.jsx("div",{className:"w-1 h-1 bg-white/20 rounded-full animate-pulse"}),i.jsx("div",{className:"w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),i.jsx("div",{className:"w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{animationDelay:"1s"}})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-6 md:gap-8",children:T.map((S,D)=>i.jsx("div",{className:"group relative",children:i.jsx(fS,{icon:S.icon,title:S.title,description:S.description,delay:D*150+400,inView:a})},S.title))})]})}),i.jsx(C,{}),i.jsx("section",{id:"projects",ref:l,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-6xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-8",children:i.jsx("div",{className:"w-12 h-px bg-white/20"})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${c?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"Nossa Comunidade"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${c?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Conheça os grupos de apoio e espaços de conexão que fazem do Sereno um lugar especial."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 md:gap-10 lg:gap-12 mb-16",children:M.map((S,D)=>i.jsxs("div",{className:`group relative transition-all duration-700 transform hover:scale-105 ${c?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:`${D*200+400}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/10 rounded-2xl blur-lg opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10"}),i.jsxs("div",{className:"relative bg-white/5 border border-white/10 rounded-2xl p-8 md:p-10 lg:p-12 backdrop-blur-md hover:bg-white/10 hover:border-white/20 transition-all duration-500 cursor-pointer min-h-[280px] md:min-h-[320px] flex flex-col overflow-hidden",children:[i.jsx("div",{className:"relative flex items-center justify-center w-20 h-20 md:w-24 md:h-24 rounded-2xl bg-white/10 border border-white/20 mb-8 backdrop-blur-md group-hover:bg-white/20 group-hover:scale-110 transition-all duration-500 mx-auto",children:i.jsx(S.icon,{className:"w-10 h-10 md:w-12 md:h-12 text-white/80 group-hover:text-white transition-all duration-500"})}),i.jsxs("div",{className:"relative text-center flex-1 flex flex-col justify-center",children:[i.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-light mb-4 text-white group-hover:text-white/95 transition-colors duration-500",children:S.title}),i.jsx("p",{className:"text-white/70 text-base md:text-lg leading-relaxed group-hover:text-white/85 transition-colors duration-500 mb-6",children:S.desc}),i.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0",children:i.jsxs("div",{className:"inline-flex items-center text-white/60 text-sm font-light group-hover:text-white/80 transition-colors duration-300",children:[i.jsx("span",{className:"mr-2",children:"Participar"}),i.jsx("svg",{className:"w-4 h-4 transition-all duration-300 group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]}),i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-white/20 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:animate-pulse"}),i.jsx("div",{className:"absolute bottom-4 left-4 w-1.5 h-1.5 bg-white/15 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-700 delay-300 group-hover:animate-pulse"})]})]},S.title))})]})}),i.jsx(C,{}),i.jsx("section",{id:"testimonials",ref:d,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-4xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-6",children:i.jsx("div",{className:"w-8 h-8 border border-white/10 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white/20 rounded-full animate-pulse"})})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${h?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"O Que Nossos Usuários Dizem"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${h?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Histórias reais de pessoas que encontraram apoio e transformação através do Sereno."})]}),i.jsxs("div",{className:`max-w-4xl mx-auto relative transition-all duration-700 transform ${h?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.4s"},children:[i.jsxs("div",{className:"relative",children:[i.jsx(pS,{...b[E]}),i.jsx("div",{className:"absolute -top-4 -left-4 text-4xl text-white/10 font-serif",children:'"'}),i.jsx("div",{className:"absolute -bottom-4 -right-4 text-4xl text-white/10 font-serif rotate-180",children:'"'})]}),i.jsx("div",{className:"flex justify-center mt-10 space-x-3",children:b.map((S,D)=>i.jsx("button",{onClick:()=>A(D),className:`w-3 h-3 rounded-full transition-all duration-300 hover:scale-110 ${D===E?"bg-white scale-125 shadow-lg shadow-white/30":"bg-white/30 hover:bg-white/50"}`,"aria-label":`Ver depoimento ${D+1}`},D))})]})]})}),i.jsx(C,{}),i.jsx("section",{id:"about",ref:f,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsx("div",{className:"container mx-auto px-4 md:px-6 max-w-6xl",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-12 md:gap-16",children:[i.jsxs("div",{className:`flex-1 transition-all duration-1000 transform ${m?"translate-x-0 opacity-100":"-translate-x-16 opacity-0"}`,children:[i.jsxs("div",{className:"relative",children:[i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white",children:"Nossa Missão"}),i.jsx("div",{className:"absolute -left-4 top-0 w-0.5 h-16 bg-gradient-to-b from-white/30 to-transparent"})]}),i.jsx("p",{className:"text-lg md:text-xl text-white/70 mb-6 leading-relaxed hover:text-white/80 transition-colors duration-300",children:"O Sereno nasceu da necessidade de democratizar o acesso à saúde mental. Acreditamos que todos merecem ter um espaço seguro para compartilhar, se conectar e receber apoio especializado quando necessário."}),i.jsx("p",{className:"text-lg md:text-xl text-white/70 mb-8 leading-relaxed hover:text-white/80 transition-colors duration-300",children:"Nossa plataforma combina tecnologia, comunidade e profissionais verificados para criar um ecossistema completo de cuidado mental, onde cada pessoa pode encontrar o suporte que precisa para evoluir."}),i.jsxs("button",{onClick:()=>j("contact"),className:"group bg-white text-black px-6 py-3 rounded-xl font-light transition-all duration-300 hover:bg-white/90 text-base tracking-wide hover:scale-105 hover:shadow-lg hover:shadow-white/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-white/30 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),i.jsx("span",{className:"relative group-hover:mr-2 transition-all duration-300",children:"Saiba Mais"}),i.jsx("span",{className:"relative opacity-0 group-hover:opacity-100 transition-all duration-300",children:"→"})]})]}),i.jsx("div",{className:`flex-1 transition-all duration-700 transform ${m?"translate-x-0 opacity-100":"translate-x-16 opacity-0"}`,style:{transitionDelay:"0.3s"},children:i.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{icon:aS,label:"Segurança"},{icon:Ar,label:"Cuidado"},{icon:Wi,label:"Inteligência"},{icon:At,label:"Comunidade"}].map((S,D)=>i.jsxs("div",{className:"group aspect-square rounded-xl bg-white/5 border border-white/10 backdrop-blur-md flex flex-col items-center justify-center hover:bg-white/10 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-white/10 cursor-pointer",style:{transitionDelay:`${D*100}ms`},children:[i.jsx(S.icon,{className:"w-12 h-12 text-white/80 group-hover:text-white group-hover:scale-110 transition-all duration-300 mb-2"}),i.jsx("span",{className:"text-white/60 group-hover:text-white/80 text-sm font-light transition-all duration-300",children:S.label})]},S.label))})})]})})}),i.jsx(C,{}),i.jsx("section",{id:"contact",ref:y,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-2xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute -top-8 left-1/4 opacity-10",children:i.jsx(Da,{className:"w-3 h-3 text-white"})}),i.jsx("div",{className:"absolute -top-6 right-1/4 opacity-10",children:i.jsx(gn,{className:"w-2 h-2 text-white"})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${N?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"Vamos Conversar?"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${N?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Entre em contato e vamos conversar sobre como o Sereno pode ajudar você ou sua organização."})]}),i.jsx("div",{className:`max-w-2xl mx-auto transition-all duration-700 transform ${N?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.4s"},children:i.jsx("div",{className:"group relative bg-white/5 border border-white/10 rounded-xl p-8 backdrop-blur-md hover:bg-white/10 transition-all duration-500",children:i.jsxs("div",{className:"relative z-10",children:[i.jsx("h3",{className:"text-2xl font-light mb-6 text-white text-center transition-all duration-300 group-hover:text-white/95",children:"Acesse sua Conta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("button",{className:"w-full bg-white text-black py-4 rounded-xl font-light transition-all duration-300 hover:bg-white/90 text-base tracking-wide backdrop-blur-md hover:scale-105 hover:shadow-lg hover:shadow-white/20",onClick:()=>t("/login"),children:"Fazer Login"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-white/10"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-4 bg-black text-white/50 font-light",children:"ou"})})]}),i.jsx("button",{className:"w-full bg-transparent border border-white/30 text-white py-4 rounded-xl font-light transition-all duration-300 hover:bg-white/5 text-base tracking-wide backdrop-blur-md hover:scale-105 hover:border-white/50 hover:shadow-lg hover:shadow-white/10",onClick:()=>t("/register"),children:"Criar Conta"})]}),i.jsx("p",{className:"text-white/50 text-sm text-center mt-6 font-light transition-colors duration-300 group-hover:text-white/60",children:"Comece sua jornada de saúde mental hoje mesmo"})]})})})]})}),i.jsx(pV,{})]})}function gS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=gS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function xV(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=gS(t))&&(n&&(n+=" "),n+=e);return n}const yx="-",wV=t=>{const e=vV(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const l=a.split(yx);return l[0]===""&&l.length!==1&&l.shift(),xS(l,e)||yV(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},xS=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?xS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(yx);return(a=e.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},I1=/^\[(.+)\]$/,yV=t=>{if(I1.test(t)){const e=I1.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},vV=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return NV(Object.entries(t.classGroups),r).forEach(([o,a])=>{rg(a,n,o,e)}),n},rg=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:A1(e,s);o.classGroupId=r;return}if(typeof s=="function"){if(bV(s)){rg(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,a])=>{rg(a,A1(e,o),r,n)})})},A1=(t,e)=>{let r=t;return e.split(yx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},bV=t=>t.isThemeGetter,NV=(t,e)=>e?t.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[e+a,l])):o);return[r,s]}):t,_V=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(o,a)=>{r.set(o,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return s(o,a),a},set(o,a){r.has(o)?r.set(o,a):s(o,a)}}},wS="!",jV=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],o=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let k=0;k<l.length;k++){let v=l[k];if(d===0){if(v===s&&(n||l.slice(k,k+o)===e)){c.push(l.slice(h,k)),h=k+o;continue}if(v==="/"){f=k;continue}}v==="["?d++:v==="]"&&d--}const m=c.length===0?l:l.substring(h),y=m.startsWith(wS),N=y?m.substring(1):m,E=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:N,maybePostfixModifierPosition:E}};return r?l=>r({className:l,parseClassName:a}):a},EV=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},SV=t=>({cache:_V(t.cacheSize),parseClassName:jV(t),...wV(t)}),kV=/\s+/,CV=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],a=t.trim().split(kV);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=r(d);let N=!!y,E=n(N?m.substring(0,y):m);if(!E){if(!N){l=d+(l.length>0?" "+l:l);continue}if(E=n(m),!E){l=d+(l.length>0?" "+l:l);continue}N=!1}const k=EV(h).join(":"),v=f?k+wS:k,g=v+E;if(o.includes(g))continue;o.push(g);const x=s(E,N);for(let b=0;b<x.length;++b){const T=x[b];o.push(v+T)}l=d+(l.length>0?" "+l:l)}return l};function TV(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=yS(e))&&(n&&(n+=" "),n+=r);return n}const yS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=yS(t[n]))&&(r&&(r+=" "),r+=e);return r};function IV(t,...e){let r,n,s,o=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return r=SV(d),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=CV(c,r);return s(c,h),h}return function(){return o(TV.apply(null,arguments))}}const Xe=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},vS=/^\[(?:([a-z-]+):)?(.+)\]$/i,AV=/^\d+\/\d+$/,RV=new Set(["px","full","screen"]),PV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,LV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hn=t=>sa(t)||RV.has(t)||AV.test(t),Ts=t=>Ma(t,"length",HV),sa=t=>!!t&&!Number.isNaN(Number(t)),yf=t=>Ma(t,"number",sa),ul=t=>!!t&&Number.isInteger(Number(t)),VV=t=>t.endsWith("%")&&sa(t.slice(0,-1)),ke=t=>vS.test(t),Is=t=>PV.test(t),FV=new Set(["length","size","percentage"]),UV=t=>Ma(t,FV,bS),zV=t=>Ma(t,"position",bS),$V=new Set(["image","url"]),BV=t=>Ma(t,$V,GV),qV=t=>Ma(t,"",WV),dl=()=>!0,Ma=(t,e,r)=>{const n=vS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},HV=t=>DV.test(t)&&!MV.test(t),bS=()=>!1,WV=t=>LV.test(t),GV=t=>OV.test(t),KV=()=>{const t=Xe("colors"),e=Xe("spacing"),r=Xe("blur"),n=Xe("brightness"),s=Xe("borderColor"),o=Xe("borderRadius"),a=Xe("borderSpacing"),l=Xe("borderWidth"),c=Xe("contrast"),d=Xe("grayscale"),h=Xe("hueRotate"),f=Xe("invert"),m=Xe("gap"),y=Xe("gradientColorStops"),N=Xe("gradientColorStopPositions"),E=Xe("inset"),k=Xe("margin"),v=Xe("opacity"),g=Xe("padding"),x=Xe("saturate"),b=Xe("scale"),T=Xe("sepia"),M=Xe("skew"),I=Xe("space"),j=Xe("translate"),A=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto",ke,e],D=()=>[ke,e],R=()=>["",Hn,Ts],$=()=>["auto",sa,ke],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",ke],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[sa,ke];return{cacheSize:500,separator:":",theme:{colors:[dl],spacing:[Hn,Ts],blur:["none","",Is,ke],brightness:ee(),borderColor:[t],borderRadius:["none","","full",Is,ke],borderSpacing:D(),borderWidth:R(),contrast:ee(),grayscale:q(),hueRotate:ee(),invert:q(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[VV,Ts],inset:S(),margin:S(),opacity:ee(),padding:D(),saturate:ee(),scale:ee(),sepia:q(),skew:ee(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[Is]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),ke]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ul,ke]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",ul,ke]}],"grid-cols":[{"grid-cols":[dl]}],"col-start-end":[{col:["auto",{span:["full",ul,ke]},ke]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[dl]}],"row-start-end":[{row:["auto",{span:[ul,ke]},ke]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ke,e]}],"min-w":[{"min-w":[ke,e,"min","max","fit"]}],"max-w":[{"max-w":[ke,e,"none","full","min","max","fit","prose",{screen:[Is]},Is]}],h:[{h:[ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Is,Ts]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yf]}],"font-family":[{font:[dl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",sa,yf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hn,ke]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hn,Ts]}],"underline-offset":[{"underline-offset":["auto",Hn,ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),zV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",UV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BV]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...ue(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:ue()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ue()]}],"outline-offset":[{"outline-offset":[Hn,ke]}],"outline-w":[{outline:[Hn,Ts]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Hn,Ts]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Is,qV]}],"shadow-color":[{shadow:[dl]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Is,ke]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ul,ke]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Hn,Ts,yf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},QV=IV(KV);function li(...t){return QV(xV(t))}const ls=w.forwardRef(({className:t,type:e="text",variant:r="default",size:n="default",error:s,label:o,helperText:a,leftIcon:l,rightIcon:c,onLeftIconClick:d,onRightIconClick:h,...f},m)=>{const y="w-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black",N={default:"bg-black/50 border border-white/20 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50",filled:"bg-white/5 border border-white/10 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50",outline:"bg-transparent border-2 border-white/20 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50"},E={sm:"px-3 py-2 text-sm rounded-lg",default:"px-4 py-3 text-base rounded-xl",lg:"px-6 py-4 text-lg rounded-2xl"},k=s?"border-red-500 focus:border-red-500 focus:ring-red-500":"",v=li(y,N[r],E[n],k,t),g=l&&d,x=c&&h;return i.jsxs("div",{className:"w-full",children:[o&&i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:o}),i.jsxs("div",{className:"relative",children:[g&&i.jsx("button",{type:"button",onClick:d,className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1 text-white/50 hover:text-white/70 transition-colors focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-black rounded","aria-label":"Ação do ícone esquerdo",children:i.jsx(l,{className:"w-4 h-4"})}),i.jsx("input",{type:e,className:li(v,g&&"pl-10",x&&"pr-10"),ref:m,...f}),x&&i.jsx("button",{type:"button",onClick:h,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-white/50 hover:text-white/70 transition-colors focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-black rounded","aria-label":"Ação do ícone direito",children:i.jsx(c,{className:"w-4 h-4"})})]}),s&&i.jsx("p",{className:"mt-1 text-sm text-red-400",children:s}),a&&!s&&i.jsx("p",{className:"mt-1 text-sm text-white/50",children:a})]})});ls.displayName="Input";const yt=Jt.forwardRef(({className:t,variant:e="default",padding:r="md",hover:n=!1,children:s,...o},a)=>{const l="rounded-2xl transition-all duration-300",c={default:"bg-white/5 border border-white/10",glass:"bg-white/10 backdrop-blur-md border border-white/20",elevated:"bg-white/5 border border-white/10 shadow-2xl",bordered:"bg-transparent border-2 border-white/20"},d={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=n?"hover:bg-white/10 hover:border-white/20 hover:scale-[1.02]":"";return i.jsx("div",{ref:a,className:li(l,c[e],d[r],h,t),...o,children:s})});yt.displayName="Card";const YV=Jt.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:li("flex flex-col space-y-1.5 pb-4",t),...e})),XV=Jt.forwardRef(({className:t,...e},r)=>i.jsx("h3",{ref:r,className:li("text-lg font-semibold leading-none tracking-tight text-white",t),...e})),JV=Jt.forwardRef(({className:t,...e},r)=>i.jsx("p",{ref:r,className:li("text-sm text-white/70",t),...e})),ZV=Jt.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:li("pt-0",t),...e})),eF=Jt.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:li("flex items-center pt-4",t),...e}));yt.Header=YV;yt.Title=XV;yt.Description=JV;yt.Content=ZV;yt.Footer=eF;const NS=({trigger:t,duration:e=3e3})=>{const r=w.useRef(null),n=w.useRef([]),s=w.useRef(null);return w.useEffect(()=>{if(!t)return;const o=r.current,a=o.getContext("2d"),l=()=>{o.width=window.innerWidth,o.height=window.innerHeight};l(),window.addEventListener("resize",l);const c=150,d=["#667eea","#764ba2","#f093fb","#4facfe","#00f2fe","#43e97b","#38f9d7"];class h{constructor(){this.x=Math.random()*o.width,this.y=-10,this.w=Math.random()*10+5,this.h=Math.random()*5+2,this.rotation=Math.random()*360,this.rotationSpeed=Math.random()*10-5,this.speedX=Math.random()*6-3,this.speedY=Math.random()*3+2,this.gravity=.1,this.color=d[Math.floor(Math.random()*d.length)],this.opacity=1,this.fadeSpeed=Math.random()*.02+.01}update(){this.x+=this.speedX,this.y+=this.speedY,this.speedY+=this.gravity,this.rotation+=this.rotationSpeed,this.opacity-=this.fadeSpeed,(this.x>o.width||this.x<0)&&(this.speedX*=-.8),this.y>o.height&&(this.speedY*=-.6,this.y=o.height)}draw(){a.save(),a.translate(this.x,this.y),a.rotate(this.rotation*Math.PI/180),a.globalAlpha=this.opacity,a.fillStyle=this.color,a.fillRect(-this.w/2,-this.h/2,this.w,this.h),a.restore()}isDead(){return this.opacity<=0||this.y>o.height+50}}n.current=[];for(let y=0;y<c;y++)n.current.push(new h);const f=()=>{a.clearRect(0,0,o.width,o.height),n.current=n.current.filter(y=>(y.update(),y.draw(),!y.isDead())),n.current.length>0&&(s.current=requestAnimationFrame(f))};f();const m=setTimeout(()=>{s.current&&cancelAnimationFrame(s.current)},e);return()=>{window.removeEventListener("resize",l),s.current&&cancelAnimationFrame(s.current),clearTimeout(m)}},[t,e]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-50",style:{background:"transparent"}})},vf=()=>{const[t,e]=w.useState([]),[r,n]=w.useState([]),[s,o]=w.useState(""),[a,l]=w.useState("all"),[c,d]=w.useState(!1),[h,f]=w.useState(0);$e();const[m,y]=w.useState({name:"",description:"",isPrivate:!1,maxMembers:50});w.useEffect(()=>{const x=[{id:"1",name:"Ansiedade e Bem-estar",description:"Grupo de apoio para pessoas que lidam com ansiedade. Compartilhe experiências e aprenda técnicas de relaxamento.",memberCount:127,maxMembers:200,isPrivate:!1,category:"Saúde Mental",tags:["ansiedade","bem-estar","apoio"],createdAt:"2024-01-15",lastActivity:"2024-01-20",isMember:!1,isFeatured:!0,rating:4.8},{id:"2",name:"Psicólogos em Ação",description:"Comunidade exclusiva para psicólogos trocarem experiências e discutirem casos clínicos.",memberCount:45,maxMembers:100,isPrivate:!0,category:"Profissional",tags:["psicologia","casos clínicos","profissional"],createdAt:"2024-01-10",lastActivity:"2024-01-19",isMember:!0,isFeatured:!1,rating:4.9},{id:"3",name:"Meditação e Mindfulness",description:"Aprenda técnicas de meditação e mindfulness para melhorar sua saúde mental e qualidade de vida.",memberCount:89,maxMembers:150,isPrivate:!1,category:"Bem-estar",tags:["meditação","mindfulness","bem-estar"],createdAt:"2024-01-12",lastActivity:"2024-01-18",isMember:!1,isFeatured:!0,rating:4.7},{id:"4",name:"Depressão - Juntos Somos Mais Fortes",description:"Espaço seguro para compartilhar experiências sobre depressão e encontrar apoio mútuo.",memberCount:203,maxMembers:300,isPrivate:!1,category:"Saúde Mental",tags:["depressão","apoio","comunidade"],createdAt:"2024-01-05",lastActivity:"2024-01-21",isMember:!1,isFeatured:!0,rating:4.9},{id:"5",name:"Relacionamentos Saudáveis",description:"Discussões sobre como construir e manter relacionamentos saudáveis e equilibrados.",memberCount:156,maxMembers:250,isPrivate:!1,category:"Relacionamentos",tags:["relacionamentos","saudável","comunicação"],createdAt:"2024-01-08",lastActivity:"2024-01-20",isMember:!1,isFeatured:!1,rating:4.6}],b=x.filter(T=>T.isMember);e(x),n(b)},[]);const N=w.useCallback(async()=>{console.warn("Entrada em grupos desativada neste build.")},[]),E=w.useCallback(async()=>{console.warn("Saída de grupos desativada neste build.")},[]),k=w.useCallback(async x=>{x.preventDefault();try{const b={...m,id:Date.now().toString(),memberCount:1,isMember:!0,category:"Personalizado",tags:[],createdAt:new Date().toISOString().split("T")[0],lastActivity:new Date().toISOString().split("T")[0],isFeatured:!1,rating:0};e(T=>[b,...T]),n(T=>[b.id,...T]),d(!1),y({name:"",description:"",isPrivate:!1,maxMembers:50}),f(T=>T+1),console.log("Grupo criado:",b)}catch(b){console.error("Erro ao criar grupo:",b)}},[m]),v=t.filter(x=>{const b=x.name.toLowerCase().includes(s.toLowerCase())||x.description.toLowerCase().includes(s.toLowerCase()),T=a==="all"||a==="public"&&!x.isPrivate||a==="private"&&x.isPrivate||a==="member"&&x.isMember||a==="featured"&&x.isFeatured;return b&&T}),g=t.filter(x=>x.isFeatured);return i.jsxs(i.Fragment,{children:[i.jsx(NS,{trigger:h}),i.jsx("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h1",{className:"text-4xl font-bold text-white mb-2 section-header",children:"Explorar Grupos da Comunidade"}),i.jsx("p",{className:"text-white/70 text-lg",children:"Conecte-se com pessoas que compartilham interesses similares e participe de grupos de apoio"})]}),g.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx(Fn,{className:"w-6 h-6 text-yellow-500"}),i.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Grupos em Destaque"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(x=>i.jsx(bf,{group:x,onJoin:N,onLeave:E,isUserGroup:x.isMember,isFeatured:!0},x.id))})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-8",children:[i.jsx("div",{className:"flex-1",children:i.jsx(ls,{type:"text",placeholder:"Pesquisar grupos...",value:s,onChange:x=>o(x.target.value),leftIcon:xn,className:"w-full bg-white/10 border border-white/20 text-white placeholder-white/50 focus:ring-blue-500"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:a,onChange:x=>l(x.target.value),className:"px-4 py-2 border border-white/20 rounded-lg bg-white/10 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Todos os Grupos"}),i.jsx("option",{value:"featured",children:"Em Destaque"}),i.jsx("option",{value:"public",children:"Grupos Públicos"}),i.jsx("option",{value:"private",children:"Grupos Privados"}),i.jsx("option",{value:"member",children:"Meus Grupos"})]}),i.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg flex items-center gap-2 transition-colors duration-300",children:[i.jsx(Gr,{className:"w-5 h-5"}),"Criar Grupo"]})]})]}),r.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-semibold text-white mb-4 section-header",children:"Meus Grupos"}),i.jsx("div",{className:"gap-6",children:r.map(x=>{const b=t.find(T=>T.id===x);return b?i.jsx(bf,{group:b,onLeave:E,isUserGroup:!0},b.id):null})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold text-white mb-4 section-header",children:a==="member"?"Meus Grupos":"Todos os Grupos"}),i.jsx("div",{className:"gap-6",children:v.map(x=>i.jsx(bf,{group:x,onJoin:N,onLeave:E,isUserGroup:x.isMember},x.id))})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-md mx-4 border border-gray-700",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Criar Novo Grupo"}),i.jsxs("form",{onSubmit:k,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Nome do Grupo"}),i.jsx(ls,{type:"text",value:m.name,onChange:x=>y(b=>({...b,name:x.target.value})),placeholder:"Digite o nome do grupo",required:!0,className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/10 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Descrição"}),i.jsx("textarea",{value:m.description,onChange:x=>y(b=>({...b,description:x.target.value})),placeholder:"Descreva o propósito do grupo",className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/10 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",required:!0})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("label",{className:"flex items-center text-white/70",children:[i.jsx("input",{type:"checkbox",checked:m.isPrivate,onChange:x=>y(b=>({...b,isPrivate:x.target.checked})),className:"mr-2 form-checkbox h-5 w-5 text-blue-600 bg-white/10 border-white/20 rounded"}),"Grupo Privado"]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Máximo de Membros"}),i.jsx(ls,{type:"number",value:m.maxMembers,onChange:x=>y(b=>({...b,maxMembers:parseInt(x.target.value)})),min:"2",max:"1000",className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/10 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-700 rounded-lg text-white/70 hover:bg-gray-800 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Criar Grupo"})]})]})]})})]})})]})},bf=({group:t,onJoin:e,onLeave:r,isUserGroup:n,isFeatured:s=!1})=>i.jsx(yt,{className:"group hover:shadow-lg transition-all duration-300 bg-white/5 border border-gray-700 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center",children:i.jsx(At,{className:"w-5 h-5 text-white/50"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white group-hover:text-blue-400 transition-colors",children:t.name}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/60",children:[t.isPrivate?i.jsxs(i.Fragment,{children:[i.jsx(yc,{className:"w-4 h-4"}),i.jsx("span",{children:"Privado"})]}):i.jsxs(i.Fragment,{children:[i.jsx(rS,{className:"w-4 h-4"}),i.jsx("span",{children:"Público"})]}),s&&i.jsx(Fn,{className:"w-4 h-4 text-yellow-500"})]})]})]}),t.isMember&&i.jsx("span",{className:"px-2 py-1 bg-green-800 text-green-200 text-xs font-medium rounded-full",children:"Membro"})]}),i.jsx("p",{className:"text-white/80 mb-4 line-clamp-3",children:t.description}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-white/60 mb-4",children:[i.jsxs("span",{children:[t.memberCount,"/",t.maxMembers," membros"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fn,{className:"w-4 h-4 text-yellow-500"}),i.jsx("span",{children:t.rating})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.slice(0,3).map((o,a)=>i.jsx("span",{className:"px-2 py-1 bg-blue-800 text-blue-200 text-xs rounded-full",children:o},a))}),i.jsx("div",{className:"flex gap-2",children:n?i.jsx("button",{onClick:()=>r(t.id),className:"flex-1 px-4 py-2 bg-red-800 text-red-200 rounded-lg hover:bg-red-700 transition-colors",children:"Sair do Grupo"}):i.jsx("button",{onClick:()=>e(t.id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Entrar no Grupo"})})]})}),tF="modulepreload",rF=function(t){return"/"+t},R1={},Ho=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=rF(c),c in R1)return;R1[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":tF,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},Du=[{id:"1",content:"Hoje foi um dia incrível! Consegui enfrentar uma situação que me causava muita ansiedade. A terapia está realmente fazendo diferença na minha vida. É incrível como pequenos passos podem levar a grandes mudanças! 💪✨",author:"Maria Silva",userId:"user1",avatar:null,createdAt:new Date("2024-01-15T10:00:00"),updatedAt:new Date("2024-01-15T10:00:00"),likes:["user2","user3"],commentCount:2,shares:1,tags:["ansiedade","terapia","progresso"],isAnonymous:!1,visibility:"public",isEdited:!1},{id:"2",content:"Estou me sentindo um pouco perdido ultimamente. Alguém mais já passou por isso? Às vezes parece que estou andando em círculos...",author:"João Santos",userId:"user2",avatar:null,createdAt:new Date("2024-01-15T09:30:00"),updatedAt:new Date("2024-01-15T09:30:00"),likes:["user1"],commentCount:1,shares:0,tags:["reflexão","apoio"],isAnonymous:!1,visibility:"public",isEdited:!1},{id:"3",content:"Dica do dia: respiração 4-7-8. Inspire por 4 segundos, segure por 7, expire por 8. Funciona muito bem para momentos de estresse! 🧘‍♀️",author:"Ana Costa",userId:"user3",avatar:null,createdAt:new Date("2024-01-15T09:00:00"),updatedAt:new Date("2024-01-15T09:00:00"),likes:["user1","user2","user4"],commentCount:0,shares:3,tags:["dica","respiração","estresse"],isAnonymous:!1,visibility:"public",isEdited:!1},{id:"4",content:"Post anônimo para testar funcionalidade",author:"Usuário Anônimo",userId:"user1",avatar:null,createdAt:new Date("2024-01-15T08:30:00"),updatedAt:new Date("2024-01-15T08:30:00"),likes:[],commentCount:0,shares:0,tags:["teste"],isAnonymous:!0,visibility:"anonymous",isEdited:!1}],Nf=[{id:"ansiedade",name:"Ansiedade & Estresse",description:"Grupo de apoio para gerenciar ansiedade e estresse do dia a dia",icon:"🧠",memberCount:1247,maxMembers:2e3,isPrivate:!1,category:"saude-mental",tags:["ansiedade","estresse","apoio"],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-15"),lastActivity:new Date("2024-01-15T10:00:00"),creatorId:"admin1",members:["user1","user2","user3"],onlineCount:45,isMember:!0,posts:["1","2"],rules:["Respeite todos os membros","Não julgue as experiências dos outros","Mantenha a confidencialidade","Seja gentil e empático"]},{id:"bem-estar",name:"Bem-estar & Autocuidado",description:"Dicas e práticas para melhorar o bem-estar mental e físico",icon:"✨",memberCount:892,maxMembers:1500,isPrivate:!1,category:"bem-estar",tags:["bem-estar","autocuidado","dicas"],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),lastActivity:new Date("2024-01-15T08:45:00"),creatorId:"admin2",members:["user1","user3","user4"],onlineCount:32,isMember:!0,posts:["3"],rules:["Compartilhe experiências positivas","Ofereça suporte construtivo","Mantenha o foco no bem-estar","Celebre as conquistas dos outros"]}],P1=[{id:"1",postId:"1",authorId:"user2",authorName:"João Santos",authorAvatar:null,content:"Que ótimo que está se sentindo melhor! A terapia realmente faz diferença.",likes:[],createdAt:new Date("2024-01-15T10:05:00")},{id:"2",postId:"1",authorId:"user3",authorName:"Ana Costa",authorAvatar:null,content:"Continue assim! O progresso é gradual mas muito gratificante.",likes:["user1"],createdAt:new Date("2024-01-15T10:10:00")}],kn={async createUserProfile(t,e){try{const r=fe(G,"users",t);return await Ue(r,{...e,createdAt:je(),updatedAt:je()}),{success:!0,userId:t}}catch(r){throw console.error("Erro ao criar perfil:",r),r}},async getUserProfile(t){try{const e=fe(G,"users",t),r=await pt(e);if(r.exists())return{id:r.id,...r.data()};throw new Error("Perfil do usuário não encontrado no Firebase.")}catch(e){throw console.error("Erro ao buscar perfil do usuário:",e),e}},async updateUserProfile(t,e){try{const r=fe(G,"users",t);return await Ue(r,{...e,updatedAt:je()}),{success:!0}}catch(r){throw console.error("Erro ao atualizar perfil:",r),r}},async updateUserBasicProfile(t,e){try{const r=fe(G,"users",t);return await Ue(r,{displayName:e.displayName,username:e.username,bio:e.bio,phone:e.phone,birthDate:e.birthDate,updatedAt:je()}),{success:!0}}catch(r){throw console.error("Erro ao atualizar perfil básico:",r),r}},async getUsersByRole(t){try{const e=we(G,"users"),r=_e(e,ve("role","==",t));return(await Ce(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Erro ao buscar usuários por função:",e),e}}},Ms={async createPost(t){try{const e=we(G,"posts");return{success:!0,postId:(await Ir(e,{...t,createdAt:je(),updatedAt:je(),likes:[],commentCount:0,shares:0,isEdited:!1})).id}}catch(e){throw console.error("Erro ao criar post:",e),e}},async deletePost(t){try{const e=fe(G,"posts",t),r=await pt(e);if(r.exists()){const n=r.data();await Ur(e);const s=we(G,"comments"),o=_e(s,ve("postId","==",t)),l=(await Ce(o)).docs.map(c=>Ur(c.ref));return await Promise.all(l),!0}return!1}catch(e){throw console.error("Erro ao deletar post:",e),e}},async getPosts(t=20,e=0){try{const r=we(G,"posts");let n=_e(r,He("createdAt","desc"),Wr(t));return(await Ce(n)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.visibility==="public")}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados mockados"),Du.filter(n=>n.visibility==="public").slice(e,e+t)):(console.warn("Erro ao buscar posts do Firebase, usando dados mockados:",r),Du.filter(n=>n.visibility==="public").slice(e,e+t))}},async getUserPosts(t,e=50,r=null){try{const n=we(G,"posts");let s=_e(n,He("createdAt","desc"),Wr(e));return(await Ce(s)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>r===t?l.userId===t:l.userId===t&&l.visibility==="public")}catch(n){return n.code==="failed-precondition"||n.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados mockados"),Du.filter(s=>r===t?s.userId===t:s.userId===t&&s.visibility==="public").slice(0,e)):(console.warn("Erro ao buscar posts do usuário no Firebase, usando dados mockados:",n),Du.filter(s=>r===t?s.userId===t:s.userId===t&&s.visibility==="public").slice(0,e))}},async togglePostLike(t,e){try{const r=fe(G,"posts",t),n=await pt(r);if(n.exists()){const s=n.data(),o=s.likes||[];if(o.includes(e))await Ue(r,{likes:o.filter(l=>l!==e),updatedAt:je()});else if(await Ue(r,{likes:[...o,e],updatedAt:je()}),s.userId!==e)try{await nn.createLikeNotification(t,s.userId,e,"Usuário")}catch(l){console.warn("Erro ao criar notificação de curtida:",l)}return!0}return!1}catch(r){throw console.error("Erro ao curtir post:",r),r}}},nF={async createGroup(t){try{const e=we(G,"groups");return{success:!0,groupId:(await Ir(e,{...t,createdAt:je(),updatedAt:je(),members:[t.creatorId],memberCount:1,onlineCount:0,posts:[],rules:t.rules||[]})).id}}catch(e){throw console.error("Erro ao criar grupo:",e),e}},async getGroups(t=20){try{const e=we(G,"groups"),r=_e(e,He("createdAt","desc"),Wr(t));return(await Ce(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.warn("Firebase não disponível, usando dados mockados:",e),Nf.slice(0,t).map(r=>({...r,members:Array.isArray(r.members)?r.members:[],posts:Array.isArray(r.posts)?r.posts:[],rules:Array.isArray(r.rules)?r.rules:[]}))}},async getGroupsByCategory(t){try{const e=we(G,"groups"),r=_e(e,He("createdAt","desc"));return(await Ce(r)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.category===t)}catch(e){return e.code==="failed-precondition"||e.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados mockados"),Nf.filter(r=>r.category===t)):(console.warn("Firebase não disponível, usando dados mockados:",e),Nf.filter(r=>r.category===t))}},async joinGroup(t,e){try{const r=fe(G,"groups",t);return await Ue(r,{members:rh(e),memberCount:nh(1)}),{success:!0}}catch(r){throw console.error("Erro ao entrar no grupo:",r),r}},async leaveGroup(t,e){try{const r=fe(G,"groups",t);return await Ue(r,{members:iM(e),memberCount:nh(-1)}),{success:!0}}catch(r){throw console.error("Erro ao sair do grupo:",r),r}}},ld={async recordMood(t,e){try{const r=we(G,"moods");return{success:!0,moodId:(await Ir(r,{userId:t,...e,recordedAt:je()})).id}}catch(r){throw console.error("Erro ao registrar humor:",r),r}},async getUserMoodHistory(t,e=30){try{const r=we(G,"moods"),n=_e(r,He("recordedAt","desc"),Wr(e));return(await Ce(n)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.userId===t)}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),[]):(console.error("Erro ao buscar histórico de humor:",r),[])}},async getMoodStats(t,e="week"){try{const r=we(G,"moods"),n=_e(r,He("recordedAt","desc")),o=(await Ce(n)).docs.map(h=>h.data()).filter(h=>h.userId===t),a=new Date;let l=[];if(e==="week"){const h=new Date(a.getTime()-6048e5);l=o.filter(f=>{var m;return((m=f.recordedAt)==null?void 0:m.toDate())>h})}else if(e==="month"){const h=new Date(a.getTime()-2592e6);l=o.filter(f=>{var m;return((m=f.recordedAt)==null?void 0:m.toDate())>h})}const c=l.reduce((h,f)=>h+(f.intensity||0),0),d=l.length>0?c/l.length:0;return{totalEntries:l.length,averageMood:Math.round(d*10)/10,period:e,moods:l}}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados vazios"),{totalEntries:0,averageMood:0,period:e,moods:[]}):(console.error("Erro ao calcular estatísticas de humor:",r),{totalEntries:0,averageMood:0,period:e,moods:[]})}}},nn={async createNotification(t){try{const e=we(G,"notifications");return{success:!0,notificationId:(await Ir(e,{...t,createdAt:je(),read:!1})).id}}catch(e){throw console.error("Erro ao criar notificação:",e),e}},async getUserNotifications(t,e=50){try{const r=we(G,"notifications"),n=_e(r,He("createdAt","desc"),Wr(e));return(await Ce(n)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.recipientId===t)}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),[]):(console.error("Erro ao buscar notificações:",r),[])}},async markNotificationAsRead(t){try{const e=fe(G,"notifications",t);return await Ue(e,{read:!0,readAt:je()}),!0}catch(e){throw console.error("Erro ao marcar notificação como lida:",e),e}},async markAllNotificationsAsRead(t){try{const e=we(G,"notifications"),r=_e(e,He("createdAt","desc")),n=await Ce(r),s=sh(G);return n.docs.filter(a=>{const l=a.data();return l.recipientId===t&&!l.read}).forEach(a=>{s.update(a.ref,{read:!0,readAt:je()})}),await s.commit(),!0}catch(e){return e.code==="failed-precondition"||e.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),!0):(console.error("Erro ao marcar todas como lidas:",e),!1)}},async deleteNotification(t){try{const e=fe(G,"notifications",t);return await Ur(e),!0}catch(e){throw console.error("Erro ao deletar notificação:",e),e}},async clearAllNotifications(t){try{const e=we(G,"notifications"),r=_e(e,He("createdAt","desc")),n=await Ce(r),s=sh(G);return n.docs.filter(a=>a.data().recipientId===t).forEach(a=>{s.delete(a.ref)}),await s.commit(),!0}catch(e){return e.code==="failed-precondition"||e.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),!0):(console.error("Erro ao limpar notificações:",e),!1)}},async createLikeNotification(t,e,r,n){if(e!==r)try{await this.createNotification({type:"like",title:"Curtida no seu post",message:`${n} curtiu seu post`,recipientId:e,senderId:r,senderName:n,postId:t,actionUrl:`/post/${t}`})}catch(s){console.error("Erro ao criar notificação de curtida:",s)}},async createCommentNotification(t,e,r,n,s){if(e!==r)try{await this.createNotification({type:"comment",title:"Novo comentário",message:`${n} comentou: "${s.substring(0,50)}${s.length>50?"...":""}"`,recipientId:e,senderId:r,senderName:n,postId:t,commentContent:s,actionUrl:`/post/${t}`})}catch(o){console.error("Erro ao criar notificação de comentário:",o)}},async createFollowNotification(t,e,r){try{await this.createNotification({type:"follow",title:"Novo seguidor",message:`${e} começou a te seguir`,recipientId:r,senderId:t,senderName:e,actionUrl:`/user-profile/${t}`})}catch(n){console.error("Erro ao criar notificação de seguidor:",n)}}},jn={async addComment(t,e){try{const r=we(G,"comments"),n=await Ir(r,{postId:t,...e,createdAt:je(),likes:[],isHidden:!1,isReported:!1,reportedBy:[],reportReasons:[]}),s=fe(G,"posts",t),o=await pt(s);if(o.exists()){const a=o.data();if(await Ue(s,{commentCount:nh(1)}),a.userId!==e.userId)try{await nn.createCommentNotification(t,a.userId,e.userId,"Usuário",e.content)}catch(l){console.warn("Erro ao criar notificação de comentário:",l)}}return{success:!0,commentId:n.id}}catch(r){throw console.error("Erro ao adicionar comentário:",r),r}},async editComment(t,e){try{const r=fe(G,"comments",t);return await Ue(r,{content:e,updatedAt:je(),isEdited:!0}),!0}catch(r){throw console.error("Erro ao editar comentário:",r),r}},async deleteComment(t){try{const e=fe(G,"comments",t),r=await pt(e);if(r.exists()){const n=r.data();await Ur(e);const s=fe(G,"posts",n.postId);return await Ue(s,{commentCount:nh(-1)}),!0}return!1}catch(e){throw console.error("Erro ao deletar comentário:",e),e}},async toggleCommentVisibility(t){try{const e=fe(G,"comments",t),r=await pt(e);if(r.exists()){const n=r.data().isHidden||!1;return await Ue(e,{isHidden:!n,updatedAt:je()}),!0}return!1}catch(e){throw console.error("Erro ao alterar visibilidade do comentário:",e),e}},async reportComment(t,e){var r;try{const n=fe(G,"comments",t),s=await pt(n);if(s.exists()){const o=s.data(),a=o.reportedBy||[],l=o.reportReasons||[];return await Ue(n,{isReported:!0,reportedBy:[...a,(r=auth.currentUser)==null?void 0:r.uid],reportReasons:[...l,e],updatedAt:je()}),!0}return!1}catch(n){throw console.error("Erro ao reportar comentário:",n),n}},async toggleCommentLike(t,e){try{const r=fe(G,"comments",t),n=await pt(r);if(n.exists()){const o=n.data().likes||[];return o.includes(e)?await Ue(r,{likes:o.filter(l=>l!==e),updatedAt:je()}):await Ue(r,{likes:[...o,e],updatedAt:je()}),!0}return!1}catch(r){throw console.error("Erro ao curtir comentário:",r),r}},async getPostComments(t,e=50){try{const r=we(G,"comments"),n=_e(r,He("createdAt","asc"),Wr(e));return(await Ce(n)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.postId===t)}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados mockados"),P1.filter(n=>n.postId===t).slice(0,e)):(console.warn("Erro ao buscar comentários do Firebase, usando dados mockados:",r),P1.filter(n=>n.postId===t).slice(0,e))}}},sF={async createTherapySession(t){try{const e=we(G,"therapySessions");return{success:!0,sessionId:(await Ir(e,{...t,createdAt:je(),status:"scheduled",updatedAt:je()})).id}}catch(e){throw console.error("Erro ao criar sessão de terapia:",e),e}},async getUserTherapySessions(t,e="client"){try{const r=we(G,"therapySessions"),n=_e(r,He("scheduledAt","desc"));return(await Ce(n)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>e==="client"&&a.clientId===t||e==="therapist"&&a.therapistId===t)}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),[]):(console.error("Erro ao buscar sessões de terapia:",r),[])}},async updateSessionStatus(t,e,r={}){try{const n=fe(G,"therapySessions",t);return await Ue(n,{status:e,...r,updatedAt:je()}),{success:!0}}catch(n){throw console.error("Erro ao atualizar status da sessão:",n),n}},async createSessionRequest(t){try{const e=we(G,"sessionRequests");return{success:!0,requestId:(await Ir(e,{...t,createdAt:je(),status:"pending",updatedAt:je()})).id}}catch(e){throw console.error("Erro ao criar solicitação de sessão:",e),e}},async getSessionRequests(t,e="client"){try{const r=we(G,"sessionRequests");let n;if(e==="client")n=_e(r,ve("clientId","==",t),He("createdAt","desc"));else if(e==="psychologist")n=_e(r,ve("psychologistId","==",t),He("createdAt","desc"));else throw new Error("Função getSessionRequests: role inválido");return(await Ce(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(r){throw console.error("Erro ao buscar solicitações de sessão:",r),r}},async updateSessionRequestStatus(t,e,r={}){try{const n=fe(G,"sessionRequests",t);if(await Ue(n,{status:e,...r,updatedAt:je()}),e==="confirmed"||e==="rejected"){const s=await pt(n);if(s.exists()){const o=s.data(),a=o.psychologistId,l=fe(G,"PsychologistAccount",a);await Ue(l,{sessionHistory:rh({id:t,clientId:o.clientId,clientName:o.clientName,date:o.date,time:o.time,sessionType:o.sessionType,status:e,notes:o.notes||"",processedAt:je()})})}}return{success:!0}}catch(n){throw console.error("Erro ao atualizar status da solicitação:",n),n}}},iF={async sendMessage(t){try{const e=we(G,"messages");return{success:!0,messageId:(await Ir(e,{...t,createdAt:je(),read:!1})).id}}catch(e){throw console.error("Erro ao enviar mensagem:",e),e}},async getChatMessages(t,e=100){try{const r=we(G,"messages"),n=_e(r,ve("chatId","==",t),He("createdAt","asc"),Wr(e));return(await Ce(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(r){throw console.error("Erro ao buscar mensagens:",r),r}},async markMessageAsRead(t){try{const e=fe(G,"messages",t);return await Ue(e,{read:!0,readAt:je()}),{success:!0}}catch(e){throw console.error("Erro ao marcar mensagem como lida:",e),e}}},jl={async createDiaryEntry(t){try{const e=we(G,"diaryEntries");return{success:!0,entryId:(await Ir(e,{...t,createdAt:je(),updatedAt:je()})).id}}catch(e){throw console.error("Erro ao criar entrada no diário:",e),e}},async getUserDiaryEntries(t,e=50){try{const r=we(G,"diaryEntries");try{const n=_e(r,ve("userId","==",t),He("createdAt","desc"),Wr(e));return(await Ce(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(n){if(n.code==="failed-precondition"||n.code==="unimplemented"){console.warn("Índice não configurado no Firestore, usando consulta simples");const s=_e(r,He("createdAt","desc"),Wr(e*2));return(await Ce(s)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.userId===t).slice(0,e)}throw n}}catch(r){return console.error("Erro ao buscar entradas do diário:",r),[]}},async updateDiaryEntry(t,e){try{const r=fe(G,"diaryEntries",t);return await Ue(r,{...e,updatedAt:je()}),{success:!0}}catch(r){throw console.error("Erro ao atualizar entrada do diário:",r),r}},async deleteDiaryEntry(t){try{const e=fe(G,"diaryEntries",t);return await Ur(e),{success:!0}}catch(e){throw console.error("Erro ao deletar entrada do diário:",e),e}}},oF={async uploadPostImage(t,e){try{const{storage:r}=await Ho(async()=>{const{storage:f}=await Promise.resolve().then(()=>Gp);return{storage:f}},[]),{ref:n,uploadBytes:s,getDownloadURL:o}=await Ho(async()=>{const{ref:f,uploadBytes:m,getDownloadURL:y}=await Promise.resolve().then(()=>o1);return{ref:f,uploadBytes:m,getDownloadURL:y}},void 0);if(!t||!t.type.startsWith("image/"))throw new Error("Arquivo deve ser uma imagem");if(t.size>5*1024*1024)throw new Error("Imagem deve ter menos de 5MB");const a=Date.now(),l=`posts/${e}/${a}_${t.name}`,c=n(r,l),d=await s(c,t);return{success:!0,url:await o(d.ref),fileName:l,size:t.size,type:t.type}}catch(r){throw console.error("Erro ao fazer upload da imagem:",r),r}},async deletePostImage(t){try{const{storage:e}=await Ho(async()=>{const{storage:o}=await Promise.resolve().then(()=>Gp);return{storage:o}},void 0),{ref:r,deleteObject:n}=await Ho(async()=>{const{ref:o,deleteObject:a}=await Promise.resolve().then(()=>o1);return{ref:o,deleteObject:a}},void 0),s=r(e,t);return await n(s),{success:!0}}catch(e){throw console.error("Erro ao deletar imagem:",e),e}},validateImageFile(t){const e=[];t.type.startsWith("image/")||e.push("Arquivo deve ser uma imagem"),t.size>5*1024*1024&&e.push("Imagem deve ter menos de 5MB");const r=[".jpg",".jpeg",".png",".gif",".webp"],n="."+t.name.split(".").pop().toLowerCase();return r.includes(n)||e.push("Formato de imagem não suportado. Use: JPG, PNG, GIF ou WebP"),{isValid:e.length===0,errors:e}}},Cn={convertTimestamp(t){return t&&t.toDate?t.toDate():t},formatDate(t,e={}){const r={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return(t instanceof Date?t:this.convertTimestamp(t)).toLocaleDateString("pt-BR",{...r,...e})},getRelativeTime(t){const e=new Date,r=t instanceof Date?t:this.convertTimestamp(t),n=e-r,s=Math.floor(n/(1e3*60)),o=Math.floor(n/(1e3*60*60)),a=Math.floor(n/(1e3*60*60*24));return s<1?"Agora mesmo":s<60?`${s}m atrás`:o<24?`${o}h atrás`:a<7?`${a}d atrás`:this.formatDate(r,{year:"numeric",month:"short",day:"numeric"})}},Jr={async sendFriendRequest(t,e,r,n){if(t===n)throw new Error("Não é possível enviar solicitação de amizade para si mesmo.");const s=we(G,"friendRequests"),o=_e(s,ve("senderId","==",t),ve("recipientId","==",n),ve("status","==","pending"));if(!(await Ce(o)).empty)throw new Error("Você já enviou uma solicitação de amizade para este usuário.");const l=_e(s,ve("senderId","==",n),ve("recipientId","==",t),ve("status","==","pending"));if(!(await Ce(l)).empty)throw new Error("Este usuário já te enviou uma solicitação de amizade. Verifique suas solicitações.");try{const d=await Ir(s,{senderId:t,senderName:e,senderPhotoURL:r||null,recipientId:n,status:"pending",createdAt:je()});return await nn.createNotification({type:"friend_request",recipientId:n,senderId:t,senderName:e,message:`${e} enviou uma solicitação de amizade.`,actionUrl:`/profile/${t}`,requestId:d.id}),{success:!0,requestId:d.id}}catch(d){throw console.error("Erro ao enviar solicitação de amizade:",d),d}},async hasSentFriendRequest(t,e){try{const r=we(G,"friendRequests"),n=_e(r,ve("senderId","==",t),ve("recipientId","==",e),ve("status","==","pending")),s=await Ce(n);return s.empty?{exists:!1,requestId:null}:{exists:!0,requestId:s.docs[0].id}}catch(r){throw console.error("Erro ao verificar se solicitação foi enviada:",r),r}},async hasReceivedFriendRequest(t,e){try{const r=we(G,"friendRequests"),n=_e(r,ve("senderId","==",t),ve("recipientId","==",e),ve("status","==","pending")),s=await Ce(n);return s.empty?{exists:!1,requestId:null}:{exists:!0,requestId:s.docs[0].id}}catch(r){throw console.error("Erro ao verificar se solicitação foi recebida:",r),r}},async acceptFriendRequest(t,e){var c,d;const r=fe(G,"friendRequests",t),n=await pt(r);if(!n.exists())throw new Error("Solicitação de amizade não encontrada.");const s=n.data();if(s.recipientId!==e)throw new Error("Você não tem permissão para aceitar esta solicitação.");if(s.status!=="pending")throw new Error("Esta solicitação não está mais pendente.");const o=sh(G);o.update(r,{status:"accepted",updatedAt:je()});const a=fe(G,"users",s.senderId),l=fe(G,"users",s.recipientId);o.update(a,{friends:rh(s.recipientId)}),o.update(l,{friends:rh(s.senderId)});try{return await o.commit(),await nn.createNotification({type:"friend_accepted",recipientId:s.senderId,senderId:e,senderName:((c=await kn.getUserProfile(e))==null?void 0:c.displayName)||"Um usuário",message:`${((d=await kn.getUserProfile(e))==null?void 0:d.displayName)||"Um usuário"} aceitou sua solicitação de amizade.`,actionUrl:`/user-profile/${e}`}),{success:!0}}catch(h){throw console.error("Erro ao aceitar solicitação de amizade:",h),h}},async rejectFriendRequest(t,e){const r=fe(G,"friendRequests",t),n=await pt(r);if(!n.exists())throw new Error("Solicitação de amizade não encontrada.");const s=n.data();if(s.recipientId!==e)throw new Error("Você não tem permissão para rejeitar esta solicitação.");if(s.status!=="pending")throw new Error("Esta solicitação não está mais pendente.");try{return await Ue(r,{status:"rejected",updatedAt:je()}),{success:!0}}catch(o){throw console.error("Erro ao rejeitar solicitação de amizade:",o),o}},async cancelFriendRequest(t){try{const e=fe(G,"friendRequests",t);return await Ur(e),{success:!0}}catch(e){throw console.error("Erro ao cancelar solicitação de amizade:",e),e}},async getPendingFriendRequests(t){try{const e=we(G,"friendRequests"),r=_e(e,ve("recipientId","==",t),ve("status","==","pending"),He("createdAt","desc"));return(await Ce(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Erro ao buscar solicitações de amizade pendentes:",e),[]}},async getFriends(t){try{const e=await kn.getUserProfile(t);if(!e||!e.friends||e.friends.length===0)return[];const r=e.friends,n=[];for(const s of r){const o=await kn.getUserProfile(s);o&&n.push({uid:o.uid,displayName:o.displayName||"Usuário Sereno",photoURL:o.photoURL||null,lastSeen:Cn.convertTimestamp(o.lastSeen)||null})}return n}catch(e){return console.error("Erro ao buscar lista de amigos:",e),[]}},async isFriend(t,e){var r;try{const n=await kn.getUserProfile(t);return((r=n==null?void 0:n.friends)==null?void 0:r.includes(e))||!1}catch(n){return console.error("Erro ao verificar amizade:",n),!1}},async searchUsers(t,e){try{if(!t||t.trim()==="")return[];const r=we(G,"users"),n=_e(r,ve("displayName",">=",t),ve("displayName","<=",t+""),Wr(10));return(await Ce(n)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.id!==e)}catch(r){return console.error("Erro ao buscar usuários:",r),[]}}},Di={userService:kn,postService:Ms,groupService:nF,moodService:ld,notificationService:nn,commentService:jn,therapyService:sF,chatService:iF,diaryService:jl,imageUploadService:oF,firebaseUtils:Cn},aF=()=>{const[t,e]=w.useState({username:"",birthDate:"",phone:"",bio:"",profilePhotoURL:"",bannerPhotoURL:""}),[r,n]=w.useState(!1),[s,o]=w.useState(null),[a,l]=w.useState(null),[c,d]=w.useState(null),[h,f]=w.useState(null),m=xt(),y=w.useRef(),N=w.useRef();w.useEffect(()=>{const x=jt.onAuthStateChanged(async b=>{if(b){o(b);const T=fe(G,"users",b.uid),M=await pt(T);if(M.exists()){const I=M.data();if(l(I),I.username&&I.phone&&I.birthDate){m("/home");return}}}else m("/login")});return()=>x()},[m]);const E=x=>{const{name:b,value:T}=x.target;e({...t,[b]:T})},k=(x,b)=>{const T=x.target.files[0];if(T){if(!T.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem.");return}if(T.size>2*1024*1024){alert("A imagem deve ter no máximo 2MB para upload direto.");return}const M=new FileReader;M.onload=I=>{const j=I.target.result;b==="profile"?(e(A=>({...A,profilePhotoURL:j})),d(j)):(e(A=>({...A,bannerPhotoURL:j})),f(j))},M.readAsDataURL(T)}},v=x=>{x==="profile"?(e(b=>({...b,profilePhotoURL:""})),d(null)):(e(b=>({...b,bannerPhotoURL:""})),f(null))},g=async x=>{if(x.preventDefault(),!t.username||!t.birthDate||!t.phone){alert("Por favor, preencha todos os campos obrigatórios.");return}if(!/^[a-zA-Z0-9_]{3,20}$/.test(t.username)){alert("O username deve ter entre 3 e 20 caracteres e conter apenas letras, números e underscore (_).");return}n(!0);try{const T=fe(G,"users",s.uid),M={username:t.username.toLowerCase(),birthDate:t.birthDate,phone:t.phone,bio:t.bio||"",profilePhotoURL:t.profilePhotoURL||(a==null?void 0:a.profilePhotoURL)||null,bannerPhotoURL:t.bannerPhotoURL||(a==null?void 0:a.bannerPhotoURL)||null,updatedAt:je(),createdAt:(a==null?void 0:a.createdAt)||je(),email:s.email,displayName:s.displayName||s.email,role:"cliente",isProfileComplete:!0};console.log("Salvando dados do usuário:",M),await xc(T,M,{merge:!0});try{await nn.createNotification({type:"welcome",title:"Bem-vindo ao Sereno! 🎉",message:"Seu perfil foi criado com sucesso. Comece a explorar a plataforma e conectar-se com outros usuários.",recipientId:s.uid,senderId:"system",senderName:"Sereno",actionUrl:"/home"})}catch(I){console.warn("Erro ao criar notificação de boas-vindas:",I)}console.log("Perfil criado com sucesso!"),m("/connected")}catch(T){console.error("Erro ao salvar dados:",T),alert(`Erro ao salvar os dados: ${T.message}`)}finally{n(!1)}};return s?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx(wx,{}),i.jsxs("div",{className:"relative w-full max-w-2xl z-10",children:[i.jsx("button",{type:"button",onClick:()=>{jt.signOut(),m("/login")},className:"absolute -top-2 -left-2 p-2 text-white/80 hover:text-white transition-colors","aria-label":"Sair e voltar para login",children:i.jsx(xo,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center backdrop-blur-md",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1",loading:"eager"})})}),i.jsx("h1",{className:"text-2xl font-semibold text-white mb-1",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Complete seu perfil"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-xl font-light text-white mb-2",children:["Bem-vindo, ",s.displayName||s.email,"!"]}),i.jsx("p",{className:"text-white/60 text-sm",children:"Para continuar, precisamos de algumas informações adicionais"})]}),i.jsxs("form",{onSubmit:g,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Fotos do Perfil (Opcional)"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-light text-white/80",children:"Foto do Banner"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-full h-32 bg-white/10 border-2 border-dashed border-white/20 rounded-lg flex items-center justify-center overflow-hidden",children:h?i.jsx("img",{src:h,alt:"Preview do banner",className:"w-full h-full object-cover"}):i.jsxs("div",{className:"text-center",children:[i.jsx(sS,{className:"w-8 h-8 text-white/40 mx-auto mb-2"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Clique para selecionar uma imagem"})]})}),i.jsx("button",{type:"button",onClick:()=>{var x;return(x=N.current)==null?void 0:x.click()},className:"absolute inset-0 w-full h-full bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx(zL,{className:"w-6 h-6 text-white"})}),h&&i.jsx("button",{type:"button",onClick:()=>v("banner"),className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white transition-colors",children:i.jsx(lr,{className:"w-4 h-4"})}),i.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:x=>k(x,"banner"),className:"hidden"})]}),i.jsx("p",{className:"text-xs text-white/50",children:"Tamanho máximo: 2MB. Formatos: JPG, PNG, GIF"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-light text-white/80",children:"Foto de Perfil"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-24 h-24 bg-white/10 border-2 border-dashed border-white/20 rounded-full flex items-center justify-center overflow-hidden",children:c?i.jsx("img",{src:c,alt:"Preview da foto de perfil",className:"w-full h-full object-cover"}):i.jsx(st,{className:"w-12 h-12 text-white/40"})}),i.jsx("button",{type:"button",onClick:()=>{var x;return(x=y.current)==null?void 0:x.click()},className:"absolute inset-0 w-full h-full bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center rounded-full",children:i.jsx(ah,{className:"w-6 h-6 text-white"})}),c&&i.jsx("button",{type:"button",onClick:()=>v("profile"),className:"absolute -top-1 -right-1 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white transition-colors",children:i.jsx(lr,{className:"w-3 h-3"})}),i.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:x=>k(x,"profile"),className:"hidden"})]}),i.jsx("div",{className:"flex-1",children:i.jsx("p",{className:"text-white/60 text-sm",children:"Selecione uma foto para seu perfil"})})]}),i.jsx("p",{className:"text-xs text-white/50",children:"Tamanho máximo: 2MB. Formatos: JPG, PNG, GIF"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Informações Básicas"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"username",className:"block text-xs font-light text-white/80",children:"Username *"}),i.jsxs("div",{className:"relative",children:[i.jsx(gx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",id:"username",name:"username",value:t.username,onChange:E,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"seu_username",required:!0,minLength:3,maxLength:20,pattern:"[a-zA-Z0-9_]{3,20}"})]}),i.jsx("p",{className:"text-xs text-white/50 mt-1",children:"3-20 caracteres, apenas letras, números e _"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"birthDate",className:"block text-xs font-light text-white/80",children:"Data de Nascimento *"}),i.jsxs("div",{className:"relative",children:[i.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"date",id:"birthDate",name:"birthDate",value:t.birthDate,onChange:E,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"phone",className:"block text-xs font-light text-white/80",children:"Telefone *"}),i.jsxs("div",{className:"relative",children:[i.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:E,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"(11) 99999-9999",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"bio",className:"block text-xs font-light text-white/80",children:"Biografia"}),i.jsxs("div",{className:"relative",children:[i.jsx(tS,{className:"absolute left-3 top-3 w-4 h-4 text-white/50"}),i.jsx("textarea",{id:"bio",name:"bio",value:t.bio,onChange:E,rows:3,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm resize-none",placeholder:"Conte um pouco sobre você...",maxLength:200})]}),i.jsxs("p",{className:"text-xs text-white/50 mt-1",children:[t.bio.length,"/200 caracteres"]})]})]}),i.jsx("button",{type:"submit",disabled:r,className:"w-full py-2.5 px-4 bg-white text-black hover:bg-white/90 disabled:bg-white/60 font-medium rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 disabled:cursor-not-allowed shadow-lg text-sm",children:r?"Salvando...":"Completar Perfil"})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-white/70 text-xs",children:"Estes dados são necessários para personalizar sua experiência"})})]}),i.jsx("div",{className:"mt-6 text-center text-white/50 text-xs",children:i.jsxs("p",{children:["Conecte-se, Entenda-se, ",i.jsx("span",{className:"text-white",children:"Evolua."})]})})]})]}):i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Carregando..."})})},lF=()=>{const t=xt(),{markProfileAsComplete:e}=$e(),[r,n]=w.useState(2);w.useEffect(()=>{(async()=>{try{await e(),console.log("Perfil marcado como completo com sucesso")}catch(c){console.error("Erro ao marcar perfil como completo:",c)}})();const a=setTimeout(()=>{console.log("Redirecionando para /home..."),t("/home")},2e3),l=setInterval(()=>{n(c=>c<=1?(clearInterval(l),0):c-1)},1e3);return()=>{clearTimeout(a),clearInterval(l)}},[t,e]);const s=()=>{console.log("Redirecionamento manual para /home..."),t("/home")};return i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx(wx,{}),i.jsx("div",{className:"relative w-full max-w-lg z-10 text-center",children:i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center",children:i.jsx(dn,{className:"w-12 h-12 text-green-400"})})}),i.jsx("h1",{className:"text-3xl font-light mb-3 text-white",children:"Perfil Completo!"}),i.jsx("p",{className:"text-white/70 text-lg mb-6",children:"Seu perfil foi criado com sucesso. Bem-vindo ao Sereno!"}),i.jsxs("div",{className:"space-y-3 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-white/60",children:[i.jsx(st,{className:"w-4 h-4"}),i.jsx("span",{children:"Perfil personalizado configurado"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-white/60",children:[i.jsx(oo,{className:"w-4 h-4"}),i.jsx("span",{children:"Pronto para explorar a plataforma"})]})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("p",{className:"text-white/50 text-sm mb-2",children:"Redirecionando automaticamente em:"}),i.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[r," segundos"]})]}),i.jsx("button",{onClick:s,className:"w-full py-3 px-6 bg-white/10 border border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg",children:"Ir para Home Agora (Teste)"})]})})]})},cF=()=>{const{user:t}=$e(),[e,r]=w.useState(""),[n,s]=w.useState(""),[o,a]=w.useState([]),[l,c]=w.useState(!1),[d,h]=w.useState(null),[f,m]=w.useState(""),y=["Como você se sentiu hoje?","Qual foi o melhor momento do seu dia?","O que você gostaria de melhorar amanhã?","Por que você está grato hoje?","Que desafio você enfrentou hoje?"];w.useEffect(()=>{t&&N()},[t]);const N=async()=>{if(t)try{c(!0);const T=await jl.getUserDiaryEntries(t.uid,20);a(T)}catch(T){console.error("Erro ao carregar entradas do diário:",T)}finally{c(!1)}},E=async()=>{if(!(!e.trim()||!n||!t))try{c(!0);const T={userId:t.uid,prompt:n,content:e.trim(),userName:t.displayName||"Usuário",userEmail:t.email};await jl.createDiaryEntry(T),await N(),r(""),s("");const M=document.querySelector("[data-save-entry]");M&&(M.innerHTML='<Check className="w-4 h-4" /><span>Salvo!</span>',setTimeout(()=>{M.innerHTML='<Send className="w-4 h-4" /><span>Salvar Reflexão</span>'},2e3))}catch(T){console.error("Erro ao salvar entrada:",T),alert("Erro ao salvar reflexão. Tente novamente.")}finally{c(!1)}},k=async T=>{if(f.trim())try{c(!0),await jl.updateDiaryEntry(T,{content:f.trim(),isEdited:!0}),await N(),h(null),m("")}catch(M){console.error("Erro ao editar entrada:",M),alert("Erro ao editar reflexão. Tente novamente.")}finally{c(!1)}},v=async T=>{if(confirm("Tem certeza que deseja excluir esta reflexão?"))try{c(!0),await jl.deleteDiaryEntry(T),await N()}catch(M){console.error("Erro ao excluir entrada:",M),alert("Erro ao excluir reflexão. Tente novamente.")}finally{c(!1)}},g=T=>{h(T.id),m(T.content)},x=()=>{h(null),m("")},b=T=>T?Cn.formatDate(T,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Data não disponível";return t?i.jsxs("div",{className:"space-y-6 animation-initial animate-fade-in-up animation-delay-100",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(ra,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Diário Evolutivo"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Escolha uma reflexão para começar:"}),i.jsx("div",{className:"space-y-2",children:y.map((T,M)=>i.jsx("button",{onClick:()=>s(T),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${n===T?"bg-white/10 border border-white/20 text-white":"bg-gray-800/30 hover:bg-gray-700/30 text-gray-300"}`,children:i.jsx("span",{className:"text-sm",children:T})},M))})]}),i.jsxs("div",{className:"space-y-4",children:[n&&i.jsx("div",{className:"bg-white/10 border border-white/20 rounded-lg p-3",children:i.jsx("p",{className:"text-gray-300 text-sm font-medium",children:n})}),i.jsx("textarea",{value:e,onChange:T=>r(T.target.value),placeholder:"Escreva seus pensamentos e sentimentos aqui...",className:"w-full bg-gray-800/50 border border-gray-600/50 rounded-xl p-4 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-all duration-200 min-h-[120px]"}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:E,disabled:!e.trim()||!n||l,"data-save-entry":!0,className:"bg-gradient-to-r from-white to-gray-200 text-black px-6 py-2 rounded-lg font-medium hover:from-gray-200 hover:to-gray-300 transform hover:scale-105 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(qc,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Reflexão"})]})})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Reflexões Recentes"}),l?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),i.jsx("p",{className:"text-white/50 mt-2",children:"Carregando..."})]}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ra,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/70 mb-2",children:"Nenhuma reflexão ainda"}),i.jsx("p",{className:"text-white/50",children:"Comece escrevendo sua primeira reflexão acima"})]}):i.jsx("div",{className:"space-y-3",children:o.map(T=>i.jsx("div",{className:"bg-gray-800/30 rounded-lg p-4",children:d===T.id?i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"bg-white/10 border border-white/20 rounded-lg p-3",children:i.jsx("p",{className:"text-gray-300 text-sm font-medium",children:T.prompt})}),i.jsx("textarea",{value:f,onChange:M=>m(M.target.value),className:"w-full bg-gray-800/50 border border-gray-600/50 rounded-lg p-3 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-all duration-200 min-h-[100px]"}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:x,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors duration-200",children:i.jsx(lr,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>k(T.id),disabled:!f.trim()||l,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(ai,{className:"w-4 h-4"})})]})]}):i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white text-sm mb-2 font-medium",children:T.prompt}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:T.content}),i.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[i.jsx("p",{className:"text-gray-500 text-xs",children:b(T.createdAt)}),T.isEdited&&i.jsx("span",{className:"text-gray-500 text-xs bg-gray-700/50 px-2 py-1 rounded",children:"Editado"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>g(T),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",title:"Editar",children:i.jsx(am,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>v(T.id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all duration-200",title:"Excluir",children:i.jsx(sr,{className:"w-4 h-4"})})]})]})})},T.id))})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ra,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/70 mb-2",children:"Faça login para usar o diário"}),i.jsx("p",{className:"text-white/50",children:"Entre na sua conta para começar a escrever suas reflexões"})]})};function uF(){return i.jsx(cF,{})}const dF=()=>{var b;const t=xt(),[e,r]=w.useState([]),[n,s]=w.useState([]),[o,a]=w.useState(""),[l,c]=w.useState("all"),[d,h]=w.useState("popular"),[f,m]=w.useState(!0),[y,N]=w.useState([]),E=[{id:1,name:"Ansiedade ",description:"Um espaço seguro para compartilhar experiências sobre ansiedade e encontrar apoio mútuo. Dicas, técnicas de respiração e muito mais.",icon:"🧘",memberCount:1250,category:"mental-health",isPrivate:!1,createdAt:new Date(2023,5,15),tags:["ansiedade","bem-estar","respiração","mindfulness"],lastActivity:new Date(Date.now()-2*60*60*1e3),moderators:["Dr. Ana Silva","Psic. Carlos Santos"],rules:["Seja respeitoso","Não dê conselhos médicos","Compartilhe experiências pessoais"]},{id:2,name:"Apoio Emocional",description:"Comunidade de apoio para pessoas que lidam com depressão. Aqui você não está sozinho(a).",icon:"🌱",memberCount:980,category:"mental-health",isPrivate:!1,createdAt:new Date(2023,4,10),tags:["depressão","apoio","suporte","recovery"],lastActivity:new Date(Date.now()-1*60*60*1e3),moderators:["Dra. Maria Costa"],rules:["Ambiente seguro","Sem julgamentos","Apoio mútuo"]},{id:3,name:"Meditação Diária",description:"Pratique meditação em grupo e compartilhe suas experiências de mindfulness.",icon:"🕯️",memberCount:750,category:"wellness",isPrivate:!1,createdAt:new Date(2023,3,20),tags:["meditação","mindfulness","paz","relaxamento"],lastActivity:new Date(Date.now()-3*60*60*1e3),moderators:["Mestre João"],rules:["Prática diária","Compartilhe experiências","Respeite o silêncio"]},{id:4,name:"Relacionamentos Saudáveis",description:"Discussões sobre relacionamentos, comunicação e desenvolvimento pessoal.",icon:"💝",memberCount:650,category:"relationships",isPrivate:!1,createdAt:new Date(2023,6,5),tags:["relacionamentos","comunicação","amor","família"],lastActivity:new Date(Date.now()-30*60*1e3),moderators:["Terapeuta Ana"],rules:["Respeito mútuo","Sem ataques pessoais","Compartilhe com responsabilidade"]},{id:5,name:"Autoestima e Confiança",description:"Construindo amor próprio e confiança juntos. Exercícios práticos e apoio.",icon:"⭐",memberCount:820,category:"self-improvement",isPrivate:!1,createdAt:new Date(2023,2,12),tags:["autoestima","confiança","amor próprio","crescimento"],lastActivity:new Date(Date.now()-45*60*1e3),moderators:["Coach Laura"],rules:["Positividade","Sem comparações","Celebre conquistas"]},{id:6,name:"Pais e Filhos",description:"Comunidade para pais compartilharem experiências na criação dos filhos.",icon:"👨‍👩‍👧‍👦",memberCount:1100,category:"family",isPrivate:!1,createdAt:new Date(2023,1,8),tags:["paternidade","filhos","educação","família"],lastActivity:new Date(Date.now()-20*60*1e3),moderators:["Psic. Infantil Maria"],rules:["Experiências construtivas","Sem julgamentos","Apoio parental"]},{id:7,name:"Carreira e Burnout",description:"Discussões sobre vida profissional, estresse no trabalho e equilíbrio.",icon:"💼",memberCount:890,category:"career",isPrivate:!1,createdAt:new Date(2023,7,18),tags:["carreira","burnout","trabalho","estresse"],lastActivity:new Date(Date.now()-4*60*60*1e3),moderators:["Coach Pedro"],rules:["Confidencialidade","Apoio profissional","Sem spam"]},{id:8,name:"Grupo VIP - Terapia",description:"Grupo privado para discussões mais profundas sobre terapia e crescimento.",icon:"🔒",memberCount:45,category:"therapy",isPrivate:!0,createdAt:new Date(2023,0,25),tags:["terapia","privado","crescimento","suporte"],lastActivity:new Date(Date.now()-1*60*60*1e3),moderators:["Dr. Ricardo"],rules:["Máxima confidencialidade","Aprovação necessária","Compromisso sério"]}],k=[{id:"all",name:"Todas",icon:rS},{id:"mental-health",name:"Saúde Mental",icon:"🧠"},{id:"wellness",name:"Bem-estar",icon:"🌿"},{id:"relationships",name:"Relacionamentos",icon:"💕"},{id:"self-improvement",name:"Desenvolvimento",icon:"📈"},{id:"family",name:"Família",icon:"👨‍👩‍👧‍👦"},{id:"career",name:"Carreira",icon:"💼"},{id:"therapy",name:"Terapia",icon:"🔒"}];w.useEffect(()=>{setTimeout(()=>{r(E),s(E),m(!1)},1e3)},[]),w.useEffect(()=>{let T=e;switch(l!=="all"&&(T=T.filter(M=>M.category===l)),o&&(T=T.filter(M=>M.name.toLowerCase().includes(o.toLowerCase())||M.description.toLowerCase().includes(o.toLowerCase())||M.tags.some(I=>I.toLowerCase().includes(o.toLowerCase())))),d){case"popular":T.sort((M,I)=>I.memberCount-M.memberCount);break;case"recent":T.sort((M,I)=>I.lastActivity-M.lastActivity);break;case"alphabetical":T.sort((M,I)=>M.name.localeCompare(I.name));break}s(T)},[e,l,o,d]);const v=()=>{console.warn("Entrada em comunidades desativada neste build.")},g=()=>{console.warn("Saída de comunidades desativada neste build.")},x=T=>{const I=Math.floor((new Date-T)/(1e3*60));return I<60?`${I}m atrás`:I<1440?`${Math.floor(I/60)}h atrás`:`${Math.floor(I/1440)}d atrás`};return f?i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando comunidades..."})]})}):i.jsxs("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg transition-colors",children:i.jsx(xo,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Explorar Comunidades"}),i.jsx("p",{className:"text-white/70",children:"Encontre grupos que combinam com seus interesses"})]})]})}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar comunidades, tags, temas...",value:o,onChange:T=>a(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(IL,{className:"w-5 h-5 text-white/70"}),i.jsxs("select",{value:d,onChange:T=>h(T.target.value),className:"bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"popular",children:"Mais Populares"}),i.jsx("option",{value:"recent",children:"Recentes"}),i.jsx("option",{value:"alphabetical",children:"A-Z"})]})]})})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:k.map(T=>i.jsxs("button",{onClick:()=>c(T.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l===T.id?"bg-blue-600 text-white":"bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"}`,children:[i.jsx("span",{className:"mr-2",children:typeof T.icon=="string"?T.icon:"🌐"}),T.name]},T.id))})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-white",children:[n.length," comunidades encontradas"]}),i.jsxs("p",{className:"text-white/60 text-sm",children:[l!=="all"&&`Categoria: ${(b=k.find(T=>T.id===l))==null?void 0:b.name}`,o&&` • Busca: "${o}"`]})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(T=>{const M=y.includes(T.id);return i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 hover:bg-white/15 transition-all duration-200",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center text-2xl",children:T.icon}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-bold text-white text-lg",children:T.name}),T.isPrivate&&i.jsx(yc,{className:"w-4 h-4 text-yellow-400"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/60",children:[i.jsx(At,{className:"w-4 h-4"}),i.jsxs("span",{children:[T.memberCount.toLocaleString()," membros"]})]})]})]}),i.jsx("button",{onClick:()=>M?g(T.id):v(T.id),className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 cursor-pointer bg-white hover:bg-gray-100",title:M?"Sair da comunidade":"Entrar na comunidade",children:M?i.jsx(ai,{className:"w-5 h-5 text-black"}):i.jsx(Gr,{className:"w-5 h-5 text-black"})})]}),i.jsx("p",{className:"text-white/80 text-sm leading-relaxed mb-4 line-clamp-3",children:T.description}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[T.tags.slice(0,3).map((I,j)=>i.jsxs("span",{className:"px-2 py-1 bg-white/10 rounded-full text-xs text-white/70 border border-white/20",children:["#",I]},j)),T.tags.length>3&&i.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded-full text-xs text-white/50",children:["+",T.tags.length-3]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-white/50",children:[i.jsx(Ut,{className:"w-3 h-3"}),i.jsx("span",{children:x(T.lastActivity)})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-white/50",children:[i.jsx(Fn,{className:"w-3 h-3"}),i.jsx("span",{children:"Moderado"})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[i.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Moderadores:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:T.moderators.map((I,j)=>i.jsx("span",{className:"text-xs text-white bg-white/10 px-2 py-1 rounded",children:I},j))})]})]},T.id)})}),n.length===0&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),i.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"Nenhuma comunidade encontrada"}),i.jsx("p",{className:"text-white/70 mb-6",children:"Tente ajustar seus filtros ou termo de busca"}),i.jsx("button",{onClick:()=>{a(""),c("all")},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Limpar Filtros"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Não encontrou o que procura?"}),i.jsx("p",{className:"text-white/70 mb-4",children:"Sugira uma nova comunidade ou entre em contato conosco"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx("button",{className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Sugerir Comunidade"}),i.jsx("button",{className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-lg font-medium transition-colors",children:"Entrar em Contato"})]})]})]})},lm=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[s,o]=w.useState(null),[a,l]=w.useState(!0),{user:c}=$e(),d=w.useCallback(async()=>{try{n(!0),o(null);const v=await Ms.getPosts(20),g=v.map(x=>({...x,createdAt:Cn.convertTimestamp(x.createdAt),updatedAt:x.updatedAt?Cn.convertTimestamp(x.updatedAt):void 0}));e(g),l(v.length===20)}catch(v){o(v instanceof Error?v.message:"Erro ao carregar posts"),console.error("Erro ao carregar posts:",v)}finally{n(!1)}},[]),h=w.useCallback(async()=>{if(!(r||!a))try{n(!0);const v=await Ms.getPosts(20,t.length);if(v.length===0){l(!1);return}const g=v.map(x=>({...x,createdAt:Cn.convertTimestamp(x.createdAt),updatedAt:x.updatedAt?Cn.convertTimestamp(x.updatedAt):void 0}));e(x=>[...x,...g]),l(v.length===20)}catch(v){o(v instanceof Error?v.message:"Erro ao carregar mais posts"),console.error("Erro ao carregar mais posts:",v)}finally{n(!1)}},[r,a,t.length]),f=w.useCallback(async v=>{if(!c)throw new Error("Usuário não autenticado");try{const g=await Ms.createPost(v);if(g.success){const x={id:g.postId,...v,isAnonymous:!1,createdAt:new Date,likes:[],commentCount:0,shares:0,isEdited:!1};return e(b=>[x,...b]),x}return null}catch(g){throw console.error("Erro ao criar post:",g),g}},[c]),m=w.useCallback(async v=>{if(!c)throw new Error("Usuário não autenticado");try{return await Ms.deletePost(v)?(e(x=>x.filter(b=>b.id!==v)),!0):!1}catch(g){throw console.error("Erro ao deletar post:",g),g}},[c]),y=w.useCallback(async v=>{if(!c)return!1;try{const g=await Ms.togglePostLike(v,c.uid);return g&&e(x=>x.map(b=>{if(b.id===v){const M=b.likes.includes(c.uid)?b.likes.filter(I=>I!==c.uid):[...b.likes,c.uid];return{...b,likes:M}}return b})),g}catch(g){return console.error("Erro ao curtir post:",g),!1}},[c]),N=w.useCallback(v=>{if(!c)return!1;const g=t.find(x=>x.id===v);return g?g.likes.includes(c.uid):!1},[t,c]),E=w.useCallback(async(v,g)=>{if(!c)throw new Error("Usuário não autenticado");try{const x={authorId:c.uid,authorName:c.displayName||c.email||"Usuário",authorAvatar:c.photoURL,content:g.trim()},b=await jn.addComment(v,x);return b.success?(e(T=>T.map(M=>M.id===v?{...M,commentCount:M.commentCount+1}:M)),b.commentId):null}catch(x){throw console.error("Erro ao adicionar comentário:",x),x}},[c]),k=w.useCallback(async v=>{try{return(await jn.getPostComments(v)).map(x=>({...x,createdAt:Cn.convertTimestamp(x.createdAt)}))}catch(g){throw console.error("Erro ao buscar comentários:",g),g}},[]);return w.useEffect(()=>{d()},[d]),{posts:t,loading:r,error:s,hasMore:a,loadMorePosts:h,createPost:f,deletePost:m,togglePostLike:y,isPostLiked:N,addComment:E,getPostComments:k,refreshPosts:d}},_S=({onPostCreated:t,onCancel:e,isModal:r=!1})=>{const{user:n}=$e(),{createPost:s}=lm(),[o,a]=w.useState(""),[l,c]=w.useState(""),[d,h]=w.useState("public"),[f,m]=w.useState(!1),[y,N]=w.useState(""),E=async x=>{if(x.preventDefault(),!o.trim()){N("Por favor, escreva algo para postar.");return}m(!0),N("");try{const b={content:o.trim(),tags:l.trim()?l.trim().split(",").map(M=>M.trim().replace("#","")):[],visibility:d,userId:n.uid,author:n.displayName||n.email||"Usuário",avatar:n.photoURL||(n.displayName?n.displayName[0].toUpperCase():n.email[0].toUpperCase()),image:null};await s(b)&&(a(""),c(""),h("public"),t&&t(b))}catch(b){N("Erro ao criar post. Tente novamente."),console.error("Erro ao criar post:",b)}finally{m(!1)}},k=()=>{e&&e()},v=x=>{h(x)},g=()=>{switch(d){case"public":return"Todos podem ver este post";case"private":return"Apenas você pode ver este post";default:return"Todos podem ver este post"}};return i.jsxs("div",{className:`${r?"":"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6"}`,children:[!r&&i.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Compartilhe algo..."}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("textarea",{value:o,onChange:x=>a(x.target.value),placeholder:"O que você gostaria de compartilhar hoje?",className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:4,maxLength:500}),i.jsx("div",{className:"flex justify-between items-center mt-2",children:i.jsxs("span",{className:"text-xs text-white/50",children:[o.length,"/500 caracteres"]})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"relative",children:[i.jsx(nS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",value:l,onChange:x=>c(x.target.value),placeholder:"Adicione tags (separadas por vírgula)",className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30"})]}),i.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Ex: ansiedade, terapia, bem-estar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Visibilidade do Post"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"public",label:"Público",icon:i.jsx(io,{className:"w-4 h-4"})},{value:"private",label:"Privado",icon:i.jsx(wc,{className:"w-4 h-4"})}].map(x=>i.jsxs("button",{type:"button",onClick:()=>v(x.value),className:`p-3 rounded-lg border transition-all duration-200 flex flex-col items-center space-y-2 ${d===x.value?"border-white/50 bg-white/20 text-white":"border-white/20 bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"}`,children:[x.icon,i.jsx("span",{className:"text-xs font-medium",children:x.label})]},x.value))}),i.jsx("p",{className:"text-xs text-white/60",children:g()})]}),y&&i.jsx("div",{className:"text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-2",children:y}),i.jsxs("div",{className:"flex items-center justify-between pt-4",children:[i.jsx("div",{className:"flex items-center space-x-4"}),i.jsxs("div",{className:"flex items-center space-x-3",children:[r&&e&&i.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",disabled:f,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:f||!o.trim(),className:"px-6 py-2 bg-white text-black rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:bg-white/30 disabled:scale-100 disabled:cursor-not-allowed flex items-center space-x-2",children:f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),i.jsx("span",{children:f?"Postando...":"Postar"})]}):i.jsxs(i.Fragment,{children:[i.jsx(qc,{className:"w-4 h-4"}),i.jsx("span",{children:"Postar"})]})})]})]})]})]})},hF=t=>{let e=null,r=null;try{const{useUserPosts:s}=require("../contexts/UserPostsContext");r=s(),e=r==null?void 0:r.addUserPost}catch{console.log("UserPostsContext não disponível, sincronização desabilitada")}const n=s=>{if(e){const o={id:Date.now().toString(),...s,createdAt:new Date,likes:[],commentCount:0,shares:0,isEdited:!1};e(o)}t.onPostCreated&&t.onPostCreated(s)};return i.jsx(_S,{...t,onPostCreated:n})},mF=t=>{const[e,r]=w.useState([]),[n,s]=w.useState(!0),[o,a]=w.useState(null),[l,c]=w.useState(!0),{user:d}=$e(),h=w.useCallback(async()=>{if(t)try{s(!0),a(null);const g=await jn.getPostComments(t,50),x=g.map(b=>({...b,createdAt:Cn.convertTimestamp(b.createdAt),updatedAt:b.updatedAt?Cn.convertTimestamp(b.updatedAt):void 0}));r(x),c(g.length===50)}catch(g){a(g instanceof Error?g.message:"Erro ao carregar comentários"),console.error("Erro ao carregar comentários:",g)}finally{s(!1)}},[t]),f=w.useCallback(async(g,x=!1)=>{if(!d||!t)throw new Error("Usuário não autenticado ou post não especificado");try{const b={authorId:d.uid,authorName:x?"Usuário Anônimo":d.displayName||d.email||"Usuário",authorAvatar:x?null:d.photoURL,content:g.trim(),isAnonymous:x},T=await jn.addComment(t,b);if(T.success){const M={id:T.commentId,postId:t,...b,likes:[],createdAt:new Date,isHidden:!1,isReported:!1};return r(I=>[M,...I]),T.commentId}return null}catch(b){throw console.error("Erro ao adicionar comentário:",b),b}},[d,t]),m=w.useCallback(async(g,x)=>{if(!d)throw new Error("Usuário não autenticado");try{return await jn.editComment(g,x)?(r(T=>T.map(M=>M.id===g?{...M,content:x,isEdited:!0,updatedAt:new Date}:M)),!0):!1}catch(b){throw console.error("Erro ao editar comentário:",b),b}},[d]),y=w.useCallback(async g=>{if(!d)throw new Error("Usuário não autenticado");try{return await jn.deleteComment(g)?(r(b=>b.filter(T=>T.id!==g)),!0):!1}catch(x){throw console.error("Erro ao deletar comentário:",x),x}},[d]),N=w.useCallback(async g=>{if(!d)throw new Error("Usuário não autenticado");try{return await jn.toggleCommentVisibility(g)?(r(b=>b.map(T=>T.id===g?{...T,isHidden:!T.isHidden}:T)),!0):!1}catch(x){throw console.error("Erro ao ocultar comentário:",x),x}},[d]),E=w.useCallback(async(g,x)=>{if(!d)throw new Error("Usuário não autenticado");try{return await jn.reportComment(g,x)?(r(T=>T.map(M=>M.id===g?{...M,isReported:!0,reportedBy:[...M.reportedBy||[],d.uid],reportReasons:[...M.reportReasons||[],x]}:M)),!0):!1}catch(b){throw console.error("Erro ao reportar comentário:",b),b}},[d]),k=w.useCallback(async g=>{if(!d)throw new Error("Usuário não autenticado");try{return await jn.toggleCommentLike(g,d.uid)?(r(b=>b.map(T=>T.id===g?T.likes.includes(d.uid)?{...T,likes:T.likes.filter(I=>I!==d.uid)}:{...T,likes:[...T.likes,d.uid]}:T)),!0):!1}catch(x){throw console.error("Erro ao curtir comentário:",x),x}},[d]),v=w.useCallback(g=>{if(!d)return!1;const x=e.find(b=>b.id===g);return x?x.likes.includes(d.uid):!1},[d,e]);return w.useEffect(()=>{h()},[h]),{comments:e,loading:n,error:o,hasMore:l,loadMoreComments:h,addComment:f,editComment:m,deleteComment:y,hideComment:N,reportComment:E,toggleCommentLike:k,isCommentLiked:v,refreshComments:h}},fF=({postId:t})=>{const[e,r]=w.useState(""),[n,s]=w.useState(!1),[o,a]=w.useState(null),[l,c]=w.useState(null),[d,h]=w.useState(null),[f,m]=w.useState(""),[y,N]=w.useState(null),[E,k]=w.useState(""),v=w.useRef(null),{user:g}=$e(),{comments:x,loading:b,error:T,addComment:M,editComment:I,deleteComment:j,toggleCommentLike:A,isCommentLiked:C,hideComment:S,reportComment:D}=mF(t),R=async U=>{if(U.preventDefault(),!e.trim())return;await M(e,n)&&(r(""),s(!1))},$=async U=>{if(!f.trim())return;await I(U,f)&&(h(null),m(""))},ie=async U=>{window.confirm("Tem certeza que deseja deletar este comentário?")&&await j(U)&&a(null)},ue=async U=>{await S(U)&&a(null)},Q=async U=>{if(!E.trim()){alert("Por favor, informe o motivo do report.");return}await D(U,E)&&(N(null),k(""),a(null))},V=async U=>{await A(U)},q=U=>{const me=new Date-U,Te=Math.floor(me/(1e3*60)),de=Math.floor(me/(1e3*60*60)),tr=Math.floor(me/(1e3*60*60*24));return Te<1?"Agora mesmo":Te<60?`${Te}m atrás`:de<24?`${de}h atrás`:tr<7?`${tr}d atrás`:U.toLocaleDateString("pt-BR")},O=U=>g&&(U.authorId===g.uid||g.role==="admin"),ee=U=>g&&(U.authorId===g.uid||g.role==="admin"),se=U=>g&&U.authorId!==g.uid;return w.useEffect(()=>{const U=Z=>{o&&!Z.target.closest(".comment-menu")&&a(null)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[o]),b?i.jsxs("div",{className:"text-center text-white/50 py-8",children:[i.jsx("div",{className:"loading-spinner mx-auto mb-4"}),"Carregando comentários..."]}):T?i.jsxs("div",{className:"text-center text-red-400 py-8",children:["Erro ao carregar comentários: ",T]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:i.jsx("form",{onSubmit:R,className:"space-y-3",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:g!=null&&g.photoURL?i.jsx("img",{src:g.photoURL,alt:g.displayName,className:"w-8 h-8 rounded-full"}):i.jsx(st,{className:"w-4 h-4 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("textarea",{ref:v,value:e,onChange:U=>r(U.target.value),placeholder:"Adicione um comentário...",className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:3}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/70 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:n,onChange:U=>s(U.target.checked),className:"w-4 h-4 rounded border-white/30 bg-white/10 text-white focus:ring-white/30"}),i.jsx("span",{children:"Comentar anonimamente"})]}),i.jsxs("button",{type:"submit",disabled:!e.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-white text-black rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:bg-white/30 disabled:scale-100 disabled:cursor-not-allowed",children:[i.jsx(qc,{className:"w-4 h-4"}),i.jsx("span",{children:"Comentar"})]})]})]})]})})}),i.jsx("div",{className:"space-y-4",children:x.length===0?i.jsx("div",{className:"text-center text-white/50 py-8",children:"Nenhum comentário ainda. Seja o primeiro a comentar!"}):x.map(U=>{var Z;return i.jsx("div",{className:`bg-white/5 rounded-lg p-4 ${U.isHidden?"opacity-50":""}`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:U.authorAvatar?i.jsx("img",{src:U.authorAvatar,alt:U.authorName,className:"w-8 h-8 rounded-full"}):i.jsx(st,{className:"w-4 h-4 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h5",{className:"font-medium text-white",children:U.authorName}),U.isAnonymous&&i.jsx("span",{className:"text-xs bg-white/20 text-white/70 px-2 py-1 rounded-full",children:"Anônimo"}),i.jsx("span",{className:"text-xs text-white/50",children:q(U.createdAt)}),U.isEdited&&i.jsx("span",{className:"text-xs text-white/30",children:"(editado)"})]}),i.jsxs("div",{className:"relative comment-menu",children:[i.jsx("button",{onClick:()=>a(o===U.id?null:U.id),className:"p-1 text-white/50 hover:text-white transition-colors rounded-full hover:bg-white/10",children:i.jsx(wo,{className:"w-4 h-4"})}),o===U.id&&i.jsx("div",{className:"absolute right-0 top-8 bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-10 min-w-[160px]",children:i.jsxs("div",{className:"py-1",children:[O(U)&&i.jsxs("button",{onClick:()=>{h(U.id),m(U.content),a(null)},className:"w-full px-4 py-2 text-left text-white hover:bg-white/20 transition-colors flex items-center space-x-2",children:[i.jsx(Bc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),O(U)&&i.jsxs("button",{onClick:()=>ie(U.id),className:"w-full px-4 py-2 text-left text-red-400 hover:bg-red-500/20 transition-colors flex items-center space-x-2",children:[i.jsx(sr,{className:"w-4 h-4"}),i.jsx("span",{children:"Deletar"})]}),ee(U)&&i.jsxs("button",{onClick:()=>ue(U.id),className:"w-full px-4 py-2 text-left text-white hover:bg-white/20 transition-colors flex items-center space-x-2",children:[i.jsx(wc,{className:"w-4 h-4"}),i.jsx("span",{children:U.isHidden?"Mostrar":"Ocultar"})]}),se(U)&&i.jsxs("button",{onClick:()=>N(U.id),className:"w-full px-4 py-2 text-left text-orange-400 hover:bg-orange-500/20 transition-colors flex items-center space-x-2",children:[i.jsx(xx,{className:"w-4 h-4"}),i.jsx("span",{children:"Reportar"})]})]})})]})]}),d===U.id?i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{value:f,onChange:me=>m(me.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:3}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>$(U.id),className:"px-3 py-1 bg-white text-black rounded-lg text-sm font-medium hover:bg-white/90 transition-colors",children:"Salvar"}),i.jsx("button",{onClick:()=>{h(null),m("")},className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm font-medium hover:bg-white/20 transition-colors",children:"Cancelar"})]})]}):i.jsx("p",{className:"text-white/90 leading-relaxed",children:U.content}),i.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[i.jsxs("button",{onClick:()=>V(U.id),className:`flex items-center space-x-1 transition-colors ${C(U.id)?"text-red-400":"text-white/50 hover:text-white"}`,children:[i.jsx(Ar,{className:`w-4 h-4 ${C(U.id)?"fill-current":""}`}),i.jsx("span",{className:"text-sm",children:((Z=U.likes)==null?void 0:Z.length)||0})]}),i.jsxs("button",{onClick:()=>c(l===U.id?null:U.id),className:"flex items-center space-x-1 text-white/50 hover:text-white transition-colors",children:[i.jsx(Yp,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Responder"})]})]}),l===U.id&&i.jsx("div",{className:"mt-3 pl-6 border-l-2 border-white/20",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:g!=null&&g.photoURL?i.jsx("img",{src:g.photoURL,alt:g.displayName,className:"w-6 h-6 rounded-full"}):i.jsx(st,{className:"w-3 h-3 text-white/70"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("textarea",{placeholder:"Responder ao comentário...",className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:2}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/70 cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-white/30 bg-white/10 text-white focus:ring-white/30"}),i.jsx("span",{children:"Responder anonimamente"})]}),i.jsx("button",{className:"px-3 py-1 bg-white text-black rounded-lg text-sm font-medium hover:bg-white/90 transition-colors",children:"Responder"})]})]})]})})]})]})},U.id)})}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(oh,{className:"w-6 h-6 text-orange-400"}),i.jsx("h3",{className:"text-xl font-medium text-white",children:"Reportar Comentário"})]}),i.jsx("p",{className:"text-white/70 mb-4",children:"Por favor, informe o motivo pelo qual está reportando este comentário:"}),i.jsx("textarea",{value:E,onChange:U=>k(U.target.value),placeholder:"Descreva o motivo do report...",className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 mb-4",rows:3}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:()=>{N(null),k("")},className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:()=>Q(y),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors",children:"Reportar"})]})]})})]})},pF=()=>{const t=xt(),{user:e}=$e(),[r,n]=w.useState(null),[s,o]=w.useState(null);w.useState(new Set);const{posts:a,loading:l,error:c,hasMore:d,loadMorePosts:h,togglePostLike:f,isPostLiked:m,deletePost:y}=lm(),N=async g=>{e&&await f(g)},E=async g=>{if(window.confirm("Tem certeza que deseja deletar este post?")){o(g);try{await y(g)&&n(null)}catch(x){console.error("Erro ao deletar post:",x)}finally{o(null)}}},k=g=>{console.log("Edit post:",g),n(null)},v=g=>{if(!g)return"Agora mesmo";const x=new Date,b=g.toDate?g.toDate():new Date(g),T=x-b,M=Math.floor(T/(1e3*60)),I=Math.floor(T/(1e3*60*60)),j=Math.floor(T/(1e3*60*60*24));return M<1?"Agora mesmo":M<60?`${M}m atrás`:I<24?`${I}h atrás`:j<7?`${j}d atrás`:b.toLocaleDateString("pt-BR")};return l&&a.length===0?i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando posts..."})]}):c&&a.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(xx,{className:"w-12 h-12 text-red-400"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Erro ao carregar posts"}),i.jsx("p",{className:"text-white/40 mb-6",children:c}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors",children:"Tentar novamente"})]}):a.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ft,{className:"w-12 h-12 text-white/30"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Nenhum post ainda"}),i.jsx("p",{className:"text-white/40",children:"Seja o primeiro a compartilhar algo!"})]}):i.jsxs("div",{className:"space-y-6",children:[a.map(g=>{var x,b;return i.jsxs("article",{className:"bg-white/5 border border-white/10 rounded-xl p-6 hover:bg-white/10 transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer",onClick:()=>!g.isAnonymous&&t(`/profile/${g.userId}`),children:[g.avatar&&g.avatar.startsWith&&(g.avatar.startsWith("http://")||g.avatar.startsWith("https://"))?i.jsx("img",{src:g.avatar,alt:g.author,className:"w-12 h-12 rounded-full object-cover"}):i.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center text-black font-bold text-lg",children:g.avatar||(g.author?g.author.charAt(0).toUpperCase():"U")}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"text-white font-semibold",children:g.isAnonymous?"Usuário Anônimo":g.author}),g.isAnonymous&&i.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:"Anônimo"}),g.visibility==="private"&&i.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:"Privado"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/60",children:[i.jsx(Ut,{className:"w-3 h-3"}),i.jsx("span",{children:v(g.createdAt)}),g.isEdited&&i.jsx("span",{className:"text-xs text-white/40",children:"(editado)"})]})]})]}),e&&(g.userId===e.uid||e.role==="admin")&&i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>n(r===g.id?null:g.id),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(wo,{className:"w-4 h-4 text-white/60"})}),r===g.id&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white/10 backdrop-blur-xl border border-white/20 rounded-lg shadow-xl z-10",children:[i.jsxs("button",{onClick:()=>k(g.id),className:"w-full px-4 py-2 text-left text-white hover:bg-white/10 flex items-center space-x-2 rounded-t-lg",children:[i.jsx(Bc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>E(g.id),disabled:s===g.id,className:"w-full px-4 py-2 text-left text-red-400 hover:bg-red-500/20 flex items-center space-x-2 rounded-b-lg disabled:opacity-50",children:[i.jsx(sr,{className:"w-4 h-4"}),i.jsx("span",{children:s===g.id?"Deletando...":"Deletar"})]})]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-white/90 text-lg leading-relaxed mb-3",children:g.content}),g.tags&&g.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:g.tags.map((T,M)=>i.jsxs("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 text-sm rounded-full border border-blue-500/30",children:["#",T]},M))})]}),i.jsx("div",{className:"flex items-center justify-between text-sm text-white/60 mb-4",children:i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("span",{children:[((x=g.likes)==null?void 0:x.length)||0," curtidas"]})})}),i.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:i.jsx("div",{className:"flex items-center space-x-6",children:i.jsxs("button",{onClick:()=>N(g.id),disabled:!e,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${m(g.id)?"bg-red-500/20 text-red-400 border border-red-500/30":"text-white/70 hover:text-white hover:bg-white/10"} ${e?"":"opacity-50 cursor-not-allowed"}`,children:[i.jsx(Ar,{className:`w-5 h-5 ${m(g.id)?"fill-current":""}`}),i.jsx("span",{className:"font-medium",children:m(g.id)?"Curtido":"Curtir"}),((b=g.likes)==null?void 0:b.length)>0&&i.jsxs("span",{className:"text-sm",children:["(",g.likes.length,")"]})]})})})]},g.id)}),d&&i.jsx("div",{className:"text-center",children:i.jsx("button",{onClick:h,disabled:l,className:"px-8 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors disabled:opacity-50",children:l?"Carregando...":"Carregar mais posts"})})]})},gF=(t=1e3)=>{const[e,r]=w.useState(new Date);return w.useEffect(()=>{const n=setInterval(()=>{r(new Date)},t);return()=>clearInterval(n)},[t]),e},xF=t=>{const e=gF(6e4);return{...w.useMemo(()=>{const n=e.getHours(),s=t||"Usuário";return n<12?{text:`Bom dia, ${s}!`,icon:d1,period:"morning"}:n<18?{text:`Boa tarde, ${s}!`,icon:d1,period:"afternoon"}:{text:`Boa noite, ${s}!`,icon:ML,period:"evening"}},[e,t]),currentTime:e,formattedDate:e.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},_f="psychologists",D1="PsychologistAccount",Co="patients",hl="sessions",wF="progress",M1="evaluations";class gi{constructor(){this.currentUser=jt.currentUser}async getRecommendedPsychologists(e=4){try{const r=we(G,D1),n=_e(r,ve("isAvailable","==",!0),He("rating","desc"),He("yearsExperience","desc"),Wr(e)),s=await Ce(n),o=[];return s.forEach(a=>{const l=a.data();o.push({id:a.id,name:l.displayName||"Psicólogo",specialty:l.specialty||"Psicologia Clínica",experience:l.yearsExperience?`${l.yearsExperience} anos`:"5 anos",rating:l.rating||5,bio:l.bio||"Psicólogo especializado em atendimento clínico",crp:l.crp||"CRP não informado",acceptsOnline:l.acceptsOnline||!1,avatar:l.avatar||"👨‍⚕️",initials:this.generateInitials(l.displayName||"Psicólogo")})}),o.sort((a,l)=>{if(l.rating!==a.rating)return l.rating-a.rating;const c=parseInt(a.experience)||0;return(parseInt(l.experience)||0)-c}),o}catch(r){console.error("Erro ao buscar psicólogos recomendados:",r);try{const n=we(G,D1),s=_e(n,ve("isAvailable","==",!0)),o=await Ce(s),a=[];return o.forEach(l=>{const c=l.data();a.push({id:l.id,name:c.displayName||"Psicólogo",specialty:c.specialty||"Psicologia Clínica",experience:c.yearsExperience?`${c.yearsExperience} anos`:"5 anos",rating:c.rating||5,bio:c.bio||"Psicólogo especializado em atendimento clínico",crp:c.crp||"CRP não informado",acceptsOnline:c.acceptsOnline||!1,avatar:c.avatar||"👨‍⚕️",initials:this.generateInitials(c.displayName||"Psicólogo")})}),a.sort((l,c)=>{if(c.rating!==l.rating)return c.rating-l.rating;const d=parseInt(l.experience)||0;return(parseInt(c.experience)||0)-d}),a.slice(0,e)}catch(n){return console.error("Erro na busca fallback:",n),[]}}}generateInitials(e){if(!e)return"PS";const r=e.trim().split(" ");if(r.length===1)return r[0].substring(0,2).toUpperCase();const n=r[0].charAt(0),s=r[r.length-1].charAt(0);return`${n}${s}`.toUpperCase()}async getPsychologistData(e){try{const r=fe(G,_f,e),n=await pt(r);if(n.exists())return{id:n.id,...n.data()};throw new Error("Psicólogo não encontrado")}catch(r){throw console.error("Erro ao buscar dados do psicólogo:",r),r}}async updatePsychologistData(e,r){try{const n=fe(G,_f,e);return await Ue(n,{...r,updatedAt:je()}),!0}catch(n){throw console.error("Erro ao atualizar dados do psicólogo:",n),n}}async getPatients(e){try{const r=_e(we(G,Co),ve("psychologistId","==",e),He("createdAt","desc")),n=await Ce(r),s=[];return n.forEach(o=>{s.push({id:o.id,...o.data()})}),s}catch(r){throw console.error("Erro ao buscar pacientes:",r),r}}async addPatient(e,r){try{return(await Ir(we(G,Co),{...r,psychologistId:e,createdAt:je(),status:"active",progress:0})).id}catch(n){throw console.error("Erro ao adicionar paciente:",n),n}}async updatePatient(e,r){try{const n=fe(G,Co,e);return await Ue(n,{...r,updatedAt:je()}),!0}catch(n){throw console.error("Erro ao atualizar paciente:",n),n}}async getSessions(e,r={}){try{let n=_e(we(G,hl),ve("psychologistId","==",e));r.status&&(n=_e(n,ve("status","==",r.status))),r.date&&(n=_e(n,ve("date",">=",r.date))),n=_e(n,He("date","asc"),He("time","asc"));const s=await Ce(n),o=[];return s.forEach(a=>{o.push({id:a.id,...a.data()})}),o}catch(n){throw console.error("Erro ao buscar sessões:",n),n}}async createSession(e,r){try{return(await Ir(we(G,hl),{...r,psychologistId:e,createdAt:je(),status:"pending"})).id}catch(n){throw console.error("Erro ao criar sessão:",n),n}}async updateSessionStatus(e,r){try{const n=fe(G,hl,e);return await Ue(n,{status:r,updatedAt:je()}),!0}catch(n){throw console.error("Erro ao atualizar status da sessão:",n),n}}async getDashboardStats(e){try{const r=_e(we(G,Co),ve("psychologistId","==",e),ve("status","==","active")),s=(await Ce(r)).size,o=new Date,a=new Date(o.getFullYear(),o.getMonth(),1),l=_e(we(G,hl),ve("psychologistId","==",e),ve("date",">=",a),ve("status","==","completed")),d=(await Ce(l)).size,h=_e(we(G,M1),ve("psychologistId","==",e)),f=await Ce(h);let m=0,y=0;f.forEach(x=>{const b=x.data();b.rating&&(m+=b.rating,y++)});const N=y>0?(m/y).toFixed(1):0,E=new Date;E.setDate(E.getDate()-7);const k=_e(we(G,Co),ve("psychologistId","==",e),ve("createdAt",">=",E)),g=(await Ce(k)).size;return{activePatients:s,totalSessions:d,successRate:87,avgSessionTime:45,rating:N,newPatients:g}}catch(r){throw console.error("Erro ao buscar estatísticas:",r),r}}async getPatientProgress(e){try{const r=_e(we(G,wF),ve("patientId","==",e),He("date","desc"),Wr(10)),n=await Ce(r),s=[];return n.forEach(o=>{s.push({id:o.id,...o.data()})}),s}catch(r){throw console.error("Erro ao buscar progresso do paciente:",r),r}}async addSessionEvaluation(e,r,n){try{return(await Ir(we(G,M1),{...n,psychologistId:e,sessionId:r,createdAt:je()})).id}catch(s){throw console.error("Erro ao adicionar avaliação:",s),s}}subscribeToPatients(e,r){const n=_e(we(G,Co),ve("psychologistId","==",e),He("createdAt","desc"));return Wp(n,s=>{const o=[];s.forEach(a=>{o.push({id:a.id,...a.data()})}),r(o)})}subscribeToSessions(e,r){const n=_e(we(G,hl),ve("psychologistId","==",e),He("date","asc"),He("time","asc"));return Wp(n,s=>{const o=[];s.forEach(a=>{o.push({id:a.id,...a.data()})}),r(o)})}async markTourAsSeen(e){try{const r=fe(G,_f,e);return await Ue(r,{hasSeenTour:!0,updatedAt:je()}),!0}catch(r){throw console.error("Erro ao marcar tour como visto:",r),r}}}const yF=new gi,jS=async t=>{try{return{success:!0,data:await new gi().getPatients(t)}}catch(e){return console.error("Erro ao buscar pacientes:",e),{success:!1,error:e.message}}},vF=async(t,e)=>{try{return{success:!0,data:{id:await new gi().addPatient(t,e)}}}catch(r){return console.error("Erro ao criar paciente:",r),{success:!1,error:r.message}}},ES=async(t,e={})=>{try{return{success:!0,data:await new gi().getSessions(t,e)}}catch(r){return console.error("Erro ao buscar sessões:",r),{success:!1,error:r.message}}},bF=async t=>{try{return{success:!0,data:{id:await new gi().createSession(t.psychologistId,t)}}}catch(e){return console.error("Erro ao criar sessão:",e),{success:!1,error:e.message}}},NF=async(t,e)=>{try{return await new gi().updateSessionStatus(t,e.status),{success:!0}}catch(r){return console.error("Erro ao atualizar sessão:",r),{success:!1,error:r.message}}},_F=async t=>{try{return{success:!0,data:await new gi().getDashboardStats(t)}}catch(e){return console.error("Erro ao buscar estatísticas:",e),{success:!1,error:e.message}}},jF=async t=>{try{return{success:!0,data:[]}}catch(e){return console.error("Erro ao buscar mensagens:",e),{success:!1,error:e.message}}},EF=async t=>{try{return{success:!0,data:{id:Date.now().toString()}}}catch(e){return console.error("Erro ao criar mensagem:",e),{success:!1,error:e.message}}},SF=async t=>{try{return{success:!0}}catch(e){return console.error("Erro ao marcar mensagem como lida:",e),{success:!1,error:e.message}}},kF=async t=>{try{return await new gi().markTourAsSeen(t),{success:!0}}catch(e){return console.error("Erro ao marcar tour como visto:",e),{success:!1,error:e.message}}},CF=async t=>{try{return{success:!0,data:[]}}catch(e){return console.error("Erro ao buscar relatórios:",e),{success:!1,error:e.message}}},TF=async t=>{try{return{success:!0,data:{id:Date.now().toString()}}}catch(e){return console.error("Erro ao criar relatório:",e),{success:!1,error:e.message}}},SS=Jt.memo(({showWelcomeMessage:t=!1})=>{w.useState(0);const[e,r]=w.useState(!0),[n,s]=w.useState([]),[o,a]=w.useState(!0),{user:l}=$e(),c=xt(),{text:d,icon:h,formattedDate:f}=xF((l==null?void 0:l.username)||(l==null?void 0:l.displayName));w.useEffect(()=>{if(t){r(!0);const j=setTimeout(()=>{r(!1)},1500);return()=>clearTimeout(j)}},[t]);const[m,y]=w.useState(!1);w.useEffect(()=>{if(t&&e){const j=setTimeout(()=>{y(!0)},1e3);return()=>clearTimeout(j)}else y(!1)},[t,e]);const[N,E]=w.useState(null),[k,v]=w.useState(!1),g=w.useMemo(()=>[{frase:"A jornada de mil milhas começa com um único passo.",autor:"Lao Tzu"},{frase:"A felicidade não é algo pronto. Ela vem das suas próprias ações.",autor:"Dalai Lama"},{frase:"Cada dia é uma nova oportunidade para ser melhor.",autor:"Desconhecido"},{frase:"A mente é como um paraquedas. Só funciona quando está aberta.",autor:"Frank Zappa"},{frase:"O bem-estar começa com a aceitação de quem você é.",autor:"Desconhecido"}],[]),x=w.useCallback(async()=>{try{a(!0);const A=(await yF.getRecommendedPsychologists(4)).map(C=>({...C,profileImage:C.id==="psychologist1"?"https://via.placeholder.com/150/0000FF/FFFFFF?text=PS":null}));s(A)}catch(j){console.error("Erro ao buscar psicólogos recomendados:",j),s([])}finally{a(!1)}},[]);w.useEffect(()=>{x()},[x]);const b=w.useCallback(async()=>{v(!0);try{await new Promise(A=>setTimeout(A,500));const j=Math.floor(Math.random()*g.length);E(g[j])}catch{E(null)}finally{v(!1)}},[g]);w.useEffect(()=>{b()},[b]);const T=w.useCallback(()=>{b()},[b]),M=w.useCallback(j=>{c(`/home/profile/${j.id}`)},[c]),I=w.useCallback(()=>{},[]);return i.jsxs(yt,{variant:"glass",padding:"lg",className:"mb-8 animation-initial animate-fade-in-up",children:[e&&i.jsx(yt.Header,{children:i.jsxs("div",{className:`text-center mb-6 animation-initial animate-fade-in-up animation-delay-100 ${t&&m?"welcome-greeting-fade-out":""}`,children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(h,{className:"w-6 h-6 text-gray-400","aria-hidden":"true"}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:d})]}),i.jsx("time",{className:"text-gray-400",dateTime:new Date().toISOString(),children:f})]})}),i.jsxs(yt.Content,{children:[i.jsx(yt,{variant:"glass",padding:"lg",className:"mb-6 animation-initial animate-fade-in-up animation-delay-200",children:i.jsxs("div",{onKeyDown:I,tabIndex:0,role:"region","aria-label":"Mensagem motivacional","aria-live":"polite",children:[i.jsx("div",{className:"text-center min-h-[100px] flex flex-col justify-center",children:k?i.jsx("div",{className:"text-white/70",children:"Carregando frase..."}):N?i.jsxs(i.Fragment,{children:[i.jsxs("blockquote",{className:"text-white text-lg leading-relaxed mb-3",children:['"',N.frase,'"']}),i.jsxs("cite",{className:"text-gray-300 text-sm font-medium not-italic",children:["- ",N.autor]})]}):i.jsx("div",{className:"text-white/70",children:"Não foi possível carregar a frase agora."})}),i.jsx("div",{className:"flex items-center justify-center mt-6",children:i.jsx("button",{onClick:T,className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors focus-ring","aria-label":"Atualizar frase",children:"Nova frase"})}),i.jsxs("div",{className:"text-center mt-4",children:[i.jsx("p",{className:"text-sm text-gray-300",children:"Ajudando na construção da sua própria história!"}),i.jsx("div",{className:"flex justify-center space-x-1 mt-2",role:"img","aria-label":"Corações de apoio",children:[...Array(3)].map((j,A)=>i.jsx(Ar,{className:"w-4 h-4 text-gray-400 fill-current","aria-hidden":"true"},A))})]})]})}),i.jsxs(yt,{variant:"glass",padding:"lg",children:[i.jsx(yt.Header,{children:i.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Psicólogos Recomendados"})}),i.jsx(yt.Content,{children:o?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),i.jsx("span",{className:"text-white/70 ml-3",children:"Carregando psicólogos..."})]}):n.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(st,{className:"w-12 h-12 text-white/30 mx-auto mb-3"}),i.jsx("p",{className:"text-white/70 text-sm",children:"Nenhum psicólogo disponível no momento"}),i.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Tente novamente mais tarde"})]}):i.jsx("div",{className:"space-y-4",children:n.map(j=>i.jsx("article",{className:"bg-white/5 border border-white/10 rounded-xl p-4 hover:bg-white/10 transition-all duration-200 group cursor-pointer",onClick:()=>M(j),children:i.jsxs("div",{className:"flex items-start space-x-4",children:[j.profileImage?i.jsx("img",{src:j.profileImage,alt:j.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0 group-hover:scale-110 transition-transform duration-200"}):i.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-200",children:i.jsx("span",{className:"text-white font-bold text-sm",children:j.initials})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-semibold text-base group-hover:text-white/90 transition-colors duration-200",children:j.name}),i.jsx("p",{className:"text-gray-300 text-sm mt-1",children:j.specialty})]}),i.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-500/20 px-2 py-1 rounded-lg",children:[i.jsx(Fn,{className:"w-3 h-3 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:j.rating})]})]}),i.jsxs("p",{className:"text-gray-400 text-xs mb-3",children:["Experiência: ",j.experience]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.acceptsOnline&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-400 border border-green-400/20",children:[i.jsx(ft,{className:"w-3 h-3 mr-1"}),"Online"]}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-400/20",children:[i.jsx(ot,{className:"w-3 h-3 mr-1"}),"Disponível"]})]})]}),i.jsx("button",{onClick:A=>{A.stopPropagation(),M(j)},className:"px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200 flex-shrink-0 group-hover:scale-105 transform","aria-label":`Ver perfil de ${j.name}`,children:"Ver Perfil"})]})},j.id))})})]})]})]})});SS.displayName="WelcomeScreen";function IF(){return i.jsxs(i.Fragment,{children:[i.jsx(SS,{}),i.jsx(hF,{}),i.jsx(pF,{})]})}const vx=({message:t,type:e="info",duration:r=5e3,onClose:n,isVisible:s=!0})=>{const[o,a]=w.useState(!1);w.useEffect(()=>{if(s){a(!0);const h=setTimeout(()=>{l()},r);return()=>clearTimeout(h)}},[s,r]);const l=()=>{a(!1),setTimeout(()=>{n==null||n()},300)},c=()=>{switch(e){case"success":return i.jsx(dn,{className:"w-5 h-5 text-green-400"});case"error":return i.jsx(oh,{className:"w-5 h-5 text-red-400"});case"warning":return i.jsx(oh,{className:"w-5 h-5 text-yellow-400"});default:return i.jsx(RL,{className:"w-5 h-5 text-blue-400"})}},d=()=>{switch(e){case"success":return"bg-green-500/20 border-green-500/30";case"error":return"bg-red-500/20 border-red-500/30";case"warning":return"bg-yellow-500/20 border-yellow-500/30";default:return"bg-blue-500/20 border-blue-500/30"}};return s?i.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full transform transition-all duration-300 ease-out ${o?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,children:i.jsx("div",{className:`${d()} backdrop-blur-xl border rounded-xl p-4 shadow-2xl`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:c()}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-white text-sm leading-relaxed",children:t})}),i.jsx("button",{onClick:l,className:"flex-shrink-0 p-1 text-white/60 hover:text-white transition-colors rounded-full hover:bg-white/10",children:i.jsx(lr,{className:"w-4 h-4"})})]})})}):null},L1=()=>{var js,Qc;const[t,e]=w.useState(""),[r,n]=w.useState(""),[s,o]=w.useState("track"),[a,l]=w.useState(null);w.useState([]);const[c,d]=w.useState(!1),[h,f]=w.useState(""),[m,y]=w.useState("week"),[N,E]=w.useState(!1),[k,v]=w.useState(""),[g,x]=w.useState(""),[b,T]=w.useState("individual"),[M,I]=w.useState(""),[j,A]=w.useState(null),[C,S]=w.useState([]),[D,R]=w.useState(!1),[$,ie]=w.useState(0),[ue,Q]=w.useState(!1),[V,q]=w.useState(""),[O,ee]=w.useState("success"),{user:se}=$e(),[U,Z]=w.useState(new Date().getFullYear()),[me,Te]=w.useState(new Date().getMonth()),[de,tr]=w.useState(null),[Me,St]=w.useState({}),[$n,Mr]=w.useState(!1),dr=[{emoji:"😊",label:"Feliz",value:"happy",color:"bg-green-500"},{emoji:"😔",label:"Triste",value:"sad",color:"bg-blue-500"},{emoji:"😡",label:"Raiva",value:"angry",color:"bg-red-500"},{emoji:"😰",label:"Medo",value:"fear",color:"bg-yellow-500"},{emoji:"😌",label:"Paz",value:"peace",color:"bg-purple-500"},{emoji:"❤️",label:"Amor",value:"love",color:"bg-pink-500"}],xi=["Sono","Eu Mesmo(a)","Família","Saúde","Amizades","Estudos","Lazer","Trabalho","Relação","Luto","Finanças","Outras"],wi=["09:00","10:00","11:00","14:00","15:00","16:00","17:00"],yo=[{id:"individual",label:"Sessão Individual",description:"Acompanhamento personalizado"},{id:"couple",label:"Terapia de Casal",description:"Para relacionamentos"},{id:"family",label:"Terapia Familiar",description:"Para toda a família"},{id:"group",label:"Grupo Terapêutico",description:"Compartilhando experiências"}],yi=L=>Object.entries(L).map(([W,oe])=>({id:W,date:new Date(W),mood:oe.mood,cause:oe.cause,intensity:oe.intensity||5,notes:`Humor registrado em ${new Date(W).toLocaleDateString("pt-BR")}`,timestamp:oe.timestamp})).sort((W,oe)=>oe.date-W.date),La=(L,W)=>{const oe=new Date,Ne=new Date;switch(W){case"week":Ne.setDate(oe.getDate()-7);break;case"month":Ne.setMonth(oe.getMonth()-1);break;case"year":Ne.setFullYear(oe.getFullYear()-1);break;default:return L}return L.filter(ce=>ce.date>=Ne)},vi=(L,W)=>{if(!W.trim())return L;const oe=W.toLowerCase();return L.filter(Ne=>{var ce;return Ne.cause.toLowerCase().includes(oe)||Ne.notes.toLowerCase().includes(oe)||((ce=dr.find(xe=>xe.value===Ne.mood))==null?void 0:ce.label.toLowerCase().includes(oe))})},bi=()=>{const L=yi(Me);if(L.length===0)return[];const W={};L.forEach(ce=>{W[ce.mood]=(W[ce.mood]||0)+1});const oe=L.length;return Object.entries(W).map(([ce,xe])=>{const Ae=Math.round(xe/oe*100),he=dr.find(Rt=>Rt.value===ce);return{mood:(he==null?void 0:he.label)||ce,color:(he==null?void 0:he.color)||"bg-gray-500",percentage:Ae,count:xe,trend:"up"}}).sort((ce,xe)=>xe.percentage-ce.percentage)},vo=()=>{const L=yi(Me);if(L.length===0)return{goals:[],insights:[]};const W=Oa(L),oe=Ni(L),Ne=Fe(L);return{goals:[{id:"consecutive",title:"Meta: 7 dias consecutivos",progress:W,target:7,icon:od,color:"text-blue-400"}],insights:[{id:"weekly",title:"Melhor humor da semana",value:oe,icon:a1,color:"text-yellow-400"},...Ne]}},Oa=L=>{if(L.length===0)return 0;L.sort((ce,xe)=>ce.date-xe.date);let W=0,oe=new Date;const Ne=new Date().toISOString().split("T")[0];if(!Me[Ne])return 0;for(let ce=0;ce<30;ce++){const xe=new Date(oe);xe.setDate(oe.getDate()-ce);const Ae=xe.toISOString().split("T")[0];if(Me[Ae])W++;else break}return W},Ni=L=>{const W=new Date;W.setDate(W.getDate()-7);const oe=L.filter(xe=>xe.date>=W);if(oe.length===0)return"Nenhuma entrada ainda";const Ne=oe.reduce((xe,Ae)=>(Ae.intensity||5)>(xe.intensity||5)?Ae:xe),ce=dr.find(xe=>xe.value===Ne.mood);return ce?ce.label:"Indefinido"},Fe=L=>{const W=[];if(L.length===0)return W;const oe={};L.forEach(Ae=>{oe[Ae.mood]=(oe[Ae.mood]||0)+1});const Ne=Object.entries(oe).reduce((Ae,he)=>oe[Ae[0]]>oe[he[0]]?Ae:he);if(Ne){const Ae=dr.find(he=>he.value===Ne[0]);W.push({id:"frequent",title:"Humor mais frequente",value:Ae?Ae.label:"Indefinido",icon:$l,color:"text-green-400"})}const ce={};L.forEach(Ae=>{ce[Ae.cause]=(ce[Ae.cause]||0)+1});const xe=Object.entries(ce).reduce((Ae,he)=>ce[Ae[0]]>ce[he[0]]?Ae:he);return xe&&W.push({id:"cause",title:"Causa mais comum",value:xe[0],icon:At,color:"text-purple-400"}),W},Y=async L=>{if(confirm("Tem certeza que deseja excluir esta entrada de humor?"))try{Mr(!0);const W=jt.currentUser;if(!W){alert("Usuário não autenticado");return}const oe=fe(G,"users",W.uid,"moods",L.id);await Ur(oe),St(Ne=>{const ce={...Ne};return delete ce[L.id],ce}),alert("Entrada de humor excluída com sucesso!")}catch(W){console.error("Erro ao excluir entrada de humor:",W),alert("Erro ao excluir entrada de humor. Tente novamente.")}finally{Mr(!1)}},B=()=>{const L=yi(Me),W=La(L,m);return vi(W,h)},pe=()=>bi(),Be=()=>vo(),Ns=L=>["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][L],_i=(L,W)=>new Date(L,W+1,0).getDate(),bo=(L,W)=>new Date(L,W,1).getDay(),ji=(L,W)=>{var he,Rt;const oe=_i(L,W),Ne=bo(L,W),ce=[],xe=new Date,Ae=xe.getFullYear()===L&&xe.getMonth()===W;for(let _r=0;_r<Ne;_r++)ce.push({day:null,mood:null,intensity:null,date:null,isToday:!1});for(let _r=1;_r<=oe;_r++){const ki=new Date(L,W,_r).toISOString().split("T")[0],qa=Ae&&xe.getDate()===_r;ce.push({day:_r,mood:((he=Me[ki])==null?void 0:he.mood)||null,intensity:((Rt=Me[ki])==null?void 0:Rt.intensity)||null,date:ki,isToday:qa})}return ce},Va=L=>{L==="prev"?me===0?(Te(11),Z(U-1)):Te(me-1):me===11?(Te(0),Z(U+1)):Te(me+1)},Fa=L=>{Z(U+L)},Ua=()=>{const L=new Date;Z(L.getFullYear()),Te(L.getMonth()),tr({day:L.getDate(),date:L.toISOString().split("T")[0]})},cm=(L,W)=>{L&&W&&(tr({day:L,date:W}),console.log("Data selecionada:",{day:L,date:W}))},um=async(L,W)=>{try{const oe=jt.currentUser;if(!oe)return console.error("Usuário não autenticado"),!1;const Ne=fe(G,"users",oe.uid,"moods",L);return await xc(Ne,{...W,date:L,timestamp:new Date,userId:oe.uid}),console.log("Humor salvo no Firebase:",L,W),!0}catch(oe){return console.error("Erro ao salvar humor no Firebase:",oe),!1}},No=async()=>{try{Mr(!0);const L=jt.currentUser;if(!L){console.error("Usuário não autenticado");return}const W=we(G,"users",L.uid,"moods"),oe=_e(W,He("timestamp","desc"));return Wp(oe,ce=>{const xe={};ce.forEach(Ae=>{const he=Ae.data();xe[he.date]={mood:he.mood,cause:he.cause,intensity:he.intensity||5,timestamp:he.timestamp}}),St(xe),console.log("Dados de humor carregados:",xe)})}catch(L){console.error("Erro ao carregar dados de humor:",L)}finally{Mr(!1)}},Hc=ji(U,me),Wc=async()=>{if(!(!t||!r))try{Mr(!0);const L=(de==null?void 0:de.date)||new Date().toISOString().split("T")[0],W=Me[L],oe={mood:t,cause:r,intensity:5,timestamp:W?Me[L].timestamp:new Date,updatedAt:new Date};await um(L,oe)?(St(ce=>({...ce,[L]:oe})),d(!1),e(""),n(""),tr(null),console.log(`${W?"Humor editado":"Humor registrado"} com sucesso para:`,L)):alert(`Erro ao ${W?"editar":"salvar"} humor. Tente novamente.`)}catch(L){console.error(`Erro ao ${de!=null&&de.date&&Me[de.date]?"editar":"registrar"} humor:`,L),alert(`Erro ao ${de!=null&&de.date&&Me[de.date]?"editar":"registrar"} humor. Tente novamente.`)}finally{Mr(!1)}},Ei=async(L,W)=>{if(!L||!W){S([]);return}try{R(!0);const oe=we(G,"PsychologistAccount"),Ne=_e(oe,ve("isAvailable","==",!0)),ce=await Ce(Ne),xe=[];ce.forEach(Ae=>{const he=Ae.data(),Rt=he.availableSlots||["09:00","14:00","16:00"];Rt.includes(W)&&xe.push({id:Ae.id,name:he.displayName||he.name||"Psicólogo",specialty:he.specialty||he.approach||"Psicologia Clínica",experience:he.yearsExperience?`${he.yearsExperience} anos`:"5 anos",rating:he.rating||5,availableSlots:Rt,avatar:he.avatar||"👨‍⚕️",description:he.bio||he.description||"Psicólogo especializado em atendimento clínico",email:he.email,phone:he.phone||"",crp:he.crp||"CRP não informado",education:he.education||"Psicologia",languages:he.languages||["Português"],isAvailable:he.isAvailable!==!1,selectedTime:W,approach:he.approach||he.specialty||"",certifications:he.certifications||[],insurance:he.insurance||!1,virtualSessions:he.virtualSessions!==!1,inPersonSessions:he.inPersonSessions!==!1,totalSessions:he.totalSessions||0,acceptsOnline:he.acceptsOnline||!1})}),xe.sort((Ae,he)=>{if(he.rating!==Ae.rating)return he.rating-Ae.rating;const Rt=parseInt(Ae.experience)||0;return(parseInt(he.experience)||0)-Rt}),S(xe),xe.length===0?console.log(`Nenhum psicólogo disponível para ${L} às ${W}`):console.log(`Psicólogos disponíveis para ${L} às ${W}:`,xe)}catch(oe){console.error("Erro ao buscar psicólogos:",oe),S([])}finally{R(!1)}},za=async()=>{if(!k||!g||!b||!j){alert("Por favor, preencha todos os campos obrigatórios, incluindo a seleção do psicólogo.");return}if(!(se!=null&&se.uid)){alert("Você precisa estar logado para agendar uma sessão.");return}try{const L={clientId:se.uid,clientName:se.displayName||"Usuário Sereno",psychologistId:j.id,psychologistName:j.name,date:k,time:g,sessionType:b,notes:M,status:"pending"};(await Di.therapyService.createSessionRequest(L)).success?(q(`Solicitação de sessão com ${j.name} para ${new Date(k).toLocaleDateString("pt-BR")} às ${g} enviada com sucesso!`),ee("success"),Q(!0),v(""),x(""),T("individual"),I(""),A(null),ie(0),E(!1)):(q("Erro ao agendar sessão. Tente novamente."),ee("error"),Q(!0))}catch(L){console.error("Erro ao agendar sessão:",L),q("Erro ao agendar sessão. Verifique sua conexão e tente novamente."),ee("error"),Q(!0)}},$a=(L=0)=>{const W=[],oe=new Date;let Ne;if(L===0)Ne=new Date(oe);else{const ce=(8-oe.getDay())%7,xe=new Date(oe);xe.setDate(oe.getDate()+ce),Ne=new Date(xe),Ne.setDate(xe.getDate()+L*7)}for(let ce=0;ce<7;ce++){const xe=new Date(Ne);xe.setDate(Ne.getDate()+ce),W.push({date:xe.toISOString().split("T")[0],day:xe.toLocaleDateString("pt-BR",{weekday:"short"}),dayNumber:xe.getDate(),fullDay:xe.toLocaleDateString("pt-BR",{weekday:"long"}),month:xe.toLocaleDateString("pt-BR",{month:"short"}),isToday:xe.toDateString()===oe.toDateString()})}return W},vn=(L,W)=>{L&&W&&(Ei(L,W),A(null),console.log(`Buscando psicólogos disponíveis para ${L} às ${W}...`))},Gc=async()=>{try{const L=we(G,"PsychologistAccount"),W=_e(L,ve("isAvailable","==",!0)),Ne=(await Ce(W)).size;return console.log(`Total de psicólogos disponíveis no sistema: ${Ne}`),Ne===0?(console.warn("⚠️ Nenhum psicólogo disponível no sistema ainda"),console.log("💡 Verifique se há psicólogos cadastrados na coleção PsychologistAccount")):console.log("✅ Psicólogos disponíveis encontrados no sistema:",Ne),Ne}catch(L){return console.error("Erro ao verificar psicólogos no sistema:",L),0}},_o=()=>{ie(L=>L+1),v(""),A(null),S([])},Kc=()=>{$>0&&(ie(L=>L-1),v(""),A(null),S([]))},Si=()=>{ie(0),v(""),A(null),S([])};w.useEffect(()=>{const L=async()=>{try{const oe=jt.currentUser;if(oe){const Ne=fe(G,"users",oe.uid),ce=await pt(Ne);ce.exists()&&l(ce.data())}}catch(oe){console.error("Erro ao buscar dados do usuário:",oe)}};(async()=>{await L(),await No(),await Gc()})()},[]),w.useEffect(()=>{jt.currentUser&&No()},[U,me]),w.useEffect(()=>{s!=="scheduling"&&(S([]),A(null),ie(0),v(""),x(""))},[s]);const Ba=L=>{const W=dr.find(oe=>oe.value===L);return W?W.color:"bg-gray-500"},kt=L=>{switch(L){case"happy":return"😊";case"sad":return"😔";case"angry":return"😡";case"fear":return"😰";case"peace":return"😌";case"love":return"❤️";default:return"😐"}},_s=(()=>{const L=Object.values(Me).filter(Ne=>{var xe;const ce=new Date(((xe=Ne.timestamp)==null?void 0:xe.toDate())||Ne.timestamp);return ce.getMonth()===me&&ce.getFullYear()===U}),W=L.length,oe=W>0?L.reduce((Ne,ce)=>Ne+({happy:8,sad:3,angry:2,fear:4,peace:7,love:9}[ce.mood]||5),0)/W:0;return{totalEntries:W,averageMood:Math.round(oe*10)/10}})();return i.jsxs("div",{className:"min-h-screen bg-black py-8 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 animate-pulse"}),i.jsx("div",{className:"absolute top-4 right-8 w-1 h-1 bg-white/30 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.3s"}}),i.jsx("div",{className:"absolute top-8 right-16 w-0.5 h-0.5 bg-white/20 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.6s"}}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 relative z-10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx($l,{className:"w-7 h-7 text-gray-400 group-hover:text-white transition-all duration-300 group-hover:rotate-12 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-500"})]}),i.jsx("h2",{className:"text-2xl font-bold text-white group-hover:tracking-wide transition-all duration-300",children:"Rastreador de Humor"})]}),i.jsxs("button",{onClick:()=>d(!c),className:"group/add bg-white/10 border border-white/30 text-white px-5 py-2.5 rounded-lg hover:bg-white/20 transition-all duration-300 text-sm hover:scale-110 hover:shadow-lg relative overflow-hidden flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/add:opacity-100 transition-opacity duration-300 group-hover/add:animate-pulse"}),i.jsx(Gr,{className:"w-4 h-4 inline mr-2 group-hover/add:rotate-90 group-hover/add:scale-125 transition-all duration-300 relative z-10"}),i.jsx("span",{className:"relative z-10 group-hover/add:font-medium transition-all duration-300",children:"Registrar Humor"})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 bg-white/5 rounded-xl p-1.5 relative z-10",children:[{id:"track",label:"Rastreamento"},{id:"history",label:"Histórico"},{id:"analytics",label:"Análises"},{id:"scheduling",label:"Agendar Sessão"}].map((L,W)=>i.jsxs("button",{onClick:()=>o(L.id),className:`group/tab flex-1 min-w-[120px] px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 relative overflow-hidden ${s===L.id?"bg-white text-black shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover/tab:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"relative z-10 group-hover/tab:tracking-wide transition-all duration-300",children:L.label})]},L.id))})]}),c&&i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 transition-all duration-500 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:de&&Me[de.date]?"Editar Humor":"Registrar Humor"}),i.jsxs("button",{onClick:()=>d(!1),className:"group/close text-white/50 hover:text-white hover:scale-125 hover:rotate-90 transition-all duration-300 p-2",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/close:opacity-100 transition-opacity duration-300"}),"✕"]})]}),i.jsxs("div",{className:"space-y-8 relative z-10",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Escolha uma Opção:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:dr.map((L,W)=>i.jsxs("button",{onClick:()=>e(L.value),className:`group/mood flex flex-col items-center space-y-3 p-4 rounded-2xl transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${t===L.value?"bg-white/10 border border-white/20 scale-105 shadow-lg":"bg-gray-800/30 hover:bg-gray-700/50"}`,style:{animationDelay:`${W*100}ms`,transform:"translateZ(0)"},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/mood:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"text-3xl group-hover/mood:scale-125 group-hover/mood:rotate-12 transition-all duration-300 relative z-10",children:L.emoji}),i.jsx("span",{className:"text-sm text-gray-300 group-hover/mood:text-white group-hover/mood:font-medium transition-all duration-300 relative z-10",children:L.label}),i.jsx("div",{className:"absolute top-1 right-1 w-1 h-1 bg-white/40 rounded-full opacity-0 group-hover/mood:opacity-100 group-hover/mood:animate-ping transition-opacity duration-300"})]},L.value))})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Principal Causa:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:xi.map((L,W)=>i.jsxs("button",{onClick:()=>n(L),className:`group/cause p-3 rounded-xl text-xs transition-all duration-300 hover:scale-105 hover:-translate-y-0.5 relative overflow-hidden ${r===L?"bg-white/10 border border-white/20 text-white":"bg-gray-800/30 hover:bg-gray-700/50 text-gray-300 hover:text-white"}`,style:{animationDelay:`${W*50}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/cause:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"relative z-10 group-hover/cause:font-medium transition-all duration-300",children:L})]},L))})]}),i.jsxs("button",{onClick:Wc,disabled:!t||!r||$n,className:"group/submit w-full bg-gradient-to-r from-white to-gray-200 text-black py-4 px-4 rounded-xl font-bold hover:from-gray-200 hover:to-gray-300 transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover/submit:opacity-100 transition-opacity duration-300 group-hover/submit:animate-pulse"}),i.jsx("span",{className:"relative z-10 group-hover/submit:tracking-wider group-hover/submit:font-bold transition-all duration-300",children:$n?"Salvando...":de&&Me[de.date]?"ATUALIZAR":"REGISTRAR"})]})]})]}),s==="track"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 z-0"}),i.jsxs("div",{className:"flex flex-col items-center mb-6 relative z-20",children:[i.jsxs("h3",{className:"text-2xl font-semibold text-white group-hover:tracking-wide transition-all duration-300 mb-4 text-center",children:[Ns(me)," de ",U]}),i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:()=>Fa(-1),className:"group/year p-2 text-gray-400 hover:text-white hover:scale-125 hover:rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Ano anterior",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/year:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(kL,{className:"w-4 h-4 relative z-10"})]}),i.jsx("span",{className:"text-sm text-gray-300 px-3 py-1 font-medium bg-white/5 rounded-lg",children:U}),i.jsxs("button",{onClick:()=>Fa(1),className:"group/year p-2 text-gray-400 hover:text-white hover:scale-125 hover:-rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Próximo ano",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/year:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(CL,{className:"w-4 h-4 relative z-10"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:()=>Va("prev"),className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Mês anterior",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(lh,{className:"w-4 h-4 relative z-10"})]}),i.jsxs("button",{onClick:Ua,className:"group/today px-4 py-2 text-blue-400 hover:text-blue-300 hover:scale-105 transition-all duration-300 bg-blue-500/10 rounded-lg hover:bg-blue-500/20 text-sm font-medium relative z-30",title:"Voltar para hoje",children:[i.jsx("div",{className:"absolute -inset-2 bg-blue-500/10 rounded-full opacity-0 group-hover/today:opacity-100 transition-opacity duration-300 z-0"}),i.jsx("span",{className:"relative z-10",children:"Hoje"})]}),i.jsxs("button",{onClick:()=>Va("next"),className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:-rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Próximo mês",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(so,{className:"w-4 h-4 relative z-10"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3 relative z-20",children:["D","S","T","Q","Q","S","S"].map((L,W)=>i.jsx("div",{className:"text-center text-xs text-gray-400 p-2 group-hover:text-white/70 transition-colors duration-300 font-medium",children:L},`${L}-${W}`))}),i.jsx("div",{className:"grid grid-cols-7 gap-1 relative z-20",children:Hc.map((L,W)=>i.jsx("button",{onClick:()=>cm(L.day,L.date),disabled:!L.day,className:`group/day aspect-square flex flex-col items-center justify-center text-sm rounded-xl transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg relative z-30 ${L.day?L.mood?`${Ba(L.mood)} text-white`:(de==null?void 0:de.date)===L.date?"bg-white/20 border border-white/30 text-white":L.isToday?"bg-blue-500/20 border border-blue-400/30 text-blue-300":"text-gray-300 hover:bg-gray-700/50 hover:text-white":"invisible"}`,style:{animationDelay:`${W*20}ms`},children:L.day&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs group-hover/day:font-bold transition-all duration-300",children:L.day}),L.mood&&i.jsx("span",{className:"text-xs opacity-75 group-hover/day:opacity-100 group-hover/day:scale-110 transition-all duration-300",children:kt(L.mood)}),L.isToday&&!L.mood&&i.jsx("span",{className:"text-xs text-blue-400 group-hover/day:scale-110 transition-all duration-300",children:"•"}),!L.mood&&!L.isToday&&i.jsx("span",{className:"text-xs text-gray-500 group-hover/day:text-gray-400 transition-colors duration-300",children:"+"})]})},W))}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 relative z-20",children:[i.jsx("h4",{className:"text-sm text-white/70 mb-3",children:"Legenda:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:dr.map(L=>i.jsxs("div",{className:"flex items-center space-x-1.5",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${L.color}`}),i.jsx("span",{className:"text-xs text-white/60",children:L.label})]},L.value))})]}),de&&i.jsx("div",{className:"mt-4 p-4 bg-white/10 rounded-lg border border-white/20 relative z-20",children:i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-sm text-white/70",children:"Data selecionada:"}),i.jsx("div",{className:"text-white font-medium mt-1",children:new Date(de.date).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),Me[de.date]?i.jsxs("div",{className:"mt-3 p-3 bg-white/5 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx("span",{className:"text-2xl",children:kt(Me[de.date].mood)}),i.jsx("span",{className:"text-white font-medium",children:(js=dr.find(L=>L.value===Me[de.date].mood))==null?void 0:js.label})]}),i.jsxs("div",{className:"text-white/70 text-sm mb-3",children:["Causa: ",i.jsx("span",{className:"text-white font-medium",children:Me[de.date].cause})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-white/50",children:[i.jsx(Ut,{className:"w-3 h-3"}),i.jsxs("span",{children:["Registrado em: ",new Date(((Qc=Me[de.date].timestamp)==null?void 0:Qc.toDate())||Me[de.date].timestamp).toLocaleString("pt-BR")]})]}),i.jsx("button",{onClick:()=>{e(Me[de.date].mood),n(Me[de.date].cause),d(!0)},className:"mt-3 text-xs text-yellow-400 hover:text-yellow-300 underline transition-colors duration-300 relative z-30",children:"Editar humor"})]}):i.jsx("button",{onClick:()=>d(!0),className:"mt-3 text-sm text-blue-400 hover:text-blue-300 underline transition-colors duration-300 relative z-30",children:"Registrar humor nesta data"})]})})]}),i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-6 group-hover:tracking-wide transition-all duration-300 relative z-10",children:"Resumo da Semana"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 relative z-10",children:[{emoji:"😊",title:"Humor Médio",value:`${_s.averageMood}/10`},{emoji:"📊",title:"Entradas",value:`${_s.totalEntries} este mês`}].map((L,W)=>i.jsxs("div",{className:"group/stat text-center p-6 bg-white/5 rounded-xl hover:bg-white/10 hover:scale-105 hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",style:{animationDelay:`${W*200}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/stat:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"text-3xl mb-3 group-hover/stat:scale-125 group-hover/stat:rotate-12 transition-all duration-300 relative z-10",children:L.emoji}),i.jsx("div",{className:"text-white font-medium group-hover/stat:tracking-wide transition-all duration-300 relative z-10",children:L.title}),i.jsx("div",{className:"text-white/70 text-sm group-hover/stat:text-white group-hover/stat:font-medium transition-all duration-300 relative z-10",children:L.value})]},L.title))})]})]}),s==="history"&&i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:"Histórico de Humor"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[i.jsxs("div",{className:"relative group/search flex-grow sm:flex-grow-0",children:[i.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4 group-hover/search:text-white/80 group-hover/search:scale-125 group-hover/search:rotate-90 transition-all duration-300"}),i.jsx("input",{type:"text",placeholder:"Pesquisar entradas...",value:h,onChange:L=>f(L.target.value),className:"bg-white/10 border border-white/20 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 text-sm hover:bg-white/15 hover:border-white/30 focus:scale-105 transition-all duration-300 w-full"}),i.jsx("div",{className:"absolute inset-0 rounded-lg ring-1 ring-white/0 group-hover/search:ring-white/20 transition-all duration-300 pointer-events-none"})]}),i.jsxs("select",{value:m,onChange:L=>y(L.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-white/30 text-sm hover:bg-white/15 hover:border-white/30 hover:scale-105 transition-all duration-300",children:[i.jsx("option",{value:"week",children:"Esta semana"}),i.jsx("option",{value:"month",children:"Este mês"}),i.jsx("option",{value:"year",children:"Este ano"})]})]})]}),i.jsx("div",{className:"space-y-5 relative z-10",children:B().length===0?i.jsxs("div",{className:"text-center py-16 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx($l,{className:"w-20 h-20 text-white/30 mx-auto mb-6 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("h3",{className:"text-xl font-medium text-white/70 mb-3 group-hover:text-white/90 transition-colors duration-300",children:"Nenhuma entrada de humor"}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Comece registrando seu humor usando o botão acima"})]}):B().map((L,W)=>i.jsxs("div",{className:"group/entry bg-white/5 border border-white/10 rounded-xl p-5 hover:bg-white/10 hover:border-white/20 hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/entry:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${Ba(L.mood)} group-hover/entry:scale-110 group-hover/entry:rotate-6 transition-all duration-300`,children:i.jsx("span",{className:"text-2xl group-hover/entry:scale-125 transition-all duration-300",children:kt(L.mood)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-white group-hover/entry:tracking-wide transition-all duration-300",children:L.cause}),i.jsx("p",{className:"text-sm text-white/70 group-hover/entry:text-white/90 transition-colors duration-300",children:L.notes}),i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-white/50 mt-2 group-hover/entry:text-white/70 transition-colors duration-300",children:[i.jsx(Ut,{className:"w-3 h-3 group-hover/entry:rotate-12 transition-all duration-300"}),i.jsx("span",{children:L.date.toLocaleDateString("pt-BR")}),i.jsx("span",{children:"•"}),i.jsxs("span",{children:["Intensidade: ",L.intensity,"/10"]})]})]})]}),i.jsx("div",{className:"flex space-x-3",children:i.jsxs("button",{onClick:()=>Y(L),className:"group/delete text-white/50 hover:text-white p-2 hover:scale-125 hover:rotate-12 transition-all duration-300",children:[i.jsx("div",{className:"absolute -inset-2 bg-red-500/10 rounded-full opacity-0 group-hover/delete:opacity-100 transition-opacity duration-300"}),i.jsx(sr,{className:"w-4 h-4"})]})})]})]},L.id))})]}),s==="analytics"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex items-center space-x-3 mb-6 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(oi,{className:"w-6 h-6 text-gray-400 group-hover:text-white transition-all duration-300 group-hover:rotate-12 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-500"})]}),i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:"Estatísticas Mensais"})]}),i.jsx("div",{className:"space-y-4 relative z-10",children:pe().length===0?i.jsxs("div",{className:"text-center py-12 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx(oi,{className:"w-16 h-16 text-white/30 mx-auto mb-4 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Nenhuma estatística disponível"}),i.jsx("p",{className:"text-white/30 text-sm group-hover:text-white/50 transition-colors duration-300",children:"Registre seu humor para ver análises"})]}):pe().map((L,W)=>i.jsxs("div",{className:"group/stat flex items-center justify-between hover:bg-white/5 p-4 rounded-xl hover:scale-105 transition-all duration-300 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/stat:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-center space-x-4 relative z-10",children:[i.jsx("div",{className:`w-5 h-5 rounded ${L.color} group-hover/stat:scale-125 group-hover/stat:rotate-12 transition-all duration-300`}),i.jsx("span",{className:"text-sm text-gray-300 group-hover/stat:text-white group-hover/stat:font-medium transition-all duration-300",children:L.mood})]}),i.jsxs("div",{className:"flex items-center space-x-2 relative z-10",children:[i.jsxs("span",{className:"text-sm text-gray-400 group-hover/stat:text-white/90 transition-colors duration-300",children:[L.percentage,"%"]}),L.trend==="up"?i.jsx(as,{className:"w-4 h-4 text-green-400 group-hover/stat:scale-125 group-hover/stat:rotate-12 transition-all duration-300"}):i.jsx(FL,{className:"w-4 h-4 text-red-400 group-hover/stat:scale-125 group-hover/stat:-rotate-12 transition-all duration-300"})]})]},W))})]}),i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-6 group-hover:tracking-wide transition-all duration-300 relative z-10",children:"Metas e Insights"}),i.jsxs("div",{className:"space-y-6 relative z-10",children:[Be().goals.length===0?i.jsxs("div",{className:"text-center py-12 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx(od,{className:"w-16 h-16 text-white/30 mx-auto mb-4 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Nenhuma meta definida"}),i.jsx("p",{className:"text-white/30 text-sm group-hover:text-white/50 transition-colors duration-300",children:"Comece registrando seu humor para definir metas"})]}):Be().goals.map((L,W)=>i.jsxs("div",{className:"group/goal flex items-center space-x-4 p-4 bg-white/5 rounded-xl hover:bg-white/10 hover:scale-105 hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/goal:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"relative",children:[i.jsx(od,{className:"w-6 h-6 text-blue-400 group-hover/goal:scale-125 group-hover/goal:rotate-12 transition-all duration-300"}),i.jsx("div",{className:"absolute -inset-2 bg-blue-400/10 rounded-full opacity-0 group-hover/goal:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"text-white font-medium group-hover/goal:tracking-wide transition-all duration-300",children:L.title}),i.jsxs("div",{className:"text-white/70 text-sm group-hover/goal:text-white/90 transition-colors duration-300",children:["Progresso: ",L.progress,"/",L.target," dias"]})]})]},L.id)),Be().insights.length===0?i.jsxs("div",{className:"text-center py-12 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx(a1,{className:"w-16 h-16 text-white/30 mx-auto mb-4 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Nenhuma meta definida"}),i.jsx("p",{className:"text-white/30 text-sm group-hover:text-white/50 transition-colors duration-300",children:"Comece registrando seu humor para definir metas"})]}):Be().insights.map((L,W)=>i.jsxs("div",{className:"group/insight flex items-center space-x-4 p-4 bg-white/5 rounded-xl hover:bg-white/10 hover:scale-105 hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/insight:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"relative",children:[i.jsx(L.icon,{className:`w-6 h-6 ${L.color} group-hover/insight:scale-125 group-hover/insight:rotate-12 transition-all duration-300`}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/insight:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"text-white font-medium group-hover/insight:tracking-wide transition-all duration-300",children:L.title}),i.jsx("div",{className:"text-white/70 text-sm group-hover/insight:text-white/90 transition-colors duration-300",children:L.value})]})]},L.id))]})]})]}),s==="scheduling"&&i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex items-center space-x-3 mb-8 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ft,{className:"w-6 h-6 text-gray-400 group-hover:text-white transition-all duration-300 group-hover:rotate-12 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-500"})]}),i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:"Agendar Sessão com Psicólogo"})]}),i.jsxs("div",{className:"space-y-8 relative z-10",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Tipo de Sessão:"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:yo.map((L,W)=>i.jsxs("button",{onClick:()=>T(L.id),className:`group/session p-4 rounded-xl border transition-all duration-300 text-left hover:scale-105 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${b===L.id?"bg-white/10 border-white/30 text-white":"bg-gray-800/30 border-gray-600/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/session:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"font-medium text-sm group-hover/session:tracking-wide transition-all duration-300 relative z-10",children:L.label}),i.jsx("div",{className:"text-xs text-gray-400 mt-2 group-hover/session:text-white/70 transition-colors duration-300 relative z-10",children:L.description}),i.jsx("div",{className:"absolute top-2 right-2 w-1 h-1 bg-white/40 rounded-full opacity-0 group-hover/session:opacity-100 group-hover/session:animate-ping transition-opacity duration-300"})]},L.id))})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-300 group-hover:text-white/90 transition-colors duration-300",children:"Data:"}),i.jsxs("div",{className:"flex items-center space-x-2 relative z-30",children:[i.jsxs("button",{onClick:Kc,disabled:$===0,className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:rotate-0 relative z-30",title:"Semana anterior",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(lh,{className:"w-4 h-4 relative z-10"})]}),i.jsxs("button",{onClick:Si,className:"group/today px-3 py-1.5 text-blue-400 hover:text-blue-300 hover:scale-105 transition-all duration-300 bg-blue-500/10 rounded-lg hover:bg-blue-500/20 text-xs font-medium relative z-30",title:"Voltar para esta semana",children:[i.jsx("div",{className:"absolute -inset-2 bg-blue-500/10 rounded-full opacity-0 group-hover/today:opacity-100 transition-opacity duration-300 z-0"}),i.jsx("span",{className:"relative z-10",children:"Hoje"})]}),i.jsxs("button",{onClick:_o,className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:-rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Próxima semana",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(so,{className:"w-4 h-4 relative z-10"})]})]})]}),i.jsx("div",{className:"text-center mb-3",children:i.jsx("span",{className:"text-xs text-white/60",children:$===0?"Esta semana (começando hoje)":$===1?"Próxima semana (segunda a domingo)":`${$} semanas à frente (segunda a domingo)`})}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:$a($).map((L,W)=>i.jsxs("button",{onClick:()=>{v(L.date),g&&vn(L.date,g)},className:`group/date p-3 rounded-xl text-center transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${k===L.date?"bg-white text-black shadow-lg":L.isToday?"bg-blue-500/20 border border-blue-400/30 text-blue-300":"bg-gray-800/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/date:opacity-100 transition-opacity duration-300 z-0"}),i.jsx("div",{className:"text-xs text-gray-400 group-hover/date:font-medium transition-all duration-300 relative z-10",children:L.day}),i.jsx("div",{className:"font-medium group-hover/date:font-bold group-hover/date:scale-110 transition-all duration-300 relative z-10",children:L.dayNumber}),L.month&&i.jsx("div",{className:"text-xs text-gray-500 group-hover/date:text-gray-700 transition-colors duration-300 relative z-10",children:L.month}),L.isToday&&i.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]},L.date))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Horário:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:wi.map((L,W)=>i.jsxs("button",{onClick:()=>{x(L),k&&vn(k,L)},className:`group/time p-4 rounded-xl text-center transition-all duration-300 hover:scale-105 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${g===L?"bg-white text-black shadow-lg":"bg-gray-800/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/time:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"relative z-10 group-hover/time:font-bold group-hover/time:tracking-wide transition-all duration-300",children:L})]},L))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Escolha seu Psicólogo:"}),!k||!g?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ot,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Selecione uma data e horário primeiro"}),i.jsx("p",{className:"text-white/50 text-sm",children:"Os psicólogos disponíveis aparecerão aqui"})]}):D?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Buscando psicólogos disponíveis..."})]}):C.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(At,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Nenhum psicólogo disponível para este horário"}),i.jsx("p",{className:"text-white/50 text-sm",children:"Tente outro horário ou data"}),i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-400/20 rounded-lg",children:i.jsx("p",{className:"text-yellow-400 text-xs",children:"💡 Dica: Psicólogos são mostrados apenas quando estão disponíveis no horário selecionado"})}),i.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-400/20 rounded-lg",children:i.jsx("p",{className:"text-blue-400 text-xs",children:"🔍 Buscando psicólogos na coleção 'PsychologistAccount'"})}),i.jsx("div",{className:"p-3 bg-green-500/10 border border-green-400/20 rounded-lg",children:i.jsx("p",{className:"text-green-400 text-xs",children:"✅ Verifique se há psicólogos cadastrados na coleção PsychologistAccount"})})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-center p-3 bg-green-500/10 border border-green-400/20 rounded-lg",children:i.jsxs("p",{className:"text-green-400 text-sm font-medium",children:["✨ ",C.length," psicólogo",C.length>1?"s":""," disponível",C.length>1?"eis":""," para ",g]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map((L,W)=>i.jsxs("button",{onClick:()=>A(L),className:`group/psychologist p-4 rounded-xl border transition-all duration-300 text-left hover:scale-105 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${(j==null?void 0:j.id)===L.id?"bg-white/10 border-white/30 text-white ring-2 ring-white/30":"bg-gray-800/30 border-gray-600/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/psychologist:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-start justify-between mb-3 relative z-10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:"text-2xl group-hover/psychologist:scale-125 transition-all duration-300",children:L.avatar}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-sm group-hover/psychologist:tracking-wide transition-all duration-300",children:L.name}),i.jsx("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:L.specialty})]})]}),i.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-500/20 px-2 py-1 rounded-lg",children:[i.jsx("span",{className:"text-yellow-400 text-xs",children:"⭐"}),i.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:L.rating})]})]}),i.jsxs("div",{className:"space-y-2 relative z-10",children:[i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Experiência:"})," ",L.experience]}),i.jsx("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:L.description}),i.jsxs("div",{className:"space-y-1",children:[L.crp&&L.crp!=="CRP não informado"&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"CRP:"})," ",L.crp]}),L.education&&L.education!=="Psicologia"&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Formação:"})," ",L.education]}),L.languages&&L.languages.length>0&&L.languages[0]!=="Português"&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Idiomas:"})," ",L.languages.join(", ")]}),L.approach&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Abordagem:"})," ",L.approach]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[i.jsx("div",{className:"text-xs text-gray-400 mb-2 group-hover/psychologist:text-white/70 transition-colors duration-300",children:"Horário selecionado:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-sm px-3 py-1 bg-green-500/20 border border-green-400/30 rounded-md text-green-400 font-medium",children:L.selectedTime}),i.jsx("span",{className:"text-xs text-white/60",children:"✓ Disponível"})]})]}),(L.email||L.phone)&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[i.jsx("div",{className:"text-xs text-gray-400 mb-1 group-hover/psychologist:text-white/70 transition-colors duration-300",children:"Contato:"}),i.jsxs("div",{className:"space-y-1",children:[L.email&&i.jsxs("div",{className:"text-xs text-blue-400 group-hover/psychologist:text-blue-300 transition-colors duration-300",children:["📧 ",L.email]}),L.phone&&i.jsxs("div",{className:"text-xs text-green-400 group-hover/psychologist:text-blue-300 transition-colors duration-300",children:["📞 ",L.phone]})]})]})]}),(j==null?void 0:j.id)===L.id&&i.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]},L.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Observações (opcional):"}),i.jsxs("div",{className:"relative group/textarea",children:[i.jsx("textarea",{value:M,onChange:L=>I(L.target.value),placeholder:"Descreva brevemente o que gostaria de abordar na sessão...",className:"w-full bg-gray-800/50 border border-gray-600/50 rounded-xl p-4 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-all duration-300 min-h-[100px] hover:bg-gray-800/70 hover:border-gray-500/50 focus:scale-[1.01] hover:shadow-lg focus:shadow-xl"}),i.jsx("div",{className:"absolute inset-0 rounded-xl ring-1 ring-white/0 group-hover/textarea:ring-white/20 group-focus-within/textarea:ring-white/40 transition-all duration-300 pointer-events-none"})]})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsxs("button",{onClick:za,disabled:!k||!g||!b||!j,className:"group/schedule bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-4 rounded-xl font-bold hover:from-green-600 hover:to-green-700 transform hover:scale-110 transition-all duration-300 flex items-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl hover:shadow-green-500/25 relative overflow-hidden disabled:hover:scale-100",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover/schedule:opacity-100 transition-opacity duration-300 group-hover/schedule:animate-pulse"}),i.jsx(ot,{className:"w-5 h-5 group-hover/schedule:rotate-12 group-hover/schedule:scale-125 transition-all duration-300 relative z-10"}),i.jsx("span",{className:"relative z-10 group-hover/schedule:tracking-wide group-hover/schedule:font-bold transition-all duration-300",children:j?`Agendar com ${j.name.split(" ")[0]}`:"Agendar Sessão"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-1 h-1 bg-white/50 rounded-full opacity-0 group-hover/schedule:opacity-100 group-hover/schedule:animate-ping transition-opacity duration-300"}),i.jsx("div",{className:"absolute -bottom-1 -left-1 w-0.5 h-0.5 bg-white/30 rounded-full opacity-0 group-hover/schedule:opacity-100 group-hover/schedule:animate-ping transition-opacity duration-300",style:{animationDelay:"0.2s"}})]})})]})]})]}),i.jsx(vx,{message:V,type:O,duration:5e3,isVisible:ue,onClose:()=>Q(!1)})]})},Mu=()=>{const{roomCode:t}=kc(),e=xt(),r=Un();console.log("🔍 LiveChat renderizado com parâmetros:",{urlRoomCode:t,pathname:r.pathname});const[n,s]=w.useState(""),o=w.useRef(null),[a,l]=w.useState([]),{user:c}=$e(),[d,h]=w.useState(""),[f,m]=w.useState(null),[y,N]=w.useState("");w.useState(""),w.useState("all");const[E,k]=w.useState("conversas"),[v,g]=w.useState(null);w.useState(!1);const[x,b]=w.useState("disconnected");w.useState({name:"",description:"",category:"saude-mental",isPrivate:!1,maxMembers:100});const T=w.useRef(null),M=()=>{var V;(V=T.current)==null||V.scrollIntoView({behavior:"smooth"})};w.useEffect(()=>{M()},[a]),w.useEffect(()=>{console.log("🔍 useEffect detectando código da sala:",{urlRoomCode:t,pathname:r.pathname}),t?(console.log("🏠 Código da sala detectado na URL:",t),s(t),m(t),h(t),console.log("✅ Estado atualizado com código da sala:",t)):console.log("ℹ️ Nenhum código de sala na URL")},[t,r.pathname]);const I=w.useCallback(()=>{const V=c==null?void 0:c.uid;if(!V||!n)return null;const[q,O]=[V,n].sort();return`${q}_${O}`},[c==null?void 0:c.uid,n]);w.useEffect(()=>{const V=I();if(!V)return;console.log("🔌 Tentando conectar WebSocket para sala:",V),b("connecting");const q=()=>{try{const O=(c==null?void 0:c.idToken)||localStorage.getItem("firebase_token");console.log("🔑 Token disponível:",!!O,"User:",c==null?void 0:c.uid);const ee=`ws://localhost:8000/ws/chat/${V}/?token=${O}`;console.log(`🌐 Conectando ao backend Django: ${ee}`);const se=new WebSocket(ee);o.current=se;const U=setTimeout(()=>{se.readyState===WebSocket.CONNECTING&&(console.log("⏰ Timeout na conexão WebSocket"),se.close(),b("error"))},5e3);se.onopen=function(Z){clearTimeout(U),console.log("✅ WebSocket conectado com sucesso ao backend Django!"),b("connected"),se.send(JSON.stringify({type:"ping",message:"Teste de conexão"}))},se.onmessage=function(Z){console.log("📨 Mensagem recebida do backend:",Z.data);try{const me=JSON.parse(Z.data);switch(me.type){case"connection_established":console.log("✅ Conexão estabelecida:",me);break;case"pong":console.log("🏓 Pong recebido - conexão ativa");break;case"chat_message":if(console.log("💬 Mensagem de chat recebida:",me),console.log("🆔 É própria mensagem?",me.is_own),me.is_own)console.log("⏭️ Mensagem própria ignorada (já foi adicionada localmente)");else{console.log("✅ Adicionando mensagem de outro usuário");const Te={id:Date.now()+Math.random(),message:me.message,isOwn:!1,user:me.user_name||"Usuário",user_id:me.user_id,user_avatar:me.user_avatar,time:new Date(me.timestamp).toLocaleTimeString(),status:"delivered",timestamp:me.timestamp};l(de=>de.some(Me=>Me.message===Te.message&&Me.user_id===Te.user_id&&Math.abs(new Date(Me.timestamp)-new Date(Te.timestamp))<1e3)?(console.log("⏭️ Mensagem duplicada ignorada"),de):(console.log("📝 Adicionando nova mensagem:",Te),[...de,Te]))}break;case"message_sent":console.log("✅ Confirmação: Mensagem enviada com sucesso!"),l(Te=>Te.map(de=>de.isOwn&&de.status==="sending"&&de.message===me.message?{...de,status:"delivered"}:de));break;case"error":console.error("❌ Erro do servidor:",me.message);break;default:console.log("⚠️ Tipo de mensagem desconhecido:",me.type)}}catch(me){console.error("❌ Erro ao processar mensagem:",me)}},se.onclose=function(Z){clearTimeout(U),console.log("ℹ️ WebSocket fechado:",Z.code,Z.reason),b("disconnected"),o.current=null,Z.code!==1e3&&setTimeout(()=>{I()&&(console.log("🔄 Tentando reconectar..."),q())},3e3)},se.onerror=function(Z){clearTimeout(U),console.error("❌ Erro na conexão WebSocket:",Z),b("error"),o.current=null}}catch(O){console.error("❌ Erro ao criar WebSocket:",O),b("error"),o.current=null}};return q(),()=>{o.current&&o.current.readyState===WebSocket.OPEN&&o.current.close(1e3,"Componente desmontado")}},[I,c==null?void 0:c.uid,c==null?void 0:c.idToken]);const j=V=>{switch(V){case"sending":return i.jsx(Ut,{className:"w-3 h-3 text-white/40 animate-pulse"});case"delivered":return i.jsx(ai,{className:"w-3 h-3 text-white/60"});case"read":return i.jsx(JE,{className:"w-3 h-3 text-blue-400"});default:return null}},A=()=>{if(console.log("🚀 handleSendMessage chamado!"),console.log("📝 Mensagem:",y),!y.trim()){console.log("❌ Mensagem vazia, não enviando");return}const V=y.trim(),q=new Date().toISOString(),O={id:Date.now()+Math.random(),message:V,isOwn:!0,user:(c==null?void 0:c.displayName)||(c==null?void 0:c.name)||"Você",user_id:(c==null?void 0:c.uid)||"local_user",time:new Date().toLocaleTimeString(),status:"sending",timestamp:q};l(se=>[...se,O]),console.log("✅ Mensagem própria adicionada ao estado:",O),N("");const ee=o.current;if(ee&&ee.readyState===WebSocket.OPEN){console.log("📤 Enviando via WebSocket para o backend Django:",V);try{const se={type:"chat_message",message:V};ee.send(JSON.stringify(se)),console.log("✅ Mensagem enviada via WebSocket!"),setTimeout(()=>{l(U=>U.map(Z=>Z.id===O.id&&Z.status==="sending"?{...Z,status:"delivered"}:Z))},500)}catch(se){console.error("❌ Erro ao enviar via WebSocket:",se),l(U=>U.map(Z=>Z.id===O.id?{...Z,status:"error"}:Z))}}else console.log("🔌 WebSocket não está conectado"),l(se=>se.map(U=>U.id===O.id?{...U,status:"offline"}:U))},C=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),A())},S=()=>{l([]),console.log("🧹 Todas as mensagens foram limpas!")},D=()=>{l(V=>V.filter(q=>q.isOwn)),console.log("🧹 Mensagens de outros usuários foram limpas!")},R=()=>{const V={id:Date.now()+Math.random(),message:"Mensagem de teste do usuário remoto",isOwn:!1,user:"Usuário Teste",user_id:"test_user_123",user_avatar:null,time:new Date().toLocaleTimeString(),status:"delivered",timestamp:new Date().toISOString()};console.log("🧪 Adicionando mensagem de teste:",V),l(q=>[...q,V])},$=()=>{switch(x){case"connected":return"bg-green-400";case"connecting":return"bg-yellow-400 animate-pulse";case"error":return"bg-red-400";default:return"bg-gray-400"}},ie=()=>{switch(x){case"connected":return"Online (Tempo Real)";case"connecting":return"Conectando...";case"error":return"Erro de Conexão";default:return"Desconectado"}},ue=(V,q,O)=>i.jsxs("button",{onClick:()=>k(V),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 ${E===V?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:text-white"}`,children:[i.jsx(O,{className:"w-4 h-4"}),i.jsx("span",{children:q})]}),Q={total:a.length,own:a.filter(V=>V.isOwn).length,others:a.filter(V=>!V.isOwn).length,uniqueUsers:Array.from(new Set(a.filter(V=>!V.isOwn).map(V=>V.user_id))).length};return i.jsxs("div",{className:"w-full",children:[i.jsxs(yt,{variant:"glass",padding:"lg",children:[i.jsxs(yt.Header,{children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(ft,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:t?`Chat - Sala: ${t}`:"Conversas em Tempo Real"}),t&&i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("span",{className:"text-sm text-green-400 bg-green-400/10 px-2 py-1 rounded-full",children:["URL: /home/chat/",t]})})]}),i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx(ls,{type:"text",placeholder:"Digite o código da sala (ex: sala1208)",value:d,onChange:V=>h(V.target.value),variant:"glass",size:"sm",className:"flex-1"}),i.jsx("button",{onClick:()=>{if(!d.trim())return;const V=d.trim();console.log("🚪 Entrando na sala:",V);const q=`/home/chat/${V}`;console.log("🔗 Atualizando URL para:",q),e(q,{replace:!0}),s(V),m(V),console.log("✅ Sala configurada e URL atualizada")},disabled:!d.trim(),className:"px-3 py-2 bg-white text-black rounded-lg disabled:opacity-50",children:"Entrar"})]}),i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[ue("conversas","Conversas",ft),ue("psicologos","Psicólogos",st),ue("grupos","Grupos",At)]})})]}),i.jsx(yt.Content,{children:!n&&!t&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ft,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/70 mb-2",children:"Digite um código de sala para começar"}),i.jsx("p",{className:"text-white/50",children:"Ou use a URL diretamente: /home/chat/nomeddasala"})]})})]}),(n||t)&&i.jsxs(yt,{variant:"glass",className:"overflow-hidden mt-4",children:[i.jsx("div",{className:"bg-white/5 p-4 border-b border-white/10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>{m(null),g(null),s(""),e("/home/chat",{replace:!0})},className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(xo,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center",children:i.jsx(st,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:"Conversa"}),i.jsxs("p",{className:"text-sm text-white/70",children:["Sala: ",t||n]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${$()}`}),i.jsx("span",{className:`text-xs ${x==="connected"?"text-green-400":x==="connecting"?"text-yellow-400":"text-red-400"}`,children:ie()})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"text-xs text-white/50 bg-white/10 px-2 py-1 rounded",children:["📊 ",Q.total," msgs | 👤 ",Q.own," suas | 👥 ",Q.others," outros"]}),i.jsx("button",{onClick:R,className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded hover:bg-blue-500/30 transition-colors",title:"Adicionar mensagem de teste",children:"🧪 Teste"}),i.jsx("button",{onClick:D,className:"text-xs bg-orange-500/20 text-orange-300 px-2 py-1 rounded hover:bg-orange-500/30 transition-colors",title:"Limpar mensagens de outros usuários",children:"🧹 Outros"}),i.jsx("button",{onClick:S,className:"text-xs bg-red-500/20 text-red-300 px-2 py-1 rounded hover:bg-red-500/30 transition-colors",title:"Limpar todas as mensagens",children:"🗑️ Tudo"})]})]})}),i.jsx("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:a.length>0?i.jsxs(i.Fragment,{children:[a.map((V,q)=>(console.log(`🔍 Renderizando mensagem ${q}:`,V),i.jsxs("div",{className:`flex ${V.isOwn?"justify-end":"justify-start"} mb-4`,children:[!V.isOwn&&i.jsxs("div",{className:"flex flex-col items-center mr-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-white/10 border-2 border-white/20",children:V.user_avatar?i.jsx("img",{src:V.user_avatar,alt:V.user,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/70 text-lg font-bold",children:V.user.charAt(0).toUpperCase()})}),i.jsx("span",{className:"text-xs text-white/60 mt-1 max-w-20 truncate",children:V.user})]}),i.jsxs("div",{className:`max-w-xs px-4 py-3 rounded-2xl relative ${V.isOwn?"bg-blue-500 text-white rounded-br-md":"bg-white/10 text-white rounded-bl-md border border-white/20"}`,children:[i.jsx("p",{className:"text-sm leading-relaxed",children:V.message}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsx("span",{className:`text-xs ${V.isOwn?"text-blue-100":"text-white/50"}`,children:V.time}),V.isOwn&&i.jsxs("div",{className:"flex items-center space-x-1",children:[j(V.status),V.status==="error"&&i.jsx("span",{className:"text-xs text-red-400",children:"Erro"}),V.status==="offline"&&i.jsx("span",{className:"text-xs text-yellow-400",children:"Offline"})]})]})]}),V.isOwn&&i.jsxs("div",{className:"flex flex-col items-center ml-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-blue-400 border-2 border-blue-300",children:i.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-sm font-bold",children:"Eu"})}),i.jsx("span",{className:"text-xs text-white/60 mt-1",children:"Você"})]})]},V.id))),i.jsx("div",{ref:T})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ft,{className:"w-12 h-12 text-white/30 mx-auto mb-3"}),i.jsx("p",{className:"text-white/50",children:"Nenhuma mensagem ainda"}),i.jsx("p",{className:"text-sm text-white/30",children:"Comece a conversa!"})]})}),i.jsxs("div",{className:"p-4 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(LL,{className:"w-5 h-5"})}),i.jsx(ls,{type:"text",value:y,onChange:V=>N(V.target.value),onKeyPress:C,placeholder:"Digite sua mensagem...",variant:"glass",size:"sm",className:"flex-1",disabled:x!=="connected"}),i.jsx("button",{onClick:A,disabled:!y.trim()||x!=="connected",className:"p-2 bg-white text-black rounded-lg hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(qc,{className:"w-5 h-5"})})]}),x!=="connected"&&i.jsx("div",{className:"text-xs text-yellow-400 mt-2 text-center",children:x==="connecting"?"Conectando ao servidor...":"Sem conexão com o servidor"})]})]})]})},AF=()=>{const[t,e]=w.useState({email:"",password:""}),[r,n]=w.useState(!1),[s,o]=w.useState(!1),[a,l]=w.useState("user"),[c,d]=w.useState(null),[h,f]=w.useState(null),m=g=>{e({...t,[g.target.name]:g.target.value})},y=async g=>{if(g.preventDefault(),!t.email||!t.password){alert("Por favor, preencha todos os campos.");return}o(!0);try{const b=(await w0(jt,t.email,t.password)).user;console.log("Login realizado com sucesso:",b.email),alert("Login realizado com sucesso!"),k(a==="psychologist"?"/psychologist-dashboard":"/home")}catch(x){console.error("Erro no login:",x);let b="Erro ao fazer login.";switch(x.code){case"auth/user-not-found":b="Usuário não encontrado.";break;case"auth/wrong-password":b="Senha incorreta.";break;case"auth/invalid-email":b="Email inválido.";break;case"auth/too-many-requests":b="Muitas tentativas. Tente novamente mais tarde.";break;default:b=x.message}alert(b)}finally{o(!1)}},N=async()=>{o(!0);try{const x=(await W_(jt,QE)).user;console.log("Login com Google realizado com sucesso:",x.email),alert("Login com Google realizado com sucesso!"),k("/home")}catch(g){console.error("Erro no login com Google:",g);let x="Erro ao fazer login com Google.";switch(g.code){case"auth/popup-closed-by-user":x="Login cancelado pelo usuário.";break;case"auth/popup-blocked":x="Popup bloqueado pelo navegador. Permita popups para este site.";break;case"auth/cancelled-popup-request":x="Muitas tentativas de login. Aguarde um momento.";break;case"auth/account-exists-with-different-credential":x="Uma conta já existe com este email usando outro método de login.";break;default:x=g.message}alert(x)}finally{o(!1)}},E=async()=>{if(!t.email){alert("Digite seu e-mail para receber o link de redefinição.");return}try{const{sendPasswordResetEmail:g}=await Ho(async()=>{const{sendPasswordResetEmail:x}=await Promise.resolve().then(()=>JP);return{sendPasswordResetEmail:x}},void 0);await g(jt,t.email),alert("Email de redefinição enviado! Verifique sua caixa de entrada.")}catch(g){console.error("Erro ao enviar email de redefinição:",g);let x="Erro ao enviar email de redefinição.";switch(g.code){case"auth/user-not-found":x="Usuário não encontrado com este email.";break;case"auth/invalid-email":x="Email inválido.";break;case"auth/too-many-requests":x="Muitas tentativas. Tente novamente mais tarde.";break;default:x=g.message}alert(x)}},k=xt(),v=()=>i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(8)].map((g,x)=>i.jsx("div",{className:"absolute top-0 left-1/2 w-px h-full bg-gradient-to-b from-white/20 via-white/5 to-transparent transform-gpu origin-top",style:{transform:`translateX(-50%) rotate(${x*45}deg)`,animation:`pulse ${2+x*.5}s ease-in-out infinite alternate`}},x))});return i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx(v,{}),i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(15)].map((g,x)=>i.jsx("div",{className:"absolute w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`}},x))}),i.jsxs("div",{className:"relative w-full max-w-md z-10 animate-fade-in animate-slide-up",children:[i.jsx("button",{type:"button",onClick:()=>k("/"),className:"absolute -top-2 -left-2 p-2 text-white/80 hover:text-white transition-all duration-300 hover:scale-110 hover:rotate-12 group","aria-label":"Voltar para início",onMouseEnter:()=>f("back"),onMouseLeave:()=>f(null),children:i.jsx(xo,{className:`w-6 h-6 transition-all duration-300 ${h==="back"?"drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":""}`})}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center backdrop-blur-md hover:scale-110 hover:rotate-12 transition-all duration-500 hover:bg-white/20 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] group cursor-pointer overflow-hidden",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-8 h-8 object-contain group-hover:brightness-110 transition-all duration-300"})})}),i.jsx("h1",{className:"text-2xl font-semibold text-white mb-1 hover:text-white/90 transition-colors duration-300",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm hover:text-white/80 transition-colors duration-300",children:"Sua Rede de Apoio em Saúde Mental"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl hover:bg-white/[0.07] hover:border-white/20 transition-all duration-500 hover:shadow-[0_20px_60px_rgba(255,255,255,0.1)] group",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-light text-white mb-1 group-hover:text-white/95 transition-colors duration-300",children:"Acesse sua jornada"}),i.jsx("p",{className:"text-white/60 text-sm group-hover:text-white/70 transition-colors duration-300",children:"Faça login para continuar sua evolução pessoal"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(oo,{className:"w-3 h-3 text-white/40 animate-pulse"}),i.jsx("span",{className:"text-xs text-white/60",children:"Tipo de usuário:"}),i.jsx(oo,{className:"w-3 h-3 text-white/40 animate-pulse",style:{animationDelay:"0.5s"}})]}),i.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1 border border-white/20 hover:border-white/30 transition-all duration-300 hover:bg-white/15",children:[i.jsxs("button",{type:"button",onClick:()=>l("user"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${a==="user"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(st,{className:`w-3 h-3 mr-1.5 transition-all duration-300 ${a==="user"?"animate-bounce":"group-hover:scale-110"}`}),"Usuário"]}),i.jsxs("button",{type:"button",onClick:()=>l("psychologist"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${a==="psychologist"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(Wi,{className:`w-3 h-3 mr-1.5 transition-all duration-300 ${a==="psychologist"?"animate-pulse":"group-hover:scale-110"}`}),"Profissional"]})]})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1 group",children:[i.jsx("label",{htmlFor:"email",className:"block text-xs font-light text-white/80 group-hover:text-white/90 transition-colors duration-300",children:"E-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(Da,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50 transition-all duration-300 ${c==="email"?"text-white/80 scale-110":"group-hover:text-white/70"}`}),i.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:m,onFocus:()=>d("email"),onBlur:()=>d(null),className:`w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300 text-sm hover:bg-black/60 hover:border-white/30 ${c==="email"?"scale-[1.02] shadow-[0_0_15px_rgba(255,255,255,0.1)]":""}`,placeholder:"seu@email.com",required:!0})]})]}),i.jsxs("div",{className:"space-y-1 group",children:[i.jsx("label",{htmlFor:"password",className:"block text-xs font-light text-white/80 group-hover:text-white/90 transition-colors duration-300",children:"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(yc,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50 transition-all duration-300 ${c==="password"?"text-white/80 scale-110":"group-hover:text-white/70"}`}),i.jsx("input",{type:r?"text":"password",id:"password",name:"password",value:t.password,onChange:m,onFocus:()=>d("password"),onBlur:()=>d(null),className:`w-full pl-9 pr-10 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300 text-sm hover:bg-black/60 hover:border-white/30 ${c==="password"?"scale-[1.02] shadow-[0_0_15px_rgba(255,255,255,0.1)]":""}`,placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-all duration-300 hover:scale-110",children:r?i.jsx(wc,{className:"w-4 h-4 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]"}):i.jsx(io,{className:"w-4 h-4 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center group cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"w-3 h-3 rounded border-white/30 bg-black/40 text-white focus:ring-white/30 focus:ring-2 transition-all duration-300 hover:scale-110"}),i.jsx("span",{className:"ml-2 text-xs text-white/70 group-hover:text-white/90 transition-colors duration-300",children:"Lembrar de mim"})]}),i.jsx("button",{type:"button",onClick:E,className:"text-xs text-white/80 hover:text-white transition-all duration-300 hover:scale-105 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"Esqueceu a senha?"})]}),i.jsxs("button",{type:"submit",disabled:s,className:"w-full py-2.5 px-4 bg-white text-black hover:bg-white/90 disabled:bg-white/60 font-medium rounded-lg transition-all duration-300 transform hover:scale-[1.02] hover:shadow-[0_8px_30px_rgba(255,255,255,0.3)] disabled:scale-100 disabled:cursor-not-allowed shadow-lg text-sm group overflow-hidden relative",onMouseEnter:()=>f("submit"),onMouseLeave:()=>f(null),children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full transition-transform duration-1000 ${h==="submit"&&!s?"translate-x-full":""}`}),s?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin mr-2"}),"Entrando..."]}):i.jsx("span",{className:"relative z-10",children:"Entrar"})]})]}),a==="user"&&i.jsxs("div",{className:"mt-4 animate-fade-in",style:{animationDelay:"0.2s"},children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-white/10"})}),i.jsx("div",{className:"relative flex justify-center text-xs",children:i.jsx("span",{className:"px-4 bg-black text-white/60",children:"ou continue com"})})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2",children:i.jsxs("button",{onClick:N,type:"button",className:"flex items-center justify-center py-1.5 px-4 border border-white/20 rounded-lg text-white/80 hover:text-white hover:border-white/30 transition-all duration-300 text-sm hover:scale-[1.02] hover:bg-white/5 hover:shadow-[0_4px_20px_rgba(255,255,255,0.1)] group relative overflow-hidden",onMouseEnter:()=>f("google"),onMouseLeave:()=>f(null),children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-white/10 via-white/20 to-white/10 opacity-0 transition-opacity duration-300 ${h==="google"?"opacity-100":""}`}),i.jsxs("svg",{className:"w-4 h-4 mr-2 relative z-10 group-hover:scale-110 transition-transform duration-300",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[i.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.37c-.23 1.22-.93 2.25-1.98 2.94v2.45h3.2c1.87-1.72 2.97-4.25 2.97-7.4z",fill:"#4285F4"}),i.jsx("path",{d:"M12 23c2.7 0 4.96-.9 6.62-2.45l-3.2-2.45c-.9.6-2.06.96-3.42.96-2.63 0-4.85-1.77-5.64-4.15H3.01v2.6C4.65 20.98 8.06 23 12 23z",fill:"#34A853"}),i.jsx("path",{d:"M6.36 14.91c-.2-.6-.32-1.24-.32-1.91s.12-1.31.32-1.91V8.49H3.01A11 11 0 0 0 2 12c0 1.76.42 3.41 1.01 4.91l3.35-2z",fill:"#FBBC05"}),i.jsx("path",{d:"M12 5.27c1.47 0 2.8.51 3.84 1.5l2.88-2.88C16.94 2.23 14.7 1.32 12 1.32 8.06 1.32 4.65 3.34 3.01 6.09l3.35 2.6C7.15 7.31 9.37 5.27 12 5.27z",fill:"#EA4335"})]}),i.jsx("span",{className:"relative z-10",children:"Google"})]})})]}),a==="psychologist"&&i.jsx("div",{className:"mt-4 animate-fade-in",style:{animationDelay:"0.3s"},children:i.jsxs("div",{className:"bg-white/10 border border-white/20 rounded-lg p-3 text-center hover:bg-white/15 hover:border-white/30 transition-all duration-300 hover:scale-[1.02] hover:shadow-[0_0_20px_rgba(255,255,255,0.2)] group",children:[i.jsx(Wi,{className:"w-5 h-5 text-white mx-auto mb-1.5 group-hover:scale-110 group-hover:animate-pulse transition-transform duration-300"}),i.jsx("p",{className:"text-white text-xs font-medium group-hover:text-white transition-colors duration-300",children:"Login Profissional"}),i.jsx("p",{className:"text-white/80 text-xs group-hover:text-white transition-colors duration-300",children:"Psicólogos devem usar suas credenciais registradas"})]})}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-white/70 text-sm",children:["Não tem uma conta?"," ",i.jsx("button",{onClick:()=>k("/register"),className:"text-white hover:text-white/80 font-medium transition-all duration-300 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)] hover:scale-105 inline-block",children:"Cadastre-se"})]})})]}),i.jsx("div",{className:"mt-6 text-center text-white/50 text-xs animate-fade-in",style:{animationDelay:"0.5s"},children:i.jsxs("p",{className:"hover:text-white/70 transition-colors duration-300 cursor-default",children:["Conecte-se, Entenda-se, ",i.jsx("span",{className:"text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.3)] transition-all duration-300",children:"Evolua."})]})})]})]})},kS=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(0),[s,o]=w.useState(!0),{user:a}=$e(),l=async()=>{if(!(a!=null&&a.uid)){e([]),n(0),o(!1);return}try{o(!0);const m=await nn.getUserNotifications(a.uid);e(m);const y=m.filter(N=>!N.read);n(y.length)}catch(m){console.error("Erro ao buscar notificações:",m),e([]),n(0)}finally{o(!1)}},c=async m=>{try{await nn.markNotificationAsRead(m),e(y=>y.map(N=>N.id===m?{...N,read:!0}:N)),n(y=>Math.max(0,y-1))}catch(y){console.error("Erro ao marcar notificação como lida:",y)}},d=async()=>{if(a!=null&&a.uid)try{await nn.markAllNotificationsAsRead(a.uid),e(m=>m.map(y=>({...y,read:!0}))),n(0)}catch(m){console.error("Erro ao marcar todas como lidas:",m)}},h=async m=>{try{await nn.deleteNotification(m),e(N=>N.filter(E=>E.id!==m));const y=t.find(N=>N.id===m);y&&!y.read&&n(N=>Math.max(0,N-1))}catch(y){console.error("Erro ao deletar notificação:",y)}},f=async()=>{if(a!=null&&a.uid)try{await nn.clearAllNotifications(a.uid),e([]),n(0)}catch(m){console.error("Erro ao limpar notificações:",m)}};return w.useEffect(()=>{l()},[a==null?void 0:a.uid]),{notifications:t,unreadCount:r,loading:s,fetchNotifications:l,markAsRead:c,markAllAsRead:d,deleteNotification:h,clearAllNotifications:f}},CS=Jt.memo(({activeTab:t,setActiveTab:e,onStartTour:r})=>{const[n,s]=w.useState(!1),[o,a]=w.useState(!1),[l,c]=w.useState(""),{user:d,loading:h}=$e(),{unreadCount:f}=kS(),m=xt(),y=w.useRef(null),N=w.useRef(null),E=w.useRef(null),k=w.useCallback(()=>{s(j=>!j),a(!1)},[]),v=w.useCallback(()=>{a(j=>!j),s(!1)},[]),g=w.useCallback(()=>{s(!1),a(!1)},[]),x=w.useMemo(()=>[{name:"Início",tab:"home",icon:Kp,path:"/home"},{name:"Chat",tab:"chat",icon:ft,path:"/home/chat"},{name:"Diário",tab:"diary",icon:ra,path:"/home/diary"},{name:"Humor",tab:"humor",icon:oi,path:"/home/humor"},{name:"Grupos",tab:"groups",icon:At,path:"/home/groups"},{name:"Notificações",tab:"notifications",icon:rs,path:"/home/notifications"},{name:"Configurações",tab:"settings",icon:na,path:"/home/settings"},{name:"Meu Perfil",tab:"profile",icon:st,path:"/profile"}],[]),b=w.useCallback(j=>{m(j.path),g()},[m,g]),T=w.useCallback(async()=>{try{const{auth:j}=await Ho(async()=>{const{auth:A}=await Promise.resolve().then(()=>Gp);return{auth:A}},void 0);await j.signOut(),m("/login"),g()}catch(j){console.error("Erro ao sair:",j),alert("Erro ao sair. Tente novamente.")}},[m,g]),M=w.useCallback(j=>{j.preventDefault(),l.trim()&&console.log("Searching for:",l)},[l]),I=w.useCallback(j=>{c(j.target.value)},[]);return w.useEffect(()=>{const j=A=>{y.current&&!y.current.contains(A.target)&&N.current&&!N.current.contains(A.target)&&g()};return(n||o)&&(document.addEventListener("mousedown",j),document.addEventListener("touchstart",j)),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("touchstart",j)}},[n,o,g]),w.useEffect(()=>{const j=A=>{A.key==="Escape"&&g()};return(n||o)&&document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}},[n,o,g]),w.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),h?i.jsx("header",{className:"bg-black border-b border-white/20 sticky top-0 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),i.jsx("span",{className:"text-white/70",children:"Carregando..."})]})})}):i.jsx("header",{className:"bg-black border-b border-white/20 sticky top-0 z-30",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{className:"lg:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors duration-200",onClick:k,"aria-label":"Abrir menu de navegação","aria-expanded":n,"aria-controls":"mobile-menu",children:n?i.jsx(lr,{className:"w-5 h-5"}):i.jsx(iS,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:()=>m("/home"),className:"flex items-center space-x-3 group","aria-label":"Ir para página inicial",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-5 h-5 object-contain group-hover:scale-105 transition-transform duration-200",loading:"eager"})}),i.jsx("span",{className:"text-white font-semibold text-lg group-hover:text-white/90 transition-colors duration-200",children:"Sereno"})]}),i.jsx("div",{className:"hidden lg:block ml-8",children:i.jsx("form",{onSubmit:M,className:"relative",children:i.jsx(ls,{ref:E,type:"text",placeholder:"Pesquisar posts, grupos, pessoas...",value:l,onChange:I,variant:"glass",size:"sm",radius:"xl",className:"w-80",leftIcon:xn,onLeftIconClick:()=>M({preventDefault:()=>{}}),"aria-label":"Pesquisar na plataforma"})})})]}),i.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-5",children:[x.map(j=>["profile","notifications","settings"].includes(j.tab)?null:i.jsx("button",{onClick:()=>b(j),className:`p-2 rounded-lg transition-colors duration-200 ${t===j.tab?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"aria-label":`Navegar para ${j.name}`,"aria-current":t===j.tab?"page":void 0,children:i.jsx(j.icon,{className:"w-5 h-5","aria-hidden":"true"})},j.name)),i.jsxs("button",{onClick:()=>b(x.find(j=>j.tab==="notifications")),className:`p-2 rounded-lg transition-colors duration-200 relative ${t==="notifications"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"aria-label":"Ver notificações","aria-current":t==="notifications"?"page":void 0,children:[i.jsx(rs,{className:"w-5 h-5","aria-hidden":"true"}),f>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:f})]}),i.jsx("button",{onClick:()=>b(x.find(j=>j.tab==="settings")),className:`p-2 rounded-lg transition-colors duration-200 ${t==="settings"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"aria-label":"Configurações","aria-current":t==="settings"?"page":void 0,children:i.jsx(na,{className:"w-5 h-5","aria-hidden":"true"})}),i.jsx("button",{onClick:r,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-200",title:"Iniciar tour do aplicativo","aria-label":"Iniciar tour do aplicativo",children:i.jsx(c1,{className:"w-5 h-5","aria-hidden":"true"})})]}),d?i.jsxs("div",{className:"relative",ref:N,children:[i.jsxs("button",{className:`flex items-center space-x-3 transition-colors duration-200 p-2 rounded-lg ${t==="profile"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,onClick:v,"aria-label":"Menu do usuário","aria-expanded":o,"aria-haspopup":"true",children:[d.photoURL?i.jsx("img",{src:d.photoURL,alt:d.displayName||"Usuário",className:"w-8 h-8 rounded-full object-cover"}):i.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center text-black font-bold text-sm",children:d.displayName?d.displayName[0].toUpperCase():d.email?d.email[0].toUpperCase():"U"}),i.jsx("span",{className:"text-sm font-light",children:d.displayName||"Usuário"})]}),o&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-black border border-white/20 rounded-lg shadow-lg py-1 z-50",children:[i.jsxs("button",{onClick:()=>{m("/profile"),a(!1)},className:"w-full text-left px-4 py-2 text-white hover:bg-white/10 transition-colors duration-200 flex items-center space-x-2","aria-label":"Ver meu perfil",children:[i.jsx(st,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Meu Perfil"})]}),i.jsxs("button",{onClick:()=>{m("/home/settings"),a(!1)},className:"w-full text-left px-4 py-2 text-white hover:bg-white/10 transition-colors duration-200 flex items-center space-x-2","aria-label":"Configurações do perfil",children:[i.jsx(na,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Configurações"})]}),i.jsxs("button",{onClick:T,className:"w-full text-left px-4 py-2 text-white hover:bg-white/10 transition-colors duration-200 flex items-center space-x-2","aria-label":"Sair da conta",children:[i.jsx(Qp,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Sair"})]})]})]}):i.jsx("button",{onClick:()=>m("/login"),className:"px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200","aria-label":"Fazer login",children:"Login"})]})]}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden",onClick:g,style:{opacity:n?1:0,transition:"opacity 150ms ease-in-out",pointerEvents:n?"auto":"none"}}),i.jsxs("div",{ref:y,className:"fixed left-0 top-0 h-full w-80 bg-black/95 border-r border-white/20 z-50 lg:hidden transform transition-transform duration-200 ease-in-out flex flex-col",style:{transform:n?"translateX(0)":"translateX(-100%)",pointerEvents:n?"auto":"none"},children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-5 h-5 object-contain"})}),i.jsx("span",{className:"text-white font-semibold text-lg",children:"Sereno"})]}),i.jsx("button",{onClick:g,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-200","aria-label":"Fechar menu",children:i.jsx(lr,{className:"w-5 h-5"})})]}),d&&i.jsx("div",{className:"p-4 border-b border-white/20 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[d.photoURL?i.jsx("img",{src:d.photoURL,alt:d.displayName||"Usuário",className:"w-10 h-10 rounded-full object-cover"}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-black font-bold text-lg",children:d.displayName?d.displayName[0].toUpperCase():d.email?d.email[0].toUpperCase():"U"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-white font-medium truncate text-sm",children:d.displayName||"Usuário"}),i.jsx("div",{className:"text-white/60 text-xs truncate",children:d.email||""})]})]})}),i.jsx("div",{className:"p-4 border-b border-white/20 flex-shrink-0",children:i.jsx("form",{onSubmit:M,className:"relative",children:i.jsx(ls,{type:"text",placeholder:"Pesquisar...",value:l,onChange:I,variant:"glass",size:"sm",radius:"xl",className:"w-full",leftIcon:xn,onLeftIconClick:()=>M({preventDefault:()=>{}}),"aria-label":"Pesquisar na plataforma"})})}),i.jsx("div",{className:"flex-1 overflow-y-auto py-4 min-h-0",children:i.jsxs("div",{className:"space-y-1 px-4",children:[x.map(j=>i.jsxs("button",{onClick:()=>b(j),className:`w-full flex items-center justify-between p-3 rounded-lg transition-all duration-200 ${t===j.tab?"bg-white/20 text-white":"text-white/80 hover:bg-white/10 hover:text-white"}`,"aria-label":`Navegar para ${j.name}`,"aria-current":t===j.tab?"page":void 0,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${t===j.tab?"bg-white/20":"bg-white/10"}`,children:i.jsx(j.icon,{className:`w-4 h-4 ${t===j.tab?"text-white":"text-white/70"}`,"aria-hidden":"true"})}),i.jsx("span",{className:"font-medium text-sm",children:j.name})]}),i.jsx(so,{className:"w-4 h-4 text-white/40","aria-hidden":"true"})]},j.name)),i.jsxs("button",{onClick:()=>{r(),g()},className:"w-full flex items-center justify-between p-3 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-all duration-200","aria-label":"Ajuda e tour do aplicativo",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-white/10",children:i.jsx(c1,{className:"w-4 h-4 text-white/70","aria-hidden":"true"})}),i.jsx("span",{className:"font-medium text-sm",children:"Ajuda e Tour"})]}),i.jsx(so,{className:"w-4 h-4 text-white/40","aria-hidden":"true"})]})]})}),i.jsx("div",{className:"p-4 border-t border-white/20 flex-shrink-0",children:d?i.jsxs("button",{onClick:T,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200","aria-label":"Sair da conta",children:[i.jsx(Qp,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Sair"})]}):i.jsx("button",{onClick:()=>{m("/login"),g()},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200","aria-label":"Fazer login",children:i.jsx("span",{children:"Login"})})})]})]})]})})});CS.displayName="Header";const RF=()=>{const t=w.useRef(null);return w.useEffect(()=>{const e=t.current,r=e.getContext("2d");let n;const s=()=>{e.width=window.innerWidth,e.height=window.innerHeight};s(),window.addEventListener("resize",s);const o=[];class a{constructor(d,h,f,m,y){this.y=d,this.amplitude=h,this.frequency=f,this.speed=m,this.color=y,this.offset=0,this.opacity=.1}update(){this.offset+=this.speed}draw(){r.beginPath(),r.moveTo(0,this.y);for(let h=0;h<=e.width;h+=2){const f=this.y+Math.sin((h+this.offset)*this.frequency)*this.amplitude;r.lineTo(h,f)}r.lineTo(e.width,e.height),r.lineTo(0,e.height),r.closePath();const d=r.createLinearGradient(0,this.y-this.amplitude,0,this.y+this.amplitude);d.addColorStop(0,`${this.color}00`),d.addColorStop(.5,`${this.color}${Math.floor(this.opacity*255).toString(16).padStart(2,"0")}`),d.addColorStop(1,`${this.color}00`),r.fillStyle=d,r.fill()}}o.push(new a(e.height*.3,30,.02,.5,"#ffffff")),o.push(new a(e.height*.6,40,.015,.3,"#ffffff")),o.push(new a(e.height*.8,25,.025,.7,"#ffffff"));const l=()=>{r.clearRect(0,0,e.width,e.height),o.forEach(c=>{c.update(),c.draw()}),n=requestAnimationFrame(l)};return l(),()=>{window.removeEventListener("resize",s),cancelAnimationFrame(n)}},[]),i.jsx("canvas",{ref:t,className:"fixed inset-0 pointer-events-none z-0 animation-initial animate-fade-in-scale animation-delay-600",style:{background:"transparent"}})},PF=({onOpenHumorTab:t})=>{const{user:e}=$e(),[r,n]=w.useState([{day:"Seg",mood:0,energy:0},{day:"Ter",mood:0,energy:0},{day:"Qua",mood:0,energy:0},{day:"Qui",mood:0,energy:0},{day:"Sex",mood:0,energy:0},{day:"Sáb",mood:0,energy:0},{day:"Dom",mood:0,energy:0}]),[s,o]=w.useState(5),[a,l]=w.useState(5),[c,d]=w.useState(5),[h,f]=w.useState(!1),[m,y]=w.useState(null),N=10,E=w.useRef(null),[k,v]=w.useState(!1);w.useEffect(()=>{(async()=>{if(!e)return;const T=await ld.getUserMoodHistory(e.uid,7),M=[0,0,0,0,0,0,0].map((I,j)=>{const A=["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"][j],C=T.filter(R=>{var ie;const $=(ie=R.recordedAt)!=null&&ie.toDate?R.recordedAt.toDate():new Date(R.recordedAt);return $&&$.getDay()===(j+1)%7}),S=C.length?Math.round(C.reduce((R,$)=>R+($.intensity||0),0)/C.length):0,D=C.length?Math.round(C.reduce((R,$)=>R+($.energy||0),0)/C.length):0;return{day:A,mood:S,energy:D}});n(M)})()},[e]);const g=async()=>{if(!e){alert("Usuário não autenticado");return}if(s<0||s>10||a<0||a>10||c<0||c>10){alert("Por favor, verifique se todos os valores estão entre 0 e 10");return}f(!0);try{const b={intensity:parseInt(s),energy:parseInt(a),stability:parseInt(c),notes:"Check-in diário",tags:["daily","checkin"],date:new Date().toISOString().split("T")[0],timestamp:new Date().toISOString()};console.log("Salvando check-in no Firebase:",b);const T=await ld.recordMood(e.uid,b);if(T&&T.success){console.log("Check-in salvo com sucesso:",T.moodId),y(new Date);try{const M=await ld.getUserMoodHistory(e.uid,7),I=["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"].map((j,A)=>{const C=M.filter(R=>{var ie;const $=(ie=R.recordedAt)!=null&&ie.toDate?R.recordedAt.toDate():new Date(R.recordedAt);return $&&$.getDay()===(A+1)%7}),S=C.length?Math.round(C.reduce((R,$)=>R+($.intensity||0),0)/C.length):0,D=C.length?Math.round(C.reduce((R,$)=>R+($.energy||0),0)/C.length):0;return{day:j,mood:S,energy:D}});n(I)}catch(M){console.warn("Erro ao atualizar histórico, mas check-in foi salvo:",M)}setTimeout(()=>{o(5),l(5),d(5)},1e3)}else throw new Error("Falha ao salvar check-in no Firebase")}catch(b){console.error("Erro ao salvar check-in:",b);let T="Erro ao salvar check-in. Tente novamente.";b.code==="permission-denied"?T="Erro de permissão. Verifique se você está logado.":b.code==="unavailable"?T="Serviço temporariamente indisponível. Tente novamente em alguns minutos.":b.code==="network-error"&&(T="Erro de conexão. Verifique sua internet."),alert(T)}finally{f(!1)}},x=({value:b,onChange:T,label:M})=>i.jsxs("div",{className:"space-y-2 group/slider",children:[i.jsxs("label",{className:"text-sm font-medium text-white/80 group-hover/slider:text-white transition-colors duration-300",children:[M,": ",b,"/10"]}),i.jsxs("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden group-hover/slider:bg-white/20 transition-all duration-300",children:[i.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-full"}),i.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-white/60 to-white/80 rounded-full transition-all duration-300 group-hover/slider:from-white/80 group-hover/slider:to-white shadow-lg group-hover/slider:shadow-white/25",style:{width:`${b/N*100}%`}}),i.jsx("div",{className:"absolute top-1/2 w-5 h-5 bg-white rounded-full shadow-lg transform -translate-y-1/2 cursor-pointer transition-all duration-300 hover:scale-110 hover:shadow-xl group-hover/slider:scale-110 group-hover/slider:shadow-2xl group-hover/slider:shadow-white/40 ring-2 ring-white/20 group-hover/slider:ring-white/40",style:{left:`${b/N*100}%`,marginLeft:"-10px"},onMouseDown:I=>{const j=C=>{const S=I.currentTarget.parentElement.getBoundingClientRect(),D=Math.max(0,Math.min(N,Math.round((C.clientX-S.left)/S.width*N)));T(D)},A=()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",A)}}),i.jsx("input",{type:"range",min:"0",max:"10",value:b,onChange:I=>T(parseInt(I.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex justify-between text-xs text-white/40 group-hover/slider:text-white/60 transition-colors duration-300",children:[i.jsx("span",{children:"0"}),i.jsx("span",{children:"5"}),i.jsx("span",{children:"10"})]})]});return i.jsxs("div",{className:"space-y-6 animation-initial animate-fade-in-right animation-delay-200",children:[i.jsxs("div",{className:"group bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:from-white/10 hover:to-white/15 transition-all duration-500 hover:shadow-2xl hover:shadow-white/5 hover:border-white/30 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 animate-pulse"}),i.jsxs("div",{className:"flex items-center space-x-2 mb-6 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ot,{className:"w-5 h-5 text-white/80 group-hover:text-white transition-colors duration-300 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full blur opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:scale-150"}),i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsx("h2",{className:"text-lg font-semibold text-white group-hover:text-white/90 transition-all duration-300 group-hover:tracking-wide",children:"Check-in Diário"}),m&&i.jsxs("div",{className:"flex items-center space-x-2 ml-auto text-green-400 text-sm",children:[i.jsx(dn,{className:"w-4 h-4"}),i.jsxs("span",{children:["Salvo às ",m.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]}),i.jsxs("div",{className:"space-y-6 relative z-10",children:[i.jsx(x,{value:s,onChange:o,label:"Intensidade"}),i.jsx(x,{value:a,onChange:l,label:"Energia"}),i.jsx(x,{value:c,onChange:d,label:"Estabilidade"}),i.jsx("button",{onClick:g,disabled:h,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 transform ${h?"bg-gray-500 text-gray-300 cursor-not-allowed scale-100":m?"bg-green-500 text-white hover:bg-green-600 hover:scale-105 hover:shadow-xl hover:shadow-green-500/25":"bg-gradient-to-r from-white to-gray-200 text-black hover:from-gray-200 hover:to-gray-300 hover:scale-105 hover:shadow-xl hover:shadow-white/25"} shadow-lg`,children:h?i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"}),i.jsx("span",{children:"Salvando..."})]}):m?i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(dn,{className:"w-4 h-4"}),i.jsx("span",{children:"Check-in Salvo!"})]}):"Salvar Check-in"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),i.jsxs("div",{ref:E,className:`group bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:from-white/10 hover:to-white/15 transition-all duration-500 hover:shadow-2xl hover:shadow-white/5 hover:border-white/30 relative overflow-hidden ${k?"ring-2 ring-white/50":""}`,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 animate-pulse"}),i.jsxs("div",{className:"flex items-center space-x-2 mb-12 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(as,{className:"w-5 h-5 text-white/80 group-hover:text-white transition-colors duration-300 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full blur opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:scale-150"}),i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsx("h2",{className:"text-lg font-semibold text-white group-hover:text-white/90 transition-all duration-300 group-hover:tracking-wide",children:"Tendência Semanal"})]}),i.jsxs("div",{className:"space-y-4 relative z-10",children:[i.jsx("div",{className:"flex items-end justify-between h-32 px-2",children:r.map((b,T)=>i.jsxs("div",{className:"flex flex-col items-center flex-1 group/day",children:[i.jsxs("div",{className:"relative w-full max-w-[20px] flex flex-col items-center space-y-1",children:[i.jsx("div",{className:"w-full bg-gradient-to-t from-gray-400/70 to-gray-300/70 rounded-sm transition-all duration-500 hover:from-gray-400 hover:to-gray-300 group-hover/day:scale-110 group-hover/day:shadow-lg group-hover/day:shadow-gray-400/25 relative overflow-hidden",style:{height:`${b.energy/N*80}px`,minHeight:"8px"},children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover/day:opacity-100 transition-opacity duration-500 group-hover/day:animate-pulse"})}),i.jsx("div",{className:"w-full bg-gradient-to-t from-white/70 to-gray-200/70 rounded-sm transition-all duration-500 hover:from-white hover:to-gray-200 group-hover/day:scale-110 group-hover/day:shadow-lg group-hover/day:shadow-white/25 relative overflow-hidden",style:{height:`${b.mood/N*80}px`,minHeight:"8px"},children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover/day:opacity-100 transition-opacity duration-500 group-hover/day:animate-pulse"})})]}),i.jsx("span",{className:"text-xs text-white/60 font-medium group-hover/day:text-white transition-colors duration-300 group-hover/day:scale-110 group-hover/day:font-semibold",children:b.day}),i.jsx("div",{className:"absolute top-2 right-2 w-1 h-1 bg-white/30 rounded-full opacity-0 group-hover/day:opacity-100 group-hover/day:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"absolute top-4 right-6 w-0.5 h-0.5 bg-white/20 rounded-full opacity-0 group-hover/day:opacity-100 group-hover/day:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.5s"}})]},T))}),i.jsxs("div",{className:"flex items-center justify-center space-x-4 pt-4 border-t border-gray-700/30",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-white to-gray-200 rounded-sm"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Humor"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-gray-400 to-gray-500 rounded-sm"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Energia"})]})]})]}),i.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700/30 relative z-10",children:i.jsxs("button",{onClick:()=>t("scheduling"),className:"w-full bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-white/25 flex items-center justify-center space-x-2 text-sm transform",children:[i.jsx(ft,{className:"w-4 h-4"}),i.jsx("span",{children:"Agendar Sessão"})]})})]})]})},DF=({setActiveTab:t})=>{const e=xt(),[r,n]=w.useState(0),s=[{id:1,name:"Ansiedade",icon:"🧘‍♀️",memberCount:1250,description:"Compartilhe experiências e dicas para lidar com ansiedade"},{id:2,name:"Estresse",icon:"🌿",memberCount:980,description:"Um espaço seguro para falar sobre depressão"},{id:3,name:"Autoestima",icon:"✨",memberCount:820,description:"Construindo confiança e amor próprio"},{id:4,name:"Relacionamentos",icon:"💝",memberCount:650,description:"Discussões sobre relacionamentos saudáveis"},{id:5,name:"Meditação Diária",icon:"🕯️",memberCount:750,description:"Pratique meditação em grupo"}],[o,a]=Jt.useState([]),[l,c]=Jt.useState(!1),d=y=>{a(N=>[...N,y]),n(N=>N+1)},h=y=>{a(N=>N.filter(E=>E!==y))},m=(y=>[...s].sort((N,E)=>E.memberCount-N.memberCount).slice(0,y))(5);return l?i.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando..."})]})}):i.jsxs(i.Fragment,{children:[i.jsx(NS,{trigger:r}),i.jsx("div",{className:"space-y-6 animation-initial animate-fade-in-left animation-delay-100",children:i.jsxs("div",{className:"group bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:from-white/10 hover:to-white/15 transition-all duration-500 hover:shadow-2xl hover:shadow-white/5",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-5 h-5 text-white/80",children:i.jsx(At,{className:"w-5 h-5"})}),i.jsx("div",{className:"absolute -inset-1 bg-white/10 rounded-full blur opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Grupos Sugeridos"})]}),i.jsx("div",{className:"space-y-4",children:m.slice(0,3).map(y=>{const N=o.includes(y.id);return i.jsxs("div",{className:"group/item relative flex items-center justify-between p-4 bg-gradient-to-r from-white/5 to-white/10 rounded-xl border border-white/10 hover:from-white/10 hover:to-white/15 hover:border-white/20 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg hover:shadow-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-white to-white/90 flex items-center justify-center text-black font-bold text-xl shadow-lg group-hover/item:scale-110 transition-transform duration-300",children:y.icon}),i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-xl blur opacity-0 group-hover/item:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white text-sm group-hover/item:text-white/90 transition-colors",children:y.name}),i.jsxs("p",{className:"text-white/50 text-xs font-medium",children:[y.memberCount.toLocaleString()," membros"]})]})]}),i.jsxs("button",{onClick:()=>N?h(y.id):d(y.id),className:`relative w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 cursor-pointer transform hover:scale-110 hover:rotate-3 ${N?"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 shadow-lg shadow-green-500/25":"bg-gradient-to-br from-white to-white/90 hover:from-white/80 hover:to-white shadow-lg shadow-white/25"}`,title:N?"Sair da comunidade":"Entrar na comunidade",children:[N?i.jsx(ai,{className:"w-5 h-5 text-white"}):i.jsx(Gr,{className:"w-5 h-5 text-black"}),i.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]})]},y.id)})}),i.jsx("div",{className:"text-center pt-6",children:i.jsx("button",{onClick:()=>e("/home/groups"),className:"px-6 py-3 bg-white text-black font-medium rounded-lg transition-all duration-200 hover:bg-gray-100 hover:shadow-lg hover:scale-105 transform",children:"Ver Comunidades"})})]})})]})},TS=({isOpen:t,onClose:e,userRole:r="cliente",isFirstTime:n=!1})=>{const[s,o]=w.useState(0),[a,l]=w.useState(new Set),[c,d]=w.useState(!1),h=[{id:"welcome",title:"Bem-vindo ao Sereno! 🎉",description:"Vamos te ajudar a conhecer as principais funcionalidades do aplicativo para sua saúde mental.",icon:Kp,position:"center"},{id:"home",title:"Página Inicial",description:"Aqui você encontra posts da comunidade, grupos sugeridos e um resumo do seu humor diário.",icon:Kp,position:"center"},{id:"chat",title:"Chat e Suporte",description:"Conecte-se com psicólogos ou converse com outros usuários da comunidade para apoio emocional.",icon:ft,position:"center"},{id:"diary",title:"Diário Evolutivo",description:"Registre seus pensamentos, sentimentos e reflexões diárias com prompts guiados.",icon:ra,position:"center"},{id:"humor",title:"Rastreador de Humor",description:"Monitore seu humor diário, visualize tendências e receba insights sobre seu bem-estar emocional.",icon:oi,position:"center"},{id:"sessions",title:r==="psicologo"?"Gerenciar Sessões":"Agendar Sessões",description:r==="psicologo"?"Gerencie sua agenda, visualize sessões agendadas e configure sua disponibilidade.":"Encontre psicólogos disponíveis e agende sessões de terapia online ou presencial.",icon:ot,position:"center"},{id:"notifications",title:"Notificações",description:"Mantenha-se atualizado com mensagens, lembretes de sessões e atividades da comunidade.",icon:rs,position:"center"},{id:"settings",title:"Configurações",description:"Personalize seu perfil, gerencie notificações e configure suas preferências de privacidade.",icon:na,position:"center"},{id:"community",title:"Comunidade",description:"Participe de grupos de apoio, compartilhe experiências e conecte-se com pessoas que passam por situações similares.",icon:At,position:"center"}];w.useEffect(()=>{t&&(o(0),l(new Set),d(!1))},[t]);const f=()=>{s<h.length-1&&(l(T=>new Set([...T,h[s].id])),o(s+1))},m=()=>{s>0&&o(s-1)},y=()=>{E()},N=()=>{l(T=>new Set([...T,h[s].id])),E()},E=()=>{d(!0),setTimeout(()=>{e()},600)},k=T=>a.has(T);if(!t)return null;const v=h[s],g=v.icon,x=s===h.length-1,b=(s+1)/h.length*100;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`fixed inset-0 z-40 transition-all duration-800 ${n?"bg-black":"bg-black/80 backdrop-blur-sm"} ${c?"background-fade-out":"background-fade-in"}`}),i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:`bg-black/95 border border-white/10 rounded-2xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto ${c?"tour-modal-out":"tour-modal-in"}`,children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-white/60 mb-2",children:[i.jsxs("span",{className:"font-medium",children:["Passo ",s+1," de ",h.length]}),i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("span",{className:"font-medium",children:[Math.round(b),"%"]}),i.jsx("button",{onClick:E,className:"text-white/60 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full hover:scale-110 transition-transform duration-200",title:"Fechar tour",children:i.jsx(lr,{className:"w-5 h-5"})})]})]}),i.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:i.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(g,{className:"w-10 h-10 text-black"})}),i.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:v.title}),i.jsx("p",{className:"text-white/80 text-lg leading-relaxed",children:v.description})]}),i.jsx("div",{className:"flex justify-center space-x-2 mb-8",children:h.map((T,M)=>i.jsx("button",{onClick:()=>o(M),className:`w-3 h-3 rounded-full transition-all duration-300 ${M===s?"bg-white scale-125":k(T.id)?"bg-white":"bg-white/20 hover:bg-white/40"}`},T.id))}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:y,className:"text-white/60 hover:text-white transition-colors text-sm",children:"Pular tour"}),i.jsxs("div",{className:"flex space-x-3",children:[s>0&&i.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-all duration-300",children:[i.jsx(lh,{className:"w-4 h-4"}),i.jsx("span",{children:"Anterior"})]}),x?i.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-6 py-2 bg-white text-black rounded-lg hover:bg-gray-100 transition-all duration-300",children:[i.jsx(ai,{className:"w-4 h-4"}),i.jsx("span",{children:"Começar a usar"})]}):i.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-6 py-2 bg-white text-black rounded-lg hover:bg-gray-100 transition-all duration-300",children:[i.jsx("span",{children:"Próximo"}),i.jsx(so,{className:"w-4 h-4"})]})]})]})]})})]})};function Xr({children:t,showSidebars:e=!0}){const[r,n]=w.useState(!1),[s,o]=w.useState(!1),[a,l]=w.useState(!1),{user:c,isFirstTime:d,markTourAsSeen:h}=$e(),f=xt(),m=Un(),N=(()=>{const b=m.pathname;return b==="/home"?"home":b==="/home/profile"?"profile":b==="/home/sessions"?"sessions":b==="/home/diary"?"diary":b==="/home/humor"?"humor":b==="/home/chat"||b.startsWith("/home/chat/")?"chat":b==="/home/groups"?"groups":b==="/home/notifications"?"notifications":b==="/home/settings"?"settings":"home"})();w.useEffect(()=>{d&&c&&n(!0)},[d,c]),w.useEffect(()=>{if(d&&c){const b=setTimeout(()=>{l(!0)},2e3);return()=>clearTimeout(b)}},[d,c]);const E=()=>{n(!0)},k=async()=>{n(!1),d&&(o(!0),await h())},v=()=>{l(!1)},g=b=>{f(b==="home"?"/home":`/home/${b}`)},x=()=>e?N==="home"?i.jsxs(i.Fragment,{children:[i.jsx("aside",{className:"lg:col-span-3",children:i.jsx("div",{className:"sticky top-24",children:i.jsx(DF,{setActiveTab:g})})}),i.jsx("section",{className:"lg:col-span-6 space-y-8",children:t}),i.jsx("aside",{className:"lg:col-span-3",children:i.jsx("div",{className:"sticky top-24",children:i.jsx(PF,{})})})]}):N==="profile"?i.jsx("section",{className:"lg:col-span-12",children:i.jsx("div",{className:"max-w-6xl mx-auto",children:t})}):i.jsx("section",{className:"lg:col-span-12",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:t})}):null;return i.jsxs(i.Fragment,{children:[i.jsx(RF,{}),i.jsxs("div",{className:"min-h-screen bg-black lg:pb-8 pb-20",children:[i.jsx(CS,{activeTab:N,setActiveTab:g,onStartTour:E}),i.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:x()})}),i.jsx(TS,{isOpen:r,onClose:k,userRole:(c==null?void 0:c.role)||"cliente",isFirstTime:d}),i.jsx(vx,{message:"Bem-vindo ao Sereno! 🎉 Estamos felizes em tê-lo conosco nesta jornada de autoconhecimento e bem-estar.",type:"success",duration:8e3,isVisible:a,onClose:v})]})]})}const IS=w.createContext(void 0),MF=({children:t})=>{const[e,r]=w.useState(!1);return i.jsx(IS.Provider,{value:{friendshipStatusChanged:e,setFriendshipStatusChanged:r},children:t})},AS=()=>{const t=w.useContext(IS);if(t===void 0)throw new Error("useFriendship must be used within a FriendshipProvider");return t},O1=()=>{const{notifications:t,unreadCount:e,loading:r,markAsRead:n,markAllAsRead:s,deleteNotification:o,clearAllNotifications:a}=kS(),{user:l}=$e(),{setFriendshipStatusChanged:c}=AS(),d=xt(),[h,f]=w.useState(!1),m=v=>{switch(v){case"like":return{icon:Ar,color:"text-red-400"};case"comment":return{icon:ft,color:"text-blue-400"};case"follow":return{icon:Jp,color:"text-green-400"};case"friend_request":return{icon:Jp,color:"text-purple-400"};case"session":return{icon:ot,color:"text-yellow-400"};case"mood":return{icon:Ar,color:"text-pink-400"};case"diary":return{icon:ra,color:"text-purple-400"};case"welcome":return{icon:rs,color:"text-blue-400"};default:return{icon:rs,color:"text-gray-400"}}},y=v=>{if(!v)return"Agora mesmo";const g=new Date,x=v.toDate?v.toDate():new Date(v),b=Math.floor((g-x)/(1e3*60));if(b<1)return"Agora mesmo";if(b<60)return`${b}m atrás`;const T=Math.floor(b/60);if(T<24)return`${T}h atrás`;const M=Math.floor(T/24);return M<7?`${M}d atrás`:x.toLocaleDateString("pt-BR")},N=async(v,g)=>{if(l!=null&&l.uid)try{await Jr.acceptFriendRequest(v,l.uid),await n(v),c(x=>!x),d(`/profile/${g}`)}catch(x){console.error("Erro ao aceitar solicitação de amizade pela notificação:",x)}},E=async(v,g)=>{if(l!=null&&l.uid)try{await Jr.rejectFriendRequest(v,l.uid),await n(v),c(x=>!x),d(`/profile/${g}`)}catch(x){console.error("Erro ao rejeitar solicitação de amizade pela notificação:",x)}},k=async v=>{await n(v.id),v.type==="friend_request"&&v.senderId?d(`/profile/${v.senderId}`):v.actionUrl&&d(v.actionUrl)};return r?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando notificações..."})]}):t.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx(rs,{className:"w-16 h-16 text-white/30 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white/70 mb-2",children:"Nenhuma notificação"}),i.jsx("p",{className:"text-white/50",children:"Você está em dia com tudo!"})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(rs,{className:"w-6 h-6 text-white"}),i.jsxs("h2",{className:"text-xl font-semibold text-white",children:["Notificações",e>0&&i.jsx("span",{className:"ml-2 px-2 py-1 bg-red-500 text-white text-sm rounded-full",children:e})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[e>0&&i.jsxs("button",{onClick:s,className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/30 rounded-lg text-blue-400 transition-colors flex items-center space-x-2",children:[i.jsx(ai,{className:"w-4 h-4"}),i.jsx("span",{children:"Marcar todas como lidas"})]}),i.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg text-red-400 transition-colors flex items-center space-x-2",children:[i.jsx(sr,{className:"w-4 h-4"}),i.jsx("span",{children:"Limpar todas"})]})]})]}),i.jsx("div",{className:"space-y-3",children:t.map(v=>{const{icon:g,color:x}=m(v.type);return i.jsx("div",{className:`p-4 rounded-lg border transition-all cursor-pointer ${v.read?"bg-white/5 border-white/10 text-white/70":"bg-blue-500/10 border-blue-500/30 text-white"}`,onClick:()=>k(v),children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`p-2 rounded-lg bg-white/10 ${x}`,children:i.jsx(g,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium mb-1",children:v.title}),i.jsx("p",{className:"text-sm opacity-80 mb-2",children:v.message}),i.jsx("span",{className:"text-xs opacity-60",children:y(v.createdAt)})]}),v.type==="friend_request"&&!v.read&&i.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[i.jsx("button",{onClick:b=>{b.stopPropagation(),N(v.requestId,v.senderId)},className:"p-2 bg-green-500 hover:bg-green-600 rounded-full transition-colors",title:"Aceitar solicitação",children:i.jsx(ad,{className:"w-4 h-4 text-white"})}),i.jsx("button",{onClick:b=>{b.stopPropagation(),E(v.requestId,v.senderId)},className:"p-2 bg-red-500 hover:bg-red-600 rounded-full transition-colors",title:"Rejeitar solicitação",children:i.jsx(Xp,{className:"w-4 h-4 text-white"})})]}),!v.read&&v.type!=="friend_request"&&i.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[i.jsx("button",{onClick:b=>{b.stopPropagation(),n(v.id)},className:"p-1 hover:bg-white/10 rounded transition-colors",title:"Marcar como lida",children:i.jsx(ai,{className:"w-4 h-4"})}),i.jsx("button",{onClick:b=>{b.stopPropagation(),o(v.id)},className:"p-1 hover:bg-red-500/20 rounded transition-colors text-red-400",title:"Deletar notificação",children:i.jsx(sr,{className:"w-4 h-4"})})]}),v.read&&i.jsx("div",{className:"flex items-center space-x-2 ml-3",children:i.jsx("button",{onClick:b=>{b.stopPropagation(),o(v.id)},className:"p-1 hover:bg-red-500/20 rounded transition-colors text-red-400",title:"Deletar notificação",children:i.jsx(sr,{className:"w-4 h-4"})})})]})})]})},v.id)})}),h&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Limpar todas as notificações?"}),i.jsx("p",{className:"text-white/70 mb-6",children:"Esta ação não pode ser desfeita. Todas as notificações serão removidas permanentemente."}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:()=>{a(),f(!1)},className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Limpar todas"})]})]})})]})},LF=()=>{const{postId:t}=kc(),e=xt(),[r,n]=w.useState(null),[s,o]=w.useState(!0),[a,l]=w.useState(null),[c,d]=w.useState(null),[h,f]=w.useState(!1),[m,y]=w.useState(!1);w.useState(null);const{togglePostLike:N,isPostLiked:E,deletePost:k}=lm();w.useEffect(()=>{(async()=>{var T,M;try{o(!0);const I=jt.currentUser;if(!I){e("/login");return}l(I);const j=fe(G,"users",I.uid),A=await pt(j);if(A.exists()){const D=A.data();d(D)}const C=fe(G,"posts",t),S=await pt(C);if(S.exists()){const D=S.data(),R={id:S.id,...D,createdAt:((T=D.createdAt)==null?void 0:T.toDate())||new Date,updatedAt:(M=D.updatedAt)==null?void 0:M.toDate()};n(R),y(R.userId===I.uid)}else{e("/home");return}}catch(I){console.error("Erro ao buscar dados:",I),e("/home")}finally{o(!1)}})()},[t,e]);const v=async()=>{r&&await N(r.id)},g=async()=>{if(r)try{await k(r.id)&&e("/home")}catch(b){console.error("Erro ao deletar post:",b)}},x=b=>{const M=new Date-b,I=Math.floor(M/(1e3*60)),j=Math.floor(M/(1e3*60*60)),A=Math.floor(M/(1e3*60*60*24));return I<1?"Agora mesmo":I<60?`${I}m atrás`:j<24?`${j}h atrás`:A<7?`${A}d atrás`:b.toLocaleDateString("pt-BR")};return s?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando post..."})]}):r?i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border-b border-white/10 sticky top-0 z-10",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>e("/home"),className:"flex items-center space-x-2 text-white/70 hover:text-white transition-colors",children:[i.jsx(xo,{className:"w-5 h-5"}),i.jsx("span",{children:"Voltar"})]}),m&&i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>f(!h),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(wo,{className:"w-5 h-5"})}),h&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg shadow-lg py-1 z-20 min-w-[120px]",children:[i.jsxs("button",{onClick:()=>{f(!1)},className:"w-full text-left px-3 py-2 text-sm text-white hover:bg-white/10 flex items-center space-x-2",children:[i.jsx(Bc,{className:"w-3 h-3"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>{f(!1),window.confirm("Tem certeza que deseja deletar este post?")&&g()},className:"w-full text-left px-3 py-2 text-sm text-red-400 hover:bg-red-500/10 flex items-center space-x-2",children:[i.jsx(sr,{className:"w-3 h-3"}),i.jsx("span",{children:"Deletar"})]})]})]})]})})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 mb-8",children:[i.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:r.avatar?i.jsx("img",{src:r.avatar,alt:r.author,className:"w-12 h-12 rounded-full"}):i.jsx(st,{className:"w-6 h-6 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("h3",{className:"font-semibold text-white",children:r.author}),r.isAnonymous&&i.jsx("span",{className:"text-xs bg-white/20 text-white/70 px-2 py-1 rounded-full",children:"Anônimo"})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/50",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ut,{className:"w-3 h-3"}),i.jsx("span",{children:x(r.createdAt)})]}),r.isEdited&&i.jsx("span",{className:"text-white/30",children:"(editado)"})]})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("p",{className:"text-white/90 text-lg leading-relaxed whitespace-pre-wrap",children:r.content})}),r.tags&&r.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:r.tags.map((b,T)=>i.jsxs("span",{className:"inline-flex items-center space-x-1 bg-white/10 text-white/70 px-3 py-1 rounded-full text-sm",children:[i.jsx(nS,{className:"w-3 h-3"}),i.jsx("span",{children:b})]},T))}),i.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("button",{onClick:v,className:`flex items-center space-x-2 transition-colors ${E(r.id)?"text-red-400":"text-white/50 hover:text-white"}`,children:[i.jsx(Ar,{className:`w-5 h-5 ${E(r.id)?"fill-current":""}`}),i.jsx("span",{children:Array.isArray(r.likes)?r.likes.length:0})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-white/50",children:[i.jsx(ft,{className:"w-5 h-5"}),i.jsx("span",{children:r.commentCount||0})]}),i.jsxs("button",{className:"flex items-center space-x-2 text-white/50 hover:text-white transition-colors",children:[i.jsx(oS,{className:"w-5 h-5"}),i.jsx("span",{children:r.shares||0})]})]}),i.jsx("button",{className:"text-white/50 hover:text-white transition-colors",children:i.jsx(xx,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[i.jsxs("h4",{className:"text-white font-semibold text-lg mb-6",children:["Comentários (",r.commentCount||0,")"]}),i.jsx(fF,{postId:t})]})]})]}):i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Post não encontrado"})})};class OF{async uploadProfilePhoto(e,r){if(!e)throw new Error("Arquivo inválido");if(!r)throw new Error("ID de usuário ausente");try{const n=await this.fileToBase64(e),s=`profile_${r}_${Date.now()}`,o=fe(G,"users",r);return await Ue(o,{profilePhotoId:s,profilePhotoData:n,updatedAt:new Date}),{imageId:s,success:!0}}catch(n){throw console.error("Erro ao fazer upload da foto de perfil:",n),new Error(`Falha no upload: ${n.message}`)}}async uploadBannerPhoto(e,r){if(!e)throw new Error("Arquivo inválido");if(!r)throw new Error("ID de usuário ausente");try{const n=await this.fileToBase64(e),s=`banner_${r}_${Date.now()}`,o=fe(G,"users",r);return await Ue(o,{bannerPhotoId:s,bannerPhotoData:n,updatedAt:new Date}),{imageId:s,success:!0}}catch(n){throw console.error("Erro ao fazer upload do banner:",n),new Error(`Falha no upload: ${n.message}`)}}async replaceProfilePhoto(e,r,n=null){try{return(await this.uploadProfilePhoto(e,r)).imageId}catch(s){throw console.error("Erro ao substituir foto de perfil:",s),s}}async replaceBannerPhoto(e,r,n=null){try{return(await this.uploadBannerPhoto(e,r)).imageId}catch(s){throw console.error("Erro ao substituir banner:",s),s}}async deleteProfilePhoto(e,r){try{const n=fe(G,"users",e);return await Ue(n,{profilePhotoId:null,profilePhotoData:null,updatedAt:new Date}),!0}catch(n){throw console.error("Erro ao deletar foto de perfil:",n),n}}async deleteBannerPhoto(e,r){try{const n=fe(G,"users",e);return await Ue(n,{bannerPhotoId:null,bannerPhotoData:null,updatedAt:new Date}),!0}catch(n){throw console.error("Erro ao deletar banner:",n),n}}async getImageFromFirestore(e,r){try{const n=fe(G,"users",r),s=await pt(n);if(s.exists()){const o=s.data();if(e===o.profilePhotoId)return o.profilePhotoData;if(e===o.bannerPhotoId)return o.bannerPhotoData}return null}catch(n){return console.error("Erro ao obter imagem do Firestore:",n),null}}async getUserImages(e){try{const r=fe(G,"users",e),n=await pt(r);if(n.exists()){const s=n.data();return{profilePhotoURL:s.profilePhotoData||null,bannerPhotoURL:s.bannerPhotoData||null,profilePhotoId:s.profilePhotoId||null,bannerPhotoId:s.bannerPhotoId||null}}return{profilePhotoURL:null,bannerPhotoURL:null,profilePhotoId:null,bannerPhotoId:null}}catch(r){return console.error("Erro ao obter imagens do usuário:",r),{profilePhotoURL:null,bannerPhotoURL:null,profilePhotoId:null,bannerPhotoId:null}}}fileToBase64(e){return new Promise((r,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>r(s.result),s.onerror=o=>n(o)})}validateFileSize(e,r){const n=r*1024*1024;if(e.size>n)throw new Error(`Arquivo muito grande. Máximo permitido: ${r}MB`);return!0}validateFileType(e){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type))throw new Error("Tipo de arquivo não suportado. Use apenas imagens (JPEG, PNG, GIF, WebP)");return!0}}const rn=new OF,VF=t=>{const[e,r]=w.useState(null),[n,s]=w.useState(null),[o,a]=w.useState(!1),[l,c]=w.useState(null),d=w.useCallback(async()=>{if(t){a(!0),c(null);try{const m=await rn.getUserImages(t);r(m.profilePhotoURL),s(m.bannerPhotoURL)}catch(m){console.error("Erro ao carregar imagens do usuário:",m),c(m.message)}finally{a(!1)}}},[t]),h=w.useCallback(async(m,y,N=null)=>{if(!t||!m)return null;try{rn.validateFileType(m),y==="profilePhoto"?rn.validateFileSize(m,2):y==="bannerPhoto"&&rn.validateFileSize(m,5);let E;return y==="profilePhoto"?E=await rn.replaceProfilePhoto(m,t,N):y==="bannerPhoto"&&(E=await rn.replaceBannerPhoto(m,t,N)),await d(),E}catch(E){throw console.error(`Erro ao atualizar ${y}:`,E),E}},[t,d]),f=w.useCallback(()=>{r(null),s(null),c(null)},[]);return w.useEffect(()=>{t&&d()},[t,d]),{profilePhoto:e,bannerPhoto:n,loading:o,error:l,loadUserImages:d,updateImage:h,clearImages:f}},RS=w.createContext(null),FF=()=>{const t=w.useContext(RS);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},UF=({children:t})=>{const[e,r]=w.useState(null),n=w.useCallback((o,a="info",l=5e3)=>{r({message:o,type:a,duration:l,id:Date.now()})},[]),s=w.useCallback(()=>{r(null)},[]);return i.jsxs(RS.Provider,{value:{showAppToast:n},children:[t,e&&i.jsx(vx,{message:e.message,type:e.type,duration:e.duration,onClose:s,isVisible:!!e},e.id)]})},jf=()=>{const{userId:t}=kc(),{user:e,loading:r}=$e(),{setFriendshipStatusChanged:n}=AS(),s=t||(e==null?void 0:e.uid),{createPost:o,deletePost:a}=lm(),[l,c]=w.useState(!1),[d,h]=w.useState(!1),[f,m]=w.useState([]),[y,N]=w.useState(!0),[E,k]=w.useState({displayName:"",username:"",bio:"",phone:"",birthDate:""}),[v,g]=w.useState(!1),[x,b]=w.useState(!1),[T,M]=w.useState(!1),[I,j]=w.useState(null),[A,C]=w.useState(null),[S,D]=w.useState(!1),R=w.useRef(null),$=w.useRef(null),[ie,ue]=w.useState(null),[Q,V]=w.useState(null),{profilePhoto:q,bannerPhoto:O,loading:ee,loadUserImages:se,updateImage:U}=VF(s),{showAppToast:Z}=FF(),me=t&&(A==null?void 0:A.profilePhotoUrl)||q,Te=t&&(A==null?void 0:A.bannerPhotoUrl)||O;w.useEffect(()=>{t&&(e==null?void 0:e.uid)!==t?(async()=>{D(!0);try{const B=await kn.getUserProfile(t);C(B),k({displayName:(B==null?void 0:B.displayName)||"",username:(B==null?void 0:B.username)||"",bio:(B==null?void 0:B.bio)||"",phone:(B==null?void 0:B.phone)||"",birthDate:(B==null?void 0:B.birthDate)||""})}catch(B){console.error("Erro ao buscar perfil do usuário visualizado:",B),Z("Erro ao carregar perfil. Tente novamente.","error")}finally{D(!1)}})():e&&!t&&(async()=>{D(!0);try{const B=await kn.getUserProfile(e.uid);C(B),k({displayName:(B==null?void 0:B.displayName)||"",username:(B==null?void 0:B.username)||"",bio:(B==null?void 0:B.bio)||"",phone:(B==null?void 0:B.phone)||"",birthDate:(B==null?void 0:B.birthDate)||""})}catch(B){console.error("Erro ao buscar o próprio perfil do usuário:",B),Z("Erro ao carregar seu perfil. Tente novamente.","error")}finally{D(!1)}})()},[t,e]),w.useEffect(()=>{s&&A&&(async()=>{N(!0);try{const pe=(await Ms.getUserPosts(s)).map(Be=>({...Be,avatar:ie||me||(A==null?void 0:A.profilePhotoUrl)||null,author:(A==null?void 0:A.displayName)||(A==null?void 0:A.username)||"Usuário"}));m(pe)}catch(B){console.error("Erro ao buscar posts do usuário:",B),Z("Erro ao carregar posts do perfil. Tente novamente.","error")}finally{N(!1)}})()},[s,me,ie,A]),w.useEffect(()=>{(async()=>{if(e!=null&&e.uid&&s&&e.uid!==s)try{const B=await Jr.isFriend(e.uid,s);if(g(B),!B){const pe=await Jr.hasSentFriendRequest(e.uid,s);b(pe.exists),pe.exists&&j(pe.requestId);const Be=await Jr.hasReceivedFriendRequest(s,e.uid);M(Be.exists)}}catch(B){console.error("Erro ao verificar status de amizade:",B)}else g(!1),b(!1),M(!1),j(null)})()},[e==null?void 0:e.uid,s]),w.useEffect(()=>{s&&(k({displayName:(e==null?void 0:e.displayName)||"",username:(e==null?void 0:e.username)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",birthDate:(e==null?void 0:e.birthDate)||""}),se())},[s,se,e]),w.useEffect(()=>{s&&!l&&(async()=>{try{const B=await kn.getUserProfile(s);B&&k({displayName:B.displayName||"",username:B.username||"",bio:B.bio||"",phone:B.phone||"",birthDate:B.birthDate||""})}catch(B){console.error("Erro ao recarregar dados do usuário:",B)}})()},[s,l]);const de=()=>{c(!0)},tr=async()=>{var Y,B;try{if(console.log("Salvando perfil:",E),ie||Q){if(console.log("Processando novas imagens..."),ie)try{const pe=(Y=R.current)==null?void 0:Y.files[0];if(pe){const Be=e==null?void 0:e.profilePhotoId;await U(pe,"profilePhoto",Be,s),Z("Foto de perfil atualizada com sucesso!","success")}}catch(pe){console.error("Erro ao substituir foto de perfil:",pe),Z("Erro ao atualizar foto de perfil. Tente novamente.","error");return}if(Q)try{const pe=(B=$.current)==null?void 0:B.files[0];if(pe){const Be=e==null?void 0:e.bannerPhotoId;await U(pe,"bannerPhoto",Be,s),Z("Banner atualizado com sucesso!","success")}}catch(pe){console.error("Erro ao substituir banner:",pe),Z("Erro ao substituir banner. Tente novamente.","error");return}}try{await kn.updateUserBasicProfile(s,E),Z("Perfil básico atualizado com sucesso!","success")}catch(pe){console.error("Erro ao atualizar perfil básico:",pe),Z("Erro ao atualizar dados do perfil. Tente novamente.","error");return}c(!1),ue(null),V(null)}catch(pe){console.error("Erro ao salvar perfil:",pe),Z("Erro ao salvar perfil. Tente novamente.","error")}},Me=()=>{if(t){c(!1),ue(null),V(null),se();return}k({displayName:(e==null?void 0:e.displayName)||"",username:(e==null?void 0:e.username)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",birthDate:(e==null?void 0:e.birthDate)||""}),c(!1),ue(null),V(null),se()},St=(e==null?void 0:e.uid)===s,$n=async()=>{if(!(!(e!=null&&e.uid)||!s))try{await Jr.sendFriendRequest(e.uid,e.displayName||"Usuário Sereno",e.photoURL||null,s),b(!0),Z("Pedido de amizade enviado!","success"),n(Y=>!Y)}catch(Y){console.error("Erro ao enviar pedido de amizade:",Y),Z(Y.message||"Erro ao enviar pedido de amizade. Tente novamente.","error")}},Mr=async()=>{if(!(!(e!=null&&e.uid)||!s||!I))try{await Jr.cancelFriendRequest(I),b(!1),j(null),Z("Pedido de amizade cancelado.","info"),n(Y=>!Y)}catch(Y){console.error("Erro ao cancelar pedido de amizade:",Y),Z(Y.message||"Erro ao cancelar pedido de amizade. Tente novamente.","error")}},dr=async()=>{if(!(!(e!=null&&e.uid)||!s))try{const Y=await Jr.hasReceivedFriendRequest(s,e.uid);if(!Y.exists||!Y.requestId)throw new Error("Solicitação de amizade não encontrada para aceitar.");await Jr.acceptFriendRequest(Y.requestId,e.uid),g(!0),M(!1),Z("Solicitação de amizade aceita!","success"),n(B=>!B)}catch(Y){console.error("Erro ao aceitar pedido de amizade:",Y),Z(Y.message||"Erro ao aceitar solicitação. Tente novamente.","error")}},xi=async()=>{if(!(!(e!=null&&e.uid)||!s))try{const Y=await Jr.hasReceivedFriendRequest(s,e.uid);if(!Y.exists||!Y.requestId)throw new Error("Solicitação de amizade não encontrada para rejeitar.");await Jr.rejectFriendRequest(Y.requestId,e.uid),M(!1),Z("Solicitação de amizade rejeitada.","info"),n(B=>!B)}catch(Y){console.error("Erro ao rejeitar pedido de amizade:",Y),Z(Y.message||"Erro ao rejeitar solicitação. Tente novamente.","error")}},wi=Y=>{const B=Y.target.files[0];if(B)try{rn.validateFileType(B),rn.validateFileSize(B,2);const pe=new FileReader;pe.onload=Be=>{ue(Be.target.result)},pe.readAsDataURL(B)}catch(pe){Z(pe.message,"error"),Y.target.value=""}},yo=Y=>{const B=Y.target.files[0];if(B)try{rn.validateFileType(B),rn.validateFileSize(B,5);const pe=new FileReader;pe.onload=Be=>{V(Be.target.result)},pe.readAsDataURL(B)}catch(pe){Z(pe.message,"error"),Y.target.value=""}},yi=()=>{var Y;(Y=R.current)==null||Y.click()},La=()=>{var Y;(Y=$.current)==null||Y.click()},vi=()=>{h(!0)},bi=async Y=>{try{const B=await o(Y);if(B){h(!1);const pe={...B,avatar:ie||me||(A==null?void 0:A.profilePhotoUrl)||null,author:(A==null?void 0:A.displayName)||(A==null?void 0:A.username)||"Usuário"};m(Be=>[pe,...Be])}}catch(B){console.error("Erro ao criar post:",B),Z("Erro ao criar post. Tente novamente.","error")}},vo=async Y=>{if(window.confirm("Tem certeza que deseja deletar este post?"))try{await a(Y)&&(m(pe=>pe.filter(Be=>Be.id!==Y)),Z("Post deletado com sucesso!","success"))}catch(B){console.error("Erro ao deletar post:",B),Z("Erro ao deletar post. Tente novamente.","error")}},Oa=Y=>{if(!Y)return"Data não disponível";try{let B;if(Y&&typeof Y=="object"&&Y.toDate)B=Y.toDate();else if(Y instanceof Date)B=Y;else if(typeof Y=="string"||typeof Y=="number")B=new Date(Y);else return"Data inválida";return isNaN(B.getTime())?"Data inválida":B.toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"})}catch(B){return console.error("Erro ao formatar data:",B),"Data inválida"}},Ni=Y=>{if(!Y)return"";let B;if(Y&&typeof Y=="object"&&Y.toDate)B=Y.toDate();else if(Y instanceof Date)B=Y;else if(typeof Y=="string"||typeof Y=="number")B=new Date(Y);else return"Data inválida";if(isNaN(B.getTime()))return"Data inválida";const Be=new Date-B,Ns=Math.floor(Be/(1e3*60)),_i=Math.floor(Be/(1e3*60*60)),bo=Math.floor(Be/(1e3*60*60*24));return Ns<1?"Agora mesmo":Ns<60?`${Ns}m atrás`:_i<24?`${_i}h atrás`:bo<7?`${bo}d atrás`:B.toLocaleDateString("pt-BR")};if(r||ee||S)return i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando perfil..."})]});if(!e&&!t)return i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(st,{className:"w-12 h-12 text-red-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Usuário não autenticado"}),i.jsx("p",{className:"text-white/60",children:"Faça login para acessar seu perfil"})]})});const Fe=A;return!Fe&&t?i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(st,{className:"w-12 h-12 text-white/30"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Perfil não encontrado"}),i.jsx("p",{className:"text-white/40",children:"O perfil que você está procurando não existe ou não está disponível."})]})}):i.jsxs("div",{className:"min-h-screen bg-black relative",children:[i.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-blue-600 to-purple-600",children:[(Q||Te)&&i.jsx("img",{src:Q||Te,alt:"Banner",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/20"}),l&&St&&i.jsxs("button",{onClick:La,className:"absolute top-4 right-4 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-white hover:bg-white/30 transition-colors flex items-center space-x-2",children:[i.jsx(ah,{className:"w-4 h-4"}),i.jsx("span",{children:"Alterar Banner"})]})]}),i.jsx("div",{className:"relative -mt-20 px-8",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-40 h-40 rounded-full border-4 border-white bg-white/10 flex items-center justify-center overflow-hidden",children:ie||Fe!=null&&Fe.profilePhotoUrl?i.jsx("img",{src:ie||(Fe==null?void 0:Fe.profilePhotoUrl),alt:"Foto de perfil",className:"w-full h-full object-cover"}):i.jsx(st,{className:"w-20 h-20 text-white/50"})}),l&&St&&i.jsx("button",{onClick:yi,className:"absolute bottom-2 right-2 w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:i.jsx(ah,{className:"w-6 h-6 text-white"})})]})}),i.jsx("div",{className:"px-8 pb-8",children:i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsx("div",{className:"flex-1",children:l?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome"}),i.jsx("input",{type:"text",value:E.displayName,onChange:Y=>k(B=>({...B,displayName:Y.target.value})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30",placeholder:"Seu nome"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx(gx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",value:E.username,onChange:Y=>k(B=>({...B,username:Y.target.value})),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30",placeholder:"seu_username"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Biografia"}),i.jsx("textarea",{value:E.bio,onChange:Y=>k(B=>({...B,bio:Y.target.value})),rows:3,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 resize-none",placeholder:"Conte um pouco sobre você..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Telefone"}),i.jsxs("div",{className:"relative",children:[i.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"tel",value:E.phone,onChange:Y=>k(B=>({...B,phone:Y.target.value})),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30",placeholder:"(11) 99999-9999"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Data de Nascimento"}),i.jsxs("div",{className:"relative",children:[i.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"date",value:E.birthDate,onChange:Y=>k(B=>({...B,birthDate:Y.target.value})),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"})]})]})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{onClick:tr,className:"px-6 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors flex items-center space-x-2",children:[i.jsx(Bl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar"})]}),i.jsx("button",{onClick:Me,className:"px-6 py-2 bg-white/10 text-white rounded-lg font-medium hover:bg-white/20 transition-colors",children:"Cancelar"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-bold mt-5 text-white mb-2",children:(Fe==null?void 0:Fe.displayName)||"Usuário"}),i.jsxs("p",{className:"text-white/80 text-lg mb-3",children:[" ","@",(Fe==null?void 0:Fe.username)||"usuario"]}),i.jsx("p",{className:"text-white/70 mb-3",children:(Fe==null?void 0:Fe.bio)||"Nenhuma biografia adicionada"}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-white/60",children:[(Fe==null?void 0:Fe.phone)&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(gn,{className:"w-4 h-4"}),i.jsx("span",{children:Fe.phone})]}),(Fe==null?void 0:Fe.birthDate)&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ot,{className:"w-4 h-4"}),i.jsx("span",{children:Oa(Fe.birthDate)})]})]})]})}),!l&&St&&i.jsxs("button",{onClick:de,className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors flex items-center space-x-2",children:[i.jsx(Bc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar Perfil"})]}),!l&&!St&&i.jsx("div",{className:"flex items-center space-x-3",children:v?i.jsxs("button",{disabled:!0,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-full text-white/50 flex items-center space-x-2",children:[i.jsx(ad,{className:"w-4 h-4"}),i.jsx("span",{children:"Amigos"})]}):x?i.jsxs(i.Fragment,{children:[i.jsx("button",{disabled:!0,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-full text-white/50 flex items-center space-x-2",children:i.jsx(ad,{className:"w-4 h-4"})}),i.jsx("button",{onClick:Mr,className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-full text-white transition-colors flex items-center space-x-2",children:i.jsx(Xp,{className:"w-4 h-4"})})]}):T?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:dr,className:"px-6 py-3 bg-green-500 hover:bg-green-600 border border-green-400 rounded-full text-white transition-colors flex items-center space-x-2",children:i.jsx(ad,{className:"w-4 h-4"})}),i.jsx("button",{onClick:xi,className:"px-6 py-3 bg-red-500 hover:bg-red-600 border border-red-400 rounded-full text-white transition-colors flex items-center space-x-2",children:i.jsx(Xp,{className:"w-4 h-4"})})]}):i.jsx("button",{onClick:$n,className:"px-6 py-3 mt-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-full text-white transition-colors flex items-center space-x-2",children:i.jsx(Jp,{className:"w-4 h-4"})})})]})}),i.jsxs("div",{className:"px-8 pb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Posts"}),St&&i.jsxs("button",{onClick:vi,className:"px-6 py-3 bg-white hover:bg-gray-100 text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:[i.jsx(Gr,{className:"w-4 h-4"}),i.jsx("span",{children:"Criar Post"})]})]}),y?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{className:"text-white/60 mt-4",children:"Carregando posts..."})]}):f.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(tS,{className:"w-12 h-12 text-white/30"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Nenhum post ainda"}),i.jsx("p",{className:"text-white/40 mb-6",children:"Seus posts públicos aparecerão aqui. Posts anônimos não são exibidos no perfil."}),St&&i.jsxs("button",{onClick:vi,className:"px-6 py-3 bg-white hover:bg-gray-100 text-black rounded-lg font-medium transition-colors flex items-center space-x-2 mx-auto",children:[i.jsx(Gr,{className:"w-4 h-4"}),i.jsx("span",{children:"Criar Primeiro Post"})]})]}):i.jsx("div",{className:"space-y-6",children:f.map(Y=>i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center overflow-hidden",children:Y.avatar&&(Y.avatar.startsWith("http://")||Y.avatar.startsWith("https://"))?i.jsx("img",{src:Y.avatar,alt:Y.author,className:"w-10 h-10 rounded-full object-cover"}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-black font-bold text-md",children:Y.author?Y.author.charAt(0).toUpperCase():"U"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-white",children:Y.author}),i.jsx("p",{className:"text-sm text-white/50",children:Ni(Y.createdAt)})]})]}),St&&i.jsx("button",{onClick:()=>vo(Y.id),className:"p-2 text-white/50 hover:text-red-400 transition-colors rounded-full hover:bg-white/10",children:i.jsx(sr,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:Y.content}),Y.tags&&Y.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:Y.tags.map((B,pe)=>i.jsx("span",{className:"inline-flex items-center space-x-1 bg-white/10 text-white/70 px-3 py-1 rounded-full text-sm",children:i.jsxs("span",{children:["#",B]})},pe))})]},Y.id))})]}),d&&St&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-medium text-white",children:"Criar Novo Post"}),i.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(lr,{className:"w-5 h-5 text-white/70"})})]}),i.jsx(_S,{onPostCreated:bi,onCancel:()=>h(!1),isModal:!0})]})}),St&&i.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:wi,className:"hidden"}),St&&i.jsx("input",{ref:$,type:"file",accept:"image/*",onChange:yo,className:"hidden"})]})},zF=()=>{const{user:t}=$e(),e=xt();kc();const[r,n]=w.useState([]),[s,o]=w.useState([]),[a,l]=w.useState(!0),[c,d]=w.useState(""),[h,f]=w.useState("all");w.useState(null);const[m,y]=w.useState(!1),[N,E]=w.useState(null),[k,v]=w.useState({recipientId:"",content:""}),[g,x]=w.useState(!1),[b,T]=w.useState(""),[M,I]=w.useState([]);w.useEffect(()=>{j(),A()},[t==null?void 0:t.uid]),w.useEffect(()=>{let O=r;c&&(O=O.filter(ee=>{var se,U,Z;return((se=ee.subject)==null?void 0:se.toLowerCase().includes(c.toLowerCase()))||((U=ee.content)==null?void 0:U.toLowerCase().includes(c.toLowerCase()))||((Z=ee.senderName)==null?void 0:Z.toLowerCase().includes(c.toLowerCase()))})),h==="unread"?O=O.filter(ee=>!ee.read):h==="read"&&(O=O.filter(ee=>ee.read)),o(O)},[r,c,h]);const j=async()=>{if(t!=null&&t.uid){l(!0);try{const O=await jF(t.uid);O.success&&n(O.data)}catch(O){console.error("Erro ao carregar mensagens:",O)}finally{l(!1)}}},A=async()=>{if(t!=null&&t.uid)try{const O=await Di.therapyService.getSessionRequests(t.uid,"psychologist");O&&I(O.filter(ee=>ee.status==="pending"))}catch(O){console.error("Erro ao carregar solicitações de sessão:",O)}},C=async(O,ee,se,U,Z,me,Te,de,tr)=>{try{await Di.therapyService.updateSessionRequestStatus(O,"confirmed"),await Di.therapyService.createTherapySession({clientId:ee,clientName:se,psychologistId:U,psychologistName:Z,date:me,time:Te,sessionType:de,notes:tr,status:"confirmed"}),await Di.notificationService.createNotification({recipientId:ee,senderId:U,senderName:Z,type:"session_update",title:"Sessão Confirmada!",message:`Sua sessão com ${Z} em ${new Date(me).toLocaleDateString("pt-BR")} às ${Te} foi confirmada.`,actionUrl:"/home/sessions"}),A()}catch(Me){console.error("Erro ao confirmar sessão:",Me),alert("Erro ao confirmar sessão. Tente novamente.")}},S=async(O,ee,se,U,Z,me)=>{try{await Di.therapyService.updateSessionRequestStatus(O,"rejected"),await Di.notificationService.createNotification({recipientId:ee,senderId:t.uid,senderName:U,type:"session_update",title:"Sessão Rejeitada",message:`Sua solicitação de sessão com ${U} em ${new Date(Z).toLocaleDateString("pt-BR")} às ${me} foi rejeitada. Por favor, agende outro horário.`,actionUrl:"/home/sessions"}),A()}catch(Te){console.error("Erro ao rejeitar sessão:",Te),alert("Erro ao rejeitar sessão. Tente novamente.")}},D=async O=>{if(O.preventDefault(),!!(t!=null&&t.uid))try{const ee={...k,senderId:t.uid,senderName:t.displayName||"Psicólogo"};(await EF(ee)).success&&(y(!1),v({recipientId:"",content:""}),j(),ee.recipientId&&e(`/home/chat/${ee.recipientId}`))}catch(ee){console.error("Erro ao enviar mensagem:",ee)}},R=async O=>{try{(await SF(O)).success&&j()}catch(ee){console.error("Erro ao marcar mensagem como lida:",ee)}},$=O=>{E(N===O?null:O)},ie=O=>{switch(O){case"phone":return i.jsx(gn,{className:"w-4 h-4"});case"video":return i.jsx(ch,{className:"w-4 h-4"});case"email":return i.jsx(Da,{className:"w-4 h-4"});default:return i.jsx(ft,{className:"w-4 h-4"})}},ue=O=>{switch(O){case"phone":return"Chamada";case"video":return"Vídeo";case"email":return"Email";default:return"Mensagem"}},Q=O=>{switch(O){case"phone":return"bg-green-500/20 text-green-400 border-green-500/30";case"video":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"email":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},V=O=>{const ee=new Date(O),U=(new Date-ee)/(1e3*60*60);return U<24?ee.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):U<48?"Ontem":ee.toLocaleDateString("pt-BR")},q=()=>{b.trim()&&(e(`/home/chat/${b.trim()}`),x(!1),T(""))};return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mensagens"}),i.jsx("p",{className:"text-white/60",children:"Gerencie suas comunicações com pacientes e colegas"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Gr,{className:"w-4 h-4"}),"Criar Novo Chat"]}),i.jsxs("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-all duration-300",children:[i.jsx(ft,{className:"w-4 h-4"}),"Entrar em um Chat"]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar mensagens...",value:c,onChange:O=>d(O.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:h,onChange:O=>f(O.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todas as mensagens"}),i.jsx("option",{value:"unread",children:"Não lidas"}),i.jsx("option",{value:"read",children:"Lidas"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(ft,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:r.length}),i.jsx("div",{className:"text-sm text-white/60",children:"Total de Mensagens"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/20 border border-red-500/30 flex items-center justify-center",children:i.jsx(Ut,{className:"w-5 h-5 text-red-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:r.filter(O=>!O.read).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Não Lidas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(JE,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:r.filter(O=>O.read).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Lidas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(gn,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:r.filter(O=>O.type==="phone"||O.type==="video").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Chamadas/Vídeos"})]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[M.length>0&&i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6 mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Solicitações de Sessão Pendentes"}),i.jsx("div",{className:"space-y-4",children:M.map(O=>i.jsxs("div",{className:"bg-blue-500/10 border border-blue-400/30 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(ot,{className:"w-5 h-5 text-blue-400"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-white",children:["Solicitação de Sessão de ",O.sessionType==="individual"?"Individual":O.sessionType==="couple"?"Casal":O.sessionType==="family"?"Familiar":"Grupo"]}),i.jsxs("p",{className:"text-white/70 text-sm",children:["Cliente: ",O.clientName]}),i.jsxs("p",{className:"text-white/70 text-sm",children:["Data: ",new Date(O.date).toLocaleDateString("pt-BR")," às ",O.time]})]})]}),i.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:"Pendente"})]}),O.notes&&i.jsxs("p",{className:"text-white/60 text-sm mt-2",children:["Obs: ",O.notes]}),i.jsxs("div",{className:"flex space-x-3 mt-4",children:[i.jsx("button",{onClick:()=>C(O.id,O.clientId,O.clientName,O.psychologistId,O.psychologistName,O.date,O.time,O.sessionType,O.notes),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors duration-300",children:"Confirmar"}),i.jsx("button",{onClick:()=>S(O.id,O.clientId,O.clientName,O.psychologistName,O.date,O.time),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors duration-300",children:"Recusar"})]})]},O.id))})]}),s.map(O=>i.jsx("div",{className:`bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.07] transition-all duration-300 ${O.read?"":"bg-white/10 border-white/30"}`,children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center",children:ie(O.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:`text-lg font-semibold ${O.read?"text-white/80":"text-white"}`,children:O.subject||"Sem assunto"}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${Q(O.type)}`,children:ue(O.type)}),!O.read&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400 border border-red-500/30",children:"Nova"})]}),i.jsxs("p",{className:"text-white/60 text-sm",children:["De: ",O.senderName]}),i.jsx("p",{className:"text-white/40 text-xs",children:V(O.createdAt)})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[!O.read&&i.jsx("button",{onClick:()=>R(O.id),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-colors duration-300",title:"Marcar como lida",children:i.jsx(ai,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>$(O.id),className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-300",children:N===O.id?i.jsx(eS,{className:"w-4 h-4"}):i.jsx(ZE,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-300",children:i.jsx(Yp,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-300",children:i.jsx(wo,{className:"w-4 h-4"})})]})]}),N===O.id&&i.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Mensagem"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:O.content})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(Yp,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Responder"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(AL,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Encaminhar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(EL,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Arquivar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg hover:bg-red-500/20 transition-colors duration-300",children:[i.jsx(sr,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Excluir"})]})]})]})]})},O.id)),s.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ft,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhuma mensagem encontrada"}),i.jsx("p",{className:"text-white/40",children:"Comece enviando sua primeira mensagem"})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Criar Novo Chat"}),i.jsx("button",{onClick:()=>y(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(lr,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:D,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"ID do Destinatário (Paciente)"}),i.jsx("input",{type:"text",required:!0,value:k.recipientId,onChange:O=>v({...k,recipientId:O.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"ID do paciente"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Conteúdo da Mensagem"}),i.jsx("textarea",{required:!0,value:k.content,onChange:O=>v({...k,content:O.target.value}),rows:"6",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Digite sua mensagem..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:[i.jsx(qc,{className:"w-4 h-4 inline mr-2"}),"Enviar"]})]})]})]})}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs(yt,{variant:"glass",padding:"lg",className:"w-full max-w-md mx-4",children:[i.jsx(yt.Header,{children:i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ft,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Entrar em um Chat"})]}),i.jsx("button",{onClick:()=>x(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(lr,{className:"w-5 h-5"})})]})}),i.jsx(yt.Content,{children:i.jsxs("div",{className:"text-center py-6",children:[i.jsx(ft,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/70 mb-2",children:"Digite um código de sala para começar"}),i.jsx("p",{className:"text-white/50 mb-4",children:"Ou use a URL diretamente: /home/chat/nomeddasala"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ls,{type:"text",placeholder:"Digite o código da sala (ex: sala1208)",value:b,onChange:O=>T(O.target.value),variant:"glass",size:"sm",className:"flex-1"}),i.jsx("button",{onClick:q,disabled:!b.trim(),className:"px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors disabled:opacity-50",children:"Entrar"})]})]})})]})})]})},$F=()=>{const{user:t}=$e(),[e,r]=w.useState([]),[n,s]=w.useState([]),[o,a]=w.useState(!0),[l,c]=w.useState(""),[d,h]=w.useState("all"),[f,m]=w.useState(!1),[y,N]=w.useState({name:"",email:"",phone:"",birthDate:"",diagnosis:"",notes:""});w.useEffect(()=>{E()},[t==null?void 0:t.uid]),w.useEffect(()=>{let b=e;l&&(b=b.filter(T=>T.name.toLowerCase().includes(l.toLowerCase())||T.email.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(b=b.filter(T=>T.status===d)),s(b)},[e,l,d]);const E=async()=>{if(t!=null&&t.uid){a(!0);try{const b=await jS(t.uid);b.success&&r(b.data)}catch(b){console.error("Erro ao carregar pacientes:",b)}finally{a(!1)}}},k=async b=>{if(b.preventDefault(),!!(t!=null&&t.uid))try{(await vF(t.uid,y)).success&&(m(!1),N({name:"",email:"",phone:"",birthDate:"",diagnosis:"",notes:""}),E())}catch(T){console.error("Erro ao criar paciente:",T)}},v=b=>{switch(b){case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"inactive":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"urgent":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-blue-500/20 text-blue-400 border-blue-500/30"}},g=b=>{switch(b){case"active":return i.jsx(dn,{className:"w-4 h-4"});case"inactive":return i.jsx(Zp,{className:"w-4 h-4"});case"urgent":return i.jsx(XE,{className:"w-4 h-4"});default:return i.jsx(Ut,{className:"w-4 h-4"})}},x=b=>{switch(b){case"active":return"Ativo";case"inactive":return"Inativo";case"urgent":return"Urgente";default:return"Pendente"}};return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Pacientes"}),i.jsx("p",{className:"text-white/60",children:"Gerencie seus pacientes e acompanhe o progresso"})]}),i.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Gr,{className:"w-4 h-4"}),"Novo Paciente"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar pacientes...",value:l,onChange:b=>c(b.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:d,onChange:b=>h(b.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todos os status"}),i.jsx("option",{value:"active",children:"Ativos"}),i.jsx("option",{value:"inactive",children:"Inativos"}),i.jsx("option",{value:"urgent",children:"Urgentes"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(At,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>b.status==="active").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Pacientes Ativos"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(as,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>b.status==="urgent").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Casos Urgentes"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 border border-yellow-500/30 flex items-center justify-center",children:i.jsx(ot,{className:"w-5 h-5 text-yellow-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>b.lastSession&&new Date(b.lastSession)>new Date(Date.now()-7*24*60*60*1e3)).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Sessões Esta Semana"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(Ut,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>!b.lastSession||new Date(b.lastSession)<new Date(Date.now()-30*24*60*60*1e3)).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Pendentes"})]})]})})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Paciente"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Última Sessão"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Progresso"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Contato"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Ações"})]})}),i.jsx("tbody",{className:"divide-y divide-white/10",children:n.map(b=>i.jsxs("tr",{className:"hover:bg-white/5 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-sm",children:b.name.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-white",children:b.name}),i.jsx("div",{className:"text-sm text-white/60",children:b.diagnosis||"Sem diagnóstico"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${v(b.status)}`,children:[g(b.status),i.jsx("span",{className:"ml-1",children:x(b.status)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white/60",children:b.lastSession?new Date(b.lastSession).toLocaleDateString("pt-BR"):"Nunca"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 bg-white/20 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-white",style:{width:`${b.progress||0}%`}})}),i.jsxs("span",{className:"text-sm text-white/60",children:[b.progress||0,"%"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(gn,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Da,{className:"w-4 h-4"})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(io,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(am,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(wo,{className:"w-4 h-4"})})]})})]},b.id))})]})}),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(At,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhum paciente encontrado"}),i.jsx("p",{className:"text-white/40",children:"Comece adicionando seu primeiro paciente"})]})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Novo Paciente"}),i.jsx("button",{onClick:()=>m(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(X,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:k,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome Completo"}),i.jsx("input",{type:"text",required:!0,value:y.name,onChange:b=>N({...y,name:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Nome do paciente"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Email"}),i.jsx("input",{type:"email",required:!0,value:y.email,onChange:b=>N({...y,email:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"email@exemplo.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Telefone"}),i.jsx("input",{type:"tel",value:y.phone,onChange:b=>N({...y,phone:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"(11) 99999-9999"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Data de Nascimento"}),i.jsx("input",{type:"date",value:y.birthDate,onChange:b=>N({...y,birthDate:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Diagnóstico Inicial"}),i.jsx("textarea",{value:y.diagnosis,onChange:b=>N({...y,diagnosis:b.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Descreva o diagnóstico inicial..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Observações"}),i.jsx("textarea",{value:y.notes,onChange:b=>N({...y,notes:b.target.value}),rows:"2",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Observações adicionais..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:"Adicionar"})]})]})]})})]})},BF=({isOpen:t,onClose:e})=>{const{user:r}=$e(),[n,s]=w.useState(0),o=[{title:"Bem-vindo ao seu Dashboard Profissional! 👋",description:"Olá! Vamos fazer um tour rápido para você conhecer todas as funcionalidades do seu painel de psicólogo.",icon:i.jsx(Fn,{className:"w-8 h-8 text-yellow-400"}),highlight:null},{title:"Visão Geral - Seu Centro de Controle",description:"Aqui você encontra um resumo completo da sua prática: pacientes ativos, sessões realizadas, taxa de sucesso e muito mais.",icon:i.jsx(oi,{className:"w-8 h-8 text-blue-400"}),highlight:"overview",features:["Cards de monitoramento em tempo real","Gráficos de progresso dos pacientes","Estatísticas de desempenho","Resumo das próximas sessões"]},{title:"Gestão de Pacientes",description:"Gerencie todos os seus pacientes em um só lugar. Acompanhe progressos, histórico de sessões e informações importantes.",icon:i.jsx(At,{className:"w-8 h-8 text-green-400"}),highlight:"patients",features:["Lista completa de pacientes","Status de tratamento","Histórico de sessões","Progresso individual"]},{title:"Agenda de Sessões",description:"Organize sua agenda profissional com facilidade. Agende, gerencie e acompanhe todas as suas sessões de terapia.",icon:i.jsx(ot,{className:"w-8 h-8 text-purple-400"}),highlight:"sessions",features:["Agendamento de sessões","Diferentes tipos de atendimento","Controle de status","Lembretes automáticos"]},{title:"Relatórios e Análises",description:"Crie relatórios detalhados sobre o progresso dos seus pacientes e analise dados para melhorar seus tratamentos.",icon:i.jsx(as,{className:"w-8 h-8 text-orange-400"}),highlight:"reports",features:["Relatórios de progresso","Análises de tratamento","Métricas de sucesso","Exportação de dados"]},{title:"Sistema de Mensagens",description:"Comunique-se facilmente com seus pacientes através de mensagens, chamadas e videoconferências integradas.",icon:i.jsx(ft,{className:"w-8 h-8 text-pink-400"}),highlight:"messages",features:["Chat integrado","Chamadas de voz e vídeo","Notificações em tempo real","Histórico de conversas"]},{title:"Recursos Avançados",description:"Aproveite funcionalidades exclusivas para psicólogos: avaliações, planos de tratamento e muito mais.",icon:i.jsx($l,{className:"w-8 h-8 text-cyan-400"}),highlight:null,features:["Avaliações psicológicas","Planos de tratamento","Rastreamento de humor","Relatórios personalizados"]},{title:"Tudo Pronto! 🎉",description:"Agora você está pronto para usar todas as funcionalidades do seu dashboard profissional. Boa sorte com sua prática!",icon:i.jsx(dn,{className:"w-8 h-8 text-green-400"}),highlight:null}],a=()=>{n<o.length-1?s(n+1):c()},l=()=>{n>0&&s(n-1)},c=async()=>{if(r!=null&&r.uid)try{await kF(r.uid)}catch(y){console.error("Erro ao marcar tour como visto:",y)}e()},d=()=>{c()},h=o[n],f=n===0,m=n===o.length-1;return t?i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-6 h-6 object-contain"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Tour do Dashboard"}),i.jsxs("p",{className:"text-sm text-white/60",children:["Passo ",n+1," de ",o.length]})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx("button",{onClick:d,className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-200",title:"Pular tour",children:i.jsx(lr,{className:"w-5 h-5"})})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex justify-center mb-4",children:h.icon}),i.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:h.title}),i.jsx("p",{className:"text-white/70 text-lg leading-relaxed",children:h.description})]}),h.features&&i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-6",children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-3 text-center",children:"Funcionalidades desta seção:"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.features.map((y,N)=>i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(dn,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:y})]},N))})]}),n===1&&i.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(Fn,{className:"w-3 h-3 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Dica Pro"}),i.jsx("p",{className:"text-blue-300 text-sm",children:"Use os filtros de data e status para encontrar rapidamente as informações que você precisa. Os dados são atualizados em tempo real!"})]})]})}),n===2&&i.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(At,{className:"w-3 h-3 text-green-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-green-400 mb-1",children:"Organização"}),i.jsx("p",{className:"text-green-300 text-sm",children:"Mantenha seus pacientes organizados por status. Use as cores para identificar rapidamente casos urgentes, ativos ou inativos."})]})]})}),n===3&&i.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(ot,{className:"w-3 h-3 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-purple-400 mb-1",children:"Agendamento"}),i.jsx("p",{className:"text-purple-300 text-sm",children:"Configure lembretes automáticos para suas sessões. O sistema notifica você e seus pacientes sobre compromissos próximos."})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-2",children:[i.jsx("span",{children:"Progresso do tour"}),i.jsxs("span",{children:[Math.round((n+1)/o.length*100),"%"]})]}),i.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500",style:{width:`${(n+1)/o.length*100}%`}})})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-white/10",children:[i.jsxs("button",{onClick:l,disabled:f,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-300 ${f?"text-white/30 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:[i.jsx(lh,{className:"w-4 h-4"}),i.jsx("span",{children:"Anterior"})]}),i.jsx("div",{className:"flex space-x-2",children:o.map((y,N)=>i.jsx("button",{onClick:()=>s(N),className:`w-3 h-3 rounded-full transition-all duration-300 ${N===n?"bg-white":"bg-white/30 hover:bg-white/50"}`},N))}),i.jsxs("button",{onClick:a,className:"flex items-center space-x-2 bg-white text-black px-6 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx("span",{children:m?"Finalizar":"Próximo"}),!m&&i.jsx(so,{className:"w-4 h-4"})]})]})]})}):null},qF=()=>{const{user:t}=$e(),[e,r]=w.useState([]),[n,s]=w.useState([]),[o,a]=w.useState(!0),[l,c]=w.useState(""),[d,h]=w.useState("all"),[f,m]=w.useState("all"),[y,N]=w.useState(!1),[E,k]=w.useState(null),[v,g]=w.useState({title:"",type:"patient-progress",patientId:"",patientName:"",content:"",recommendations:"",nextSteps:""});w.useEffect(()=>{x()},[t==null?void 0:t.uid]),w.useEffect(()=>{let C=e;if(l&&(C=C.filter(S=>{var D,R;return S.title.toLowerCase().includes(l.toLowerCase())||((D=S.patientName)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||((R=S.content)==null?void 0:R.toLowerCase().includes(l.toLowerCase()))})),d!=="all"&&(C=C.filter(S=>S.type===d)),f==="week"){const S=new Date;S.setDate(S.getDate()-7),C=C.filter(D=>new Date(D.createdAt)>=S)}else if(f==="month"){const S=new Date;S.setMonth(S.getMonth()-1),C=C.filter(D=>new Date(D.createdAt)>=S)}s(C)},[e,l,d,f]);const x=async()=>{if(t!=null&&t.uid){a(!0);try{const C=await CF(t.uid);C.success&&r(C.data)}catch(C){console.error("Erro ao carregar relatórios:",C)}finally{a(!1)}}},b=async C=>{if(C.preventDefault(),!!(t!=null&&t.uid))try{const S={...v,psychologistId:t.uid};(await TF(S)).success&&(N(!1),g({title:"",type:"patient-progress",patientId:"",patientName:"",content:"",recommendations:"",nextSteps:""}),x())}catch(S){console.error("Erro ao criar relatório:",S)}},T=C=>{k(E===C?null:C)},M=C=>{switch(C){case"patient-progress":return i.jsx(At,{className:"w-4 h-4"});case"session-summary":return i.jsx(Ut,{className:"w-4 h-4"});case"treatment-plan":return i.jsx(dn,{className:"w-4 h-4"});case"assessment":return i.jsx(oi,{className:"w-4 h-4"});default:return i.jsx(as,{className:"w-4 h-4"})}},I=C=>{switch(C){case"patient-progress":return"Progresso do Paciente";case"session-summary":return"Resumo da Sessão";case"treatment-plan":return"Plano de Tratamento";case"assessment":return"Avaliação";default:return"Relatório"}},j=C=>{switch(C){case"patient-progress":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"session-summary":return"bg-green-500/20 text-green-400 border-green-500/30";case"treatment-plan":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"assessment":return"bg-orange-500/20 text-orange-400 border-orange-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},A=C=>new Date(C).toLocaleDateString("pt-BR");return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Relatórios"}),i.jsx("p",{className:"text-white/60",children:"Analise dados e gere relatórios detalhados"})]}),i.jsxs("button",{onClick:()=>N(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Gr,{className:"w-4 h-4"}),"Novo Relatório"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar relatórios...",value:l,onChange:C=>c(C.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:d,onChange:C=>h(C.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todos os tipos"}),i.jsx("option",{value:"patient-progress",children:"Progresso do Paciente"}),i.jsx("option",{value:"session-summary",children:"Resumo da Sessão"}),i.jsx("option",{value:"treatment-plan",children:"Plano de Tratamento"}),i.jsx("option",{value:"assessment",children:"Avaliação"})]}),i.jsxs("select",{value:f,onChange:C=>m(C.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todas as datas"}),i.jsx("option",{value:"week",children:"Última semana"}),i.jsx("option",{value:"month",children:"Último mês"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(oi,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.length}),i.jsx("div",{className:"text-sm text-white/60",children:"Total de Relatórios"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(At,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(C=>C.type==="patient-progress").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Progresso de Pacientes"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(Ut,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(C=>C.type==="session-summary").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Resumos de Sessões"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 border border-orange-500/30 flex items-center justify-center",children:i.jsx(as,{className:"w-5 h-5 text-orange-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(C=>C.type==="treatment-plan").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Planos de Tratamento"})]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[n.map(C=>i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.07] transition-all duration-300",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center",children:M(C.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:C.title}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${j(C.type)}`,children:I(C.type)})]}),C.patientName&&i.jsxs("p",{className:"text-white/60 text-sm",children:["Paciente: ",C.patientName]}),i.jsxs("p",{className:"text-white/40 text-xs",children:["Criado em ",A(C.createdAt)]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>T(C.id),className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:E===C.id?i.jsx(eS,{className:"w-4 h-4"}):i.jsx(ZE,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:i.jsx(l1,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:i.jsx(wo,{className:"w-4 h-4"})})]})]}),E===C.id&&i.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-4",children:[C.content&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Conteúdo"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:C.content})]}),C.recommendations&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Recomendações"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:C.recommendations})]}),C.nextSteps&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Próximos Passos"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:C.nextSteps})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(io,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Visualizar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(am,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Editar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(l1,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Exportar"})]})]})]})]})},C.id)),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(as,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhum relatório encontrado"}),i.jsx("p",{className:"text-white/40",children:"Comece criando seu primeiro relatório"})]})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Novo Relatório"}),i.jsx("button",{onClick:()=>N(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(lr,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Título do Relatório"}),i.jsx("input",{type:"text",required:!0,value:v.title,onChange:C=>g({...v,title:C.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Título do relatório"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Tipo de Relatório"}),i.jsxs("select",{value:v.type,onChange:C=>g({...v,type:C.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"patient-progress",children:"Progresso do Paciente"}),i.jsx("option",{value:"session-summary",children:"Resumo da Sessão"}),i.jsx("option",{value:"treatment-plan",children:"Plano de Tratamento"}),i.jsx("option",{value:"assessment",children:"Avaliação"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome do Paciente"}),i.jsx("input",{type:"text",value:v.patientName,onChange:C=>g({...v,patientName:C.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Nome do paciente (opcional)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Conteúdo do Relatório"}),i.jsx("textarea",{value:v.content,onChange:C=>g({...v,content:C.target.value}),rows:"4",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Descreva o conteúdo do relatório..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Recomendações"}),i.jsx("textarea",{value:v.recommendations,onChange:C=>g({...v,recommendations:C.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Recomendações baseadas no relatório..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Próximos Passos"}),i.jsx("textarea",{value:v.nextSteps,onChange:C=>g({...v,nextSteps:C.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Próximos passos a serem tomados..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:"Criar Relatório"})]})]})]})})]})},HF=()=>{const{user:t}=$e(),[e,r]=w.useState([]),[n,s]=w.useState([]),[o,a]=w.useState(!0),[l,c]=w.useState(""),[d,h]=w.useState("all"),[f,m]=w.useState("all"),[y,N]=w.useState(!1);w.useState(new Date);const[E,k]=w.useState({patientId:"",patientName:"",scheduledDate:"",scheduledTime:"",duration:50,type:"online",notes:"",status:"scheduled"});w.useEffect(()=>{v()},[t==null?void 0:t.uid]),w.useEffect(()=>{let S=e;if(l&&(S=S.filter(D=>{var R;return D.patientName.toLowerCase().includes(l.toLowerCase())||((R=D.notes)==null?void 0:R.toLowerCase().includes(l.toLowerCase()))})),d!=="all"&&(S=S.filter(D=>D.status===d)),f==="today"){const D=new Date;S=S.filter(R=>new Date(R.scheduledDate).toDateString()===D.toDateString())}else if(f==="week"){const D=new Date,R=new Date(D.getTime()+7*24*60*60*1e3);S=S.filter($=>{const ie=new Date($.scheduledDate);return ie>=D&&ie<=R})}s(S)},[e,l,d,f]);const v=async()=>{if(t!=null&&t.uid){a(!0);try{const S=await ES(t.uid);S.success&&r(S.data)}catch(S){console.error("Erro ao carregar sessões:",S)}finally{a(!1)}}},g=async S=>{if(S.preventDefault(),!!(t!=null&&t.uid))try{const D={...E,psychologistId:t.uid,scheduledDate:new Date(E.scheduledDate+"T"+E.scheduledTime)};(await bF(D)).success&&(N(!1),k({patientId:"",patientName:"",scheduledDate:"",scheduledTime:"",duration:50,type:"online",notes:"",status:"scheduled"}),v())}catch(D){console.error("Erro ao criar sessão:",D)}},x=async(S,D)=>{try{(await NF(S,{status:D})).success&&v()}catch(R){console.error("Erro ao atualizar sessão:",R)}},b=S=>{switch(S){case"completed":return"bg-green-500/20 text-green-400 border-green-500/30";case"scheduled":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";case"in-progress":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},T=S=>{switch(S){case"completed":return i.jsx(dn,{className:"w-4 h-4"});case"scheduled":return i.jsx(Ut,{className:"w-4 h-4"});case"cancelled":return i.jsx(Zp,{className:"w-4 h-4"});case"in-progress":return i.jsx(XE,{className:"w-4 h-4"});default:return i.jsx(Ut,{className:"w-4 h-4"})}},M=S=>{switch(S){case"completed":return"Concluída";case"scheduled":return"Agendada";case"cancelled":return"Cancelada";case"in-progress":return"Em Andamento";default:return"Pendente"}},I=S=>{switch(S){case"online":return i.jsx(ch,{className:"w-4 h-4"});case"phone":return i.jsx(gn,{className:"w-4 h-4"});case"in-person":return i.jsx(vc,{className:"w-4 h-4"});default:return i.jsx(ch,{className:"w-4 h-4"})}},j=S=>{switch(S){case"online":return"Online";case"phone":return"Telefone";case"in-person":return"Presencial";default:return"Online"}},A=S=>new Date(S).toLocaleDateString("pt-BR"),C=S=>new Date(S).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sessões"}),i.jsx("p",{className:"text-white/60",children:"Gerencie sua agenda de sessões de terapia"})]}),i.jsxs("button",{onClick:()=>N(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Gr,{className:"w-4 h-4"}),"Nova Sessão"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar sessões...",value:l,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:d,onChange:S=>h(S.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todos os status"}),i.jsx("option",{value:"scheduled",children:"Agendadas"}),i.jsx("option",{value:"in-progress",children:"Em Andamento"}),i.jsx("option",{value:"completed",children:"Concluídas"}),i.jsx("option",{value:"cancelled",children:"Canceladas"})]}),i.jsxs("select",{value:f,onChange:S=>m(S.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todas as datas"}),i.jsx("option",{value:"today",children:"Hoje"}),i.jsx("option",{value:"week",children:"Esta semana"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(ot,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(S=>S.status==="scheduled").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Agendadas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 border border-yellow-500/30 flex items-center justify-center",children:i.jsx(Ut,{className:"w-5 h-5 text-yellow-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(S=>S.status==="in-progress").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Em Andamento"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(dn,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(S=>S.status==="completed").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Concluídas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(Ut,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(S=>S.status==="scheduled"&&new Date(S.scheduledDate)>new Date).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Próximas"})]})]})})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Paciente"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Data & Hora"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Duração"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Ações"})]})}),i.jsx("tbody",{className:"divide-y divide-white/10",children:n.map(S=>i.jsxs("tr",{className:"hover:bg-white/5 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-sm",children:S.patientName.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-white",children:S.patientName}),i.jsx("div",{className:"text-sm text-white/60",children:S.notes||"Sem observações"})]})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"text-sm text-white",children:A(S.scheduledDate)}),i.jsx("div",{className:"text-sm text-white/60",children:C(S.scheduledDate)})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-white/10 text-white/80 border border-white/20",children:[I(S.type),i.jsx("span",{className:"ml-1",children:j(S.type)})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white/60",children:[S.duration," min"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${b(S.status)}`,children:[T(S.status),i.jsx("span",{className:"ml-1",children:M(S.status)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[S.status==="scheduled"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>x(S.id,"in-progress"),className:"p-1 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded transition-colors duration-200",title:"Iniciar sessão",children:i.jsx(OL,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>x(S.id,"cancelled"),className:"p-1 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors duration-200",title:"Cancelar sessão",children:i.jsx(Zp,{className:"w-4 h-4"})})]}),S.status==="in-progress"&&i.jsx("button",{onClick:()=>x(S.id,"completed"),className:"p-1 text-green-400 hover:text-green-300 hover:bg-green-500/10 rounded transition-colors duration-200",title:"Finalizar sessão",children:i.jsx(dn,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(io,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(am,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(wo,{className:"w-4 h-4"})})]})})]},S.id))})]})}),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ot,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhuma sessão encontrada"}),i.jsx("p",{className:"text-white/40",children:"Comece agendando sua primeira sessão"})]})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Nova Sessão"}),i.jsx("button",{onClick:()=>N(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(lr,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome do Paciente"}),i.jsx("input",{type:"text",required:!0,value:E.patientName,onChange:S=>k({...E,patientName:S.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Nome do paciente"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Data"}),i.jsx("input",{type:"date",required:!0,value:E.scheduledDate,onChange:S=>k({...E,scheduledDate:S.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Hora"}),i.jsx("input",{type:"time",required:!0,value:E.scheduledTime,onChange:S=>k({...E,scheduledTime:S.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Duração (min)"}),i.jsxs("select",{value:E.duration,onChange:S=>k({...E,duration:parseInt(S.target.value)}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:30,children:"30 min"}),i.jsx("option",{value:45,children:"45 min"}),i.jsx("option",{value:50,children:"50 min"}),i.jsx("option",{value:60,children:"60 min"}),i.jsx("option",{value:90,children:"90 min"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Tipo"}),i.jsxs("select",{value:E.type,onChange:S=>k({...E,type:S.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"online",children:"Online"}),i.jsx("option",{value:"phone",children:"Telefone"}),i.jsx("option",{value:"in-person",children:"Presencial"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Observações"}),i.jsx("textarea",{value:E.notes,onChange:S=>k({...E,notes:S.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Observações sobre a sessão..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:"Agendar"})]})]})]})})]})},WF=()=>{const t=xt(),{user:e}=$e(),[r,n]=w.useState("overview"),[s,o]=w.useState(""),[a,l]=w.useState(!1),[c,d]=w.useState(!0),[h,f]=w.useState({patients:[],sessions:[],stats:{activePatients:0,totalSessions:0,successRate:0,avgSessionTime:0,rating:0,newPatients:0}}),m=w.useMemo(()=>[{id:1,title:"Pacientes Ativos",subtitle:"Em tratamento",value:h.stats.activePatients.toString(),change:"+12%",trend:"up",icon:At,bars:[80,60,90,70,85]},{id:2,title:"Sessões Realizadas",subtitle:"Este mês",value:h.stats.totalSessions.toString(),change:"+8%",trend:"up",icon:ot,bars:[65,85,70,90,75]},{id:3,title:"Taxa de Sucesso",subtitle:"Tratamentos",value:`${h.stats.successRate}%`,change:"+5%",trend:"up",icon:as,bars:[90,85,95,80,88]},{id:4,title:"Tempo Médio",subtitle:"Por sessão",value:`${h.stats.avgSessionTime}min`,change:"-3%",trend:"down",icon:Ut,bars:[70,60,80,65,75]},{id:5,title:"Avaliações",subtitle:"Satisfação",value:h.stats.rating.toString(),change:"+0.2",trend:"up",icon:Fn,bars:[85,90,80,95,88]},{id:6,title:"Novos Pacientes",subtitle:"Esta semana",value:h.stats.newPatients.toString(),change:"+25%",trend:"up",icon:$l,bars:[60,75,85,70,80]}],[h.stats]),y=w.useMemo(()=>h.patients.slice(0,3),[h.patients]),N=w.useMemo(()=>h.sessions.slice(0,3),[h.sessions]),E=()=>{t("/login")},k=()=>{n("sessions")},v=b=>{n("patients")},g=b=>{n("sessions")};w.useEffect(()=>{localStorage.getItem(`psychologist-tour-${e==null?void 0:e.uid}`)||l(!0)},[e==null?void 0:e.uid]),w.useEffect(()=>{(async()=>{if(e!=null&&e.uid){d(!0);try{const T=await _F(e.uid);let M={activePatients:0,totalSessions:0,successRate:87,avgSessionTime:45,rating:4.8,newPatients:0};T.success&&(M=T.data);const I=await jS(e.uid);let j=[];I.success&&(j=I.data);const A=await ES(e.uid);let C=[];A.success&&(C=A.data),f({patients:j,sessions:C,stats:M})}catch(T){console.error("Erro ao carregar dados:",T)}finally{d(!1)}}})()},[e==null?void 0:e.uid]);const x=()=>{switch(r){case"overview":return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(b=>i.jsxs("div",{className:"monitoring-card bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:bg-white/[0.07] hover:border-white/20 transition-all duration-500 hover:scale-[1.02] hover:shadow-[0_20px_60px_rgba(255,255,255,0.1)] group",children:[i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 border border-white/20 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:i.jsx(b.icon,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-medium text-base",children:b.title}),i.jsx("p",{className:"text-white/60 text-sm",children:b.subtitle})]})]}),i.jsxs("div",{className:"text-right text-white",children:[i.jsx("div",{className:"text-xl font-bold",children:b.value}),i.jsx("div",{className:"text-xs text-white/70",children:b.change})]})]}),i.jsx("div",{className:"chart-container flex items-end justify-between space-x-1.5 h-20",children:b.bars.map((T,M)=>i.jsx("div",{className:"chart-bar flex-1 bg-white/60 rounded-t-md group-hover:bg-white transition-all duration-300",style:{height:`${T}%`}},M))})]},b.id))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:"Pacientes Recentes"}),i.jsxs("button",{onClick:()=>n("patients"),className:"text-white/60 hover:text-white text-sm font-medium transition-colors duration-300 flex items-center space-x-1",children:[i.jsx("span",{children:"Ver todos"}),i.jsx(so,{className:"w-4 h-4"})]})]}),i.jsxs("div",{className:"space-y-4",children:[y.map(b=>i.jsxs("div",{onClick:()=>v(b.id),className:"flex items-center justify-between p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(st,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium text-base",children:b.name}),i.jsxs("p",{className:"text-white/60 text-sm",children:["Última sessão: ",b.lastSession?new Date(b.lastSession).toLocaleDateString("pt-BR"):"Nunca"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-xs text-white/60 mb-2",children:["Próxima: ",b.nextSession||"Não agendada"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 bg-white/20 rounded-full h-2.5",children:i.jsx("div",{className:"h-2.5 rounded-full bg-white",style:{width:`${b.progress||0}%`}})}),i.jsxs("span",{className:"text-xs text-white/60",children:[b.progress||0,"%"]})]})]})]},b.id)),y.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx(At,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("p",{className:"text-white/40 text-base",children:"Nenhum paciente ainda"})]})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:"Próximas Sessões"}),i.jsxs("button",{onClick:k,className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-xl text-sm font-bold hover:bg-white/90 transition-all duration-300",children:[i.jsx(Gr,{className:"w-4 h-4"}),i.jsx("span",{children:"Nova"})]})]}),i.jsxs("div",{className:"space-y-4",children:[N.map(b=>i.jsxs("div",{onClick:()=>g(b.id),className:"flex items-center justify-between p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(ot,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium text-base",children:b.patientName}),i.jsxs("p",{className:"text-white/60 text-sm",children:[b.type||"Online"," • ",b.duration||50," min"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xl font-bold text-white",children:b.scheduledDate?new Date(b.scheduledDate).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"--:--"}),i.jsx("div",{className:`text-xs px-3 py-1 rounded-full ${b.status==="confirmed"?"bg-white/20 text-white":"bg-white/10 text-white/80"}`,children:b.status==="confirmed"?"Confirmado":"Pendente"})]})]},b.id)),N.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx(ot,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("p",{className:"text-white/40 text-base",children:"Nenhuma sessão agendada"})]})]})]})]})]});case"patients":return i.jsx($F,{});case"sessions":return i.jsx(HF,{});case"reports":return i.jsx(qF,{});case"messages":return i.jsx(zF,{});default:return null}};return c?i.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-2 border-white"}),i.jsx("p",{className:"text-white/70 text-lg",children:"Carregando dados..."})]})}):i.jsxs("div",{className:"min-h-screen bg-black text-white relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(30)].map((b,T)=>i.jsx("div",{className:"floating-particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*6}s`,animationDuration:`${4+Math.random()*4}s`}},T))}),i.jsx("header",{className:"bg-white/5 backdrop-blur-xl border-b border-white/10 px-6 py-5",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 border border-white/20 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-8 h-8 object-contain"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"MONITORAMENTO"}),i.jsxs("p",{className:"text-base text-white/60",children:["Olá, ",(e==null?void 0:e.displayName)||"Psicólogo","! 👋"]})]})]}),i.jsx("div",{className:"flex-1 max-w-md",children:i.jsxs("div",{className:"relative",children:[i.jsx(xn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar pacientes, sessões...",value:s,onChange:b=>o(b.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{className:"p-2.5 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300",children:i.jsx(rs,{className:"w-5 h-5"})}),i.jsx("button",{className:"p-2.5 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300",children:i.jsx(na,{className:"w-5 h-5"})}),i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(st,{className:"w-5 h-5 text-white"})}),i.jsx("button",{onClick:E,className:"p-2.5 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300",children:i.jsx(Qp,{className:"w-5 h-5"})})]})]})}),i.jsx("nav",{className:"bg-white/5 border-b border-white/10 px-6",children:i.jsx("div",{className:"flex space-x-1",children:[{id:"overview",label:"Visão Geral",icon:oi},{id:"patients",label:"Pacientes",icon:At},{id:"sessions",label:"Sessões",icon:ot},{id:"reports",label:"Relatórios",icon:as},{id:"messages",label:"Mensagens",icon:ft}].map(b=>i.jsxs("button",{onClick:()=>n(b.id),className:`flex items-center space-x-2 py-4 px-4 border-b-2 transition-all duration-300 ${r===b.id?"border-white text-white":"border-transparent text-white/60 hover:text-white/80"}`,children:[i.jsx(b.icon,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm font-medium",children:b.label})]},b.id))})}),i.jsx("main",{className:"p-6",children:x()}),i.jsx(BF,{isOpen:a,onClose:()=>l(!1)}),i.jsx("style",{children:`
        .floating-particle {
          position: absolute;
          width: 6px;
          height: 6px;
          background: rgba(255, 255, 255, 0.15);
          border-radius: 50%;
          animation: float 6s infinite ease-in-out;
        }
        
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px);
            opacity: 0;
          }
          50% {
            transform: translateY(-30px) translateX(15px);
            opacity: 1;
          }
        }
        
        .monitoring-card {
          position: relative;
          overflow: hidden;
        }
        
        .monitoring-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
          transition: left 0.5s;
        }
        
        .monitoring-card:hover::before {
          left: 100%;
        }
        
        .chart-bar {
          transition: all 0.3s ease;
        }
        
        .chart-bar:hover {
          transform: scaleY(1.1);
        }
      `})]})},GF=()=>{const[t,e]=w.useState("cliente"),[r,n]=w.useState({name:"",username:"",email:"",birthDate:"",phone:"",password:"",confirmPassword:"",crp:"",specialty:"",yearsExperience:"",acceptsOnline:!1,bio:""}),[s,o]=w.useState(!1),[a,l]=w.useState(!1),[c,d]=w.useState(!1),[h,f]=w.useState(null),m=xt(),y=E=>{const{name:k,value:v,type:g,checked:x}=E.target;n({...r,[k]:g==="checkbox"?x:v})},N=async E=>{if(E.preventDefault(),!r.name||!r.username||!r.email||!r.birthDate||!r.phone||!r.password||!r.confirmPassword){alert("Por favor, preencha todos os campos obrigatórios.");return}if(r.password!==r.confirmPassword){alert("As senhas não coincidem");return}if(!/^[a-zA-Z0-9_]{3,20}$/.test(r.username)){alert("O username deve ter entre 3 e 20 caracteres e conter apenas letras, números e underscore (_).");return}d(!0);try{const g=(await I_(jt,r.email,r.password)).user;await A_(g,{displayName:r.name}),await xc(fe(G,"users",g.uid),{displayName:r.name,username:r.username.toLowerCase(),email:r.email,birthDate:r.birthDate,phone:r.phone,role:t,createdAt:je()}),t==="psicologo"&&await xc(fe(G,"PsychologistAccount",g.uid),{userId:g.uid,displayName:r.name,username:r.username.toLowerCase(),email:r.email,birthDate:r.birthDate,phone:r.phone,crp:r.crp,specialty:r.specialty,yearsExperience:r.yearsExperience,acceptsOnline:r.acceptsOnline,bio:r.bio,isAvailable:!0,rating:5,totalSessions:0,availableSlots:["09:00","10:00","11:00","14:00","15:00","16:00","17:00"],languages:["Português"],education:"Psicologia",approach:r.specialty,certifications:[],insurance:!1,virtualSessions:r.acceptsOnline,inPersonSessions:!0,createdAt:je(),updatedAt:je()}),alert("Conta criada com sucesso!"),m(t==="psicologo"?"/psychologist-dashboard":"/connected")}catch(v){console.error("Erro ao registrar:",v),alert(v.message)}finally{d(!1)}};return i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(8)].map((E,k)=>i.jsx("div",{className:"absolute top-0 left-1/2 w-px h-full bg-gradient-to-b from-white/20 via-white/5 to-transparent transform-gpu origin-top",style:{transform:`translateX(-50%) rotate(${k*45}deg)`,animation:`pulse ${2+k*.5}s ease-in-out infinite alternate`}},k))}),i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(15)].map((E,k)=>i.jsx("div",{className:"absolute w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`}},k))}),i.jsxs("div",{className:"relative w-full max-w-md z-10 animate-fade-in animate-slide-up",children:[i.jsx("button",{type:"button",onClick:()=>m("/"),className:"absolute -top-2 -left-2 p-2 text-white/80 hover:text-white transition-all duration-300 hover:scale-110 hover:rotate-12 group","aria-label":"Voltar para início",onMouseEnter:()=>f("back"),onMouseLeave:()=>f(null),children:i.jsx(xo,{className:`w-6 h-6 transition-all duration-300 ${h==="back"?"drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":""}`})}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center backdrop-blur-md hover:scale-110 hover:rotate-12 transition-all duration-500 hover:bg-white/20 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] group cursor-pointer",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1",loading:"eager"})})}),i.jsx("h1",{className:"text-2xl font-semibold text-white mb-1 hover:text-white/90 transition-colors duration-300",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm hover:text-white/80 transition-colors duration-300",children:"Crie sua conta e comece hoje"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl hover:bg-white/[0.07] hover:border-white/20 transition-all duration-500 hover:shadow-[0_20px_60px_rgba(255,255,255,0.1)] group",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-light text-white mb-1 group-hover:text-white/95 transition-colors duration-300",children:"Criar Conta"}),i.jsx("p",{className:"text-white/60 text-sm group-hover:text-white/70 transition-colors duration-300",children:"Leva menos de 2 minutos"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(oo,{className:"w-3 h-3 text-white/40 animate-pulse"}),i.jsx("span",{className:"text-xs text-white/60",children:"Tipo de usuário:"}),i.jsx(oo,{className:"w-3 h-3 text-white/40 animate-pulse",style:{animationDelay:"0.5s"}})]}),i.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1 border border-white/20 hover:border-white/30 transition-all duration-300 hover:bg-white/15",children:[i.jsxs("button",{type:"button",onClick:()=>e("cliente"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${t==="cliente"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(st,{className:"w-3 h-3 mr-1.5 transition-all duration-300 group-hover:scale-110"}),"Cliente"]}),i.jsxs("button",{type:"button",onClick:()=>e("psicologo"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${t==="psicologo"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(Wi,{className:"w-3 h-3 mr-1.5 transition-all duration-300 group-hover:scale-110"}),"Psicólogo"]})]})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"name",className:"block text-xs font-light text-white/80",children:"Nome"}),i.jsxs("div",{className:"relative",children:[i.jsx(st,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"Seu nome completo",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"username",className:"block text-xs font-light text-white/80",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx(gx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"seu_usuario",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"email",className:"block text-xs font-light text-white/80",children:"E-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"seu@email.com",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"birthDate",className:"block text-xs font-light text-white/80",children:"Data de Nascimento"}),i.jsxs("div",{className:"relative",children:[i.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"date",id:"birthDate",name:"birthDate",value:r.birthDate,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"phone",className:"block text-xs font-light text-white/80",children:"Telefone"}),i.jsxs("div",{className:"relative",children:[i.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"(11) 99999-9999",required:!0})]})]}),t==="psicologo"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"crp",className:"block text-xs font-light text-white/80",children:"CRP"}),i.jsx("input",{type:"text",id:"crp",name:"crp",value:r.crp,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"CRP 00/00000",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"specialty",className:"block text-xs font-light text-white/80",children:"Especialidade"}),i.jsx("input",{type:"text",id:"specialty",name:"specialty",value:r.specialty,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"Ex.: TCC, Ansiedade, Depressão",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"yearsExperience",className:"block text-xs font-light text-white/80",children:"Anos de experiência"}),i.jsx("input",{type:"number",id:"yearsExperience",name:"yearsExperience",value:r.yearsExperience,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"0",min:"0",required:!0})]}),i.jsxs("label",{className:"flex items-center justify-start gap-2 mt-5",children:[i.jsx("input",{type:"checkbox",name:"acceptsOnline",checked:r.acceptsOnline,onChange:y,className:"w-3 h-3 rounded border-white/30 bg-black/40 text-white focus:ring-white/30 focus:ring-2"}),i.jsx("span",{className:"text-xs text-white/80",children:"Atende online"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"bio",className:"block text-xs font-light text-white/80",children:"Bio (opcional)"}),i.jsx("textarea",{id:"bio",name:"bio",rows:"2",value:r.bio,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"Fale brevemente sobre sua abordagem."})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"password",className:"block text-xs font-light text-white/80",children:"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:s?"text":"password",id:"password",name:"password",value:r.password,onChange:y,className:"w-full pl-9 pr-10 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>o(E=>!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-colors",children:s?i.jsx(wc,{className:"w-4 h-4"}):i.jsx(io,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-light text-white/80",children:"Confirmar Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:a?"text":"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:y,className:"w-full pl-9 pr-10 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>l(E=>!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-colors",children:a?i.jsx(wc,{className:"w-4 h-4"}):i.jsx(io,{className:"w-4 h-4"})})]})]}),i.jsxs("button",{type:"submit",disabled:c,className:"w-full py-2.5 px-4 bg-white text-black hover:bg-white/90 disabled:bg-white/60 font-medium rounded-lg transition-all duration-300 transform hover:scale-[1.02] hover:shadow-[0_8px_30px_rgba(255,255,255,0.3)] disabled:scale-100 disabled:cursor-not-allowed shadow-lg text-sm group overflow-hidden relative",onMouseEnter:()=>f("submit"),onMouseLeave:()=>f(null),children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full transition-transform duration-1000 ${h==="submit"&&!c?"translate-x-full":""}`}),c?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin mr-2"}),"Criando..."]}):i.jsx("span",{className:"relative z-10",children:"Criar Conta"})]})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-white/70 text-sm",children:["Já tem uma conta?"," ",i.jsx("button",{onClick:()=>m("/login"),className:"text-white hover:text-white/80 font-medium transition-all duration-300 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)] hover:scale-105 inline-block",children:"Fazer login"})]})})]}),i.jsx("div",{className:"mt-6 text-center text-white/50 text-xs animate-fade-in",style:{animationDelay:"0.5s"},children:i.jsxs("p",{className:"hover:text-white/70 transition-colors duration-300 cursor-default",children:["Conecte-se, Entenda-se, ",i.jsx("span",{className:"text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.3)] transition-all duration-300",children:"Evolua."})]})})]})]})},V1=()=>{const t=xt(),{user:e}=$e(),[r,n]=w.useState("profile"),[s,o]=w.useState(!0),[a,l]=w.useState(!1),[c,d]=w.useState(""),[h,f]=w.useState(""),[m,y]=w.useState(!1),[N,E]=w.useState(""),[k,v]=w.useState(!1),[g,x]=w.useState({username:"",displayName:"",bio:"",location:"",website:"",language:"pt-BR"}),[b,T]=w.useState({emailNotifications:!0,pushNotifications:!0,messageNotifications:!0,groupNotifications:!0,sessionReminders:!0,moodReminders:!0,weeklyReports:!1}),[M,I]=w.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,allowMessages:!0,allowFriendRequests:!0,showOnlineStatus:!0,dataSharing:!1}),[j,A]=w.useState({theme:"dark",fontSize:"medium",compactMode:!1,animations:!0});w.useEffect(()=>{(async()=>{var V;try{if(o(!0),e){const q=e.profileData||{};x({username:q.username||((V=e.displayName)==null?void 0:V.toLowerCase().replace(/\s+/g,"."))||"",displayName:e.displayName||q.displayName||"",bio:q.bio||"",location:q.location||"",website:q.website||"",language:q.language||"pt-BR"}),T({emailNotifications:q.emailNotifications!==void 0?q.emailNotifications:!0,pushNotifications:q.pushNotifications!==void 0?q.pushNotifications:!0,messageNotifications:q.messageNotifications!==void 0?q.messageNotifications:!0,groupNotifications:q.groupNotifications!==void 0?q.groupNotifications:!0,sessionReminders:q.sessionReminders!==void 0?q.sessionReminders:!0,moodReminders:q.moodReminders!==void 0?q.moodReminders:!0,weeklyReports:q.weeklyReports||!1}),I({profileVisibility:q.profileVisibility||"public",showEmail:q.showEmail||!1,showPhone:q.showPhone||!1,allowMessages:q.allowMessages!==void 0?q.allowMessages:!0,allowFriendRequests:q.allowFriendRequests!==void 0?q.allowFriendRequests:!0,showOnlineStatus:q.showOnlineStatus!==void 0?q.showOnlineStatus:!0,dataSharing:q.dataSharing||!1})}}catch(q){console.error("Erro ao carregar dados do usuário:",q),f("Erro ao carregar configurações")}finally{o(!1)}})()},[e]);const C=async()=>{try{l(!0),f(""),d(""),await new Promise(Q=>setTimeout(Q,1e3)),d("Configurações de perfil salvas com sucesso!"),setTimeout(()=>d(""),3e3)}catch(Q){console.error("Erro ao salvar configurações:",Q),f("Erro ao salvar configurações")}finally{l(!1)}},S=async()=>{try{l(!0),f(""),d(""),await new Promise(Q=>setTimeout(Q,1e3)),d("Configurações de notificação salvas com sucesso!"),setTimeout(()=>d(""),3e3)}catch(Q){console.error("Erro ao salvar configurações:",Q),f("Erro ao salvar configurações")}finally{l(!1)}},D=async()=>{try{l(!0),f(""),d(""),await new Promise(Q=>setTimeout(Q,1e3)),d("Configurações de privacidade salvas com sucesso!"),setTimeout(()=>d(""),3e3)}catch(Q){console.error("Erro ao salvar configurações:",Q),f("Erro ao salvar configurações")}finally{l(!1)}},R=async()=>{if(N!=="EXCLUIR"){f("Digite EXCLUIR para confirmar a exclusão da conta");return}try{if(v(!0),f(""),!(e!=null&&e.uid))throw new Error("Usuário não autenticado");const Q=fe(G,"users",e.uid);await Ur(Q);const V=jt.currentUser;V&&await D_(V),t("/login")}catch(Q){console.error("Erro ao excluir conta:",Q),f("Erro ao excluir conta. Tente novamente.")}finally{v(!1)}},$=()=>{y(!0),E(""),f("")},ie=()=>{y(!1),E(""),f("")},ue=(Q,V,q)=>{switch(Q){case"profile":x(O=>({...O,[V]:q}));break;case"notifications":T(O=>({...O,[V]:q}));break;case"privacy":I(O=>({...O,[V]:q}));break;case"appearance":A(O=>({...O,[V]:q}));break}};return s?i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando configurações..."})]})}):e?i.jsxs("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(na,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Configurações"})]}),i.jsx("div",{className:"flex space-x-1 bg-white/5 rounded-lg p-1",children:[{id:"profile",name:"Perfil",icon:st},{id:"notifications",name:"Notificações",icon:rs},{id:"privacy",name:"Privacidade",icon:aS},{id:"account",name:"Conta",icon:sr}].map(Q=>{const V=Q.icon;return i.jsxs("button",{onClick:()=>n(Q.id),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${r===Q.id?"bg-white text-black":"text-white/70 hover:text-white"}`,children:[i.jsx(V,{className:"w-4 h-4"}),i.jsx("span",{children:Q.name})]},Q.id)})})]}),c&&i.jsx("div",{className:"bg-green-500/20 border border-green-500/30 rounded-xl p-4 text-green-300",children:c}),h&&i.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-xl p-4 text-red-300",children:h}),r==="profile"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações do Perfil"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Username da Plataforma"}),i.jsx("input",{type:"text",value:g.username,onChange:Q=>ue("profile","username",Q.target.value.toLowerCase()),placeholder:"Digite seu username",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"}),i.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Este será seu identificador único na plataforma"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Nome de Exibição"}),i.jsx("input",{type:"text",value:g.displayName,onChange:Q=>ue("profile","displayName",Q.target.value),placeholder:"Digite seu nome completo",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Biografia"}),i.jsx("textarea",{value:g.bio,onChange:Q=>ue("profile","bio",Q.target.value),rows:"3",placeholder:"Conte um pouco sobre você...",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Localização"}),i.jsx("input",{type:"text",value:g.location,onChange:Q=>ue("profile","location",Q.target.value),placeholder:"Ex: São Paulo, SP",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Website"}),i.jsx("input",{type:"url",value:g.website,onChange:Q=>ue("profile","website",Q.target.value),placeholder:"https://seusite.com",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Idioma"}),i.jsxs("select",{value:g.language,onChange:Q=>ue("profile","language",Q.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:ring-2 focus:ring-white focus:border-transparent transition-all",children:[i.jsx("option",{value:"pt-BR",children:"Português (Brasil)"}),i.jsx("option",{value:"en-US",children:"English (US)"}),i.jsx("option",{value:"es-ES",children:"Español"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:C,disabled:a,className:"px-6 py-3 bg-white hover:bg-gray-100 disabled:bg-gray-800 disabled:cursor-not-allowed text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Salvando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Perfil"})]})})})]})]}),r==="notifications"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações de Notificação"}),i.jsxs("div",{className:"space-y-6",children:[[{key:"emailNotifications",label:"Notificações por Email",description:"Receber notificações importantes por email"},{key:"pushNotifications",label:"Notificações Push",description:"Receber notificações no dispositivo"},{key:"messageNotifications",label:"Mensagens",description:"Notificar sobre novas mensagens"},{key:"groupNotifications",label:"Atividade em Grupos",description:"Notificar sobre atividades nos grupos"},{key:"sessionReminders",label:"Lembretes de Sessão",description:"Lembrar sobre sessões agendadas"},{key:"moodReminders",label:"Lembretes de Humor",description:"Lembrar de registrar seu humor diário"},{key:"weeklyReports",label:"Relatórios Semanais",description:"Receber resumo semanal de atividades"}].map(Q=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium",children:Q.label}),i.jsx("p",{className:"text-white/60 text-sm",children:Q.description})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:b[Q.key],onChange:V=>ue("notifications",Q.key,V.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},Q.key)),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:S,disabled:a,className:"px-6 py-3 bg-white hover:bg-gray-100 disabled:bg-gray-800 disabled:cursor-not-allowed text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Salvando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Notificações"})]})})})]})]}),r==="privacy"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações de Privacidade"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Visibilidade do Perfil"}),i.jsxs("select",{value:M.profileVisibility,onChange:Q=>ue("privacy","profileVisibility",Q.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:ring-2 focus:ring-white focus:border-transparent transition-all",children:[i.jsx("option",{value:"public",children:"Público"}),i.jsx("option",{value:"friends",children:"Apenas Amigos"}),i.jsx("option",{value:"private",children:"Privado"})]})]}),[{key:"showEmail",label:"Mostrar Email",description:"Permitir que outros vejam seu email"},{key:"showPhone",label:"Mostrar Telefone",description:"Permitir que outros vejam seu telefone"},{key:"allowMessages",label:"Permitir Mensagens",description:"Permitir que outros te enviem mensagens"},{key:"allowFriendRequests",label:"Permitir Solicitações",description:"Permitir solicitações de amizade"},{key:"showOnlineStatus",label:"Mostrar Status Online",description:"Mostrar quando você está online"},{key:"dataSharing",label:"Compartilhar Dados",description:"Permitir compartilhamento de dados para pesquisas"}].map(Q=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium",children:Q.label}),i.jsx("p",{className:"text-white/60 text-sm",children:Q.description})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:M[Q.key],onChange:V=>ue("privacy",Q.key,V.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},Q.key)),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:D,disabled:a,className:"px-6 py-3 bg-white hover:bg-gray-100 disabled:bg-gray-800 disabled:cursor-not-allowed text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Salvando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Bl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Privacidade"})]})})})]})]}),r==="account"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações da Conta"}),i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"border border-red-500/30 rounded-xl p-6 bg-red-500/5",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(sr,{className:"w-6 h-6 text-red-400"}),i.jsx("h4",{className:"text-lg font-semibold text-red-400",children:"Zona de Perigo"})]}),i.jsx("p",{className:"text-white/70 mb-4",children:"As ações abaixo são irreversíveis e resultarão na perda permanente de todos os seus dados."}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"p-4 bg-red-500/10 rounded-lg border border-red-500/20",children:[i.jsx("h5",{className:"font-medium text-red-300 mb-2",children:"Excluir Conta Permanentemente"}),i.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Esta ação irá:"}),i.jsxs("ul",{className:"text-white/60 text-sm space-y-1 mb-4",children:[i.jsx("li",{children:"• Deletar todos os seus dados pessoais"}),i.jsx("li",{children:"• Remover todos os seus posts e comentários"}),i.jsx("li",{children:"• Excluir seu perfil e configurações"}),i.jsx("li",{children:"• Encerrar sua conta de autenticação"}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Esta ação não pode ser desfeita"})]})]}),i.jsxs("button",{onClick:$,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:[i.jsx(sr,{className:"w-4 h-4"}),i.jsx("span",{children:"Excluir Minha Conta"})]})]})})]})})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full border border-red-500/30",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center",children:i.jsx(sr,{className:"w-6 h-6 text-red-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Excluir Conta"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Esta ação é irreversível"})]})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"p-4 bg-red-500/10 rounded-lg border border-red-500/20",children:[i.jsxs("p",{className:"text-white/70 text-sm",children:[i.jsx("strong",{children:"Atenção:"})," Ao excluir sua conta, você perderá permanentemente:"]}),i.jsxs("ul",{className:"text-white/60 text-sm mt-2 space-y-1",children:[i.jsx("li",{children:"• Todos os seus posts e comentários"}),i.jsx("li",{children:"• Seu perfil e configurações"}),i.jsx("li",{children:"• Histórico de atividades"}),i.jsx("li",{children:"• Dados de sessões e humor"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-white/70 text-sm font-medium mb-2",children:["Digite ",i.jsx("strong",{children:"EXCLUIR"})," para confirmar:"]}),i.jsx("input",{type:"text",value:N,onChange:Q=>E(Q.target.value),placeholder:"EXCLUIR",className:"w-full px-4 py-3 bg-white/5 border border-red-500/30 rounded-lg text-white placeholder-white/30 focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"})]})]}),h&&i.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:h}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:ie,className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:R,disabled:k||N!=="EXCLUIR",className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center space-x-2",children:k?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Excluindo..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(sr,{className:"w-4 h-4"}),i.jsx("span",{children:"Excluir Conta"})]})})]})]})})]}):i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(oh,{className:"w-12 h-12 text-red-400"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Usuário não autenticado"}),i.jsx("p",{className:"text-white/40 mb-6",children:"Faça login para acessar as configurações"}),i.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors",children:"Ir para Login"})]})},F1=()=>{const[t,e]=w.useState(null),r=xt(),[n,s]=w.useState("available"),[o,a]=w.useState(""),[l,c]=w.useState("all"),d=[{id:1,name:"Dra. Ana Silva",specialty:"Psicóloga Clínica",crp:"06/123456",rating:4.9,reviews:127,experience:"8 anos",acceptsOnline:!0,location:"São Paulo, SP",avatar:null,bio:"Especialista em ansiedade, depressão e estresse. Trabalho com abordagem cognitivo-comportamental e mindfulness.",availability:[{day:"Segunda",time:"14:00 - 18:00"},{day:"Terça",time:"09:00 - 17:00"},{day:"Quarta",time:"14:00 - 18:00"},{day:"Quinta",time:"09:00 - 17:00"},{day:"Sexta",time:"14:00 - 18:00"}],price:"R$ 150,00",sessionType:"Online/Presencial"},{id:2,name:"Dr. Carlos Santos",specialty:"Psicólogo",crp:"06/789012",rating:4.8,reviews:89,experience:"12 anos",acceptsOnline:!0,location:"Rio de Janeiro, RJ",avatar:null,bio:"Especialista em TDAH, autismo e desenvolvimento infantil. Abordagem humanista e integrativa.",availability:[{day:"Segunda",time:"08:00 - 16:00"},{day:"Terça",time:"08:00 - 16:00"},{day:"Quarta",time:"08:00 - 16:00"},{day:"Quinta",time:"08:00 - 16:00"},{day:"Sexta",time:"08:00 - 16:00"}],price:"R$ 180,00",sessionType:"Online/Presencial"},{id:3,name:"Dra. Maria Costa",specialty:"Psicóloga Especialista",crp:"06/345678",rating:4.7,reviews:156,experience:"15 anos",acceptsOnline:!1,location:"Belo Horizonte, MG",avatar:null,bio:"Especialista em trauma, TEPT e EMDR. Abordagem psicodinâmica e técnicas de reprocessamento.",availability:[{day:"Segunda",time:"13:00 - 19:00"},{day:"Terça",time:"13:00 - 19:00"},{day:"Quarta",time:"13:00 - 19:00"},{day:"Quinta",time:"13:00 - 19:00"},{day:"Sexta",time:"13:00 - 19:00"}],price:"R$ 200,00",sessionType:"Presencial"}],h=[{id:1,therapist:"Dra. Ana Silva",date:"2024-01-15",time:"14:00",duration:"50 min",type:"Online",status:"confirmed"},{id:2,therapist:"Dr. Carlos Santos",date:"2024-01-18",time:"10:00",duration:"50 min",type:"Presencial",status:"pending"}];w.useEffect(()=>{(async()=>{try{const y=jt.currentUser;if(y){const N=fe(G,"users",y.uid),E=await pt(N);E.exists()&&e(E.data())}}catch(y){console.error("Erro ao buscar dados do usuário:",y)}})()},[]);const f=d.filter(m=>{const y=m.name.toLowerCase().includes(o.toLowerCase())||m.specialty.toLowerCase().includes(o.toLowerCase())||m.bio.toLowerCase().includes(o.toLowerCase()),N=l==="all"||l==="online"&&m.acceptsOnline||l==="presencial"&&!m.acceptsOnline;return y&&N});return i.jsx("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Wi,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sessões de Terapia"})]}),i.jsxs("button",{className:"bg-white/10 border border-white/30 text-white px-4 py-2 rounded-lg hover:bg-white/20 transition-all duration-300 text-sm",children:[i.jsx(Gr,{className:"w-4 h-4 inline mr-2"}),"Nova Sessão"]})]}),i.jsxs("div",{className:"flex space-x-1 mb-6 bg-white/5 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>s("available"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${n==="available"?"bg-white text-black":"text-white/70 hover:text-white"}`,children:"Terapeutas Disponíveis"}),i.jsx("button",{onClick:()=>s("scheduled"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${n==="scheduled"?"bg-white text-black":"text-white/70 hover:text-white"}`,children:"Sessões Agendadas"})]}),n==="available"?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Pesquisar terapeutas...",value:o,onChange:m=>a(m.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg pl-10 pr-4 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),i.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-white/30",children:[i.jsx("option",{value:"all",children:"Todos"}),i.jsx("option",{value:"online",children:"Online"}),i.jsx("option",{value:"presencial",children:"Presencial"})]})]}),i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:f.map(m=>i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 hover:bg-white/10 transition-all duration-200",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center flex-shrink-0",children:m.avatar?i.jsx("img",{src:m.avatar,alt:"",className:"w-full h-full rounded-full"}):i.jsx(st,{className:"w-8 h-8 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white text-lg",children:m.name}),i.jsx("p",{className:"text-white/70 text-sm",children:m.specialty}),i.jsxs("p",{className:"text-white/50 text-xs",children:["CRP: ",m.crp]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[i.jsx(Fn,{className:"w-4 h-4 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-white text-sm",children:m.rating}),i.jsxs("span",{className:"text-white/50 text-xs",children:["(",m.reviews,")"]})]}),i.jsx("p",{className:"text-white/70 text-sm",children:m.price})]})]}),i.jsx("p",{className:"text-white/80 text-sm mb-3",children:m.bio}),i.jsxs("div",{className:"flex items-center space-x-4 text-xs text-white/60 mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ut,{className:"w-3 h-3"}),i.jsx("span",{children:m.experience})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(vc,{className:"w-3 h-3"}),i.jsx("span",{children:m.location})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[m.acceptsOnline?i.jsx(ch,{className:"w-3 h-3 text-green-400"}):i.jsx(gn,{className:"w-3 h-3 text-blue-400"}),i.jsx("span",{children:m.sessionType})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>r("/user/"+encodeURIComponent(m.name).toLowerCase().replace(/%20/g,"-")),className:"bg-white/10 border border-white/30 text-white px-4 py-2 rounded-lg hover:bg-white/20 transition-all duration-300 text-sm",children:"Ver Perfil"}),i.jsx("button",{className:"bg-white text-black px-4 py-2 rounded-lg hover:bg-white/90 transition-all duration-300 text-sm",children:"Agendar"})]})]})]})},m.id))})]}):i.jsx("div",{className:"space-y-4",children:h.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ot,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),i.jsx("p",{className:"text-white/50 text-lg",children:"Nenhuma sessão agendada"}),i.jsx("p",{className:"text-white/30 text-sm mt-2",children:"Agende sua primeira sessão com um terapeuta"})]}):h.map(m=>i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:i.jsx(st,{className:"w-6 h-6 text-white/70"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:m.therapist}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[i.jsxs("span",{children:[m.date," às ",m.time]}),i.jsx("span",{children:"•"}),i.jsx("span",{children:m.duration}),i.jsx("span",{children:"•"}),i.jsx("span",{children:m.type})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m.status==="confirmed"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:m.status==="confirmed"?"Confirmada":"Pendente"}),i.jsx("button",{className:"bg-white/10 border border-white/30 text-white p-2 rounded-lg hover:bg-white/20 transition-all duration-300",children:i.jsx(SL,{className:"w-4 h-4"})})]})]})},m.id))})]})})},KF=()=>{const{userId:t}=kc(),e=xt(),{user:r}=$e();w.useState(null);const[n,s]=w.useState(null),[o,a]=w.useState([]),[l,c]=w.useState(!0),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[y,N]=w.useState(!1),[E,k]=w.useState(""),[v,g]=w.useState(""),[x,b]=w.useState(!1),[T,M]=w.useState({displayName:"",bio:"",location:"",website:"",birthDate:""});w.useEffect(()=>{(async()=>{try{const $=jt.currentUser;let ie=t||($==null?void 0:$.uid);if(!ie){e("/login");return}let ue=ie,Q=null;const V=fe(G,"users",ie),q=await pt(V);if(q.exists())ue=ie,Q=q.data();else if(t){const U=_e(we(G,"users"),ve("username","==",t)),Z=await Ce(U);if(!Z.empty){const me=Z.docs[0];ue=me.id,Q=me.data()}}if(b(($==null?void 0:$.uid)===ue),Q)s(Q),M({displayName:Q.displayName||"",bio:Q.bio||"",location:Q.location||"",website:Q.website||"",birthDate:Q.birthDate||""});else if(t){const U=decodeURIComponent(t).replace(/-/g," ");s({displayName:U,username:t}),M(Z=>({...Z,displayName:U})),ue=t}const O=_e(we(G,"posts"),ve("userId","==",ue),He("createdAt","desc")),se=(await Ce(O)).docs.map(U=>({id:U.id,...U.data()}));a(se)}catch($){console.error("Erro ao buscar dados do usuário:",$),k("Erro ao carregar dados do perfil")}finally{c(!1)}})()},[t,e]);const I=R=>{const{name:$,value:ie}=R.target;M(ue=>({...ue,[$]:ie}))},j=async()=>{try{k(""),g("");const R=jt.currentUser;if(!R)return;const $=fe(G,"users",R.uid);await Ue($,{...T,updatedAt:new Date}),g("Perfil atualizado com sucesso!"),h(!1),s(ie=>({...ie,...T}))}catch(R){console.error("Erro ao atualizar perfil:",R),k("Erro ao atualizar perfil. Tente novamente.")}},A=async R=>{var ie,ue;const $=R.target.files[0];if($){m(!0);try{const Q=(ie=r==null?void 0:r.backend)==null?void 0:ie.id,V=(r==null?void 0:r.idToken)||await((ue=jt.currentUser)==null?void 0:ue.getIdToken());if(!Q)throw new Error("Usuário do backend não identificado");await rn.uploadProfilePhoto($,Q,V),g("Foto de perfil atualizada com sucesso!")}catch{k("Erro ao fazer upload da foto")}finally{m(!1)}}},C=async R=>{if(R.target.files[0]){N(!0);try{g("Banner atualizado com sucesso!")}catch{k("Erro ao fazer upload do banner")}finally{N(!1)}}},S=R=>R?new Date(R).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"",D=R=>{if(!R)return"";const $=new Date(R),ue=Math.floor((new Date-$)/(1e3*60*60));return ue<1?"Agora mesmo":ue<24?`${ue}h`:ue<48?"Ontem":$.toLocaleDateString("pt-BR",{day:"numeric",month:"short"})};return l?i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Carregando perfil..."})}):i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"bg-black/95 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:i.jsx("div",{className:"max-w-2xl mx-auto px-4",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs("button",{onClick:()=>e(-1),className:"flex items-center space-x-2 text-white/70 hover:text-white transition-colors",children:[i.jsx(xo,{className:"w-5 h-5"}),i.jsx("span",{children:"Voltar"})]}),i.jsx("h1",{className:"text-xl font-light",children:"Perfil"}),i.jsx("div",{className:"w-20"})]})})}),i.jsxs("div",{className:"max-w-2xl mx-auto",children:[E&&i.jsx("div",{className:"mx-4 mt-4 p-4 bg-red-500/20 border border-red-500/30 rounded-xl text-red-300",children:E}),v&&i.jsx("div",{className:"mx-4 mt-4 p-4 bg-green-500/20 border border-green-500/30 rounded-xl text-green-300",children:v}),i.jsx("div",{className:"relative h-48 bg-white",children:x&&i.jsxs("label",{className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 p-2 rounded-full cursor-pointer transition-all duration-300 backdrop-blur-md",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:y}),y?i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):i.jsx(sS,{className:"w-5 h-5 text-white"})]})}),i.jsxs("div",{className:"px-4 -mt-16 relative z-10",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx("div",{className:"w-32 h-32 rounded-full bg-white/10 border-4 border-black overflow-hidden",children:n!=null&&n.photoURL?i.jsx("img",{src:n.photoURL,alt:"Foto de perfil",className:"w-full h-full object-cover"}):i.jsx(st,{className:"w-full h-full text-white/50 p-8"})}),x&&i.jsxs("label",{className:"absolute bottom-0 right-0 bg-black/50 hover:bg-black/70 p-2 rounded-full cursor-pointer transition-all duration-300 backdrop-blur-md",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden",disabled:f}),f?i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):i.jsx(ah,{className:"w-5 h-5 text-white"})]})]}),x&&i.jsx("div",{className:"flex justify-end mt-4",children:d?i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:j,className:"bg-white text-black px-4 py-2 rounded-full font-medium hover:bg-white/90 transition-all duration-300 flex items-center space-x-2",children:[i.jsx(Bl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar"})]}),i.jsxs("button",{onClick:()=>h(!1),className:"bg-transparent border border-white/30 text-white px-4 py-2 rounded-full font-medium hover:bg-white/10 transition-all duration-300 flex items-center space-x-2",children:[i.jsx(lr,{className:"w-4 h-4"}),i.jsx("span",{children:"Cancelar"})]})]}):i.jsxs("button",{onClick:()=>h(!0),className:"bg-transparent border border-white/30 text-white px-4 py-2 rounded-full font-medium hover:bg-white/10 transition-all duration-300 flex items-center space-x-2",children:[i.jsx(Bc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar perfil"})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:d?i.jsx("input",{type:"text",name:"displayName",value:T.displayName,onChange:I,className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 w-full",placeholder:"Seu nome"}):(n==null?void 0:n.displayName)||"Usuário"}),i.jsxs("p",{className:"text-white/70 mt-1",children:["@",(n==null?void 0:n.username)||"usuario"]}),d?i.jsx("textarea",{name:"bio",value:T.bio,onChange:I,rows:3,className:"mt-4 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 w-full resize-none",placeholder:"Conte um pouco sobre você..."}):i.jsx("p",{className:"text-white mt-4",children:(n==null?void 0:n.bio)||"Nenhuma biografia adicionada"}),i.jsx("div",{className:"mt-4 space-y-2",children:d?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(vc,{className:"w-4 h-4"}),i.jsx("input",{type:"text",name:"location",value:T.location,onChange:I,className:"bg-transparent border-none text-white/70 placeholder-white/50 focus:outline-none focus:ring-0 flex-1",placeholder:"Adicionar localização"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(u1,{className:"w-4 h-4"}),i.jsx("input",{type:"url",name:"website",value:T.website,onChange:I,className:"bg-transparent border-none text-white/70 placeholder-white/50 focus:outline-none focus:ring-0 flex-1",placeholder:"Adicionar website"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(ot,{className:"w-4 h-4"}),i.jsx("input",{type:"date",name:"birthDate",value:T.birthDate,onChange:I,className:"bg-transparent border-none text-white/70 placeholder-white/50 focus:outline-none focus:ring-0 flex-1"})]})]}):i.jsxs(i.Fragment,{children:[(n==null?void 0:n.location)&&i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(vc,{className:"w-4 h-4"}),i.jsx("span",{children:n.location})]}),(n==null?void 0:n.website)&&i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(u1,{className:"w-4 h-4"}),i.jsx("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:n.website})]}),(n==null?void 0:n.birthDate)&&i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(ot,{className:"w-4 h-4"}),i.jsxs("span",{children:["Nascido em ",S(n.birthDate)]})]})]})}),i.jsxs("div",{className:"mt-4 text-white/70",children:["Entrou em ",S(n==null?void 0:n.createdAt)]})]})]}),i.jsxs("div",{className:"mt-8 border-t border-white/10",children:[i.jsx("div",{className:"px-4 py-4",children:i.jsx("h3",{className:"text-xl font-bold",children:"Posts"})}),o.length===0?i.jsxs("div",{className:"px-4 py-8 text-center",children:[i.jsx("p",{className:"text-white/50",children:"Nenhum post ainda"}),i.jsx("p",{className:"text-white/30 text-sm mt-2",children:"Quando você postar algo, aparecerá aqui"})]}):i.jsx("div",{className:"space-y-0",children:o.map(R=>i.jsx("div",{className:"border-b border-white/10 p-4 hover:bg-white/5 transition-colors",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center flex-shrink-0",children:n!=null&&n.photoURL?i.jsx("img",{src:n.photoURL,alt:"",className:"w-full h-full rounded-full object-cover"}):i.jsx(st,{className:"w-6 h-6 text-white/50"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("span",{className:"font-bold text-white",children:(n==null?void 0:n.displayName)||"Usuário"}),i.jsxs("span",{className:"text-white/50",children:["@",(n==null?void 0:n.username)||"usuario"]}),i.jsx("span",{className:"text-white/50",children:"•"}),i.jsx("span",{className:"text-white/50",children:D(R.createdAt)})]}),i.jsx("p",{className:"text-white mb-3",children:R.content}),R.image&&i.jsx("div",{className:"mb-3 rounded-xl overflow-hidden",children:i.jsx("img",{src:R.image,alt:"",className:"w-full max-h-96 object-cover"})}),i.jsxs("div",{className:"flex items-center space-x-8 text-white/50",children:[i.jsxs("button",{className:"flex items-center space-x-2 hover:text-blue-400 transition-colors",children:[i.jsx(ft,{className:"w-5 h-5"}),i.jsx("span",{children:R.commentCount||0})]}),i.jsxs("button",{className:"flex items-center space-x-2 hover:text-red-400 transition-colors",children:[i.jsx(Ar,{className:"w-5 h-5"}),i.jsx("span",{children:Array.isArray(R.likes)?R.likes.length:0})]}),i.jsx("button",{className:"flex items-center space-x-2 hover:text-green-400 transition-colors",children:i.jsx(oS,{className:"w-5 h-5"})})]})]})]})},R.id))})]})]})]})},QF=w.createContext(),ml=({children:t})=>{const{user:e}=$e(),[r,n]=w.useState([]),[s,o]=w.useState(!1),[a,l]=w.useState(null),c=w.useCallback(async()=>{if(e){o(!0),l(null);try{const N=await Ms.getUserPosts(e.uid,100,e.uid);n(N)}catch(N){l("Erro ao carregar posts do usuário"),console.error("Erro ao carregar posts:",N)}finally{o(!1)}}},[e]),d=w.useCallback(N=>{n(E=>[N,...E])},[]),h=w.useCallback((N,E)=>{n(k=>k.map(v=>v.id===N?{...v,...E}:v))},[]),f=w.useCallback(N=>{n(E=>E.filter(k=>k.id!==N))},[]),m=w.useCallback(()=>{c()},[c]);w.useEffect(()=>{e?c():n([])},[e,c]);const y={userPosts:r,loading:s,error:a,addUserPost:d,updateUserPost:h,removeUserPost:f,refreshUserPosts:m,loadUserPosts:c};return i.jsx(QF.Provider,{value:y,children:t})},YF=({children:t})=>{const{user:e,loading:r}=$e();return r?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):e?t:i.jsx(ha,{to:"/login",replace:!0})},XF=({children:t})=>{const{user:e,loading:r}=$e();return r?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):e?e.role!=="psicologo"?i.jsx(ha,{to:"/home",replace:!0}):t:i.jsx(ha,{to:"/login",replace:!0})},tt=({children:t})=>{const{user:e,loading:r,needsProfileCompletion:n}=$e();return r?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):e?n?i.jsx(ha,{to:"/complete-profile",replace:!0}):t:i.jsx(ha,{to:"/login",replace:!0})},JF=[{path:"/",element:i.jsx(gV,{}),public:!0,title:"Sereno - Início"},{path:"/login",element:i.jsx(AF,{}),public:!0,title:"Sereno - Login"},{path:"/register",element:i.jsx(GF,{}),public:!0,title:"Sereno - Registro"},{path:"/connected",element:i.jsx(lF,{}),public:!0,title:"Sereno - Conectado"},{path:"/complete-profile",element:i.jsx(YF,{children:i.jsx(aF,{})}),protected:!0,title:"Sereno - Completar Perfil",category:"profile"},{path:"/home",element:i.jsx(tt,{children:i.jsx(ml,{children:i.jsx(Xr,{children:i.jsx(IF,{})})})}),protected:!0,title:"Sereno - Home",category:"main"},{path:"/psychologist-dashboard",element:i.jsx(XF,{children:i.jsx(WF,{})}),protected:!0,title:"Sereno - Dashboard do Psicólogo",category:"psychologist"},{path:"/home/profile",element:i.jsx(tt,{children:i.jsx(ml,{children:i.jsx(Xr,{children:i.jsx(jf,{})})})}),protected:!0,title:"Sereno - Meu Perfil",category:"main"},{path:"/home/sessions",element:i.jsx(tt,{children:i.jsx(Xr,{children:i.jsx(F1,{})})}),protected:!0,title:"Sereno - Sessões de Terapia",category:"main"},{path:"/home/diary",element:i.jsx(tt,{children:i.jsx(Xr,{children:i.jsx(uF,{})})}),protected:!0,title:"Sereno - Diário Evolutivo",category:"main"},{path:"/home/humor",element:i.jsx(tt,{children:i.jsx(Xr,{children:i.jsx(L1,{})})}),protected:!0,title:"Sereno - Rastreador de Humor",category:"main"},{path:"/home/chat/:roomCode",element:i.jsx(tt,{children:i.jsx(Xr,{children:i.jsx(Mu,{})})}),protected:!0,title:"Sereno - Chat ao Vivo",category:"main"},{path:"/home/chat",element:i.jsx(tt,{children:i.jsx(Xr,{children:i.jsx(Mu,{})})}),protected:!0,title:"Sereno - Chat ao Vivo",category:"main"},{path:"/home/groups",element:i.jsx(tt,{children:i.jsx(ml,{children:i.jsx(Xr,{children:i.jsx(vf,{})})})}),protected:!0,title:"Sereno - Grupos",category:"main"},{path:"/home/notifications",element:i.jsx(tt,{children:i.jsx(Xr,{children:i.jsx(O1,{})})}),protected:!0,title:"Sereno - Notificações",category:"main"},{path:"/home/settings",element:i.jsx(tt,{children:i.jsx(Xr,{children:i.jsx(V1,{})})}),protected:!0,title:"Sereno - Configurações",category:"main"},{path:"/profile",element:i.jsx(tt,{children:i.jsx(ml,{children:i.jsx(jf,{})})}),protected:!0,title:"Sereno - Meu Perfil",category:"main"},{path:"/profile/:userId",element:i.jsx(tt,{children:i.jsx(ml,{children:i.jsx(Xr,{children:i.jsx(jf,{})})})}),protected:!0,title:"Sereno - Perfil",category:"main"},{path:"/user/:userId",element:i.jsx(tt,{children:i.jsx(KF,{})}),protected:!0,title:"Sereno - Perfil do Usuário",category:"main"},{path:"/welcome-tour",element:i.jsx(tt,{children:i.jsx(TS,{})}),protected:!0,title:"Sereno - Tour de Boas-vindas",category:"main"},{path:"/groups",element:i.jsx(tt,{children:i.jsx(vf,{})}),protected:!0,title:"Sereno - Grupos",category:"community"},{path:"/explore",element:i.jsx(tt,{children:i.jsx(dF,{})}),protected:!0,title:"Sereno - Explorar Comunidades",category:"community"},{path:"/community/:communityId",element:i.jsx(tt,{children:i.jsx(vf,{})}),protected:!0,title:"Sereno - Comunidade",category:"community"},{path:"/humor-tracker",element:i.jsx(tt,{children:i.jsx(L1,{})}),protected:!0,title:"Sereno - Rastreador de Humor",category:"mental-health"},{path:"/therapy-sessions",element:i.jsx(tt,{children:i.jsx(F1,{})}),protected:!0,title:"Sereno - Sessões de Terapia",category:"mental-health"},{path:"/live-chat",element:i.jsx(tt,{children:i.jsx(Mu,{})}),protected:!0,title:"Sereno - Chat ao Vivo",category:"communication"},{path:"/chat/:roomCode",element:i.jsx(tt,{children:i.jsx(Mu,{})}),protected:!0,title:"Sereno - Chat",category:"communication"},{path:"/post/:postId",element:i.jsx(tt,{children:i.jsx(LF,{})}),protected:!0,title:"Sereno - Post",category:"communication"},{path:"/settings",element:i.jsx(tt,{children:i.jsx(V1,{})}),protected:!0,title:"Sereno - Configurações",category:"settings"},{path:"/notifications",element:i.jsx(tt,{children:i.jsx(O1,{})}),protected:!0,title:"Sereno - Notificações",category:"settings"},{path:"*",element:i.jsx(ha,{to:"/",replace:!0}),public:!0,title:"Sereno - Página não encontrada"}],U1=document.getElementById("root"),z1=U1?eN(U1):null;function ZF(){const{user:t,loading:e}=$e();return e?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):i.jsx(fI,{children:JF.map(r=>i.jsx(uN,{path:r.path,element:r.element},r.path))})}z1&&z1.render(i.jsx(w.StrictMode,{children:i.jsx(OI,{children:i.jsx(NL,{children:i.jsxs(MF,{children:[" ",i.jsxs(UF,{children:[" ",i.jsx(ZF,{})]})]})})})}));
