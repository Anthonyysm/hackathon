(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function BS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M1={exports:{}},Xd={},L1={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=Symbol.for("react.element"),qS=Symbol.for("react.portal"),HS=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),GS=Symbol.for("react.profiler"),KS=Symbol.for("react.provider"),QS=Symbol.for("react.context"),YS=Symbol.for("react.forward_ref"),XS=Symbol.for("react.suspense"),JS=Symbol.for("react.memo"),ZS=Symbol.for("react.lazy"),Hx=Symbol.iterator;function ek(t){return t===null||typeof t!="object"?null:(t=Hx&&t[Hx]||t["@@iterator"],typeof t=="function"?t:null)}var O1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V1=Object.assign,F1={};function ro(t,e,r){this.props=t,this.context=e,this.refs=F1,this.updater=r||O1}ro.prototype.isReactComponent={};ro.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ro.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U1(){}U1.prototype=ro.prototype;function Bp(t,e,r){this.props=t,this.context=e,this.refs=F1,this.updater=r||O1}var qp=Bp.prototype=new U1;qp.constructor=Bp;V1(qp,ro.prototype);qp.isPureReactComponent=!0;var Wx=Array.isArray,z1=Object.prototype.hasOwnProperty,Hp={current:null},$1={key:!0,ref:!0,__self:!0,__source:!0};function B1(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)z1.call(e,n)&&!$1.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:tc,type:t,key:a,ref:o,props:s,_owner:Hp.current}}function tk(t,e){return{$$typeof:tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wp(t){return typeof t=="object"&&t!==null&&t.$$typeof===tc}function rk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Gx=/\/+/g;function um(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rk(""+t.key):e.toString(36)}function Su(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tc:case qS:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+um(o,0):n,Wx(s)?(r="",t!=null&&(r=t.replace(Gx,"$&/")+"/"),Su(s,e,r,"",function(d){return d})):s!=null&&(Wp(s)&&(s=tk(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Wx(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+um(a,l);o+=Su(a,e,r,c,s)}else if(c=ek(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+um(a,l++),o+=Su(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yc(t,e,r){if(t==null)return t;var n=[],s=0;return Su(t,n,"","",function(a){return e.call(r,a,s++)}),n}function nk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ir={current:null},ku={transition:null},sk={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:ku,ReactCurrentOwner:Hp};function q1(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Yc,forEach:function(t,e,r){Yc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Yc(t,function(){e++}),e},toArray:function(t){return Yc(t,function(e){return e})||[]},only:function(t){if(!Wp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=ro;_e.Fragment=HS;_e.Profiler=GS;_e.PureComponent=Bp;_e.StrictMode=WS;_e.Suspense=XS;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sk;_e.act=q1;_e.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=V1({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Hp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)z1.call(e,c)&&!$1.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:tc,type:t.type,key:s,ref:a,props:n,_owner:o}};_e.createContext=function(t){return t={$$typeof:QS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KS,_context:t},t.Consumer=t};_e.createElement=B1;_e.createFactory=function(t){var e=B1.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:YS,render:t}};_e.isValidElement=Wp;_e.lazy=function(t){return{$$typeof:ZS,_payload:{_status:-1,_result:t},_init:nk}};_e.memo=function(t,e){return{$$typeof:JS,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=ku.transition;ku.transition={};try{t()}finally{ku.transition=e}};_e.unstable_act=q1;_e.useCallback=function(t,e){return ir.current.useCallback(t,e)};_e.useContext=function(t){return ir.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return ir.current.useDeferredValue(t)};_e.useEffect=function(t,e){return ir.current.useEffect(t,e)};_e.useId=function(){return ir.current.useId()};_e.useImperativeHandle=function(t,e,r){return ir.current.useImperativeHandle(t,e,r)};_e.useInsertionEffect=function(t,e){return ir.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return ir.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return ir.current.useMemo(t,e)};_e.useReducer=function(t,e,r){return ir.current.useReducer(t,e,r)};_e.useRef=function(t){return ir.current.useRef(t)};_e.useState=function(t){return ir.current.useState(t)};_e.useSyncExternalStore=function(t,e,r){return ir.current.useSyncExternalStore(t,e,r)};_e.useTransition=function(){return ir.current.useTransition()};_e.version="18.3.1";L1.exports=_e;var v=L1.exports;const Yt=BS(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ik=v,ak=Symbol.for("react.element"),ok=Symbol.for("react.fragment"),lk=Object.prototype.hasOwnProperty,ck=ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uk={key:!0,ref:!0,__self:!0,__source:!0};function H1(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)lk.call(e,n)&&!uk.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:ak,type:t,key:a,ref:o,props:s,_owner:ck.current}}Xd.Fragment=ok;Xd.jsx=H1;Xd.jsxs=H1;M1.exports=Xd;var i=M1.exports,W1={exports:{}},Cr={},G1={exports:{}},K1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,U){var q=O.length;O.push(U);e:for(;0<q;){var ue=q-1>>>1,re=O[ue];if(0<s(re,U))O[ue]=U,O[q]=re,q=ue;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var U=O[0],q=O.pop();if(q!==U){O[0]=q;e:for(var ue=0,re=O.length,H=re>>>1;ue<H;){var fe=2*(ue+1)-1,xe=O[fe],K=fe+1,Y=O[K];if(0>s(xe,q))K<re&&0>s(Y,xe)?(O[ue]=Y,O[K]=q,ue=K):(O[ue]=xe,O[fe]=q,ue=fe);else if(K<re&&0>s(Y,q))O[ue]=Y,O[K]=q,ue=K;else break e}}return U}function s(O,U){var q=O.sortIndex-U.sortIndex;return q!==0?q:O.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,m=3,y=!1,N=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(O){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=O)n(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=r(d)}}function b(O){if(E=!1,g(O),!N)if(r(c)!==null)N=!0,oe(I);else{var U=r(d);U!==null&&F(b,U.startTime-O)}}function I(O,U){N=!1,E&&(E=!1,x(_),_=-1),y=!0;var q=m;try{for(g(U),f=r(c);f!==null&&(!(f.expirationTime>U)||O&&!T());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,m=f.priorityLevel;var re=ue(f.expirationTime<=U);U=t.unstable_now(),typeof re=="function"?f.callback=re:f===r(c)&&n(c),g(U)}else n(c);f=r(c)}if(f!==null)var H=!0;else{var fe=r(d);fe!==null&&F(b,fe.startTime-U),H=!1}return H}finally{f=null,m=q,y=!1}}var M=!1,A=null,_=-1,S=5,k=-1;function T(){return!(t.unstable_now()-k<S)}function D(){if(A!==null){var O=t.unstable_now();k=O;var U=!0;try{U=A(!0,O)}finally{U?P():(M=!1,A=null)}}else M=!1}var P;if(typeof w=="function")P=function(){w(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ae=$.port2;$.port1.onmessage=D,P=function(){ae.postMessage(null)}}else P=function(){C(D,0)};function oe(O){A=O,M||(M=!0,P())}function F(O,U){_=C(function(){O(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){N||y||(N=!0,oe(I))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var q=m;m=U;try{return O()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=m;m=O;try{return U()}finally{m=q}},t.unstable_scheduleCallback=function(O,U,q){var ue=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ue+q:ue):q=ue,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=q+re,O={id:h++,callback:U,priorityLevel:O,startTime:q,expirationTime:re,sortIndex:-1},q>ue?(O.sortIndex=q,e(d,O),r(c)===null&&O===r(d)&&(E?(x(_),_=-1):E=!0,F(b,q-ue))):(O.sortIndex=re,e(c,O),N||y||(N=!0,oe(I))),O},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(O){var U=m;return function(){var q=m;m=U;try{return O.apply(this,arguments)}finally{m=q}}}})(K1);G1.exports=K1;var dk=G1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hk=v,kr=dk;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q1=new Set,jl={};function Qi(t,e){Fa(t,e),Fa(t+"Capture",e)}function Fa(t,e){for(jl[t]=e,t=0;t<e.length;t++)Q1.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hf=Object.prototype.hasOwnProperty,mk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kx={},Qx={};function fk(t){return hf.call(Qx,t)?!0:hf.call(Kx,t)?!1:mk.test(t)?Qx[t]=!0:(Kx[t]=!0,!1)}function pk(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gk(t,e,r,n){if(e===null||typeof e>"u"||pk(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ar(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gp=/[\-:]([a-z])/g;function Kp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gp,Kp);Vt[e]=new ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gp,Kp);Vt[e]=new ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gp,Kp);Vt[e]=new ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new ar(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qp(t,e,r,n){var s=Vt.hasOwnProperty(e)?Vt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gk(e,r,s,n)&&(r=null),n||s===null?fk(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ss=hk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xc=Symbol.for("react.element"),fa=Symbol.for("react.portal"),pa=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),mf=Symbol.for("react.profiler"),Y1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),ws=Symbol.for("react.lazy"),J1=Symbol.for("react.offscreen"),Yx=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=Yx&&t[Yx]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,dm;function Ko(t){if(dm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);dm=e&&e[1]||""}return`
`+dm+t}var hm=!1;function mm(t,e){if(!t||hm)return"";hm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{hm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ko(t):""}function xk(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=mm(t.type,!1),t;case 11:return t=mm(t.type.render,!1),t;case 1:return t=mm(t.type,!0),t;default:return""}}function gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pa:return"Fragment";case fa:return"Portal";case mf:return"Profiler";case Yp:return"StrictMode";case ff:return"Suspense";case pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case Y1:return(t._context.displayName||"Context")+".Provider";case Xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jp:return e=t.displayName||null,e!==null?e:gf(t.type)||"Memo";case ws:e=t._payload,t=t._init;try{return gf(t(e))}catch{}}return null}function wk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gf(e);case 8:return e===Yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yk(t){var e=Z1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jc(t){t._valueTracker||(t._valueTracker=yk(t))}function eb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Z1(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Xu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xf(t,e){var r=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Xx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=$s(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tb(t,e){e=e.checked,e!=null&&Qp(t,"checked",e,!1)}function wf(t,e){tb(t,e);var r=$s(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yf(t,e.type,r):e.hasOwnProperty("defaultValue")&&yf(t,e.type,$s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jx(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function yf(t,e,r){(e!=="number"||Xu(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Qo=Array.isArray;function ka(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+$s(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Q(92));if(Qo(r)){if(1<r.length)throw Error(Q(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:$s(r)}}function rb(t,e){var r=$s(e.value),n=$s(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function ew(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zc,sb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function El(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var sl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vk=["Webkit","ms","Moz","O"];Object.keys(sl).forEach(function(t){vk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sl[e]=sl[t]})});function ib(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||sl.hasOwnProperty(t)&&sl[t]?(""+e).trim():e+"px"}function ab(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=ib(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var bk=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nf(t,e){if(e){if(bk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function _f(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=null;function Zp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ef=null,Ca=null,Ta=null;function tw(t){if(t=sc(t)){if(typeof Ef!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=rh(e),Ef(t.stateNode,t.type,e))}}function ob(t){Ca?Ta?Ta.push(t):Ta=[t]:Ca=t}function lb(){if(Ca){var t=Ca,e=Ta;if(Ta=Ca=null,tw(t),e)for(t=0;t<e.length;t++)tw(e[t])}}function cb(t,e){return t(e)}function ub(){}var fm=!1;function hb(t,e,r){if(fm)return t(e,r);fm=!0;try{return cb(t,e,r)}finally{fm=!1,(Ca!==null||Ta!==null)&&(ub(),lb())}}function Sl(t,e){var r=t.stateNode;if(r===null)return null;var n=rh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Q(231,e,typeof r));return r}var Sf=!1;if(Kn)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Sf=!1}function Nk(t,e,r,n,s,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var il=!1,Ju=null,Zu=!1,kf=null,_k={onError:function(t){il=!0,Ju=t}};function jk(t,e,r,n,s,a,o,l,c){il=!1,Ju=null,Nk.apply(_k,arguments)}function Ek(t,e,r,n,s,a,o,l,c){if(jk.apply(this,arguments),il){if(il){var d=Ju;il=!1,Ju=null}else throw Error(Q(198));Zu||(Zu=!0,kf=d)}}function Yi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function mb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rw(t){if(Yi(t)!==t)throw Error(Q(188))}function Sk(t){var e=t.alternate;if(!e){if(e=Yi(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return rw(s),t;if(a===n)return rw(s),e;a=a.sibling}throw Error(Q(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?t:e}function fb(t){return t=Sk(t),t!==null?pb(t):null}function pb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pb(t);if(e!==null)return e;t=t.sibling}return null}var gb=kr.unstable_scheduleCallback,nw=kr.unstable_cancelCallback,kk=kr.unstable_shouldYield,Ck=kr.unstable_requestPaint,ft=kr.unstable_now,Tk=kr.unstable_getCurrentPriorityLevel,eg=kr.unstable_ImmediatePriority,xb=kr.unstable_UserBlockingPriority,ed=kr.unstable_NormalPriority,Ik=kr.unstable_LowPriority,wb=kr.unstable_IdlePriority,Jd=null,gn=null;function Ak(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Jd,t,void 0,(t.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:Dk,Pk=Math.log,Rk=Math.LN2;function Dk(t){return t>>>=0,t===0?32:31-(Pk(t)/Rk|0)|0}var eu=64,tu=4194304;function Yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function td(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Yo(l):(a&=o,a!==0&&(n=Yo(a)))}else o=r&~s,o!==0?n=Yo(o):a!==0&&(n=Yo(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Jr(e),s=1<<r,n|=t[r],e&=~s;return n}function Mk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Jr(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Mk(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yb(){var t=eu;return eu<<=1,!(eu&4194240)&&(eu=64),t}function pm(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jr(e),t[e]=r}function Ok(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Jr(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function tg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Jr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ve=0;function vb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bb,rg,Nb,_b,jb,Tf=!1,ru=[],Cs=null,Ts=null,Is=null,kl=new Map,Cl=new Map,vs=[],Vk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sw(t,e){switch(t){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(e.pointerId)}}function Lo(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=sc(e),e!==null&&rg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Fk(t,e,r,n,s){switch(e){case"focusin":return Cs=Lo(Cs,t,e,r,n,s),!0;case"dragenter":return Ts=Lo(Ts,t,e,r,n,s),!0;case"mouseover":return Is=Lo(Is,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return kl.set(a,Lo(kl.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Cl.set(a,Lo(Cl.get(a)||null,t,e,r,n,s)),!0}return!1}function Eb(t){var e=Ni(t.target);if(e!==null){var r=Yi(e);if(r!==null){if(e=r.tag,e===13){if(e=mb(r),e!==null){t.blockedOn=e,jb(t.priority,function(){Nb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=If(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);jf=n,r.target.dispatchEvent(n),jf=null}else return e=sc(r),e!==null&&rg(e),t.blockedOn=r,!1;e.shift()}return!0}function iw(t,e,r){Cu(t)&&r.delete(e)}function Uk(){Tf=!1,Cs!==null&&Cu(Cs)&&(Cs=null),Ts!==null&&Cu(Ts)&&(Ts=null),Is!==null&&Cu(Is)&&(Is=null),kl.forEach(iw),Cl.forEach(iw)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,Tf||(Tf=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,Uk)))}function Tl(t){function e(s){return Oo(s,t)}if(0<ru.length){Oo(ru[0],t);for(var r=1;r<ru.length;r++){var n=ru[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Cs!==null&&Oo(Cs,t),Ts!==null&&Oo(Ts,t),Is!==null&&Oo(Is,t),kl.forEach(e),Cl.forEach(e),r=0;r<vs.length;r++)n=vs[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<vs.length&&(r=vs[0],r.blockedOn===null);)Eb(r),r.blockedOn===null&&vs.shift()}var Ia=ss.ReactCurrentBatchConfig,rd=!0;function zk(t,e,r,n){var s=Ve,a=Ia.transition;Ia.transition=null;try{Ve=1,ng(t,e,r,n)}finally{Ve=s,Ia.transition=a}}function $k(t,e,r,n){var s=Ve,a=Ia.transition;Ia.transition=null;try{Ve=4,ng(t,e,r,n)}finally{Ve=s,Ia.transition=a}}function ng(t,e,r,n){if(rd){var s=If(t,e,r,n);if(s===null)Em(t,e,n,nd,r),sw(t,n);else if(Fk(s,t,e,r,n))n.stopPropagation();else if(sw(t,n),e&4&&-1<Vk.indexOf(t)){for(;s!==null;){var a=sc(s);if(a!==null&&bb(a),a=If(t,e,r,n),a===null&&Em(t,e,n,nd,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Em(t,e,n,null,r)}}var nd=null;function If(t,e,r,n){if(nd=null,t=Zp(n),t=Ni(t),t!==null)if(e=Yi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=mb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nd=t,null}function Sb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tk()){case eg:return 1;case xb:return 4;case ed:case Ik:return 16;case wb:return 536870912;default:return 16}default:return 16}}var Es=null,sg=null,Tu=null;function kb(){if(Tu)return Tu;var t,e=sg,r=e.length,n,s="value"in Es?Es.value:Es.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return Tu=s.slice(t,1<n?1-n:void 0)}function Iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function aw(){return!1}function Tr(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?nu:aw,this.isPropagationStopped=aw,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ig=Tr(no),nc=it({},no,{view:0,detail:0}),Bk=Tr(nc),gm,xm,Vo,Zd=it({},nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(gm=t.screenX-Vo.screenX,xm=t.screenY-Vo.screenY):xm=gm=0,Vo=t),gm)},movementY:function(t){return"movementY"in t?t.movementY:xm}}),ow=Tr(Zd),qk=it({},Zd,{dataTransfer:0}),Hk=Tr(qk),Wk=it({},nc,{relatedTarget:0}),wm=Tr(Wk),Gk=it({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),Kk=Tr(Gk),Qk=it({},no,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yk=Tr(Qk),Xk=it({},no,{data:0}),lw=Tr(Xk),Jk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eC[t])?!!e[t]:!1}function ag(){return tC}var rC=it({},nc,{key:function(t){if(t.key){var e=Jk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ag,charCode:function(t){return t.type==="keypress"?Iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nC=Tr(rC),sC=it({},Zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cw=Tr(sC),iC=it({},nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ag}),aC=Tr(iC),oC=it({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),lC=Tr(oC),cC=it({},Zd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uC=Tr(cC),dC=[9,13,27,32],og=Kn&&"CompositionEvent"in window,al=null;Kn&&"documentMode"in document&&(al=document.documentMode);var hC=Kn&&"TextEvent"in window&&!al,Cb=Kn&&(!og||al&&8<al&&11>=al),uw=" ",dw=!1;function Tb(t,e){switch(t){case"keyup":return dC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ib(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ga=!1;function mC(t,e){switch(t){case"compositionend":return Ib(e);case"keypress":return e.which!==32?null:(dw=!0,uw);case"textInput":return t=e.data,t===uw&&dw?null:t;default:return null}}function fC(t,e){if(ga)return t==="compositionend"||!og&&Tb(t,e)?(t=kb(),Tu=sg=Es=null,ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cb&&e.locale!=="ko"?null:e.data;default:return null}}var pC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pC[t.type]:e==="textarea"}function Ab(t,e,r,n){ob(n),e=sd(e,"onChange"),0<e.length&&(r=new ig("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ol=null,Il=null;function gC(t){$b(t,0)}function eh(t){var e=ya(t);if(eb(e))return t}function xC(t,e){if(t==="change")return e}var Pb=!1;if(Kn){var ym;if(Kn){var vm="oninput"in document;if(!vm){var mw=document.createElement("div");mw.setAttribute("oninput","return;"),vm=typeof mw.oninput=="function"}ym=vm}else ym=!1;Pb=ym&&(!document.documentMode||9<document.documentMode)}function fw(){ol&&(ol.detachEvent("onpropertychange",Rb),Il=ol=null)}function Rb(t){if(t.propertyName==="value"&&eh(Il)){var e=[];Ab(e,Il,t,Zp(t)),hb(gC,e)}}function wC(t,e,r){t==="focusin"?(fw(),ol=e,Il=r,ol.attachEvent("onpropertychange",Rb)):t==="focusout"&&fw()}function yC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(Il)}function vC(t,e){if(t==="click")return eh(e)}function bC(t,e){if(t==="input"||t==="change")return eh(e)}function NC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rn=typeof Object.is=="function"?Object.is:NC;function Al(t,e){if(rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!hf.call(e,s)||!rn(t[s],e[s]))return!1}return!0}function pw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gw(t,e){var r=pw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pw(r)}}function Db(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Db(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mb(){for(var t=window,e=Xu();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Xu(t.document)}return e}function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _C(t){var e=Mb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Db(r.ownerDocument.documentElement,r)){if(n!==null&&lg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=gw(r,a);var o=gw(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jC=Kn&&"documentMode"in document&&11>=document.documentMode,xa=null,Af=null,ll=null,Pf=!1;function xw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pf||xa==null||xa!==Xu(n)||(n=xa,"selectionStart"in n&&lg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ll&&Al(ll,n)||(ll=n,n=sd(Af,"onSelect"),0<n.length&&(e=new ig("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=xa)))}function su(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wa={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},bm={},Lb={};Kn&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function th(t){if(bm[t])return bm[t];if(!wa[t])return t;var e=wa[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Lb)return bm[t]=e[r];return t}var Ob=th("animationend"),Vb=th("animationiteration"),Fb=th("animationstart"),Ub=th("transitionend"),zb=new Map,ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){zb.set(t,e),Qi(e,[t])}for(var Nm=0;Nm<ww.length;Nm++){var _m=ww[Nm],EC=_m.toLowerCase(),SC=_m[0].toUpperCase()+_m.slice(1);ti(EC,"on"+SC)}ti(Ob,"onAnimationEnd");ti(Vb,"onAnimationIteration");ti(Fb,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(Ub,"onTransitionEnd");Fa("onMouseEnter",["mouseout","mouseover"]);Fa("onMouseLeave",["mouseout","mouseover"]);Fa("onPointerEnter",["pointerout","pointerover"]);Fa("onPointerLeave",["pointerout","pointerover"]);Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function yw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Ek(n,e,void 0,t),t.currentTarget=null}function $b(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;yw(s,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;yw(s,l,d),a=c}}}if(Zu)throw t=kf,Zu=!1,kf=null,t}function Ke(t,e){var r=e[Of];r===void 0&&(r=e[Of]=new Set);var n=t+"__bubble";r.has(n)||(Bb(e,t,2,!1),r.add(n))}function jm(t,e,r){var n=0;e&&(n|=4),Bb(r,t,n,e)}var iu="_reactListening"+Math.random().toString(36).slice(2);function Pl(t){if(!t[iu]){t[iu]=!0,Q1.forEach(function(r){r!=="selectionchange"&&(kC.has(r)||jm(r,!1,t),jm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iu]||(e[iu]=!0,jm("selectionchange",!1,e))}}function Bb(t,e,r,n){switch(Sb(e)){case 1:var s=zk;break;case 4:s=$k;break;default:s=ng}r=s.bind(null,e,r,t),s=void 0,!Sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Em(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ni(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}hb(function(){var d=a,h=Zp(r),f=[];e:{var m=zb.get(t);if(m!==void 0){var y=ig,N=t;switch(t){case"keypress":if(Iu(r)===0)break e;case"keydown":case"keyup":y=nC;break;case"focusin":N="focus",y=wm;break;case"focusout":N="blur",y=wm;break;case"beforeblur":case"afterblur":y=wm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ow;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Hk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=aC;break;case Ob:case Vb:case Fb:y=Kk;break;case Ub:y=lC;break;case"scroll":y=Bk;break;case"wheel":y=uC;break;case"copy":case"cut":case"paste":y=Yk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=cw}var E=(e&4)!==0,C=!E&&t==="scroll",x=E?m!==null?m+"Capture":null:m;E=[];for(var w=d,g;w!==null;){g=w;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,x!==null&&(b=Sl(w,x),b!=null&&E.push(Rl(w,b,g)))),C)break;w=w.return}0<E.length&&(m=new y(m,N,null,r,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&r!==jf&&(N=r.relatedTarget||r.fromElement)&&(Ni(N)||N[Qn]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(N=r.relatedTarget||r.toElement,y=d,N=N?Ni(N):null,N!==null&&(C=Yi(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(y=null,N=d),y!==N)){if(E=ow,b="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=cw,b="onPointerLeave",x="onPointerEnter",w="pointer"),C=y==null?m:ya(y),g=N==null?m:ya(N),m=new E(b,w+"leave",y,r,h),m.target=C,m.relatedTarget=g,b=null,Ni(h)===d&&(E=new E(x,w+"enter",N,r,h),E.target=g,E.relatedTarget=C,b=E),C=b,y&&N)t:{for(E=y,x=N,w=0,g=E;g;g=la(g))w++;for(g=0,b=x;b;b=la(b))g++;for(;0<w-g;)E=la(E),w--;for(;0<g-w;)x=la(x),g--;for(;w--;){if(E===x||x!==null&&E===x.alternate)break t;E=la(E),x=la(x)}E=null}else E=null;y!==null&&vw(f,m,y,E,!1),N!==null&&C!==null&&vw(f,C,N,E,!0)}}e:{if(m=d?ya(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var I=xC;else if(hw(m))if(Pb)I=bC;else{I=yC;var M=wC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=vC);if(I&&(I=I(t,d))){Ab(f,I,r,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&yf(m,"number",m.value)}switch(M=d?ya(d):window,t){case"focusin":(hw(M)||M.contentEditable==="true")&&(xa=M,Af=d,ll=null);break;case"focusout":ll=Af=xa=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,xw(f,r,h);break;case"selectionchange":if(jC)break;case"keydown":case"keyup":xw(f,r,h)}var A;if(og)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ga?Tb(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Cb&&r.locale!=="ko"&&(ga||_!=="onCompositionStart"?_==="onCompositionEnd"&&ga&&(A=kb()):(Es=h,sg="value"in Es?Es.value:Es.textContent,ga=!0)),M=sd(d,_),0<M.length&&(_=new lw(_,t,null,r,h),f.push({event:_,listeners:M}),A?_.data=A:(A=Ib(r),A!==null&&(_.data=A)))),(A=hC?mC(t,r):fC(t,r))&&(d=sd(d,"onBeforeInput"),0<d.length&&(h=new lw("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=A))}$b(f,e)})}function Rl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function sd(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Sl(t,r),a!=null&&n.unshift(Rl(t,a,s)),a=Sl(t,e),a!=null&&n.push(Rl(t,a,s))),t=t.return}return n}function la(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vw(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Sl(r,a),c!=null&&o.unshift(Rl(r,c,l))):s||(c=Sl(r,a),c!=null&&o.push(Rl(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var CC=/\r\n?/g,TC=/\u0000|\uFFFD/g;function bw(t){return(typeof t=="string"?t:""+t).replace(CC,`
`).replace(TC,"")}function au(t,e,r){if(e=bw(e),bw(t)!==e&&r)throw Error(Q(425))}function id(){}var Rf=null,Df=null;function Mf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,IC=typeof clearTimeout=="function"?clearTimeout:void 0,Nw=typeof Promise=="function"?Promise:void 0,AC=typeof queueMicrotask=="function"?queueMicrotask:typeof Nw<"u"?function(t){return Nw.resolve(null).then(t).catch(PC)}:Lf;function PC(t){setTimeout(function(){throw t})}function Sm(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Tl(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Tl(e)}function As(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _w(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var so=Math.random().toString(36).slice(2),fn="__reactFiber$"+so,Dl="__reactProps$"+so,Qn="__reactContainer$"+so,Of="__reactEvents$"+so,RC="__reactListeners$"+so,DC="__reactHandles$"+so;function Ni(t){var e=t[fn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Qn]||r[fn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=_w(t);t!==null;){if(r=t[fn])return r;t=_w(t)}return e}t=r,r=t.parentNode}return null}function sc(t){return t=t[fn]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ya(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function rh(t){return t[Dl]||null}var Vf=[],va=-1;function ri(t){return{current:t}}function Ye(t){0>va||(t.current=Vf[va],Vf[va]=null,va--)}function qe(t,e){va++,Vf[va]=t.current,t.current=e}var Bs={},Xt=ri(Bs),mr=ri(!1),Mi=Bs;function Ua(t,e){var r=t.type.contextTypes;if(!r)return Bs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fr(t){return t=t.childContextTypes,t!=null}function ad(){Ye(mr),Ye(Xt)}function jw(t,e,r){if(Xt.current!==Bs)throw Error(Q(168));qe(Xt,e),qe(mr,r)}function qb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Q(108,wk(t)||"Unknown",s));return it({},r,n)}function od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bs,Mi=Xt.current,qe(Xt,t),qe(mr,mr.current),!0}function Ew(t,e,r){var n=t.stateNode;if(!n)throw Error(Q(169));r?(t=qb(t,e,Mi),n.__reactInternalMemoizedMergedChildContext=t,Ye(mr),Ye(Xt),qe(Xt,t)):Ye(mr),qe(mr,r)}var Rn=null,nh=!1,km=!1;function Hb(t){Rn===null?Rn=[t]:Rn.push(t)}function MC(t){nh=!0,Hb(t)}function ni(){if(!km&&Rn!==null){km=!0;var t=0,e=Ve;try{var r=Rn;for(Ve=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Rn=null,nh=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),gb(eg,ni),s}finally{Ve=e,km=!1}}return null}var ba=[],Na=0,ld=null,cd=0,Ar=[],Pr=0,Li=null,Vn=1,Fn="";function yi(t,e){ba[Na++]=cd,ba[Na++]=ld,ld=t,cd=e}function Wb(t,e,r){Ar[Pr++]=Vn,Ar[Pr++]=Fn,Ar[Pr++]=Li,Li=t;var n=Vn;t=Fn;var s=32-Jr(n)-1;n&=~(1<<s),r+=1;var a=32-Jr(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Vn=1<<32-Jr(e)+s|r<<s|n,Fn=a+t}else Vn=1<<a|r<<s|n,Fn=t}function cg(t){t.return!==null&&(yi(t,1),Wb(t,1,0))}function ug(t){for(;t===ld;)ld=ba[--Na],ba[Na]=null,cd=ba[--Na],ba[Na]=null;for(;t===Li;)Li=Ar[--Pr],Ar[Pr]=null,Fn=Ar[--Pr],Ar[Pr]=null,Vn=Ar[--Pr],Ar[Pr]=null}var Er=null,_r=null,Ze=!1,Wr=null;function Gb(t,e){var r=Dr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Sw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Er=t,_r=As(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Er=t,_r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Li!==null?{id:Vn,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Dr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Er=t,_r=null,!0):!1;default:return!1}}function Ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uf(t){if(Ze){var e=_r;if(e){var r=e;if(!Sw(t,e)){if(Ff(t))throw Error(Q(418));e=As(r.nextSibling);var n=Er;e&&Sw(t,e)?Gb(n,r):(t.flags=t.flags&-4097|2,Ze=!1,Er=t)}}else{if(Ff(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ze=!1,Er=t}}}function kw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Er=t}function ou(t){if(t!==Er)return!1;if(!Ze)return kw(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mf(t.type,t.memoizedProps)),e&&(e=_r)){if(Ff(t))throw Kb(),Error(Q(418));for(;e;)Gb(t,e),e=As(e.nextSibling)}if(kw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){_r=As(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}_r=null}}else _r=Er?As(t.stateNode.nextSibling):null;return!0}function Kb(){for(var t=_r;t;)t=As(t.nextSibling)}function za(){_r=Er=null,Ze=!1}function dg(t){Wr===null?Wr=[t]:Wr.push(t)}var LC=ss.ReactCurrentBatchConfig;function Fo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,t))}return t}function lu(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cw(t){var e=t._init;return e(t._payload)}function Qb(t){function e(x,w){if(t){var g=x.deletions;g===null?(x.deletions=[w],x.flags|=16):g.push(w)}}function r(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=Ms(x,w),x.index=0,x.sibling=null,x}function a(x,w,g){return x.index=g,t?(g=x.alternate,g!==null?(g=g.index,g<w?(x.flags|=2,w):g):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,g,b){return w===null||w.tag!==6?(w=Dm(g,x.mode,b),w.return=x,w):(w=s(w,g),w.return=x,w)}function c(x,w,g,b){var I=g.type;return I===pa?h(x,w,g.props.children,b,g.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ws&&Cw(I)===w.type)?(b=s(w,g.props),b.ref=Fo(x,w,g),b.return=x,b):(b=Ou(g.type,g.key,g.props,null,x.mode,b),b.ref=Fo(x,w,g),b.return=x,b)}function d(x,w,g,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==g.containerInfo||w.stateNode.implementation!==g.implementation?(w=Mm(g,x.mode,b),w.return=x,w):(w=s(w,g.children||[]),w.return=x,w)}function h(x,w,g,b,I){return w===null||w.tag!==7?(w=Ti(g,x.mode,b,I),w.return=x,w):(w=s(w,g),w.return=x,w)}function f(x,w,g){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Dm(""+w,x.mode,g),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xc:return g=Ou(w.type,w.key,w.props,null,x.mode,g),g.ref=Fo(x,null,w),g.return=x,g;case fa:return w=Mm(w,x.mode,g),w.return=x,w;case ws:var b=w._init;return f(x,b(w._payload),g)}if(Qo(w)||Do(w))return w=Ti(w,x.mode,g,null),w.return=x,w;lu(x,w)}return null}function m(x,w,g,b){var I=w!==null?w.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return I!==null?null:l(x,w,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xc:return g.key===I?c(x,w,g,b):null;case fa:return g.key===I?d(x,w,g,b):null;case ws:return I=g._init,m(x,w,I(g._payload),b)}if(Qo(g)||Do(g))return I!==null?null:h(x,w,g,b,null);lu(x,g)}return null}function y(x,w,g,b,I){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(g)||null,l(w,x,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xc:return x=x.get(b.key===null?g:b.key)||null,c(w,x,b,I);case fa:return x=x.get(b.key===null?g:b.key)||null,d(w,x,b,I);case ws:var M=b._init;return y(x,w,g,M(b._payload),I)}if(Qo(b)||Do(b))return x=x.get(g)||null,h(w,x,b,I,null);lu(w,b)}return null}function N(x,w,g,b){for(var I=null,M=null,A=w,_=w=0,S=null;A!==null&&_<g.length;_++){A.index>_?(S=A,A=null):S=A.sibling;var k=m(x,A,g[_],b);if(k===null){A===null&&(A=S);break}t&&A&&k.alternate===null&&e(x,A),w=a(k,w,_),M===null?I=k:M.sibling=k,M=k,A=S}if(_===g.length)return r(x,A),Ze&&yi(x,_),I;if(A===null){for(;_<g.length;_++)A=f(x,g[_],b),A!==null&&(w=a(A,w,_),M===null?I=A:M.sibling=A,M=A);return Ze&&yi(x,_),I}for(A=n(x,A);_<g.length;_++)S=y(A,x,_,g[_],b),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?_:S.key),w=a(S,w,_),M===null?I=S:M.sibling=S,M=S);return t&&A.forEach(function(T){return e(x,T)}),Ze&&yi(x,_),I}function E(x,w,g,b){var I=Do(g);if(typeof I!="function")throw Error(Q(150));if(g=I.call(g),g==null)throw Error(Q(151));for(var M=I=null,A=w,_=w=0,S=null,k=g.next();A!==null&&!k.done;_++,k=g.next()){A.index>_?(S=A,A=null):S=A.sibling;var T=m(x,A,k.value,b);if(T===null){A===null&&(A=S);break}t&&A&&T.alternate===null&&e(x,A),w=a(T,w,_),M===null?I=T:M.sibling=T,M=T,A=S}if(k.done)return r(x,A),Ze&&yi(x,_),I;if(A===null){for(;!k.done;_++,k=g.next())k=f(x,k.value,b),k!==null&&(w=a(k,w,_),M===null?I=k:M.sibling=k,M=k);return Ze&&yi(x,_),I}for(A=n(x,A);!k.done;_++,k=g.next())k=y(A,x,_,k.value,b),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?_:k.key),w=a(k,w,_),M===null?I=k:M.sibling=k,M=k);return t&&A.forEach(function(D){return e(x,D)}),Ze&&yi(x,_),I}function C(x,w,g,b){if(typeof g=="object"&&g!==null&&g.type===pa&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Xc:e:{for(var I=g.key,M=w;M!==null;){if(M.key===I){if(I=g.type,I===pa){if(M.tag===7){r(x,M.sibling),w=s(M,g.props.children),w.return=x,x=w;break e}}else if(M.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ws&&Cw(I)===M.type){r(x,M.sibling),w=s(M,g.props),w.ref=Fo(x,M,g),w.return=x,x=w;break e}r(x,M);break}else e(x,M);M=M.sibling}g.type===pa?(w=Ti(g.props.children,x.mode,b,g.key),w.return=x,x=w):(b=Ou(g.type,g.key,g.props,null,x.mode,b),b.ref=Fo(x,w,g),b.return=x,x=b)}return o(x);case fa:e:{for(M=g.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===g.containerInfo&&w.stateNode.implementation===g.implementation){r(x,w.sibling),w=s(w,g.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else e(x,w);w=w.sibling}w=Mm(g,x.mode,b),w.return=x,x=w}return o(x);case ws:return M=g._init,C(x,w,M(g._payload),b)}if(Qo(g))return N(x,w,g,b);if(Do(g))return E(x,w,g,b);lu(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,w!==null&&w.tag===6?(r(x,w.sibling),w=s(w,g),w.return=x,x=w):(r(x,w),w=Dm(g,x.mode,b),w.return=x,x=w),o(x)):r(x,w)}return C}var $a=Qb(!0),Yb=Qb(!1),ud=ri(null),dd=null,_a=null,hg=null;function mg(){hg=_a=dd=null}function fg(t){var e=ud.current;Ye(ud),t._currentValue=e}function zf(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Aa(t,e){dd=t,hg=_a=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dr=!0),t.firstContext=null)}function Lr(t){var e=t._currentValue;if(hg!==t)if(t={context:t,memoizedValue:e,next:null},_a===null){if(dd===null)throw Error(Q(308));_a=t,dd.dependencies={lanes:0,firstContext:t}}else _a=_a.next=t;return e}var _i=null;function pg(t){_i===null?_i=[t]:_i.push(t)}function Xb(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,pg(e)):(r.next=s.next,s.next=r),e.interleaved=r,Yn(t,n)}function Yn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ys=!1;function gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ps(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Re&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Yn(t,r)}return s=n.interleaved,s===null?(e.next=e,pg(n)):(e.next=s.next,s.next=e),n.interleaved=e,Yn(t,r)}function Au(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,tg(t,r)}}function Tw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function hd(t,e,r,n){var s=t.updateQueue;ys=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,h=d=c=null,l=a;do{var m=l.lane,y=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,E=l;switch(m=e,y=r,E.tag){case 1:if(N=E.payload,typeof N=="function"){f=N.call(y,f,m);break e}f=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=E.payload,m=typeof N=="function"?N.call(y,f,m):N,m==null)break e;f=it({},f,m);break e;case 2:ys=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Vi|=o,t.lanes=o,t.memoizedState=f}}function Iw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Q(191,s));s.call(n)}}}var ic={},xn=ri(ic),Ml=ri(ic),Ll=ri(ic);function ji(t){if(t===ic)throw Error(Q(174));return t}function xg(t,e){switch(qe(Ll,e),qe(Ml,t),qe(xn,ic),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bf(e,t)}Ye(xn),qe(xn,e)}function Ba(){Ye(xn),Ye(Ml),Ye(Ll)}function Zb(t){ji(Ll.current);var e=ji(xn.current),r=bf(e,t.type);e!==r&&(qe(Ml,t),qe(xn,r))}function wg(t){Ml.current===t&&(Ye(xn),Ye(Ml))}var tt=ri(0);function md(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cm=[];function yg(){for(var t=0;t<Cm.length;t++)Cm[t]._workInProgressVersionPrimary=null;Cm.length=0}var Pu=ss.ReactCurrentDispatcher,Tm=ss.ReactCurrentBatchConfig,Oi=0,st=null,_t=null,Tt=null,fd=!1,cl=!1,Ol=0,OC=0;function Bt(){throw Error(Q(321))}function vg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!rn(t[r],e[r]))return!1;return!0}function bg(t,e,r,n,s,a){if(Oi=a,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pu.current=t===null||t.memoizedState===null?zC:$C,t=r(n,s),cl){a=0;do{if(cl=!1,Ol=0,25<=a)throw Error(Q(301));a+=1,Tt=_t=null,e.updateQueue=null,Pu.current=BC,t=r(n,s)}while(cl)}if(Pu.current=pd,e=_t!==null&&_t.next!==null,Oi=0,Tt=_t=st=null,fd=!1,e)throw Error(Q(300));return t}function Ng(){var t=Ol!==0;return Ol=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?st.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Or(){if(_t===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Tt===null?st.memoizedState:Tt.next;if(e!==null)Tt=e,_t=t;else{if(t===null)throw Error(Q(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Tt===null?st.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Vl(t,e){return typeof e=="function"?e(t):e}function Im(t){var e=Or(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=_t,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,d=a;do{var h=d.lane;if((Oi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,st.lanes|=h,Vi|=h}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,rn(n,e.memoizedState)||(dr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,st.lanes|=a,Vi|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Am(t){var e=Or(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);rn(a,e.memoizedState)||(dr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function e2(){}function t2(t,e){var r=st,n=Or(),s=e(),a=!rn(n.memoizedState,s);if(a&&(n.memoizedState=s,dr=!0),n=n.queue,_g(s2.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Tt!==null&&Tt.memoizedState.tag&1){if(r.flags|=2048,Fl(9,n2.bind(null,r,n,s,e),void 0,null),At===null)throw Error(Q(349));Oi&30||r2(r,e,s)}return s}function r2(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function n2(t,e,r,n){e.value=r,e.getSnapshot=n,i2(e)&&a2(t)}function s2(t,e,r){return r(function(){i2(e)&&a2(t)})}function i2(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!rn(t,r)}catch{return!0}}function a2(t){var e=Yn(t,1);e!==null&&Zr(e,t,1,-1)}function Aw(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:t},e.queue=t,t=t.dispatch=UC.bind(null,st,t),[e.memoizedState,t]}function Fl(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function o2(){return Or().memoizedState}function Ru(t,e,r,n){var s=hn();st.flags|=t,s.memoizedState=Fl(1|e,r,void 0,n===void 0?null:n)}function sh(t,e,r,n){var s=Or();n=n===void 0?null:n;var a=void 0;if(_t!==null){var o=_t.memoizedState;if(a=o.destroy,n!==null&&vg(n,o.deps)){s.memoizedState=Fl(e,r,a,n);return}}st.flags|=t,s.memoizedState=Fl(1|e,r,a,n)}function Pw(t,e){return Ru(8390656,8,t,e)}function _g(t,e){return sh(2048,8,t,e)}function l2(t,e){return sh(4,2,t,e)}function c2(t,e){return sh(4,4,t,e)}function u2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function d2(t,e,r){return r=r!=null?r.concat([t]):null,sh(4,4,u2.bind(null,e,t),r)}function jg(){}function h2(t,e){var r=Or();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&vg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function m2(t,e){var r=Or();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&vg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function f2(t,e,r){return Oi&21?(rn(r,e)||(r=yb(),st.lanes|=r,Vi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dr=!0),t.memoizedState=r)}function VC(t,e){var r=Ve;Ve=r!==0&&4>r?r:4,t(!0);var n=Tm.transition;Tm.transition={};try{t(!1),e()}finally{Ve=r,Tm.transition=n}}function p2(){return Or().memoizedState}function FC(t,e,r){var n=Ds(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},g2(t))x2(e,r);else if(r=Xb(t,e,r,n),r!==null){var s=rr();Zr(r,t,n,s),w2(r,e,n)}}function UC(t,e,r){var n=Ds(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(g2(t))x2(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,rn(l,o)){var c=e.interleaved;c===null?(s.next=s,pg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=Xb(t,e,s,n),r!==null&&(s=rr(),Zr(r,t,n,s),w2(r,e,n))}}function g2(t){var e=t.alternate;return t===st||e!==null&&e===st}function x2(t,e){cl=fd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function w2(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,tg(t,r)}}var pd={readContext:Lr,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},zC={readContext:Lr,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Lr,useEffect:Pw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ru(4194308,4,u2.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ru(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ru(4,2,t,e)},useMemo:function(t,e){var r=hn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=hn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=FC.bind(null,st,t),[n.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:Aw,useDebugValue:jg,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=Aw(!1),e=t[0];return t=VC.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=st,s=hn();if(Ze){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=e(),At===null)throw Error(Q(349));Oi&30||r2(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,Pw(s2.bind(null,n,a,t),[t]),n.flags|=2048,Fl(9,n2.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=hn(),e=At.identifierPrefix;if(Ze){var r=Fn,n=Vn;r=(n&~(1<<32-Jr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ol++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=OC++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$C={readContext:Lr,useCallback:h2,useContext:Lr,useEffect:_g,useImperativeHandle:d2,useInsertionEffect:l2,useLayoutEffect:c2,useMemo:m2,useReducer:Im,useRef:o2,useState:function(){return Im(Vl)},useDebugValue:jg,useDeferredValue:function(t){var e=Or();return f2(e,_t.memoizedState,t)},useTransition:function(){var t=Im(Vl)[0],e=Or().memoizedState;return[t,e]},useMutableSource:e2,useSyncExternalStore:t2,useId:p2,unstable_isNewReconciler:!1},BC={readContext:Lr,useCallback:h2,useContext:Lr,useEffect:_g,useImperativeHandle:d2,useInsertionEffect:l2,useLayoutEffect:c2,useMemo:m2,useReducer:Am,useRef:o2,useState:function(){return Am(Vl)},useDebugValue:jg,useDeferredValue:function(t){var e=Or();return _t===null?e.memoizedState=t:f2(e,_t.memoizedState,t)},useTransition:function(){var t=Am(Vl)[0],e=Or().memoizedState;return[t,e]},useMutableSource:e2,useSyncExternalStore:t2,useId:p2,unstable_isNewReconciler:!1};function qr(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function $f(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:it({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ih={isMounted:function(t){return(t=t._reactInternals)?Yi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=rr(),s=Ds(t),a=Bn(n,s);a.payload=e,r!=null&&(a.callback=r),e=Ps(t,a,s),e!==null&&(Zr(e,t,s,n),Au(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=rr(),s=Ds(t),a=Bn(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Ps(t,a,s),e!==null&&(Zr(e,t,s,n),Au(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=rr(),n=Ds(t),s=Bn(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ps(t,s,n),e!==null&&(Zr(e,t,n,r),Au(e,t,n))}};function Rw(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Al(r,n)||!Al(s,a):!0}function y2(t,e,r){var n=!1,s=Bs,a=e.contextType;return typeof a=="object"&&a!==null?a=Lr(a):(s=fr(e)?Mi:Xt.current,n=e.contextTypes,a=(n=n!=null)?Ua(t,s):Bs),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ih,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Dw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ih.enqueueReplaceState(e,e.state,null)}function Bf(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},gg(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Lr(a):(a=fr(e)?Mi:Xt.current,s.context=Ua(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&($f(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ih.enqueueReplaceState(s,s.state,null),hd(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function qa(t,e){try{var r="",n=e;do r+=xk(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Pm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function qf(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var qC=typeof WeakMap=="function"?WeakMap:Map;function v2(t,e,r){r=Bn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){xd||(xd=!0,ep=n),qf(t,e)},r}function b2(t,e,r){r=Bn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){qf(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){qf(t,e),typeof n!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Mw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new qC;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=sT.bind(null,t,e,r),e.then(t,t))}function Lw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ow(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Bn(-1,1),e.tag=2,Ps(r,e,1))),r.lanes|=1),t)}var HC=ss.ReactCurrentOwner,dr=!1;function tr(t,e,r,n){e.child=t===null?Yb(e,null,r,n):$a(e,t.child,r,n)}function Vw(t,e,r,n,s){r=r.render;var a=e.ref;return Aa(e,s),n=bg(t,e,r,n,a,s),r=Ng(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(Ze&&r&&cg(e),e.flags|=1,tr(t,e,n,s),e.child)}function Fw(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!Pg(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,N2(t,e,a,n,s)):(t=Ou(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Al,r(o,n)&&t.ref===e.ref)return Xn(t,e,s)}return e.flags|=1,t=Ms(a,n),t.ref=e.ref,t.return=e,e.child=t}function N2(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Al(a,n)&&t.ref===e.ref)if(dr=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(dr=!0);else return e.lanes=t.lanes,Xn(t,e,s)}return Hf(t,e,r,n,s)}function _2(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Ea,Nr),Nr|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(Ea,Nr),Nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,qe(Ea,Nr),Nr|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,qe(Ea,Nr),Nr|=n;return tr(t,e,s,r),e.child}function j2(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Hf(t,e,r,n,s){var a=fr(r)?Mi:Xt.current;return a=Ua(e,a),Aa(e,s),r=bg(t,e,r,n,a,s),n=Ng(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(Ze&&n&&cg(e),e.flags|=1,tr(t,e,r,s),e.child)}function Uw(t,e,r,n,s){if(fr(r)){var a=!0;od(e)}else a=!1;if(Aa(e,s),e.stateNode===null)Du(t,e),y2(e,r,n),Bf(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Lr(d):(d=fr(r)?Mi:Xt.current,d=Ua(e,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Dw(e,o,n,d),ys=!1;var m=e.memoizedState;o.state=m,hd(e,n,o,s),c=e.memoizedState,l!==n||m!==c||mr.current||ys?(typeof h=="function"&&($f(e,r,h,n),c=e.memoizedState),(l=ys||Rw(e,r,l,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Jb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:qr(e.type,l),o.props=d,f=e.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Lr(c):(c=fr(r)?Mi:Xt.current,c=Ua(e,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Dw(e,o,n,c),ys=!1,m=e.memoizedState,o.state=m,hd(e,n,o,s);var N=e.memoizedState;l!==f||m!==N||mr.current||ys?(typeof y=="function"&&($f(e,r,y,n),N=e.memoizedState),(d=ys||Rw(e,r,d,n,m,N,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=N),o.props=n,o.state=N,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Wf(t,e,r,n,a,s)}function Wf(t,e,r,n,s,a){j2(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Ew(e,r,!1),Xn(t,e,a);n=e.stateNode,HC.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=$a(e,t.child,null,a),e.child=$a(e,null,l,a)):tr(t,e,l,a),e.memoizedState=n.state,s&&Ew(e,r,!0),e.child}function E2(t){var e=t.stateNode;e.pendingContext?jw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jw(t,e.context,!1),xg(t,e.containerInfo)}function zw(t,e,r,n,s){return za(),dg(s),e.flags|=256,tr(t,e,r,n),e.child}var Gf={dehydrated:null,treeContext:null,retryLane:0};function Kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function S2(t,e,r){var n=e.pendingProps,s=tt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),qe(tt,s&1),t===null)return Uf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=lh(o,n,0,null),t=Ti(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Kf(r),e.memoizedState=Gf,t):Eg(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return WC(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ms(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Ms(l,a):(a=Ti(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Kf(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Gf,n}return a=t.child,t=a.sibling,n=Ms(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Eg(t,e){return e=lh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cu(t,e,r,n){return n!==null&&dg(n),$a(e,t.child,null,r),t=Eg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WC(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Pm(Error(Q(422))),cu(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=lh({mode:"visible",children:n.children},s,0,null),a=Ti(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&$a(e,t.child,null,o),e.child.memoizedState=Kf(o),e.memoizedState=Gf,a);if(!(e.mode&1))return cu(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(Q(419)),n=Pm(a,n,void 0),cu(t,e,o,n)}if(l=(o&t.childLanes)!==0,dr||l){if(n=At,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Yn(t,s),Zr(n,t,s,-1))}return Ag(),n=Pm(Error(Q(421))),cu(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iT.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,_r=As(s.nextSibling),Er=e,Ze=!0,Wr=null,t!==null&&(Ar[Pr++]=Vn,Ar[Pr++]=Fn,Ar[Pr++]=Li,Vn=t.id,Fn=t.overflow,Li=e),e=Eg(e,n.children),e.flags|=4096,e)}function $w(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zf(t.return,e,r)}function Rm(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function k2(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(tr(t,e,n.children,r),n=tt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$w(t,r,e);else if(t.tag===19)$w(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(qe(tt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&md(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Rm(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&md(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Rm(e,!0,r,null,a);break;case"together":Rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Du(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,r=Ms(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ms(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function GC(t,e,r){switch(e.tag){case 3:E2(e),za();break;case 5:Zb(e);break;case 1:fr(e.type)&&od(e);break;case 4:xg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;qe(ud,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(qe(tt,tt.current&1),e.flags|=128,null):r&e.child.childLanes?S2(t,e,r):(qe(tt,tt.current&1),t=Xn(t,e,r),t!==null?t.sibling:null);qe(tt,tt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return k2(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(tt,tt.current),n)break;return null;case 22:case 23:return e.lanes=0,_2(t,e,r)}return Xn(t,e,r)}var C2,Qf,T2,I2;C2=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Qf=function(){};T2=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ji(xn.current);var a=null;switch(r){case"input":s=xf(t,s),n=xf(t,n),a=[];break;case"select":s=it({},s,{value:void 0}),n=it({},n,{value:void 0}),a=[];break;case"textarea":s=vf(t,s),n=vf(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=id)}Nf(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jl.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(jl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ke("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};I2=function(t,e,r,n){r!==n&&(e.flags|=4)};function Uo(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function KC(t,e,r){var n=e.pendingProps;switch(ug(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return fr(e.type)&&ad(),qt(e),null;case 3:return n=e.stateNode,Ba(),Ye(mr),Ye(Xt),yg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(np(Wr),Wr=null))),Qf(t,e),qt(e),null;case 5:wg(e);var s=ji(Ll.current);if(r=e.type,t!==null&&e.stateNode!=null)T2(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Q(166));return qt(e),null}if(t=ji(xn.current),ou(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[fn]=e,n[Dl]=a,t=(e.mode&1)!==0,r){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(s=0;s<Xo.length;s++)Ke(Xo[s],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":Xx(n,a),Ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ke("invalid",n);break;case"textarea":Zx(n,a),Ke("invalid",n)}Nf(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&au(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&au(n.textContent,l,t),s=["children",""+l]):jl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ke("scroll",n)}switch(r){case"input":Jc(n),Jx(n,a,!0);break;case"textarea":Jc(n),ew(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=id)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[fn]=e,t[Dl]=n,C2(t,e,!1,!1),e.stateNode=t;e:{switch(o=_f(r,n),r){case"dialog":Ke("cancel",t),Ke("close",t),s=n;break;case"iframe":case"object":case"embed":Ke("load",t),s=n;break;case"video":case"audio":for(s=0;s<Xo.length;s++)Ke(Xo[s],t);s=n;break;case"source":Ke("error",t),s=n;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),s=n;break;case"details":Ke("toggle",t),s=n;break;case"input":Xx(t,n),s=xf(t,n),Ke("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=it({},n,{value:void 0}),Ke("invalid",t);break;case"textarea":Zx(t,n),s=vf(t,n),Ke("invalid",t);break;default:s=n}Nf(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?ab(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sb(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&El(t,c):typeof c=="number"&&El(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ke("scroll",t):c!=null&&Qp(t,a,c,o))}switch(r){case"input":Jc(t),Jx(t,n,!1);break;case"textarea":Jc(t),ew(t);break;case"option":n.value!=null&&t.setAttribute("value",""+$s(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?ka(t,!!n.multiple,a,!1):n.defaultValue!=null&&ka(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=id)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)I2(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Q(166));if(r=ji(Ll.current),ji(xn.current),ou(e)){if(n=e.stateNode,r=e.memoizedProps,n[fn]=e,(a=n.nodeValue!==r)&&(t=Er,t!==null))switch(t.tag){case 3:au(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&au(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[fn]=e,e.stateNode=n}return qt(e),null;case 13:if(Ye(tt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&_r!==null&&e.mode&1&&!(e.flags&128))Kb(),za(),e.flags|=98560,a=!1;else if(a=ou(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Q(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Q(317));a[fn]=e}else za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),a=!1}else Wr!==null&&(np(Wr),Wr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?Et===0&&(Et=3):Ag())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return Ba(),Qf(t,e),t===null&&Pl(e.stateNode.containerInfo),qt(e),null;case 10:return fg(e.type._context),qt(e),null;case 17:return fr(e.type)&&ad(),qt(e),null;case 19:if(Ye(tt),a=e.memoizedState,a===null)return qt(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Uo(a,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=md(t),o!==null){for(e.flags|=128,Uo(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return qe(tt,tt.current&1|2),e.child}t=t.sibling}a.tail!==null&&ft()>Ha&&(e.flags|=128,n=!0,Uo(a,!1),e.lanes=4194304)}else{if(!n)if(t=md(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Uo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ze)return qt(e),null}else 2*ft()-a.renderingStartTime>Ha&&r!==1073741824&&(e.flags|=128,n=!0,Uo(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ft(),e.sibling=null,r=tt.current,qe(tt,n?r&1|2:r&1),e):(qt(e),null);case 22:case 23:return Ig(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Nr&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function QC(t,e){switch(ug(e),e.tag){case 1:return fr(e.type)&&ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),Ye(mr),Ye(Xt),yg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wg(e),null;case 13:if(Ye(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(tt),null;case 4:return Ba(),null;case 10:return fg(e.type._context),null;case 22:case 23:return Ig(),null;case 24:return null;default:return null}}var uu=!1,Gt=!1,YC=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ja(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ut(t,e,n)}else r.current=null}function Yf(t,e,r){try{r()}catch(n){ut(t,e,n)}}var Bw=!1;function XC(t,e){if(Rf=rd,t=Mb(),lg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===r&&++d===s&&(l=o),m===a&&++h===n&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Df={focusedElem:t,selectionRange:r},rd=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var E=N.memoizedProps,C=N.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?E:qr(e.type,E),C);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(b){ut(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return N=Bw,Bw=!1,N}function ul(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Yf(e,r,a)}s=s.next}while(s!==n)}}function ah(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Xf(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function A2(t){var e=t.alternate;e!==null&&(t.alternate=null,A2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Dl],delete e[Of],delete e[RC],delete e[DC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function P2(t){return t.tag===5||t.tag===3||t.tag===4}function qw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=id));else if(n!==4&&(t=t.child,t!==null))for(Jf(t,e,r),t=t.sibling;t!==null;)Jf(t,e,r),t=t.sibling}function Zf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Zf(t,e,r),t=t.sibling;t!==null;)Zf(t,e,r),t=t.sibling}var Rt=null,Hr=!1;function fs(t,e,r){for(r=r.child;r!==null;)R2(t,e,r),r=r.sibling}function R2(t,e,r){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Jd,r)}catch{}switch(r.tag){case 5:Gt||ja(r,e);case 6:var n=Rt,s=Hr;Rt=null,fs(t,e,r),Rt=n,Hr=s,Rt!==null&&(Hr?(t=Rt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Rt.removeChild(r.stateNode));break;case 18:Rt!==null&&(Hr?(t=Rt,r=r.stateNode,t.nodeType===8?Sm(t.parentNode,r):t.nodeType===1&&Sm(t,r),Tl(t)):Sm(Rt,r.stateNode));break;case 4:n=Rt,s=Hr,Rt=r.stateNode.containerInfo,Hr=!0,fs(t,e,r),Rt=n,Hr=s;break;case 0:case 11:case 14:case 15:if(!Gt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Yf(r,e,o),s=s.next}while(s!==n)}fs(t,e,r);break;case 1:if(!Gt&&(ja(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ut(r,e,l)}fs(t,e,r);break;case 21:fs(t,e,r);break;case 22:r.mode&1?(Gt=(n=Gt)||r.memoizedState!==null,fs(t,e,r),Gt=n):fs(t,e,r);break;default:fs(t,e,r)}}function Hw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new YC),e.forEach(function(n){var s=aT.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Br(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Rt=l.stateNode,Hr=!1;break e;case 3:Rt=l.stateNode.containerInfo,Hr=!0;break e;case 4:Rt=l.stateNode.containerInfo,Hr=!0;break e}l=l.return}if(Rt===null)throw Error(Q(160));R2(a,o,s),Rt=null,Hr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ut(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)D2(e,t),e=e.sibling}function D2(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Br(e,t),un(t),n&4){try{ul(3,t,t.return),ah(3,t)}catch(E){ut(t,t.return,E)}try{ul(5,t,t.return)}catch(E){ut(t,t.return,E)}}break;case 1:Br(e,t),un(t),n&512&&r!==null&&ja(r,r.return);break;case 5:if(Br(e,t),un(t),n&512&&r!==null&&ja(r,r.return),t.flags&32){var s=t.stateNode;try{El(s,"")}catch(E){ut(t,t.return,E)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&tb(s,a),_f(l,o);var d=_f(l,a);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?ab(s,f):h==="dangerouslySetInnerHTML"?sb(s,f):h==="children"?El(s,f):Qp(s,h,f,d)}switch(l){case"input":wf(s,a);break;case"textarea":rb(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?ka(s,!!a.multiple,y,!1):m!==!!a.multiple&&(a.defaultValue!=null?ka(s,!!a.multiple,a.defaultValue,!0):ka(s,!!a.multiple,a.multiple?[]:"",!1))}s[Dl]=a}catch(E){ut(t,t.return,E)}}break;case 6:if(Br(e,t),un(t),n&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(E){ut(t,t.return,E)}}break;case 3:if(Br(e,t),un(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Tl(e.containerInfo)}catch(E){ut(t,t.return,E)}break;case 4:Br(e,t),un(t);break;case 13:Br(e,t),un(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Cg=ft())),n&4&&Hw(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Gt=(d=Gt)||h,Br(e,t),Gt=d):Br(e,t),un(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ie=t,h=t.child;h!==null;){for(f=ie=h;ie!==null;){switch(m=ie,y=m.child,m.tag){case 0:case 11:case 14:case 15:ul(4,m,m.return);break;case 1:ja(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(E){ut(n,r,E)}}break;case 5:ja(m,m.return);break;case 22:if(m.memoizedState!==null){Gw(f);continue}}y!==null?(y.return=m,ie=y):Gw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ib("display",o))}catch(E){ut(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(E){ut(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Br(e,t),un(t),n&4&&Hw(t);break;case 21:break;default:Br(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(P2(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(El(s,""),n.flags&=-33);var a=qw(t);Zf(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=qw(t);Jf(t,l,o);break;default:throw Error(Q(161))}}catch(c){ut(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JC(t,e,r){ie=t,M2(t)}function M2(t,e,r){for(var n=(t.mode&1)!==0;ie!==null;){var s=ie,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||uu;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Gt;l=uu;var d=Gt;if(uu=o,(Gt=c)&&!d)for(ie=s;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?Kw(s):c!==null?(c.return=o,ie=c):Kw(s);for(;a!==null;)ie=a,M2(a),a=a.sibling;ie=s,uu=l,Gt=d}Ww(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ie=a):Ww(t)}}function Ww(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||ah(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Gt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:qr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Iw(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Iw(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Tl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Gt||e.flags&512&&Xf(e)}catch(m){ut(e,e.return,m)}}if(e===t){ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,ie=r;break}ie=e.return}}function Gw(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ie=r;break}ie=e.return}}function Kw(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ah(4,e)}catch(c){ut(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){ut(e,s,c)}}var a=e.return;try{Xf(e)}catch(c){ut(e,a,c)}break;case 5:var o=e.return;try{Xf(e)}catch(c){ut(e,o,c)}}}catch(c){ut(e,e.return,c)}if(e===t){ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ie=l;break}ie=e.return}}var ZC=Math.ceil,gd=ss.ReactCurrentDispatcher,Sg=ss.ReactCurrentOwner,Mr=ss.ReactCurrentBatchConfig,Re=0,At=null,wt=null,Ot=0,Nr=0,Ea=ri(0),Et=0,Ul=null,Vi=0,oh=0,kg=0,dl=null,lr=null,Cg=0,Ha=1/0,An=null,xd=!1,ep=null,Rs=null,du=!1,Ss=null,wd=0,hl=0,tp=null,Mu=-1,Lu=0;function rr(){return Re&6?ft():Mu!==-1?Mu:Mu=ft()}function Ds(t){return t.mode&1?Re&2&&Ot!==0?Ot&-Ot:LC.transition!==null?(Lu===0&&(Lu=yb()),Lu):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Sb(t.type)),t):1}function Zr(t,e,r,n){if(50<hl)throw hl=0,tp=null,Error(Q(185));rc(t,r,n),(!(Re&2)||t!==At)&&(t===At&&(!(Re&2)&&(oh|=r),Et===4&&bs(t,Ot)),pr(t,n),r===1&&Re===0&&!(e.mode&1)&&(Ha=ft()+500,nh&&ni()))}function pr(t,e){var r=t.callbackNode;Lk(t,e);var n=td(t,t===At?Ot:0);if(n===0)r!==null&&nw(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&nw(r),e===1)t.tag===0?MC(Qw.bind(null,t)):Hb(Qw.bind(null,t)),AC(function(){!(Re&6)&&ni()}),r=null;else{switch(vb(n)){case 1:r=eg;break;case 4:r=xb;break;case 16:r=ed;break;case 536870912:r=wb;break;default:r=ed}r=B2(r,L2.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function L2(t,e){if(Mu=-1,Lu=0,Re&6)throw Error(Q(327));var r=t.callbackNode;if(Pa()&&t.callbackNode!==r)return null;var n=td(t,t===At?Ot:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=yd(t,n);else{e=n;var s=Re;Re|=2;var a=V2();(At!==t||Ot!==e)&&(An=null,Ha=ft()+500,Ci(t,e));do try{rT();break}catch(l){O2(t,l)}while(!0);mg(),gd.current=a,Re=s,wt!==null?e=0:(At=null,Ot=0,e=Et)}if(e!==0){if(e===2&&(s=Cf(t),s!==0&&(n=s,e=rp(t,s))),e===1)throw r=Ul,Ci(t,0),bs(t,n),pr(t,ft()),r;if(e===6)bs(t,n);else{if(s=t.current.alternate,!(n&30)&&!eT(s)&&(e=yd(t,n),e===2&&(a=Cf(t),a!==0&&(n=a,e=rp(t,a))),e===1))throw r=Ul,Ci(t,0),bs(t,n),pr(t,ft()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Q(345));case 2:vi(t,lr,An);break;case 3:if(bs(t,n),(n&130023424)===n&&(e=Cg+500-ft(),10<e)){if(td(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){rr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Lf(vi.bind(null,t,lr,An),e);break}vi(t,lr,An);break;case 4:if(bs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Jr(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=ft()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ZC(n/1960))-n,10<n){t.timeoutHandle=Lf(vi.bind(null,t,lr,An),n);break}vi(t,lr,An);break;case 5:vi(t,lr,An);break;default:throw Error(Q(329))}}}return pr(t,ft()),t.callbackNode===r?L2.bind(null,t):null}function rp(t,e){var r=dl;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=yd(t,e),t!==2&&(e=lr,lr=r,e!==null&&np(e)),t}function np(t){lr===null?lr=t:lr.push.apply(lr,t)}function eT(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!rn(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~kg,e&=~oh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Jr(e),n=1<<r;t[r]=-1,e&=~n}}function Qw(t){if(Re&6)throw Error(Q(327));Pa();var e=td(t,0);if(!(e&1))return pr(t,ft()),null;var r=yd(t,e);if(t.tag!==0&&r===2){var n=Cf(t);n!==0&&(e=n,r=rp(t,n))}if(r===1)throw r=Ul,Ci(t,0),bs(t,e),pr(t,ft()),r;if(r===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vi(t,lr,An),pr(t,ft()),null}function Tg(t,e){var r=Re;Re|=1;try{return t(e)}finally{Re=r,Re===0&&(Ha=ft()+500,nh&&ni())}}function Fi(t){Ss!==null&&Ss.tag===0&&!(Re&6)&&Pa();var e=Re;Re|=1;var r=Mr.transition,n=Ve;try{if(Mr.transition=null,Ve=1,t)return t()}finally{Ve=n,Mr.transition=r,Re=e,!(Re&6)&&ni()}}function Ig(){Nr=Ea.current,Ye(Ea)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,IC(r)),wt!==null)for(r=wt.return;r!==null;){var n=r;switch(ug(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ad();break;case 3:Ba(),Ye(mr),Ye(Xt),yg();break;case 5:wg(n);break;case 4:Ba();break;case 13:Ye(tt);break;case 19:Ye(tt);break;case 10:fg(n.type._context);break;case 22:case 23:Ig()}r=r.return}if(At=t,wt=t=Ms(t.current,null),Ot=Nr=e,Et=0,Ul=null,kg=oh=Vi=0,lr=dl=null,_i!==null){for(e=0;e<_i.length;e++)if(r=_i[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}_i=null}return t}function O2(t,e){do{var r=wt;try{if(mg(),Pu.current=pd,fd){for(var n=st.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}fd=!1}if(Oi=0,Tt=_t=st=null,cl=!1,Ol=0,Sg.current=null,r===null||r.return===null){Et=1,Ul=e,wt=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=Ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Lw(o);if(y!==null){y.flags&=-257,Ow(y,o,l,a,e),y.mode&1&&Mw(a,d,e),e=y,c=d;var N=e.updateQueue;if(N===null){var E=new Set;E.add(c),e.updateQueue=E}else N.add(c);break e}else{if(!(e&1)){Mw(a,d,e),Ag();break e}c=Error(Q(426))}}else if(Ze&&l.mode&1){var C=Lw(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Ow(C,o,l,a,e),dg(qa(c,l));break e}}a=c=qa(c,l),Et!==4&&(Et=2),dl===null?dl=[a]:dl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=v2(a,c,e);Tw(a,x);break e;case 1:l=c;var w=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Rs===null||!Rs.has(g)))){a.flags|=65536,e&=-e,a.lanes|=e;var b=b2(a,l,e);Tw(a,b);break e}}a=a.return}while(a!==null)}U2(r)}catch(I){e=I,wt===r&&r!==null&&(wt=r=r.return);continue}break}while(!0)}function V2(){var t=gd.current;return gd.current=pd,t===null?pd:t}function Ag(){(Et===0||Et===3||Et===2)&&(Et=4),At===null||!(Vi&268435455)&&!(oh&268435455)||bs(At,Ot)}function yd(t,e){var r=Re;Re|=2;var n=V2();(At!==t||Ot!==e)&&(An=null,Ci(t,e));do try{tT();break}catch(s){O2(t,s)}while(!0);if(mg(),Re=r,gd.current=n,wt!==null)throw Error(Q(261));return At=null,Ot=0,Et}function tT(){for(;wt!==null;)F2(wt)}function rT(){for(;wt!==null&&!kk();)F2(wt)}function F2(t){var e=$2(t.alternate,t,Nr);t.memoizedProps=t.pendingProps,e===null?U2(t):wt=e,Sg.current=null}function U2(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=QC(r,e),r!==null){r.flags&=32767,wt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,wt=null;return}}else if(r=KC(r,e,Nr),r!==null){wt=r;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);Et===0&&(Et=5)}function vi(t,e,r){var n=Ve,s=Mr.transition;try{Mr.transition=null,Ve=1,nT(t,e,r,n)}finally{Mr.transition=s,Ve=n}return null}function nT(t,e,r,n){do Pa();while(Ss!==null);if(Re&6)throw Error(Q(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Ok(t,a),t===At&&(wt=At=null,Ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||du||(du=!0,B2(ed,function(){return Pa(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Mr.transition,Mr.transition=null;var o=Ve;Ve=1;var l=Re;Re|=4,Sg.current=null,XC(t,r),D2(r,t),_C(Df),rd=!!Rf,Df=Rf=null,t.current=r,JC(r),Ck(),Re=l,Ve=o,Mr.transition=a}else t.current=r;if(du&&(du=!1,Ss=t,wd=s),a=t.pendingLanes,a===0&&(Rs=null),Ak(r.stateNode),pr(t,ft()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(xd)throw xd=!1,t=ep,ep=null,t;return wd&1&&t.tag!==0&&Pa(),a=t.pendingLanes,a&1?t===tp?hl++:(hl=0,tp=t):hl=0,ni(),null}function Pa(){if(Ss!==null){var t=vb(wd),e=Mr.transition,r=Ve;try{if(Mr.transition=null,Ve=16>t?16:t,Ss===null)var n=!1;else{if(t=Ss,Ss=null,wd=0,Re&6)throw Error(Q(331));var s=Re;for(Re|=4,ie=t.current;ie!==null;){var a=ie,o=a.child;if(ie.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ie=d;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:ul(8,h,a)}var f=h.child;if(f!==null)f.return=h,ie=f;else for(;ie!==null;){h=ie;var m=h.sibling,y=h.return;if(A2(h),h===d){ie=null;break}if(m!==null){m.return=y,ie=m;break}ie=y}}}var N=a.alternate;if(N!==null){var E=N.child;if(E!==null){N.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}ie=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ie=o;else e:for(;ie!==null;){if(a=ie,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ul(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ie=x;break e}ie=a.return}}var w=t.current;for(ie=w;ie!==null;){o=ie;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,ie=g;else e:for(o=w;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ah(9,l)}}catch(I){ut(l,l.return,I)}if(l===o){ie=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ie=b;break e}ie=l.return}}if(Re=s,ni(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Jd,t)}catch{}n=!0}return n}finally{Ve=r,Mr.transition=e}}return!1}function Yw(t,e,r){e=qa(r,e),e=v2(t,e,1),t=Ps(t,e,1),e=rr(),t!==null&&(rc(t,1,e),pr(t,e))}function ut(t,e,r){if(t.tag===3)Yw(t,t,r);else for(;e!==null;){if(e.tag===3){Yw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rs===null||!Rs.has(n))){t=qa(r,t),t=b2(e,t,1),e=Ps(e,t,1),t=rr(),e!==null&&(rc(e,1,t),pr(e,t));break}}e=e.return}}function sT(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&r,At===t&&(Ot&r)===r&&(Et===4||Et===3&&(Ot&130023424)===Ot&&500>ft()-Cg?Ci(t,0):kg|=r),pr(t,e)}function z2(t,e){e===0&&(t.mode&1?(e=tu,tu<<=1,!(tu&130023424)&&(tu=4194304)):e=1);var r=rr();t=Yn(t,e),t!==null&&(rc(t,e,r),pr(t,r))}function iT(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),z2(t,r)}function aT(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(e),z2(t,r)}var $2;$2=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||mr.current)dr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return dr=!1,GC(t,e,r);dr=!!(t.flags&131072)}else dr=!1,Ze&&e.flags&1048576&&Wb(e,cd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Du(t,e),t=e.pendingProps;var s=Ua(e,Xt.current);Aa(e,r),s=bg(null,e,n,t,s,r);var a=Ng();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(n)?(a=!0,od(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gg(e),s.updater=ih,e.stateNode=s,s._reactInternals=e,Bf(e,n,t,r),e=Wf(null,e,n,!0,a,r)):(e.tag=0,Ze&&a&&cg(e),tr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Du(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=lT(n),t=qr(n,t),s){case 0:e=Hf(null,e,n,t,r);break e;case 1:e=Uw(null,e,n,t,r);break e;case 11:e=Vw(null,e,n,t,r);break e;case 14:e=Fw(null,e,n,qr(n.type,t),r);break e}throw Error(Q(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qr(n,s),Hf(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qr(n,s),Uw(t,e,n,s,r);case 3:e:{if(E2(e),t===null)throw Error(Q(387));n=e.pendingProps,a=e.memoizedState,s=a.element,Jb(t,e),hd(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=qa(Error(Q(423)),e),e=zw(t,e,n,r,s);break e}else if(n!==s){s=qa(Error(Q(424)),e),e=zw(t,e,n,r,s);break e}else for(_r=As(e.stateNode.containerInfo.firstChild),Er=e,Ze=!0,Wr=null,r=Yb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(za(),n===s){e=Xn(t,e,r);break e}tr(t,e,n,r)}e=e.child}return e;case 5:return Zb(e),t===null&&Uf(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Mf(n,s)?o=null:a!==null&&Mf(n,a)&&(e.flags|=32),j2(t,e),tr(t,e,o,r),e.child;case 6:return t===null&&Uf(e),null;case 13:return S2(t,e,r);case 4:return xg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=$a(e,null,n,r):tr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qr(n,s),Vw(t,e,n,s,r);case 7:return tr(t,e,e.pendingProps,r),e.child;case 8:return tr(t,e,e.pendingProps.children,r),e.child;case 12:return tr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,qe(ud,n._currentValue),n._currentValue=o,a!==null)if(rn(a.value,o)){if(a.children===s.children&&!mr.current){e=Xn(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Bn(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),zf(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Q(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),zf(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}tr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Aa(e,r),s=Lr(s),n=n(s),e.flags|=1,tr(t,e,n,r),e.child;case 14:return n=e.type,s=qr(n,e.pendingProps),s=qr(n.type,s),Fw(t,e,n,s,r);case 15:return N2(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:qr(n,s),Du(t,e),e.tag=1,fr(n)?(t=!0,od(e)):t=!1,Aa(e,r),y2(e,n,s),Bf(e,n,s,r),Wf(null,e,n,!0,t,r);case 19:return k2(t,e,r);case 22:return _2(t,e,r)}throw Error(Q(156,e.tag))};function B2(t,e){return gb(t,e)}function oT(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(t,e,r,n){return new oT(t,e,r,n)}function Pg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lT(t){if(typeof t=="function")return Pg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xp)return 11;if(t===Jp)return 14}return 2}function Ms(t,e){var r=t.alternate;return r===null?(r=Dr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ou(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")Pg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pa:return Ti(r.children,s,a,e);case Yp:o=8,s|=8;break;case mf:return t=Dr(12,r,e,s|2),t.elementType=mf,t.lanes=a,t;case ff:return t=Dr(13,r,e,s),t.elementType=ff,t.lanes=a,t;case pf:return t=Dr(19,r,e,s),t.elementType=pf,t.lanes=a,t;case J1:return lh(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y1:o=10;break e;case X1:o=9;break e;case Xp:o=11;break e;case Jp:o=14;break e;case ws:o=16,n=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Dr(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Ti(t,e,r,n){return t=Dr(7,t,n,e),t.lanes=r,t}function lh(t,e,r,n){return t=Dr(22,t,n,e),t.elementType=J1,t.lanes=r,t.stateNode={isHidden:!1},t}function Dm(t,e,r){return t=Dr(6,t,null,e),t.lanes=r,t}function Mm(t,e,r){return e=Dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cT(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pm(0),this.expirationTimes=pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pm(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rg(t,e,r,n,s,a,o,l,c){return t=new cT(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Dr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gg(a),t}function uT(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fa,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function q2(t){if(!t)return Bs;t=t._reactInternals;e:{if(Yi(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var r=t.type;if(fr(r))return qb(t,r,e)}return e}function H2(t,e,r,n,s,a,o,l,c){return t=Rg(r,n,!0,t,s,a,o,l,c),t.context=q2(null),r=t.current,n=rr(),s=Ds(r),a=Bn(n,s),a.callback=e??null,Ps(r,a,s),t.current.lanes=s,rc(t,s,n),pr(t,n),t}function ch(t,e,r,n){var s=e.current,a=rr(),o=Ds(s);return r=q2(r),e.context===null?e.context=r:e.pendingContext=r,e=Bn(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ps(s,e,o),t!==null&&(Zr(t,s,o,a),Au(t,s,o)),o}function vd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Dg(t,e){Xw(t,e),(t=t.alternate)&&Xw(t,e)}function dT(){return null}var W2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mg(t){this._internalRoot=t}uh.prototype.render=Mg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));ch(t,e,null,null)};uh.prototype.unmount=Mg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fi(function(){ch(null,t,null,null)}),e[Qn]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=_b();t={blockedOn:null,target:t,priority:e};for(var r=0;r<vs.length&&e!==0&&e<vs[r].priority;r++);vs.splice(r,0,t),r===0&&Eb(t)}};function Lg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jw(){}function hT(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=vd(o);a.call(d)}}var o=H2(e,n,t,0,null,!1,!1,"",Jw);return t._reactRootContainer=o,t[Qn]=o.current,Pl(t.nodeType===8?t.parentNode:t),Fi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=vd(c);l.call(d)}}var c=Rg(t,0,!1,null,null,!1,!1,"",Jw);return t._reactRootContainer=c,t[Qn]=c.current,Pl(t.nodeType===8?t.parentNode:t),Fi(function(){ch(e,c,r,n)}),c}function hh(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=vd(o);l.call(c)}}ch(e,o,t,s)}else o=hT(r,e,t,s,n);return vd(o)}bb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Yo(e.pendingLanes);r!==0&&(tg(e,r|1),pr(e,ft()),!(Re&6)&&(Ha=ft()+500,ni()))}break;case 13:Fi(function(){var n=Yn(t,1);if(n!==null){var s=rr();Zr(n,t,1,s)}}),Dg(t,1)}};rg=function(t){if(t.tag===13){var e=Yn(t,134217728);if(e!==null){var r=rr();Zr(e,t,134217728,r)}Dg(t,134217728)}};Nb=function(t){if(t.tag===13){var e=Ds(t),r=Yn(t,e);if(r!==null){var n=rr();Zr(r,t,e,n)}Dg(t,e)}};_b=function(){return Ve};jb=function(t,e){var r=Ve;try{return Ve=t,e()}finally{Ve=r}};Ef=function(t,e,r){switch(e){case"input":if(wf(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=rh(n);if(!s)throw Error(Q(90));eb(n),wf(n,s)}}}break;case"textarea":rb(t,r);break;case"select":e=r.value,e!=null&&ka(t,!!r.multiple,e,!1)}};cb=Tg;ub=Fi;var mT={usingClientEntryPoint:!1,Events:[sc,ya,rh,ob,lb,Tg]},zo={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fT={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fb(t),t===null?null:t.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||dT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Jd=hu.inject(fT),gn=hu}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT;Cr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lg(e))throw Error(Q(200));return uT(t,e,null,r)};Cr.createRoot=function(t,e){if(!Lg(t))throw Error(Q(299));var r=!1,n="",s=W2;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Rg(t,1,!1,null,null,r,!1,n,s),t[Qn]=e.current,Pl(t.nodeType===8?t.parentNode:t),new Mg(e)};Cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=fb(e),t=t===null?null:t.stateNode,t};Cr.flushSync=function(t){return Fi(t)};Cr.hydrate=function(t,e,r){if(!dh(e))throw Error(Q(200));return hh(null,t,e,!0,r)};Cr.hydrateRoot=function(t,e,r){if(!Lg(t))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=W2;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=H2(e,null,t,1,r??null,s,!1,a,o),t[Qn]=e.current,Pl(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new uh(e)};Cr.render=function(t,e,r){if(!dh(e))throw Error(Q(200));return hh(null,t,e,!1,r)};Cr.unmountComponentAtNode=function(t){if(!dh(t))throw Error(Q(40));return t._reactRootContainer?(Fi(function(){hh(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};Cr.unstable_batchedUpdates=Tg;Cr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!dh(r))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return hh(t,e,r,!1,n)};Cr.version="18.3.1-next-f1338f8080-20240426";function G2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G2)}catch(t){console.error(t)}}G2(),W1.exports=Cr;var pT=W1.exports,K2,Zw=pT;K2=Zw.createRoot,Zw.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ey="popstate";function gT(t={}){function e(n,s){let{pathname:a,search:o,hash:l}=n.location;return sp("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:zl(s)}return wT(e,r,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xT(){return Math.random().toString(36).substring(2,10)}function ty(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?io(e):e,state:r,key:e&&e.key||n||xT()}}function zl({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function io(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function wT(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let C=h(),x=C==null?null:C-d;d=C,c&&c({action:l,location:E.location,delta:x})}function m(C,x){l="PUSH";let w=sp(E.location,C,x);d=h()+1;let g=ty(w,d),b=E.createHref(w);try{o.pushState(g,"",b)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(b)}a&&c&&c({action:l,location:E.location,delta:1})}function y(C,x){l="REPLACE";let w=sp(E.location,C,x);d=h();let g=ty(w,d),b=E.createHref(w);o.replaceState(g,"",b),a&&c&&c({action:l,location:E.location,delta:0})}function N(C){return yT(C)}let E={get action(){return l},get location(){return t(s,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ey,f),c=C,()=>{s.removeEventListener(ey,f),c=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let x=N(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:y,go(C){return o.go(C)}};return E}function yT(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),et(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:zl(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Q2(t,e,r="/"){return vT(t,e,r,!1)}function vT(t,e,r,n){let s=typeof e=="string"?io(e):e,a=Jn(s.pathname||"/",r);if(a==null)return null;let o=Y2(t);bT(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=PT(a);l=IT(o[c],d,n)}return l}function Y2(t,e=[],r=[],n="",s=!1){let a=(o,l,c=s,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;et(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let f=qn([n,h.relativePath]),m=r.concat(h);o.children&&o.children.length>0&&(et(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Y2(o.children,e,m,f,c)),!(o.path==null&&!o.index)&&e.push({path:f,score:CT(f,o.index),routesMeta:m})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))a(o,l);else for(let d of X2(o.path))a(o,l,!0,d)}),e}function X2(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=X2(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function bT(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:TT(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var NT=/^:[\w-]+$/,_T=3,jT=2,ET=1,ST=10,kT=-2,ry=t=>t==="*";function CT(t,e){let r=t.split("/"),n=r.length;return r.some(ry)&&(n+=kT),e&&(n+=jT),r.filter(s=>!ry(s)).reduce((s,a)=>s+(NT.test(a)?_T:a===""?ET:ST),n)}function TT(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function IT(t,e,r=!1){let{routesMeta:n}=t,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=bd({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=bd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:qn([a,f.pathname]),pathnameBase:LT(qn([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=qn([a,f.pathnameBase]))}return o}function bd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=AT(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:f},m)=>{if(h==="*"){let N=l[m]||"";o=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const y=l[m];return f&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function AT(t,e=!1,r=!0){nn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function PT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Jn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function RT(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?io(t):t;return{pathname:r?r.startsWith("/")?r:DT(r,e):e,search:OT(n),hash:VT(s)}}function DT(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Lm(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MT(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Og(t){let e=MT(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function Vg(t,e,r,n=!1){let s;typeof t=="string"?s=io(t):(s={...t},et(!s.pathname||!s.pathname.includes("?"),Lm("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),Lm("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),Lm("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=RT(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var qn=t=>t.join("/").replace(/\/\/+/g,"/"),LT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var J2=["POST","PUT","PATCH","DELETE"];new Set(J2);var UT=["GET",...J2];new Set(UT);var ao=v.createContext(null);ao.displayName="DataRouter";var mh=v.createContext(null);mh.displayName="DataRouterState";v.createContext(!1);var Z2=v.createContext({isTransitioning:!1});Z2.displayName="ViewTransition";var zT=v.createContext(new Map);zT.displayName="Fetchers";var $T=v.createContext(null);$T.displayName="Await";var ln=v.createContext(null);ln.displayName="Navigation";var ac=v.createContext(null);ac.displayName="Location";var cn=v.createContext({outlet:null,matches:[],isDataRoute:!1});cn.displayName="Route";var Fg=v.createContext(null);Fg.displayName="RouteError";function BT(t,{relative:e}={}){et(oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(ln),{hash:s,pathname:a,search:o}=oc(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:qn([r,a])),n.createHref({pathname:l,search:o,hash:s})}function oo(){return v.useContext(ac)!=null}function Sn(){return et(oo(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(ac).location}var eN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tN(t){v.useContext(ln).static||v.useLayoutEffect(t)}function gt(){let{isDataRoute:t}=v.useContext(cn);return t?rI():qT()}function qT(){et(oo(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(ao),{basename:e,navigator:r}=v.useContext(ln),{matches:n}=v.useContext(cn),{pathname:s}=Sn(),a=JSON.stringify(Og(n)),o=v.useRef(!1);return tN(()=>{o.current=!0}),v.useCallback((c,d={})=>{if(nn(o.current,eN),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=Vg(c,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,a,s,t])}v.createContext(null);function fh(){let{matches:t}=v.useContext(cn),e=t[t.length-1];return e?e.params:{}}function oc(t,{relative:e}={}){let{matches:r}=v.useContext(cn),{pathname:n}=Sn(),s=JSON.stringify(Og(r));return v.useMemo(()=>Vg(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function HT(t,e){return rN(t,e)}function rN(t,e,r,n,s){var w;et(oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(ln),{matches:o}=v.useContext(cn),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let g=f&&f.path||"";nN(d,!f||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let m=Sn(),y;if(e){let g=typeof e=="string"?io(e):e;et(h==="/"||((w=g.pathname)==null?void 0:w.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${g.pathname}" was given in the \`location\` prop.`),y=g}else y=m;let N=y.pathname||"/",E=N;if(h!=="/"){let g=h.replace(/^\//,"").split("/");E="/"+N.replace(/^\//,"").split("/").slice(g.length).join("/")}let C=Q2(t,{pathname:E});nn(f||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),nn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=YT(C&&C.map(g=>Object.assign({},g,{params:Object.assign({},c,g.params),pathname:qn([h,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?h:qn([h,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,r,n,s);return e&&x?v.createElement(ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},x):x}function WT(){let t=tI(),e=FT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:a},"ErrorBoundary")," or"," ",v.createElement("code",{style:a},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:s},r):null,o)}var GT=v.createElement(WT,null),KT=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(cn.Provider,{value:this.props.routeContext},v.createElement(Fg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QT({routeContext:t,match:e,children:r}){let n=v.useContext(ao);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(cn.Provider,{value:t},r)}function YT(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=r==null?void 0:r.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);et(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(r)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,y=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,y=!1,N=null,E=null;r&&(m=o&&h.route.id?o[h.route.id]:void 0,N=h.route.errorElement||GT,l&&(c<0&&f===0?(nN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,E=null):c===f&&(y=!0,E=h.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,f+1)),x=()=>{let w;return m?w=N:y?w=E:h.route.Component?w=v.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,v.createElement(QT,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(KT,{location:r.location,revalidation:r.revalidation,component:N,error:m,children:x(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:n}):x()},null)}function Ug(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XT(t){let e=v.useContext(ao);return et(e,Ug(t)),e}function JT(t){let e=v.useContext(mh);return et(e,Ug(t)),e}function ZT(t){let e=v.useContext(cn);return et(e,Ug(t)),e}function zg(t){let e=ZT(t),r=e.matches[e.matches.length-1];return et(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function eI(){return zg("useRouteId")}function tI(){var n;let t=v.useContext(Fg),e=JT("useRouteError"),r=zg("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function rI(){let{router:t}=XT("useNavigate"),e=zg("useNavigate"),r=v.useRef(!1);return tN(()=>{r.current=!0}),v.useCallback(async(s,a={})=>{nn(r.current,eN),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var ny={};function nN(t,e,r){!e&&!ny[t]&&(ny[t]=!0,nn(!1,r))}v.memo(nI);function nI({routes:t,future:e,state:r,unstable_onError:n}){return rN(t,void 0,r,n,e)}function Wa({to:t,replace:e,state:r,relative:n}){et(oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(ln);nn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=v.useContext(cn),{pathname:o}=Sn(),l=gt(),c=Vg(t,Og(a),o,n==="path"),d=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(d),{replace:e,state:r,relative:n})},[l,d,n,e,r]),null}function sN(t){et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sI({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){et(!oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=io(r));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:m="default"}=r,y=v.useMemo(()=>{let N=Jn(c,o);return N==null?null:{location:{pathname:N,search:d,hash:h,state:f,key:m},navigationType:n}},[o,c,d,h,f,m,n]);return nn(y!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:v.createElement(ln.Provider,{value:l},v.createElement(ac.Provider,{children:e,value:y}))}function iI({children:t,location:e}){return HT(ip(t),e)}function ip(t,e=[]){let r=[];return v.Children.forEach(t,(n,s)=>{if(!v.isValidElement(n))return;let a=[...e,s];if(n.type===v.Fragment){r.push.apply(r,ip(n.props.children,a));return}et(n.type===sN,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),et(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ip(n.props.children,a)),r.push(o)}),r}var Vu="get",Fu="application/x-www-form-urlencoded";function ph(t){return t!=null&&typeof t.tagName=="string"}function aI(t){return ph(t)&&t.tagName.toLowerCase()==="button"}function oI(t){return ph(t)&&t.tagName.toLowerCase()==="form"}function lI(t){return ph(t)&&t.tagName.toLowerCase()==="input"}function cI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uI(t,e){return t.button===0&&(!e||e==="_self")&&!cI(t)}var mu=null;function dI(){if(mu===null)try{new FormData(document.createElement("form"),0),mu=!1}catch{mu=!0}return mu}var hI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Om(t){return t!=null&&!hI.has(t)?(nn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fu}"`),null):t}function mI(t,e){let r,n,s,a,o;if(oI(t)){let l=t.getAttribute("action");n=l?Jn(l,e):null,r=t.getAttribute("method")||Vu,s=Om(t.getAttribute("enctype"))||Fu,a=new FormData(t)}else if(aI(t)||lI(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?Jn(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Vu,s=Om(t.getAttribute("formenctype"))||Om(l.getAttribute("enctype"))||Fu,a=new FormData(l,t),!dI()){let{name:d,type:h,value:f}=t;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,f)}}else{if(ph(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Vu,n=null,s=Fu,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $g(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fI(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Jn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function pI(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xI(t,e,r){let n=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await pI(a,r);return o.links?o.links():[]}return[]}));return bI(n.flat(1).filter(gI).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function sy(t,e,r,n,s,a){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var h;return r[d].pathname!==c.pathname||((h=r[d].route.path)==null?void 0:h.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):a==="data"?e.filter((c,d)=>{var f;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function wI(t,e,{includeHydrateFallback:r}={}){return yI(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function yI(t){return[...new Set(t)]}function vI(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function bI(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let a=JSON.stringify(vI(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function iN(){let t=v.useContext(ao);return $g(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function NI(){let t=v.useContext(mh);return $g(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Bg=v.createContext(void 0);Bg.displayName="FrameworkContext";function aN(){let t=v.useContext(Bg);return $g(t,"You must render this element inside a <HydratedRouter> element"),t}function _I(t,e){let r=v.useContext(Bg),[n,s]=v.useState(!1),[a,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=e,m=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=x=>{x.forEach(w=>{o(w.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return m.current&&C.observe(m.current),()=>{C.disconnect()}}},[t]),v.useEffect(()=>{if(n){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[n]);let y=()=>{s(!0)},N=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,m,{}]:[a,m,{onFocus:$o(l,y),onBlur:$o(c,N),onMouseEnter:$o(d,y),onMouseLeave:$o(h,N),onTouchStart:$o(f,y)}]:[!1,m,{}]}function $o(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function jI({page:t,...e}){let{router:r}=iN(),n=v.useMemo(()=>Q2(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(SI,{page:t,matches:n,...e}):null}function EI(t){let{manifest:e,routeModules:r}=aN(),[n,s]=v.useState([]);return v.useEffect(()=>{let a=!1;return xI(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),n}function SI({page:t,matches:e,...r}){let n=Sn(),{manifest:s,routeModules:a}=aN(),{basename:o}=iN(),{loaderData:l,matches:c}=NI(),d=v.useMemo(()=>sy(t,e,c,s,n,"data"),[t,e,c,s,n]),h=v.useMemo(()=>sy(t,e,c,s,n,"assets"),[t,e,c,s,n]),f=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let N=new Set,E=!1;if(e.forEach(x=>{var g;let w=s.routes[x.route.id];!w||!w.hasLoader||(!d.some(b=>b.route.id===x.route.id)&&x.route.id in l&&((g=a[x.route.id])!=null&&g.shouldRevalidate)||w.hasClientLoader?E=!0:N.add(x.route.id))}),N.size===0)return[];let C=fI(t,o,"data");return E&&N.size>0&&C.searchParams.set("_routes",e.filter(x=>N.has(x.route.id)).map(x=>x.route.id).join(",")),[C.pathname+C.search]},[o,l,n,s,d,e,t,a]),m=v.useMemo(()=>wI(h,s),[h,s]),y=EI(h);return v.createElement(v.Fragment,null,f.map(N=>v.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...r})),m.map(N=>v.createElement("link",{key:N,rel:"modulepreload",href:N,...r})),y.map(({key:N,link:E})=>v.createElement("link",{key:N,nonce:r.nonce,...E})))}function kI(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var oN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oN&&(window.__reactRouterVersion="7.8.2")}catch{}function CI({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=gT({window:r,v5Compat:!0}));let s=n.current,[a,o]=v.useState({action:s.action,location:s.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>s.listen(l),[s,l]),v.createElement(sI,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var lN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cN=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f,...m},y){let{basename:N}=v.useContext(ln),E=typeof d=="string"&&lN.test(d),C,x=!1;if(typeof d=="string"&&E&&(C=d,oN))try{let S=new URL(window.location.href),k=d.startsWith("//")?new URL(S.protocol+d):new URL(d),T=Jn(k.pathname,N);k.origin===S.origin&&T!=null?d=T+k.search+k.hash:x=!0}catch{nn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=BT(d,{relative:s}),[g,b,I]=_I(n,m),M=PI(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function A(S){e&&e(S),S.defaultPrevented||M(S)}let _=v.createElement("a",{...m,...I,href:C||w,onClick:x||a?e:A,ref:kI(y,b),target:c,"data-discover":!E&&r==="render"?"true":void 0});return g&&!E?v.createElement(v.Fragment,null,_,v.createElement(jI,{page:w})):_});cN.displayName="Link";var TI=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:o,viewTransition:l,children:c,...d},h){let f=oc(o,{relative:d.relative}),m=Sn(),y=v.useContext(mh),{navigator:N,basename:E}=v.useContext(ln),C=y!=null&&OI(f)&&l===!0,x=N.encodeLocation?N.encodeLocation(f).pathname:f.pathname,w=m.pathname,g=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(w=w.toLowerCase(),g=g?g.toLowerCase():null,x=x.toLowerCase()),g&&E&&(g=Jn(g,E)||g);const b=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let I=w===x||!s&&w.startsWith(x)&&w.charAt(b)==="/",M=g!=null&&(g===x||!s&&g.startsWith(x)&&g.charAt(x.length)==="/"),A={isActive:I,isPending:M,isTransitioning:C},_=I?e:void 0,S;typeof n=="function"?S=n(A):S=[n,I?"active":null,M?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(A):a;return v.createElement(cN,{...d,"aria-current":_,className:S,ref:h,style:k,to:o,viewTransition:l},typeof c=="function"?c(A):c)});TI.displayName="NavLink";var II=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:a,method:o=Vu,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:f,...m},y)=>{let N=MI(),E=LI(l,{relative:d}),C=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&lN.test(l),w=g=>{if(c&&c(g),g.defaultPrevented)return;g.preventDefault();let b=g.nativeEvent.submitter,I=(b==null?void 0:b.getAttribute("formmethod"))||o;N(b||g.currentTarget,{fetcherKey:e,method:I,navigate:r,replace:s,state:a,relative:d,preventScrollReset:h,viewTransition:f})};return v.createElement("form",{ref:y,method:C,action:E,onSubmit:n?c:w,...m,"data-discover":!x&&t==="render"?"true":void 0})});II.displayName="Form";function AI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uN(t){let e=v.useContext(ao);return et(e,AI(t)),e}function PI(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=gt(),c=Sn(),d=oc(t,{relative:a});return v.useCallback(h=>{if(uI(h,e)){h.preventDefault();let f=r!==void 0?r:zl(c)===zl(d);l(t,{replace:f,state:n,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,d,r,n,e,t,s,a,o])}var RI=0,DI=()=>`__${String(++RI)}__`;function MI(){let{router:t}=uN("useSubmit"),{basename:e}=v.useContext(ln),r=eI();return v.useCallback(async(n,s={})=>{let{action:a,method:o,encType:l,formData:c,body:d}=mI(n,e);if(s.navigate===!1){let h=s.fetcherKey||DI();await t.fetch(h,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function LI(t,{relative:e}={}){let{basename:r}=v.useContext(ln),n=v.useContext(cn);et(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...oc(t||".",{relative:e})},o=Sn();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:qn([r,a.pathname])),zl(a)}function OI(t,{relative:e}={}){let r=v.useContext(Z2);et(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=uN("useViewTransitionState"),s=oc(t,{relative:e});if(!r.isTransitioning)return!1;let a=Jn(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Jn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return bd(s.pathname,o)!=null||bd(s.pathname,a)!=null}const VI=()=>{};var iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},FI=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},hN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,o||(m=64)),n.push(r[h],r[f],r[m],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||f==null)throw new UI;const m=a<<2|l>>4;if(n.push(m),d!==64){const y=l<<4&240|d>>2;if(n.push(y),f!==64){const N=d<<6&192|f;n.push(N)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zI=function(t){const e=dN(t);return hN.encodeByteArray(e,!0)},Nd=function(t){return zI(t).replace(/\./g,"")},mN=function(t){try{return hN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=()=>$I().__FIREBASE_DEFAULTS__,qI=()=>{if(typeof process>"u"||typeof iy>"u")return;const t=iy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mN(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return VI()||BI()||qI()||HI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fN=t=>{var e,r;return(r=(e=gh())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},pN=t=>{const e=fN(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},gN=()=>{var t;return(t=gh())==null?void 0:t.config},xN=t=>{var e;return(e=gh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Nd(JSON.stringify(r)),Nd(JSON.stringify(o)),""].join(".")}const ml={};function GI(){const t={prod:[],emulator:[]};for(const e of Object.keys(ml))ml[e]?t.emulator.push(e):t.prod.push(e);return t}function KI(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let ay=!1;function Hg(t,e){if(typeof window>"u"||typeof document>"u"||!si(window.location.host)||ml[t]===e||ml[t]||ay)return;ml[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",a=GI().prod.length>0;function o(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ay=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=KI(n),y=r("text"),N=document.getElementById(y)||document.createElement("span"),E=r("learnmore"),C=document.getElementById(E)||document.createElement("a"),x=r("preprendIcon"),w=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const g=m.element;l(g),h(C,E);const b=d();c(w,x),g.append(w,N,C,b),document.body.appendChild(g)}a?(N.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function YI(){var e;const t=(e=gh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZI(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function e4(){return!YI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vN(){try{return typeof indexedDB=="object"}catch{return!1}}function bN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}function t4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="FirebaseError";class zr extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=r4,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xi.prototype.create)}}class Xi{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?n4(a,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new zr(s,l,n)}}function n4(t,e){return t.replace(s4,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const s4=/\{\$([^}]+)}/g;function i4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qs(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],o=e[s];if(oy(a)&&oy(o)){if(!qs(a,o))return!1}else if(a!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function oy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Zo(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function a4(t,e){const r=new o4(t,e);return r.subscribe.bind(r)}class o4{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");l4(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Vm),s.error===void 0&&(s.error=Vm),s.complete===void 0&&(s.complete=Vm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l4(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Vm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=1e3,u4=2,d4=4*60*60*1e3,h4=.5;function ly(t,e=c4,r=u4){const n=e*Math.pow(r,t),s=Math.round(h4*n*(Math.random()-.5)*2);return Math.min(d4,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Vr{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new WI;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(p4(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&e(a,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:f4(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f4(t){return t===bi?void 0:t}function p4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new m4(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const x4={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},w4=Ee.INFO,y4={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},v4=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=y4[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xh{constructor(e){this.name=e,this._logLevel=w4,this._logHandler=v4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const b4=(t,e)=>e.some(r=>t instanceof r);let cy,uy;function N4(){return cy||(cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _4(){return uy||(uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NN=new WeakMap,ap=new WeakMap,_N=new WeakMap,Fm=new WeakMap,Wg=new WeakMap;function j4(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Ls(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&NN.set(r,t)}).catch(()=>{}),Wg.set(e,t),e}function E4(t){if(ap.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});ap.set(t,e)}let op={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_N.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ls(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S4(t){op=t(op)}function k4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Um(this),e,...r);return _N.set(n,e.sort?e.sort():[e]),Ls(n)}:_4().includes(t)?function(...e){return t.apply(Um(this),e),Ls(NN.get(this))}:function(...e){return Ls(t.apply(Um(this),e))}}function C4(t){return typeof t=="function"?k4(t):(t instanceof IDBTransaction&&E4(t),b4(t,N4())?new Proxy(t,op):t)}function Ls(t){if(t instanceof IDBRequest)return j4(t);if(Fm.has(t))return Fm.get(t);const e=C4(t);return e!==t&&(Fm.set(t,e),Wg.set(e,t)),e}const Um=t=>Wg.get(t);function jN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=Ls(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Ls(o.result),c.oldVersion,c.newVersion,Ls(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const T4=["get","getKey","getAll","getAllKeys","count"],I4=["put","add","delete","clear"],zm=new Map;function dy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zm.get(e))return zm.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=I4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||T4.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),s&&c.done]))[0]};return zm.set(e,a),a}S4(t=>({...t,get:(e,r,n)=>dy(e,r)||t.get(e,r,n),has:(e,r)=>!!dy(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(P4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function P4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lp="@firebase/app",hy="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new xh("@firebase/app"),R4="@firebase/app-compat",D4="@firebase/analytics-compat",M4="@firebase/analytics",L4="@firebase/app-check-compat",O4="@firebase/app-check",V4="@firebase/auth",F4="@firebase/auth-compat",U4="@firebase/database",z4="@firebase/data-connect",$4="@firebase/database-compat",B4="@firebase/functions",q4="@firebase/functions-compat",H4="@firebase/installations",W4="@firebase/installations-compat",G4="@firebase/messaging",K4="@firebase/messaging-compat",Q4="@firebase/performance",Y4="@firebase/performance-compat",X4="@firebase/remote-config",J4="@firebase/remote-config-compat",Z4="@firebase/storage",e3="@firebase/storage-compat",t3="@firebase/firestore",r3="@firebase/ai",n3="@firebase/firestore-compat",s3="firebase",i3="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",a3={[lp]:"fire-core",[R4]:"fire-core-compat",[M4]:"fire-analytics",[D4]:"fire-analytics-compat",[O4]:"fire-app-check",[L4]:"fire-app-check-compat",[V4]:"fire-auth",[F4]:"fire-auth-compat",[U4]:"fire-rtdb",[z4]:"fire-data-connect",[$4]:"fire-rtdb-compat",[B4]:"fire-fn",[q4]:"fire-fn-compat",[H4]:"fire-iid",[W4]:"fire-iid-compat",[G4]:"fire-fcm",[K4]:"fire-fcm-compat",[Q4]:"fire-perf",[Y4]:"fire-perf-compat",[X4]:"fire-rc",[J4]:"fire-rc-compat",[Z4]:"fire-gcs",[e3]:"fire-gcs-compat",[t3]:"fire-fst",[n3]:"fire-fst-compat",[r3]:"fire-vertex","fire-js":"fire-js",[s3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,o3=new Map,up=new Map;function my(t,e){try{t.container.addComponent(e)}catch(r){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function sn(t){const e=t.name;if(up.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;up.set(e,t);for(const r of _d.values())my(r,t);for(const r of o3.values())my(r,t);return!0}function ii(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function cr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new Xi("app","Firebase",l3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=i3;function EN(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:cp,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw Os.create("bad-app-name",{appName:String(s)});if(r||(r=gN()),!r)throw Os.create("no-options");const a=_d.get(s);if(a){if(qs(r,a.options)&&qs(n,a.config))return a;throw Os.create("duplicate-app",{appName:s})}const o=new g4(s);for(const c of up.values())o.addComponent(c);const l=new c3(r,n,o);return _d.set(s,l),l}function wh(t=cp){const e=_d.get(t);if(!e&&t===cp&&gN())return EN();if(!e)throw Os.create("no-app",{appName:t});return e}function gr(t,e,r){let n=a3[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(o.join(" "));return}sn(new Vr(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="firebase-heartbeat-database",d3=1,$l="firebase-heartbeat-store";let $m=null;function SN(){return $m||($m=jN(u3,d3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($l)}catch(r){console.warn(r)}}}}).catch(t=>{throw Os.create("idb-open",{originalErrorMessage:t.message})})),$m}async function h3(t){try{const r=(await SN()).transaction($l),n=await r.objectStore($l).get(kN(t));return await r.done,n}catch(e){if(e instanceof zr)Zn.warn(e.message);else{const r=Os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zn.warn(r.message)}}}async function fy(t,e){try{const n=(await SN()).transaction($l,"readwrite");await n.objectStore($l).put(e,kN(t)),await n.done}catch(r){if(r instanceof zr)Zn.warn(r.message);else{const n=Os.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Zn.warn(n.message)}}}function kN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=1024,f3=30;class p3{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new x3(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=py();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>f3){const o=w3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Zn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=py(),{heartbeatsToSend:n,unsentEntries:s}=g3(this._heartbeatsCache.heartbeats),a=Nd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Zn.warn(r),""}}}function py(){return new Date().toISOString().substring(0,10)}function g3(t,e=m3){const r=[];let n=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),gy(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),gy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class x3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vN()?bN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await h3(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return fy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return fy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function gy(t){return Nd(JSON.stringify({version:2,heartbeats:t})).length}function w3(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){sn(new Vr("platform-logger",e=>new A4(e),"PRIVATE")),sn(new Vr("heartbeat",e=>new p3(e),"PRIVATE")),gr(lp,hy,t),gr(lp,hy,"esm2020"),gr("fire-js","")}y3("");const CN="@firebase/installations",Gg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=1e4,IN=`w:${Gg}`,AN="FIS_v2",v3="https://firebaseinstallations.googleapis.com/v1",b3=60*60*1e3,N3="installations",_3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ui=new Xi(N3,_3,j3);function PN(t){return t instanceof zr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN({projectId:t}){return`${v3}/projects/${t}/installations`}function DN(t){return{token:t.token,requestStatus:2,expiresIn:S3(t.expiresIn),creationTime:Date.now()}}async function MN(t,e){const n=(await e.json()).error;return Ui.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function LN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function E3(t,{refreshToken:e}){const r=LN(t);return r.append("Authorization",k3(e)),r}async function ON(t){const e=await t();return e.status>=500&&e.status<600?t():e}function S3(t){return Number(t.replace("s","000"))}function k3(t){return`${AN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=RN(t),s=LN(t),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:r,authVersion:AN,appId:t.appId,sdkVersion:IN},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await ON(()=>fetch(n,l));if(c.ok){const d=await c.json();return{fid:d.fid||r,registrationStatus:2,refreshToken:d.refreshToken,authToken:DN(d.authToken)}}else throw await MN("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=/^[cdef][\w-]{21}$/,dp="";function A3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=P3(t);return I3.test(r)?r:dp}catch{return dp}}function P3(t){return T3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new Map;function UN(t,e){const r=yh(t);zN(r,e),R3(r,e)}function zN(t,e){const r=FN.get(t);if(r)for(const n of r)n(e)}function R3(t,e){const r=D3();r&&r.postMessage({key:t,fid:e}),M3()}let Ei=null;function D3(){return!Ei&&"BroadcastChannel"in self&&(Ei=new BroadcastChannel("[Firebase] FID Change"),Ei.onmessage=t=>{zN(t.data.key,t.data.fid)}),Ei}function M3(){FN.size===0&&Ei&&(Ei.close(),Ei=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="firebase-installations-database",O3=1,zi="firebase-installations-store";let Bm=null;function Kg(){return Bm||(Bm=jN(L3,O3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(zi)}}})),Bm}async function jd(t,e){const r=yh(t),s=(await Kg()).transaction(zi,"readwrite"),a=s.objectStore(zi),o=await a.get(r);return await a.put(e,r),await s.done,(!o||o.fid!==e.fid)&&UN(t,e.fid),e}async function $N(t){const e=yh(t),n=(await Kg()).transaction(zi,"readwrite");await n.objectStore(zi).delete(e),await n.done}async function vh(t,e){const r=yh(t),s=(await Kg()).transaction(zi,"readwrite"),a=s.objectStore(zi),o=await a.get(r),l=e(o);return l===void 0?await a.delete(r):await a.put(l,r),await s.done,l&&(!o||o.fid!==l.fid)&&UN(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qg(t){let e;const r=await vh(t.appConfig,n=>{const s=V3(n),a=F3(t,s);return e=a.registrationPromise,a.installationEntry});return r.fid===dp?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function V3(t){const e=t||{fid:A3(),registrationStatus:0};return BN(e)}function F3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ui.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=U3(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:z3(t)}:{installationEntry:e}}async function U3(t,e){try{const r=await C3(t,e);return jd(t.appConfig,r)}catch(r){throw PN(r)&&r.customData.serverCode===409?await $N(t.appConfig):await jd(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function z3(t){let e=await xy(t.appConfig);for(;e.registrationStatus===1;)await VN(100),e=await xy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Qg(t);return n||r}return e}function xy(t){return vh(t,e=>{if(!e)throw Ui.create("installation-not-found");return BN(e)})}function BN(t){return $3(t)?{fid:t.fid,registrationStatus:0}:t}function $3(t){return t.registrationStatus===1&&t.registrationTime+TN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3({appConfig:t,heartbeatServiceProvider:e},r){const n=q3(t,r),s=E3(t,r),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:IN,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await ON(()=>fetch(n,l));if(c.ok){const d=await c.json();return DN(d)}else throw await MN("Generate Auth Token",c)}function q3(t,{fid:e}){return`${RN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yg(t,e=!1){let r;const n=await vh(t.appConfig,a=>{if(!qN(a))throw Ui.create("not-registered");const o=a.authToken;if(!e&&G3(o))return a;if(o.requestStatus===1)return r=H3(t,e),a;{if(!navigator.onLine)throw Ui.create("app-offline");const l=Q3(a);return r=W3(t,l),l}});return r?await r:n.authToken}async function H3(t,e){let r=await wy(t.appConfig);for(;r.authToken.requestStatus===1;)await VN(100),r=await wy(t.appConfig);const n=r.authToken;return n.requestStatus===0?Yg(t,e):n}function wy(t){return vh(t,e=>{if(!qN(e))throw Ui.create("not-registered");const r=e.authToken;return Y3(r)?{...e,authToken:{requestStatus:0}}:e})}async function W3(t,e){try{const r=await B3(t,e),n={...e,authToken:r};return await jd(t.appConfig,n),r}catch(r){if(PN(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await $N(t.appConfig);else{const n={...e,authToken:{requestStatus:0}};await jd(t.appConfig,n)}throw r}}function qN(t){return t!==void 0&&t.registrationStatus===2}function G3(t){return t.requestStatus===2&&!K3(t)}function K3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+b3}function Q3(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Y3(t){return t.requestStatus===1&&t.requestTime+TN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t){const e=t,{installationEntry:r,registrationPromise:n}=await Qg(e);return n?n.catch(console.error):Yg(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,e=!1){const r=t;return await Z3(r),(await Yg(r,e)).token}async function Z3(t){const{registrationPromise:e}=await Qg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){if(!t||!t.options)throw qm("App Configuration");if(!t.name)throw qm("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw qm(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function qm(t){return Ui.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="installations",tA="installations-internal",rA=t=>{const e=t.getProvider("app").getImmediate(),r=eA(e),n=ii(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},nA=t=>{const e=t.getProvider("app").getImmediate(),r=ii(e,HN).getImmediate();return{getId:()=>X3(r),getToken:s=>J3(r,s)}};function sA(){sn(new Vr(HN,rA,"PUBLIC")),sn(new Vr(tA,nA,"PRIVATE"))}sA();gr(CN,Gg);gr(CN,Gg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="analytics",iA="firebase_id",aA="origin",oA=60*1e3,lA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sr=new Xi("analytics","Analytics",cA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){if(!t.startsWith(Xg)){const e=Sr.create("invalid-gtag-resource",{gtagURL:t});return xr.warn(e.message),""}return t}function WN(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function dA(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function hA(t,e){const r=dA("firebase-js-sdk-policy",{createScriptURL:uA}),n=document.createElement("script"),s=`${Xg}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function mA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function fA(t,e,r,n,s,a){const o=n[s];try{if(o)await e[o];else{const c=(await WN(r)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){xr.error(l)}t("config",s,a)}async function pA(t,e,r,n,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await WN(r);for(const c of o){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",n,s||{})}catch(a){xr.error(a)}}function gA(t,e,r,n){async function s(a,...o){try{if(a==="event"){const[l,c]=o;await pA(t,e,r,l,c)}else if(a==="config"){const[l,c]=o;await fA(t,e,r,n,l,c)}else if(a==="consent"){const[l,c]=o;t("consent",l,c)}else if(a==="get"){const[l,c,d]=o;t("get",l,c,d)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){xr.error(l)}}return s}function xA(t,e,r,n,s){let a=function(...o){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=gA(a,t,e,r),{gtagCore:a,wrappedGtag:window[s]}}function wA(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(Xg)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=30,vA=1e3;class bA{constructor(e={},r=vA){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const GN=new bA;function NA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function _A(t){var o;const{appId:e,apiKey:r}=t,n={method:"GET",headers:NA(r)},s=lA.replace("{app-id}",e),a=await fetch(s,n);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw Sr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function jA(t,e=GN,r){const{appId:n,apiKey:s,measurementId:a}=t.options;if(!n)throw Sr.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:n};throw Sr.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new kA;return setTimeout(async()=>{l.abort()},oA),KN({appId:n,apiKey:s,measurementId:a},o,l,e)}async function KN(t,{throttleEndTimeMillis:e,backoffCount:r},n,s=GN){var l;const{appId:a,measurementId:o}=t;try{await EA(n,e)}catch(c){if(o)return xr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:o};throw c}try{const c=await _A(t);return s.deleteThrottleMetadata(a),c}catch(c){const d=c;if(!SA(d)){if(s.deleteThrottleMetadata(a),o)return xr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:o};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?ly(r,s.intervalMillis,yA):ly(r,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:r+1};return s.setThrottleMetadata(a,f),xr.debug(`Calling attemptFetch again in ${h} millis`),KN(t,f,n,s)}}function EA(t,e){return new Promise((r,n)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(r,s);t.addEventListener(()=>{clearTimeout(a),n(Sr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function SA(t){if(!(t instanceof zr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class kA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function CA(t,e,r,n,s){if(s&&s.global){t("event",r,n);return}else{const a=await e,o={...n,send_to:a};t("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(){if(vN())try{await bN()}catch(t){return xr.warn(Sr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return xr.warn(Sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IA(t,e,r,n,s,a,o){const l=jA(t);l.then(m=>{r[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&xr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>xr.error(m)),e.push(l);const c=TA().then(m=>{if(m)return n.getId()}),[d,h]=await Promise.all([l,c]);wA(a)||hA(a,d.measurementId),s("js",new Date);const f=(o==null?void 0:o.config)??{};return f[aA]="firebase",f.update=!0,h!=null&&(f[iA]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.app=e}_delete(){return delete fl[this.app.options.appId],Promise.resolve()}}let fl={},yy=[];const vy={};let Hm="dataLayer",PA="gtag",by,QN,Ny=!1;function RA(){const t=[];if(yN()&&t.push("This is a browser extension environment."),t4()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,s)=>`(${s+1}) ${n}`).join(" "),r=Sr.create("invalid-analytics-context",{errorInfo:e});xr.warn(r.message)}}function DA(t,e,r){RA();const n=t.options.appId;if(!n)throw Sr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)xr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sr.create("no-api-key");if(fl[n]!=null)throw Sr.create("already-exists",{id:n});if(!Ny){mA(Hm);const{wrappedGtag:a,gtagCore:o}=xA(fl,yy,vy,Hm,PA);QN=a,by=o,Ny=!0}return fl[n]=IA(t,yy,vy,e,by,Hm,r),new AA(t)}function MA(t=wh()){t=Ue(t);const e=ii(t,Ed);return e.isInitialized()?e.getImmediate():LA(t)}function LA(t,e={}){const r=ii(t,Ed);if(r.isInitialized()){const s=r.getImmediate();if(qs(e,r.getOptions()))return s;throw Sr.create("already-initialized")}return r.initialize({options:e})}function OA(t,e,r,n){t=Ue(t),CA(QN,fl[t.app.options.appId],e,r,n).catch(s=>xr.error(s))}const _y="@firebase/analytics",jy="0.10.18";function VA(){sn(new Vr(Ed,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return DA(n,s,r)},"PUBLIC")),sn(new Vr("analytics-internal",t,"PRIVATE")),gr(_y,jy),gr(_y,jy,"esm2020");function t(e){try{const r=e.getProvider(Ed).getImmediate();return{logEvent:(n,s,a)=>OA(r,n,s,a)}}catch(r){throw Sr.create("interop-component-reg-failed",{reason:r})}}}VA();function YN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XN=YN,JN=new Xi("auth","Firebase",YN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new xh("@firebase/auth");function FA(t,...e){Sd.logLevel<=Ee.WARN&&Sd.warn(`Auth (${Ji}): ${t}`,...e)}function Uu(t,...e){Sd.logLevel<=Ee.ERROR&&Sd.error(`Auth (${Ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw Zg(t,...e)}function en(t,...e){return Zg(t,...e)}function Jg(t,e,r){const n={...XN(),[e]:r};return new Xi("auth","Firebase",n).create(e,{appName:t.name})}function Hn(t){return Jg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UA(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Fr(t,"argument-error"),Jg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zg(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return JN.create(t,...e)}function me(t,e,...r){if(!t)throw Zg(e,...r)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uu(e),new Error(e)}function es(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function zA(){return Ey()==="http:"||Ey()==="https:"}function Ey(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zA()||yN()||"connection"in navigator)?navigator.onLine:!0}function BA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,r){this.shortDelay=e,this.longDelay=r,es(r>e,"Short delay should be less than long delay!"),this.isMobile=QI()||JI()}get(){return $A()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){es(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WA=new cc(3e4,6e4);function is(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function kn(t,e,r,n,s={}){return e_(t,s,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=lc({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...a};return XI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&si(t.emulatorConfig.host)&&(d.credentials="include"),ZN.fetch()(await t_(t,t.config.apiHost,r,l),d)})}async function e_(t,e,r){t._canInitEmulator=!1;const n={...qA,...e};try{const s=new KA(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw fu(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw fu(t,"user-disabled",o);const h=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Jg(t,h,d);Fr(t,h)}}catch(s){if(s instanceof zr)throw s;Fr(t,"network-request-failed",{message:String(s)})}}async function uc(t,e,r,n,s={}){const a=await kn(t,e,r,n,s);return"mfaPendingCredential"in a&&Fr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function t_(t,e,r,n){const s=`${e}${r}?${n}`,a=t,o=a.config.emulator?e0(t.config,s):`${t.config.apiScheme}://${s}`;return HA.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function GA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(en(this.auth,"network-request-failed")),WA.get())})}}function fu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=en(t,e,n);return s.customData._tokenResponse=r,s}function Sy(t){return t!==void 0&&t.enterprise!==void 0}class QA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return GA(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YA(t,e){return kn(t,"GET","/v2/recaptchaConfig",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function kd(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r_(t,e=!1){const r=Ue(t),n=await r.getIdToken(e),s=t0(n);me(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:pl(Wm(s.auth_time)),issuedAtTime:pl(Wm(s.iat)),expirationTime:pl(Wm(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Wm(t){return Number(t)*1e3}function t0(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Uu("JWT malformed, contained fewer than 3 sections"),null;try{const s=mN(r);return s?JSON.parse(s):(Uu("Failed to decode base64 JWT payload"),null)}catch(s){return Uu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ky(t){const e=t0(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof zr&&JA(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function JA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=pl(this.lastLoginAt),this.creationTime=pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){var f;const e=t.auth,r=await t.getIdToken(),n=await Ga(t,kd(e,{idToken:r}));me(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const a=(f=s.providerUserInfo)!=null&&f.length?s_(s.providerUserInfo):[],o=eP(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new mp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function n_(t){const e=Ue(t);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eP(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function s_(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(t,e){const r=await e_(t,{},async()=>{const n=lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await t_(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&si(t.emulatorConfig.host)&&(c.credentials="include"),ZN.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function rP(t,e){return kn(t,"POST","/v2/accounts:revokeToken",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ky(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){me(e.length!==0,"internal-error");const r=ky(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await tP(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,o=new Ra;return n&&(me(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(me(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ra,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kr{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new ZA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return me(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return r_(this,e)}reload(){return n_(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Kr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Cd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(Hn(this.auth));const e=await this.getIdToken();return await Ga(this,XA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,d=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:N,stsTokenManager:E}=r;me(f&&E,e,"internal-error");const C=Ra.fromJSON(this.name,E);me(typeof f=="string",e,"internal-error"),ps(n,e.name),ps(s,e.name),me(typeof m=="boolean",e,"internal-error"),me(typeof y=="boolean",e,"internal-error"),ps(a,e.name),ps(o,e.name),ps(l,e.name),ps(c,e.name),ps(d,e.name),ps(h,e.name);const x=new Kr({uid:f,auth:e,email:s,emailVerified:m,displayName:n,isAnonymous:y,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:C,createdAt:d,lastLoginAt:h});return N&&Array.isArray(N)&&(x.providerData=N.map(w=>({...w}))),c&&(x._redirectEventId=c),x}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ra;s.updateFromServerResponse(r);const a=new Kr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Cd(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];me(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?s_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Ra;l.updateFromIdToken(n);const c=new Kr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=new Map;function zn(t){es(t instanceof Function,"Expected a class definition");let e=Cy.get(t);return e?(es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}i_.type="NONE";const fp=i_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,r){return`firebase:${t}:${e}:${r}`}class Da{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=zu(this.userKey,s.apiKey,a),this.fullPersistenceKey=zu("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await kd(this.auth,{idToken:e}).catch(()=>{});return r?Kr._fromGetAccountInfoResponse(this.auth,r,e):null}return Kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Da(zn(fp),e,n);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||zn(fp);const o=zu(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const m=await kd(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Kr._fromGetAccountInfoResponse(e,m,h)}else f=Kr._fromJSON(e,h);d!==a&&(l=f),a=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Da(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Da(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d_(e))return"Blackberry";if(h_(e))return"Webos";if(o_(e))return"Safari";if((e.includes("chrome/")||l_(e))&&!e.includes("edge/"))return"Chrome";if(u_(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function a_(t=Jt()){return/firefox\//i.test(t)}function o_(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l_(t=Jt()){return/crios\//i.test(t)}function c_(t=Jt()){return/iemobile/i.test(t)}function u_(t=Jt()){return/android/i.test(t)}function d_(t=Jt()){return/blackberry/i.test(t)}function h_(t=Jt()){return/webos/i.test(t)}function r0(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nP(t=Jt()){var e;return r0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function sP(){return ZI()&&document.documentMode===10}function m_(t=Jt()){return r0(t)||u_(t)||h_(t)||d_(t)||/windows phone/i.test(t)||c_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t,e=[]){let r;switch(t){case"Browser":r=Ty(Jt());break;case"Worker":r=`${Ty(Jt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ji}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e={}){return kn(t,"GET","/v2/passwordPolicy",is(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=6;class lP{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??oP,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iy(this),this.idTokenSubscription=new Iy(this),this.beforeStateQueue=new iP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=zn(r)),this._initializationPromise=this.queue(async()=>{var n,s,a;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await kd(this,{idToken:e}),n=await Kr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(Hn(this));const r=e?Ue(e):null;return r&&me(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aP(this),r=new lP(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xi("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await rP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&zn(e)||this._popupRedirectResolver;me(r,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[zn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&FA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function as(t){return Ue(t)}class Iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=a4(r=>this.observer=r)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uP(t){bh=t}function p_(t){return bh.loadJS(t)}function dP(){return bh.recaptchaEnterpriseScript}function hP(){return bh.gapiScript}function mP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class fP{constructor(){this.enterprise=new pP}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class pP{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const gP="recaptcha-enterprise",g_="NO_RECAPTCHA";class xP{constructor(e){this.type=gP,this.auth=as(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{YA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new QA(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;Sy(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(g_)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fP().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&Sy(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=dP();c.length!==0&&(c+=l),p_(c).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ay(t,e,r,n=!1,s=!1){const a=new xP(t);let o;if(s)o=g_;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Td(t,e,r,n,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ay(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ay(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e){const r=ii(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(qs(a,e??{}))return s;Fr(s,"already-initialized")}return r.initialize({options:e})}function wP(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function w_(t,e,r){const n=as(t);me(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!!(r!=null&&r.disableWarnings),a=y_(e),{host:o,port:l}=yP(e),c=l===null?"":`:${l}`,d={url:`${a}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){me(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),me(qs(d,n.config.emulator)&&qs(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,si(o)?(qg(`${a}//${o}${c}`),Hg("Auth",!0)):vP()}function y_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yP(t){const e=y_(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:Py(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:Py(o)}}}function Py(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vP(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,r){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function bP(t,e){return kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e){return uc(t,"POST","/v1/accounts:signInWithPassword",is(t,e))}async function _P(t,e){return kn(t,"POST","/v1/accounts:sendOobCode",is(t,e))}async function jP(t,e){return _P(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,e){return uc(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}async function SP(t,e){return uc(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Nh{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Ka(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Ka(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Td(e,r,"signInWithPassword",NP);case"emailLink":return EP(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Td(e,n,"signUpPassword",bP);case"emailLink":return SP(e,{idToken:r,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e){return uc(t,"POST","/v1/accounts:signInWithIdp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="http://localhost";class Hs extends Nh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Fr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...a}=r;if(!n||!s)return null;const o=new Hs(n,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Ma(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ma(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ma(e,r)}buildRequest(){const e={requestUri:kP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=lc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TP(t){const e=Jo(Zo(t)).link,r=e?Jo(Zo(e)).deep_link_id:null,n=Jo(Zo(t)).deep_link_id;return(n?Jo(Zo(n)).link:null)||n||r||e||t}class _h{constructor(e){const r=Jo(Zo(e)),n=r.apiKey??null,s=r.oobCode??null,a=CP(r.mode??null);me(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=TP(e);try{return new _h(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.providerId=Zi.PROVIDER_ID}static credential(e,r){return Ka._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=_h.parseLink(r);return me(n,"argument-error"),Ka._fromEmailAndCode(e,n.code,n.tenantId)}}Zi.PROVIDER_ID="password";Zi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends n0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends dc{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dn.credential(e.oauthAccessToken)}catch{return null}}}Dn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Hs._fromParams({providerId:pn.PROVIDER_ID,signInMethod:pn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return pn.credentialFromTaggedObject(e)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return pn.credential(r,n)}catch{return null}}}pn.GOOGLE_SIGN_IN_METHOD="google.com";pn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends dc{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mn.credential(e.oauthAccessToken)}catch{return null}}}Mn.GITHUB_SIGN_IN_METHOD="github.com";Mn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends dc{constructor(){super("twitter.com")}static credential(e,r){return Hs._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ln.credential(r,n)}catch{return null}}}Ln.TWITTER_SIGN_IN_METHOD="twitter.com";Ln.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(t,e){return uc(t,"POST","/v1/accounts:signUp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await Kr._fromIdTokenResponse(e,n,s),o=Ry(n);return new $i({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Ry(n);return new $i({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Ry(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends zr{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Id(e,r,n,s)}}function v_(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Id._fromErrorAndOperation(t,a,e,n):a})}async function AP(t,e,r=!1){const n=await Ga(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return $i._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(t,e,r=!1){const{auth:n}=t;if(cr(n.app))return Promise.reject(Hn(n));const s="reauthenticate";try{const a=await Ga(t,v_(n,s,e,t),r);me(a.idToken,n,"internal-error");const o=t0(a.idToken);me(o,n,"internal-error");const{sub:l}=o;return me(t.uid===l,n,"user-mismatch"),$i._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fr(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b_(t,e,r=!1){if(cr(t.app))return Promise.reject(Hn(t));const n="signIn",s=await v_(t,n,e),a=await $i._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function N_(t,e){return b_(as(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t,e,r){var n;me(((n=r.url)==null?void 0:n.length)>0,t,"invalid-continue-uri"),me(typeof r.dynamicLinkDomain>"u"||r.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),me(typeof r.linkDomain>"u"||r.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=r.url,e.dynamicLinkDomain=r.dynamicLinkDomain,e.linkDomain=r.linkDomain,e.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(me(r.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=r.iOS.bundleId),r.android&&(me(r.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=r.android.installApp,e.androidMinimumVersionCode=r.android.minimumVersion,e.androidPackageName=r.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __(t){const e=as(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DP(t,e,r){const n=as(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};r&&RP(n,s,r),await Td(n,s,"getOobCode",jP)}async function j_(t,e,r){if(cr(t.app))return Promise.reject(Hn(t));const n=as(t),o=await Td(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IP).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&__(t),c}),l=await $i._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function s0(t,e,r){return cr(t.app)?Promise.reject(Hn(t)):N_(Ue(t),Zi.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&__(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(t,e){return kn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Ue(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Ga(n,MP(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function S_(t,e,r,n){return Ue(t).onIdTokenChanged(e,r,n)}function k_(t,e,r){return Ue(t).beforeAuthStateChanged(e,r)}async function C_(t){return Ue(t).delete()}const Ad="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=1e3,OP=10;class I_ extends T_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);sP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,OP):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},LP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}I_.type="LOCAL";const A_=I_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends T_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}P_.type="SESSION";const i0=P_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new jh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async d=>d(r.origin,a)),c=await VP(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const d=a0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function UP(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function zP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $P(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function BP(){return R_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="firebaseLocalStorageDb",qP=1,Pd="firebaseLocalStorage",M_="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Eh(t,e){return t.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function HP(){const t=indexedDB.deleteDatabase(D_);return new hc(t).toPromise()}function pp(){const t=indexedDB.open(D_,qP);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Pd,{keyPath:M_})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Pd)?e(n):(n.close(),await HP(),e(await pp()))})})}async function Dy(t,e,r){const n=Eh(t,!0).put({[M_]:e,value:r});return new hc(n).toPromise()}async function WP(t,e){const r=Eh(t,!1).get(e),n=await new hc(r).toPromise();return n===void 0?null:n.value}function My(t,e){const r=Eh(t,!0).delete(e);return new hc(r).toPromise()}const GP=800,KP=3;class L_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>KP)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jh._getInstance(BP()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await zP(),!this.activeServiceWorker)return;this.sender=new FP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$P()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await Dy(e,Ad,"1"),await My(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dy(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>WP(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>My(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Eh(s,!1).getAll();return new hc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L_.type="LOCAL";const O_=L_;new cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e){return e?zn(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends Nh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ma(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function QP(t){return b_(t.auth,new o0(t),t.bypassAuthState)}function YP(t){const{auth:e,user:r}=t;return me(r,e,"internal-error"),PP(r,new o0(t),t.bypassAuthState)}async function XP(t){const{auth:e,user:r}=t;return me(r,e,"internal-error"),AP(r,new o0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return YP;default:Fr(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new cc(2e3,1e4);async function U_(t,e,r){if(cr(t.app))return Promise.reject(en(t,"operation-not-supported-in-this-environment"));const n=as(t);UA(t,e,n0);const s=V_(n,r);return new Si(n,"signInViaPopup",e,s).executeNotNull()}class Si extends F_{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,Si.currentPopupAction&&Si.currentPopupAction.cancel(),Si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=a0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JP.get())};e()}}Si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="pendingRedirect",$u=new Map;class eR extends F_{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const n=await tR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tR(t,e){const r=sR(e),n=nR(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function rR(t,e){$u.set(t._key(),e)}function nR(t){return zn(t._redirectPersistence)}function sR(t){return zu(ZP,t.config.apiKey,t.name)}async function iR(t,e,r=!1){if(cr(t.app))return Promise.reject(Hn(t));const n=as(t),s=V_(n,e),o=await new eR(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=10*60*1e3;class oR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lR(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!z_(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(en(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ly(e))}saveEventToCache(e){this.cachedEventUids.add(Ly(e)),this.lastProcessedEventTime=Date.now()}}function Ly(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function z_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dR=/^https?/;async function hR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cR(t);for(const r of e)try{if(mR(r))return}catch{}Fr(t,"unauthorized-domain")}function mR(t){const e=hp(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!dR.test(r))return!1;if(uR.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new cc(3e4,6e4);function Oy(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function pR(t){return new Promise((e,r)=>{var s,a,o;function n(){Oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Oy(),r(en(t,"network-request-failed"))},timeout:fR.get()})}if((a=(s=wn().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=wn().gapi)!=null&&o.load)n();else{const l=mP("iframefcb");return wn()[l]=()=>{gapi.load?n():r(en(t,"network-request-failed"))},p_(`${hP()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function gR(t){return Bu=Bu||pR(t),Bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new cc(5e3,15e3),wR="__/auth/iframe",yR="emulator/auth/iframe",vR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NR(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?e0(e,yR):`https://${t.config.authDomain}/${wR}`,n={apiKey:e.apiKey,appName:t.name,v:Ji},s=bR.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${lc(n).slice(1)}`}async function _R(t){const e=await gR(t),r=wn().gapi;return me(r,t,"internal-error"),e.open({where:document.body,url:NR(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vR,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const o=en(t,"network-request-failed"),l=wn().setTimeout(()=>{a(o)},xR.get());function c(){wn().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ER=500,SR=600,kR="_blank",CR="http://localhost";class Vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TR(t,e,r,n=ER,s=SR){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...jR,width:n.toString(),height:s.toString(),top:a,left:o},d=Jt().toLowerCase();r&&(l=l_(d)?kR:r),a_(d)&&(e=e||CR,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,N])=>`${m}${y}=${N},`,"");if(nP(d)&&l!=="_self")return IR(e||"",l),new Vy(null);const f=window.open(e||"",l,h);me(f,t,"popup-blocked");try{f.focus()}catch{}return new Vy(f)}function IR(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="__/auth/handler",PR="emulator/auth/handler",RR=encodeURIComponent("fac");async function Fy(t,e,r,n,s,a){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Ji,eventId:s};if(e instanceof n0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",i4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof dc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${RR}=${encodeURIComponent(c)}`:"";return`${DR(t)}?${lc(l).slice(1)}${d}`}function DR({config:t}){return t.emulator?e0(t,PR):`https://${t.authDomain}/${AR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class MR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i0,this._completeRedirectFn=iR,this._overrideRedirectResult=rR}async _openPopup(e,r,n,s){var o;es((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Fy(e,r,n,hp(),s);return TR(e,a,a0())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await Fy(e,r,n,hp(),s);return UP(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(es(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await _R(e),n=new oR(e);return r.register("authEvent",s=>(me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Gm,{type:Gm},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[Gm];a!==void 0&&r(!!a),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=hR(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return m_()||o_()||r0()}}const $_=MR;var Uy="@firebase/auth",zy="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VR(t){sn(new Vr("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f_(t)},d=new cP(n,s,a,c);return wP(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),sn(new Vr("auth-internal",e=>{const r=as(e.getProvider("auth").getImmediate());return(n=>new LR(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(Uy,zy,OR(t)),gr(Uy,zy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=5*60,UR=xN("authIdTokenMaxAge")||FR;let $y=null;const zR=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>UR)return;const s=r==null?void 0:r.token;$y!==s&&($y=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function B_(t=wh()){const e=ii(t,"auth");if(e.isInitialized())return e.getImmediate();const r=x_(t,{popupRedirectResolver:$_,persistence:[O_,A_,i0]}),n=xN("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=zR(a.toString());k_(r,o,()=>o(r.currentUser)),S_(r,l=>o(l))}}const s=fN("auth");return s&&w_(r,`http://${s}`),r}function $R(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}uP({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=en("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",$R().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VR("Browser");const BR=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:_h,AuthCredential:Nh,EmailAuthCredential:Ka,EmailAuthProvider:Zi,FacebookAuthProvider:Dn,GithubAuthProvider:Mn,GoogleAuthProvider:pn,OAuthCredential:Hs,TwitterAuthProvider:Ln,beforeAuthStateChanged:k_,browserLocalPersistence:A_,browserPopupRedirectResolver:$_,browserSessionPersistence:i0,connectAuthEmulator:w_,createUserWithEmailAndPassword:j_,deleteUser:C_,getAuth:B_,getIdTokenResult:r_,inMemoryPersistence:fp,indexedDBLocalPersistence:O_,initializeAuth:x_,onIdTokenChanged:S_,prodErrorMap:XN,reload:n_,sendPasswordResetEmail:DP,signInWithCredential:N_,signInWithEmailAndPassword:s0,signInWithPopup:U_,updateProfile:E_},Symbol.toStringTag,{value:"Module"}));var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,q_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,_){function S(){}S.prototype=_.prototype,A.D=_.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(k,T,D){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return _.prototype[T].apply(k,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,_,S){S||(S=0);var k=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)k[T]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(T=0;16>T;++T)k[T]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=A.g[0],S=A.g[1],T=A.g[2];var D=A.g[3],P=_+(D^S&(T^D))+k[0]+3614090360&4294967295;_=S+(P<<7&4294967295|P>>>25),P=D+(T^_&(S^T))+k[1]+3905402710&4294967295,D=_+(P<<12&4294967295|P>>>20),P=T+(S^D&(_^S))+k[2]+606105819&4294967295,T=D+(P<<17&4294967295|P>>>15),P=S+(_^T&(D^_))+k[3]+3250441966&4294967295,S=T+(P<<22&4294967295|P>>>10),P=_+(D^S&(T^D))+k[4]+4118548399&4294967295,_=S+(P<<7&4294967295|P>>>25),P=D+(T^_&(S^T))+k[5]+1200080426&4294967295,D=_+(P<<12&4294967295|P>>>20),P=T+(S^D&(_^S))+k[6]+2821735955&4294967295,T=D+(P<<17&4294967295|P>>>15),P=S+(_^T&(D^_))+k[7]+4249261313&4294967295,S=T+(P<<22&4294967295|P>>>10),P=_+(D^S&(T^D))+k[8]+1770035416&4294967295,_=S+(P<<7&4294967295|P>>>25),P=D+(T^_&(S^T))+k[9]+2336552879&4294967295,D=_+(P<<12&4294967295|P>>>20),P=T+(S^D&(_^S))+k[10]+4294925233&4294967295,T=D+(P<<17&4294967295|P>>>15),P=S+(_^T&(D^_))+k[11]+2304563134&4294967295,S=T+(P<<22&4294967295|P>>>10),P=_+(D^S&(T^D))+k[12]+1804603682&4294967295,_=S+(P<<7&4294967295|P>>>25),P=D+(T^_&(S^T))+k[13]+4254626195&4294967295,D=_+(P<<12&4294967295|P>>>20),P=T+(S^D&(_^S))+k[14]+2792965006&4294967295,T=D+(P<<17&4294967295|P>>>15),P=S+(_^T&(D^_))+k[15]+1236535329&4294967295,S=T+(P<<22&4294967295|P>>>10),P=_+(T^D&(S^T))+k[1]+4129170786&4294967295,_=S+(P<<5&4294967295|P>>>27),P=D+(S^T&(_^S))+k[6]+3225465664&4294967295,D=_+(P<<9&4294967295|P>>>23),P=T+(_^S&(D^_))+k[11]+643717713&4294967295,T=D+(P<<14&4294967295|P>>>18),P=S+(D^_&(T^D))+k[0]+3921069994&4294967295,S=T+(P<<20&4294967295|P>>>12),P=_+(T^D&(S^T))+k[5]+3593408605&4294967295,_=S+(P<<5&4294967295|P>>>27),P=D+(S^T&(_^S))+k[10]+38016083&4294967295,D=_+(P<<9&4294967295|P>>>23),P=T+(_^S&(D^_))+k[15]+3634488961&4294967295,T=D+(P<<14&4294967295|P>>>18),P=S+(D^_&(T^D))+k[4]+3889429448&4294967295,S=T+(P<<20&4294967295|P>>>12),P=_+(T^D&(S^T))+k[9]+568446438&4294967295,_=S+(P<<5&4294967295|P>>>27),P=D+(S^T&(_^S))+k[14]+3275163606&4294967295,D=_+(P<<9&4294967295|P>>>23),P=T+(_^S&(D^_))+k[3]+4107603335&4294967295,T=D+(P<<14&4294967295|P>>>18),P=S+(D^_&(T^D))+k[8]+1163531501&4294967295,S=T+(P<<20&4294967295|P>>>12),P=_+(T^D&(S^T))+k[13]+2850285829&4294967295,_=S+(P<<5&4294967295|P>>>27),P=D+(S^T&(_^S))+k[2]+4243563512&4294967295,D=_+(P<<9&4294967295|P>>>23),P=T+(_^S&(D^_))+k[7]+1735328473&4294967295,T=D+(P<<14&4294967295|P>>>18),P=S+(D^_&(T^D))+k[12]+2368359562&4294967295,S=T+(P<<20&4294967295|P>>>12),P=_+(S^T^D)+k[5]+4294588738&4294967295,_=S+(P<<4&4294967295|P>>>28),P=D+(_^S^T)+k[8]+2272392833&4294967295,D=_+(P<<11&4294967295|P>>>21),P=T+(D^_^S)+k[11]+1839030562&4294967295,T=D+(P<<16&4294967295|P>>>16),P=S+(T^D^_)+k[14]+4259657740&4294967295,S=T+(P<<23&4294967295|P>>>9),P=_+(S^T^D)+k[1]+2763975236&4294967295,_=S+(P<<4&4294967295|P>>>28),P=D+(_^S^T)+k[4]+1272893353&4294967295,D=_+(P<<11&4294967295|P>>>21),P=T+(D^_^S)+k[7]+4139469664&4294967295,T=D+(P<<16&4294967295|P>>>16),P=S+(T^D^_)+k[10]+3200236656&4294967295,S=T+(P<<23&4294967295|P>>>9),P=_+(S^T^D)+k[13]+681279174&4294967295,_=S+(P<<4&4294967295|P>>>28),P=D+(_^S^T)+k[0]+3936430074&4294967295,D=_+(P<<11&4294967295|P>>>21),P=T+(D^_^S)+k[3]+3572445317&4294967295,T=D+(P<<16&4294967295|P>>>16),P=S+(T^D^_)+k[6]+76029189&4294967295,S=T+(P<<23&4294967295|P>>>9),P=_+(S^T^D)+k[9]+3654602809&4294967295,_=S+(P<<4&4294967295|P>>>28),P=D+(_^S^T)+k[12]+3873151461&4294967295,D=_+(P<<11&4294967295|P>>>21),P=T+(D^_^S)+k[15]+530742520&4294967295,T=D+(P<<16&4294967295|P>>>16),P=S+(T^D^_)+k[2]+3299628645&4294967295,S=T+(P<<23&4294967295|P>>>9),P=_+(T^(S|~D))+k[0]+4096336452&4294967295,_=S+(P<<6&4294967295|P>>>26),P=D+(S^(_|~T))+k[7]+1126891415&4294967295,D=_+(P<<10&4294967295|P>>>22),P=T+(_^(D|~S))+k[14]+2878612391&4294967295,T=D+(P<<15&4294967295|P>>>17),P=S+(D^(T|~_))+k[5]+4237533241&4294967295,S=T+(P<<21&4294967295|P>>>11),P=_+(T^(S|~D))+k[12]+1700485571&4294967295,_=S+(P<<6&4294967295|P>>>26),P=D+(S^(_|~T))+k[3]+2399980690&4294967295,D=_+(P<<10&4294967295|P>>>22),P=T+(_^(D|~S))+k[10]+4293915773&4294967295,T=D+(P<<15&4294967295|P>>>17),P=S+(D^(T|~_))+k[1]+2240044497&4294967295,S=T+(P<<21&4294967295|P>>>11),P=_+(T^(S|~D))+k[8]+1873313359&4294967295,_=S+(P<<6&4294967295|P>>>26),P=D+(S^(_|~T))+k[15]+4264355552&4294967295,D=_+(P<<10&4294967295|P>>>22),P=T+(_^(D|~S))+k[6]+2734768916&4294967295,T=D+(P<<15&4294967295|P>>>17),P=S+(D^(T|~_))+k[13]+1309151649&4294967295,S=T+(P<<21&4294967295|P>>>11),P=_+(T^(S|~D))+k[4]+4149444226&4294967295,_=S+(P<<6&4294967295|P>>>26),P=D+(S^(_|~T))+k[11]+3174756917&4294967295,D=_+(P<<10&4294967295|P>>>22),P=T+(_^(D|~S))+k[2]+718787259&4294967295,T=D+(P<<15&4294967295|P>>>17),P=S+(D^(T|~_))+k[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(T+(P<<21&4294967295|P>>>11))&4294967295,A.g[2]=A.g[2]+T&4294967295,A.g[3]=A.g[3]+D&4294967295}n.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var S=_-this.blockSize,k=this.B,T=this.h,D=0;D<_;){if(T==0)for(;D<=S;)s(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<_;)if(k[T++]=A.charCodeAt(D++),T==this.blockSize){s(this,k),T=0;break}}else for(;D<_;)if(k[T++]=A[D++],T==this.blockSize){s(this,k),T=0;break}}this.h=T,this.o+=_},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var S=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=S&255,S/=256;for(this.u(A),A=Array(16),_=S=0;4>_;++_)for(var k=0;32>k;k+=8)A[S++]=this.g[_]>>>k&255;return A};function a(A,_){var S=l;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=_(A)}function o(A,_){this.h=_;for(var S=[],k=!0,T=A.length-1;0<=T;T--){var D=A[T]|0;k&&D==_||(S[T]=D,k=!1)}this.g=S}var l={};function c(A){return-128<=A&&128>A?a(A,function(_){return new o([_|0],0>_?-1:0)}):new o([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return C(d(-A));for(var _=[],S=1,k=0;A>=S;k++)_[k]=A/S|0,S*=4294967296;return new o(_,0)}function h(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return C(h(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(_,8)),k=f,T=0;T<A.length;T+=8){var D=Math.min(8,A.length-T),P=parseInt(A.substring(T,T+D),_);8>D?(D=d(Math.pow(_,D)),k=k.j(D).add(d(P))):(k=k.j(S),k=k.add(d(P)))}return k}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(E(this))return-C(this).m();for(var A=0,_=1,S=0;S<this.g.length;S++){var k=this.i(S);A+=(0<=k?k:4294967296+k)*_,_*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N(this))return"0";if(E(this))return"-"+C(this).toString(A);for(var _=d(Math.pow(A,6)),S=this,k="";;){var T=b(S,_).g;S=x(S,T.j(_));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=T,N(S))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function N(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function E(A){return A.h==-1}t.l=function(A){return A=x(this,A),E(A)?-1:N(A)?0:1};function C(A){for(var _=A.g.length,S=[],k=0;k<_;k++)S[k]=~A.g[k];return new o(S,~A.h).add(m)}t.abs=function(){return E(this)?C(this):this},t.add=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],k=0,T=0;T<=_;T++){var D=k+(this.i(T)&65535)+(A.i(T)&65535),P=(D>>>16)+(this.i(T)>>>16)+(A.i(T)>>>16);k=P>>>16,D&=65535,P&=65535,S[T]=P<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function x(A,_){return A.add(C(_))}t.j=function(A){if(N(this)||N(A))return f;if(E(this))return E(A)?C(this).j(C(A)):C(C(this).j(A));if(E(A))return C(this.j(C(A)));if(0>this.l(y)&&0>A.l(y))return d(this.m()*A.m());for(var _=this.g.length+A.g.length,S=[],k=0;k<2*_;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var T=0;T<A.g.length;T++){var D=this.i(k)>>>16,P=this.i(k)&65535,$=A.i(T)>>>16,ae=A.i(T)&65535;S[2*k+2*T]+=P*ae,w(S,2*k+2*T),S[2*k+2*T+1]+=D*ae,w(S,2*k+2*T+1),S[2*k+2*T+1]+=P*$,w(S,2*k+2*T+1),S[2*k+2*T+2]+=D*$,w(S,2*k+2*T+2)}for(k=0;k<_;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=_;k<2*_;k++)S[k]=0;return new o(S,0)};function w(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function g(A,_){this.g=A,this.h=_}function b(A,_){if(N(_))throw Error("division by zero");if(N(A))return new g(f,f);if(E(A))return _=b(C(A),_),new g(C(_.g),C(_.h));if(E(_))return _=b(A,C(_)),new g(C(_.g),_.h);if(30<A.g.length){if(E(A)||E(_))throw Error("slowDivide_ only works with positive integers.");for(var S=m,k=_;0>=k.l(A);)S=I(S),k=I(k);var T=M(S,1),D=M(k,1);for(k=M(k,2),S=M(S,2);!N(k);){var P=D.add(k);0>=P.l(A)&&(T=T.add(S),D=P),k=M(k,1),S=M(S,1)}return _=x(A,T.j(_)),new g(T,_)}for(T=f;0<=A.l(_);){for(S=Math.max(1,Math.floor(A.m()/_.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=d(S),P=D.j(_);E(P)||0<P.l(A);)S-=k,D=d(S),P=D.j(_);N(D)&&(D=m),T=T.add(D),A=x(A,P)}return new g(T,A)}t.A=function(A){return b(this,A).h},t.and=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],k=0;k<_;k++)S[k]=this.i(k)&A.i(k);return new o(S,this.h&A.h)},t.or=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],k=0;k<_;k++)S[k]=this.i(k)|A.i(k);return new o(S,this.h|A.h)},t.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],k=0;k<_;k++)S[k]=this.i(k)^A.i(k);return new o(S,this.h^A.h)};function I(A){for(var _=A.g.length+1,S=[],k=0;k<_;k++)S[k]=A.i(k)<<1|A.i(k-1)>>>31;return new o(S,A.h)}function M(A,_){var S=_>>5;_%=32;for(var k=A.g.length-S,T=[],D=0;D<k;D++)T[D]=0<_?A.i(D+S)>>>_|A.i(D+S+1)<<32-_:A.i(D+S);return new o(T,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,q_=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Vs=o}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H_,el,W_,qu,gp,G_,K_,Q_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,j){return u==Array.prototype||u==Object.prototype||(u[p]=j.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pu=="object"&&pu];for(var p=0;p<u.length;++p){var j=u[p];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=r(this);function s(u,p){if(p)e:{var j=n;u=u.split(".");for(var R=0;R<u.length-1;R++){var V=u[R];if(!(V in j))break e;j=j[V]}u=u[u.length-1],R=j[u],p=p(R),p!=R&&p!=null&&e(j,u,{configurable:!0,writable:!0,value:p})}}function a(u,p){u instanceof String&&(u+="");var j=0,R=!1,V={next:function(){if(!R&&j<u.length){var z=j++;return{value:p(z,u[z]),done:!1}}return R=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return a(this,function(p,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function d(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,j){return u.call.apply(u.bind,arguments)}function f(u,p,j){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,R),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function m(u,p,j){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,p){var j=Array.prototype.slice.call(arguments,1);return function(){var R=j.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function N(u,p){function j(){}j.prototype=p.prototype,u.aa=p.prototype,u.prototype=new j,u.prototype.constructor=u,u.Qb=function(R,V,z){for(var ee=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ee[$e-2]=arguments[$e];return p.prototype[V].apply(R,ee)}}function E(u){const p=u.length;if(0<p){const j=Array(p);for(let R=0;R<p;R++)j[R]=u[R];return j}return[]}function C(u,p){for(let j=1;j<arguments.length;j++){const R=arguments[j];if(c(R)){const V=u.length||0,z=R.length||0;u.length=V+z;for(let ee=0;ee<z;ee++)u[V+ee]=R[ee]}else u.push(R)}}class x{constructor(p,j){this.i=p,this.j=j,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(u){return/^[\s\xa0]*$/.test(u)}function g(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var I=g().indexOf("Gecko")!=-1&&!(g().toLowerCase().indexOf("webkit")!=-1&&g().indexOf("Edge")==-1)&&!(g().indexOf("Trident")!=-1||g().indexOf("MSIE")!=-1)&&g().indexOf("Edge")==-1;function M(u,p,j){for(const R in u)p.call(j,u[R],R,u)}function A(u,p){for(const j in u)p.call(void 0,u[j],j,u)}function _(u){const p={};for(const j in u)p[j]=u[j];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let j,R;for(let V=1;V<arguments.length;V++){R=arguments[V];for(j in R)u[j]=R[j];for(let z=0;z<S.length;z++)j=S[z],Object.prototype.hasOwnProperty.call(R,j)&&(u[j]=R[j])}}function T(u){var p=1;u=u.split(":");const j=[];for(;0<p&&u.length;)j.push(u.shift()),p--;return u.length&&j.push(u.join(":")),j}function D(u){l.setTimeout(()=>{throw u},0)}function P(){var u=U;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ${constructor(){this.h=this.g=null}add(p,j){const R=ae.get();R.set(p,j),this.h?this.h.next=R:this.g=R,this.h=R}}var ae=new x(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(p,j){this.h=p,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let F,O=!1,U=new $,q=()=>{const u=l.Promise.resolve(void 0);F=()=>{u.then(ue)}};var ue=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(j){D(j)}var p=ae;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}O=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const j=()=>{};l.addEventListener("test",j,p),l.removeEventListener("test",j,p)}catch{}return u}();function xe(u,p){if(H.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var j=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(I){e:{try{b(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else j=="mouseover"?p=u.fromElement:j=="mouseout"&&(p=u.toElement);this.relatedTarget=p,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:K[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}N(xe,H);var K={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function Fe(u,p,j,R,V){this.listener=u,this.proxy=null,this.src=p,this.type=j,this.capture=!!R,this.ha=V,this.key=++Ce,this.da=this.fa=!1}function Te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vr(u){this.src=u,this.g={},this.h=0}vr.prototype.add=function(u,p,j,R,V){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var ee=go(u,p,R,V);return-1<ee?(p=u[ee],j||(p.fa=!1)):(p=new Fe(p,this.src,z,!!R,V),p.fa=j,u.push(p)),p};function ls(u,p){var j=p.type;if(j in u.g){var R=u.g[j],V=Array.prototype.indexOf.call(R,p,void 0),z;(z=0<=V)&&Array.prototype.splice.call(R,V,1),z&&(Te(p),u.g[j].length==0&&(delete u.g[j],u.h--))}}function go(u,p,j,R){for(var V=0;V<u.length;++V){var z=u[V];if(!z.da&&z.listener==p&&z.capture==!!j&&z.ha==R)return V}return-1}var xo="closure_lm_"+(1e6*Math.random()|0),wo={};function Sc(u,p,j,R,V){if(Array.isArray(p)){for(var z=0;z<p.length;z++)Sc(u,p[z],j,R,V);return null}return j=kc(j),u&&u[Y]?u.K(p,j,d(R)?!!R.capture:!!R,V):Kh(u,p,j,!1,R,V)}function Kh(u,p,j,R,V,z){if(!p)throw Error("Invalid event type");var ee=d(V)?!!V.capture:!!V,$e=vo(u);if($e||(u[xo]=$e=new vr(u)),j=$e.add(p,j,R,ee,z),j.proxy)return j;if(R=Qh(),j.proxy=R,R.src=u,R.listener=j,u.addEventListener)fe||(V=ee),V===void 0&&(V=!1),u.addEventListener(p.toString(),R,V);else if(u.attachEvent)u.attachEvent(di(p.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return j}function Qh(){function u(j){return p.call(u.src,u.listener,j)}const p=Yh;return u}function yo(u,p,j,R,V){if(Array.isArray(p))for(var z=0;z<p.length;z++)yo(u,p[z],j,R,V);else R=d(R)?!!R.capture:!!R,j=kc(j),u&&u[Y]?(u=u.i,p=String(p).toString(),p in u.g&&(z=u.g[p],j=go(z,j,R,V),-1<j&&(Te(z[j]),Array.prototype.splice.call(z,j,1),z.length==0&&(delete u.g[p],u.h--)))):u&&(u=vo(u))&&(p=u.g[p.toString()],u=-1,p&&(u=go(p,j,R,V)),(j=-1<u?p[u]:null)&&ra(j))}function ra(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Y])ls(p.i,u);else{var j=u.type,R=u.proxy;p.removeEventListener?p.removeEventListener(j,R,u.capture):p.detachEvent?p.detachEvent(di(j),R):p.addListener&&p.removeListener&&p.removeListener(R),(j=vo(p))?(ls(j,u),j.h==0&&(j.src=null,p[xo]=null)):Te(u)}}}function di(u){return u in wo?wo[u]:wo[u]="on"+u}function Yh(u,p){if(u.da)u=!0;else{p=new xe(p,this);var j=u.listener,R=u.ha||u.src;u.fa&&ra(u),u=j.call(R,p)}return u}function vo(u){return u=u[xo],u instanceof vr?u:null}var bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function kc(u){return typeof u=="function"?u:(u[bo]||(u[bo]=function(p){return u.handleEvent(p)}),u[bo])}function Nt(){re.call(this),this.i=new vr(this),this.M=this,this.F=null}N(Nt,re),Nt.prototype[Y]=!0,Nt.prototype.removeEventListener=function(u,p,j,R){yo(this,u,p,j,R)};function kt(u,p){var j,R=u.F;if(R)for(j=[];R;R=R.F)j.push(R);if(u=u.M,R=p.type||p,typeof p=="string")p=new H(p,u);else if(p instanceof H)p.target=p.target||u;else{var V=p;p=new H(R,u),k(p,V)}if(V=!0,j)for(var z=j.length-1;0<=z;z--){var ee=p.g=j[z];V=na(ee,R,!0,p)&&V}if(ee=p.g=u,V=na(ee,R,!0,p)&&V,V=na(ee,R,!1,p)&&V,j)for(z=0;z<j.length;z++)ee=p.g=j[z],V=na(ee,R,!1,p)&&V}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var j=u.g[p],R=0;R<j.length;R++)Te(j[R]);delete u.g[p],u.h--}}this.F=null},Nt.prototype.K=function(u,p,j,R){return this.i.add(String(u),p,!1,j,R)},Nt.prototype.L=function(u,p,j,R){return this.i.add(String(u),p,!0,j,R)};function na(u,p,j,R){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,z=0;z<p.length;++z){var ee=p[z];if(ee&&!ee.da&&ee.capture==j){var $e=ee.listener,Pt=ee.ha||ee.src;ee.fa&&ls(u.i,ee),V=$e.call(Pt,R)!==!1&&V}}return V&&!R.defaultPrevented}function Cc(u,p,j){if(typeof u=="function")j&&(u=m(u,j));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:l.setTimeout(u,p||0)}function Tc(u){u.g=Cc(()=>{u.g=null,u.i&&(u.i=!1,Tc(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ic extends re{constructor(p,j){super(),this.m=p,this.l=j,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Tc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(u){re.call(this),this.h=u,this.g={}}N(hi,re);var Ac=[];function Pc(u){M(u.g,function(p,j){this.g.hasOwnProperty(j)&&ra(p)},u),u.g={}}hi.prototype.N=function(){hi.aa.N.call(this),Pc(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var No=l.JSON.stringify,Xh=l.JSON.parse,Rc=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function _o(){}_o.prototype.h=null;function Dc(u){return u.h||(u.h=u.i())}function Mc(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sa(){H.call(this,"d")}N(sa,H);function fi(){H.call(this,"c")}N(fi,H);var cs={},jo=null;function pi(){return jo=jo||new Nt}cs.La="serverreachability";function Eo(u){H.call(this,cs.La,u)}N(Eo,H);function L(u){const p=pi();kt(p,new Eo(p))}cs.STAT_EVENT="statevent";function W(u,p){H.call(this,cs.STAT_EVENT,u),this.stat=p}N(W,H);function Z(u){const p=pi();kt(p,new W(p,u))}cs.Ma="timingevent";function pe(u,p){H.call(this,cs.Ma,u),this.size=p}N(pe,H);function le(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function ce(){this.g=!0}ce.prototype.xa=function(){this.g=!1};function Ie(u,p,j,R,V,z){u.info(function(){if(u.g)if(z)for(var ee="",$e=z.split("&"),Pt=0;Pt<$e.length;Pt++){var De=$e[Pt].split("=");if(1<De.length){var zt=De[0];De=De[1];var $t=zt.split("_");ee=2<=$t.length&&$t[1]=="type"?ee+(zt+"="+De+"&"):ee+(zt+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+R+") [attempt "+V+"]: "+p+`
`+j+`
`+ee})}function de(u,p,j,R,V,z,ee){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+V+"]: "+p+`
`+j+`
`+z+" "+ee})}function Ut(u,p,j,R){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+ax(u,j)+(R?" "+R:"")})}function Ir(u,p){u.info(function(){return"TIMEOUT: "+p})}ce.prototype.info=function(){};function ax(u,p){if(!u.g)return p;if(!p)return null;try{var j=JSON.parse(p);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var R=j[u];if(!(2>R.length)){var V=R[1];if(Array.isArray(V)&&!(1>V.length)){var z=V[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<V.length;ee++)V[ee]=""}}}}return No(j)}catch{return p}}var us={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jh;function Oc(){}N(Oc,_o),Oc.prototype.g=function(){return new XMLHttpRequest},Oc.prototype.i=function(){return{}},Jh=new Oc;function ds(u,p,j,R){this.j=u,this.i=p,this.l=j,this.R=R||1,this.U=new hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ox}function ox(){this.i=null,this.g="",this.h=!1}var lx={},Zh={};function em(u,p,j){u.L=1,u.v=zc(Cn(p)),u.m=j,u.P=!0,cx(u,null)}function cx(u,p){u.F=Date.now(),Vc(u),u.A=Cn(u.v);var j=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),_x(j.i,"t",R),u.C=0,j=u.j.J,u.h=new ox,u.g=zx(u.j,j?p:null,!u.m),0<u.O&&(u.M=new Ic(m(u.Y,u,u.g),u.O)),p=u.U,j=u.g,R=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ac[0]=V.toString()),V=Ac);for(var z=0;z<V.length;z++){var ee=Sc(j,V[z],R||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),L(),Ie(u.i,u.u,u.A,u.l,u.R,u.m)}ds.prototype.ca=function(u){u=u.target;const p=this.M;p&&Tn(u)==3?p.j():this.Y(u)},ds.prototype.Y=function(u){try{if(u==this.g)e:{const $t=Tn(this.g);var p=this.g.Ba();const oa=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||Ix(this.g)))){this.J||$t!=4||p==7||(p==8||0>=oa?L(3):L(2)),tm(this);var j=this.g.Z();this.X=j;t:if(ux(this)){var R=Ix(this.g);u="";var V=R.length,z=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),So(this);var ee="";break t}this.h.i=new l.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(R[p],{stream:!(z&&p==V-1)});R.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=j==200,de(this.i,this.u,this.A,this.l,this.R,$t,j),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Pt=this.g;if(($e=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w($e)){var De=$e;break t}}De=null}if(j=De)Ut(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rm(this,j);else{this.o=!1,this.s=3,Z(12),gi(this),So(this);break e}}if(this.P){j=!0;let $r;for(;!this.J&&this.C<ee.length;)if($r=jS(this,ee),$r==Zh){$t==4&&(this.s=4,Z(14),j=!1),Ut(this.i,this.l,null,"[Incomplete Response]");break}else if($r==lx){this.s=4,Z(15),Ut(this.i,this.l,ee,"[Invalid Chunk]"),j=!1;break}else Ut(this.i,this.l,$r,null),rm(this,$r);if(ux(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||ee.length!=0||this.h.h||(this.s=1,Z(16),j=!1),this.o=this.o&&j,!j)Ut(this.i,this.l,ee,"[Invalid Chunked Response]"),gi(this),So(this);else if(0<ee.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),lm(zt),zt.M=!0,Z(11))}}else Ut(this.i,this.l,ee,null),rm(this,ee);$t==4&&gi(this),this.o&&!this.J&&($t==4?Ox(this.j,this):(this.o=!1,Vc(this)))}else zS(this.g),j==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),gi(this),So(this)}}}catch{}finally{}};function ux(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jS(u,p){var j=u.C,R=p.indexOf(`
`,j);return R==-1?Zh:(j=Number(p.substring(j,R)),isNaN(j)?lx:(R+=1,R+j>p.length?Zh:(p=p.slice(R,R+j),u.C=R+j,p)))}ds.prototype.cancel=function(){this.J=!0,gi(this)};function Vc(u){u.S=Date.now()+u.I,dx(u,u.I)}function dx(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=le(m(u.ba,u),p)}function tm(u){u.B&&(l.clearTimeout(u.B),u.B=null)}ds.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ir(this.i,this.A),this.L!=2&&(L(),Z(17)),gi(this),this.s=2,So(this)):dx(this,this.S-u)};function So(u){u.j.G==0||u.J||Ox(u.j,u)}function gi(u){tm(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Pc(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function rm(u,p){try{var j=u.j;if(j.G!=0&&(j.g==u||nm(j.h,u))){if(!u.K&&nm(j.h,u)&&j.G==3){try{var R=j.Da.g.parse(p)}catch{R=null}if(Array.isArray(R)&&R.length==3){var V=R;if(V[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<u.F)Gc(j),Hc(j);else break e;om(j),Z(18)}}else j.za=V[1],0<j.za-j.T&&37500>V[2]&&j.F&&j.v==0&&!j.C&&(j.C=le(m(j.Za,j),6e3));if(1>=fx(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else wi(j,11)}else if((u.K||j.g==u)&&Gc(j),!w(p))for(V=j.Da.g.parse(p),p=0;p<V.length;p++){let De=V[p];if(j.T=De[0],De=De[1],j.G==2)if(De[0]=="c"){j.K=De[1],j.ia=De[2];const zt=De[3];zt!=null&&(j.la=zt,j.j.info("VER="+j.la));const $t=De[4];$t!=null&&(j.Aa=$t,j.j.info("SVER="+j.Aa));const oa=De[5];oa!=null&&typeof oa=="number"&&0<oa&&(R=1.5*oa,j.L=R,j.j.info("backChannelRequestTimeoutMs_="+R)),R=j;const $r=u.g;if($r){const Qc=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qc){var z=R.h;z.g||Qc.indexOf("spdy")==-1&&Qc.indexOf("quic")==-1&&Qc.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(sm(z,z.h),z.h=null))}if(R.D){const cm=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;cm&&(R.ya=cm,We(R.I,R.D,cm))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-u.F,j.j.info("Handshake RTT: "+j.R+"ms")),R=j;var ee=u;if(R.qa=Ux(R,R.J?R.ia:null,R.W),ee.K){px(R.h,ee);var $e=ee,Pt=R.L;Pt&&($e.I=Pt),$e.B&&(tm($e),Vc($e)),R.g=ee}else Mx(R);0<j.i.length&&Wc(j)}else De[0]!="stop"&&De[0]!="close"||wi(j,7);else j.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?wi(j,7):am(j):De[0]!="noop"&&j.l&&j.l.ta(De),j.v=0)}}L(4)}catch{}}var ES=class{constructor(u,p){this.g=u,this.map=p}};function hx(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fx(u){return u.h?1:u.g?u.g.size:0}function nm(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function sm(u,p){u.g?u.g.add(p):u.h=p}function px(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}hx.prototype.cancel=function(){if(this.i=gx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gx(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const j of u.g.values())p=p.concat(j.D);return p}return E(u.i)}function SS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],j=u.length,R=0;R<j;R++)p.push(u[R]);return p}p=[],j=0;for(R in u)p[j++]=u[R];return p}function kS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var j=0;j<u;j++)p.push(j);return p}p=[],j=0;for(const R in u)p[j++]=R;return p}}}function xx(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var j=kS(u),R=SS(u),V=R.length,z=0;z<V;z++)p.call(void 0,R[z],j&&j[z],u)}var wx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CS(u,p){if(u){u=u.split("&");for(var j=0;j<u.length;j++){var R=u[j].indexOf("="),V=null;if(0<=R){var z=u[j].substring(0,R);V=u[j].substring(R+1)}else z=u[j];p(z,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function xi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof xi){this.h=u.h,Fc(this,u.j),this.o=u.o,this.g=u.g,Uc(this,u.s),this.l=u.l;var p=u.i,j=new To;j.i=p.i,p.g&&(j.g=new Map(p.g),j.h=p.h),yx(this,j),this.m=u.m}else u&&(p=String(u).match(wx))?(this.h=!1,Fc(this,p[1]||"",!0),this.o=ko(p[2]||""),this.g=ko(p[3]||"",!0),Uc(this,p[4]),this.l=ko(p[5]||"",!0),yx(this,p[6]||"",!0),this.m=ko(p[7]||"")):(this.h=!1,this.i=new To(null,this.h))}xi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Co(p,vx,!0),":");var j=this.g;return(j||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Co(p,vx,!0),"@"),u.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&u.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&u.push("/"),u.push(Co(j,j.charAt(0)=="/"?AS:IS,!0))),(j=this.i.toString())&&u.push("?",j),(j=this.m)&&u.push("#",Co(j,RS)),u.join("")};function Cn(u){return new xi(u)}function Fc(u,p,j){u.j=j?ko(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Uc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function yx(u,p,j){p instanceof To?(u.i=p,DS(u.i,u.h)):(j||(p=Co(p,PS)),u.i=new To(p,u.h))}function We(u,p,j){u.i.set(p,j)}function zc(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ko(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Co(u,p,j){return typeof u=="string"?(u=encodeURI(u).replace(p,TS),j&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function TS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vx=/[#\/\?@]/g,IS=/[#\?:]/g,AS=/[#\?]/g,PS=/[#\?@]/g,RS=/#/g;function To(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function hs(u){u.g||(u.g=new Map,u.h=0,u.i&&CS(u.i,function(p,j){u.add(decodeURIComponent(p.replace(/\+/g," ")),j)}))}t=To.prototype,t.add=function(u,p){hs(this),this.i=null,u=ia(this,u);var j=this.g.get(u);return j||this.g.set(u,j=[]),j.push(p),this.h+=1,this};function bx(u,p){hs(u),p=ia(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Nx(u,p){return hs(u),p=ia(u,p),u.g.has(p)}t.forEach=function(u,p){hs(this),this.g.forEach(function(j,R){j.forEach(function(V){u.call(p,V,R,this)},this)},this)},t.na=function(){hs(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),j=[];for(let R=0;R<p.length;R++){const V=u[R];for(let z=0;z<V.length;z++)j.push(p[R])}return j},t.V=function(u){hs(this);let p=[];if(typeof u=="string")Nx(this,u)&&(p=p.concat(this.g.get(ia(this,u))));else{u=Array.from(this.g.values());for(let j=0;j<u.length;j++)p=p.concat(u[j])}return p},t.set=function(u,p){return hs(this),this.i=null,u=ia(this,u),Nx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function _x(u,p,j){bx(u,p),0<j.length&&(u.i=null,u.g.set(ia(u,p),E(j)),u.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var j=0;j<p.length;j++){var R=p[j];const z=encodeURIComponent(String(R)),ee=this.V(R);for(R=0;R<ee.length;R++){var V=z;ee[R]!==""&&(V+="="+encodeURIComponent(String(ee[R]))),u.push(V)}}return this.i=u.join("&")};function ia(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function DS(u,p){p&&!u.j&&(hs(u),u.i=null,u.g.forEach(function(j,R){var V=R.toLowerCase();R!=V&&(bx(this,R),_x(this,V,j))},u)),u.j=p}function MS(u,p){const j=new ce;if(l.Image){const R=new Image;R.onload=y(ms,j,"TestLoadImage: loaded",!0,p,R),R.onerror=y(ms,j,"TestLoadImage: error",!1,p,R),R.onabort=y(ms,j,"TestLoadImage: abort",!1,p,R),R.ontimeout=y(ms,j,"TestLoadImage: timeout",!1,p,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else p(!1)}function LS(u,p){const j=new ce,R=new AbortController,V=setTimeout(()=>{R.abort(),ms(j,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:R.signal}).then(z=>{clearTimeout(V),z.ok?ms(j,"TestPingServer: ok",!0,p):ms(j,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),ms(j,"TestPingServer: error",!1,p)})}function ms(u,p,j,R,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),R(j)}catch{}}function OS(){this.g=new Rc}function VS(u,p,j){const R=j||"";try{xx(u,function(V,z){let ee=V;d(V)&&(ee=No(V)),p.push(R+z+"="+encodeURIComponent(ee))})}catch(V){throw p.push(R+"type="+encodeURIComponent("_badmap")),V}}function $c(u){this.l=u.Ub||null,this.j=u.eb||!1}N($c,_o),$c.prototype.g=function(){return new Bc(this.l,this.j)},$c.prototype.i=function(u){return function(){return u}}({});function Bc(u,p){Nt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Bc,Nt),t=Bc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||l).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jx(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jx(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Io(this):Ao(this),this.readyState==3&&jx(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Io(this))},t.Qa=function(u){this.g&&(this.response=u,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ao(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var j=p.next();!j.done;)j=j.value,u.push(j[0]+": "+j[1]),j=p.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ex(u){let p="";return M(u,function(j,R){p+=R,p+=":",p+=j,p+=`\r
`}),p}function im(u,p,j){e:{for(R in j){var R=!1;break e}R=!0}R||(j=Ex(j),typeof u=="string"?j!=null&&encodeURIComponent(String(j)):We(u,p,j))}function ct(u){Nt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ct,Nt);var FS=/^https?$/i,US=["POST","PUT"];t=ct.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,j,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jh.g(),this.v=this.o?Dc(this.o):Dc(Jh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(z){Sx(this,z);return}if(u=j||"",j=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var V in R)j.set(V,R[V]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const z of R.keys())j.set(z,R.get(z));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(j.keys()).find(z=>z.toLowerCase()=="content-type"),V=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(US,p,void 0))||R||V||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of j)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tx(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){Sx(this,z)}};function Sx(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,kx(u),qc(u)}function kx(u){u.A||(u.A=!0,kt(u,"complete"),kt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,kt(this,"complete"),kt(this,"abort"),qc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qc(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Cx(this):this.bb())},t.bb=function(){Cx(this)};function Cx(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Tn(u)!=4||u.Z()!=2)){if(u.u&&Tn(u)==4)Cc(u.Ea,0,u);else if(kt(u,"readystatechange"),Tn(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var j;if(!(j=p)){var R;if(R=ee===0){var V=String(u.D).match(wx)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),R=!FS.test(V?V.toLowerCase():"")}j=R}if(j)kt(u,"complete"),kt(u,"success");else{u.m=6;try{var z=2<Tn(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",kx(u)}}finally{qc(u)}}}}function qc(u,p){if(u.g){Tx(u);const j=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||kt(u,"ready");try{j.onreadystatechange=R}catch{}}}function Tx(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Tn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Xh(p)}};function Ix(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zS(u){const p={};u=(u.g&&2<=Tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(w(u[R]))continue;var j=T(u[R]);const V=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const z=p[V]||[];p[V]=z,z.push(j)}A(p,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(u,p,j){return j&&j.internalChannelParams&&j.internalChannelParams[u]||p}function Ax(u){this.Aa=0,this.i=[],this.j=new ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,u),this.cb=Po("retryDelaySeedMs",1e4,u),this.Wa=Po("forwardChannelMaxRetries",2,u),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hx(u&&u.concurrentRequestLimit),this.Da=new OS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ax.prototype,t.la=8,t.G=1,t.connect=function(u,p,j,R){Z(0),this.W=u,this.H=p||{},j&&R!==void 0&&(this.H.OSID=j,this.H.OAID=R),this.F=this.X,this.I=Ux(this,null,this.W),Wc(this)};function am(u){if(Px(u),u.G==3){var p=u.U++,j=Cn(u.I);if(We(j,"SID",u.K),We(j,"RID",p),We(j,"TYPE","terminate"),Ro(u,j),p=new ds(u,u.j,p),p.L=2,p.v=zc(Cn(j)),j=!1,l.navigator&&l.navigator.sendBeacon)try{j=l.navigator.sendBeacon(p.v.toString(),"")}catch{}!j&&l.Image&&(new Image().src=p.v,j=!0),j||(p.g=zx(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Vc(p)}Fx(u)}function Hc(u){u.g&&(lm(u),u.g.cancel(),u.g=null)}function Px(u){Hc(u),u.u&&(l.clearTimeout(u.u),u.u=null),Gc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Wc(u){if(!mx(u.h)&&!u.s){u.s=!0;var p=u.Ga;F||q(),O||(F(),O=!0),U.add(p,u),u.B=0}}function $S(u,p){return fx(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=le(m(u.Ga,u,p),Vx(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new ds(this,this.j,u);let z=this.o;if(this.S&&(z?(z=_(z),k(z,this.S)):z=this.S),this.m!==null||this.O||(V.H=z,z=null),this.P)e:{for(var p=0,j=0;j<this.i.length;j++){t:{var R=this.i[j];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(p+=R,4096<p){p=j;break e}if(p===4096||j===this.i.length-1){p=j+1;break e}}p=1e3}else p=1e3;p=Dx(this,V,p),j=Cn(this.I),We(j,"RID",u),We(j,"CVER",22),this.D&&We(j,"X-HTTP-Session-Id",this.D),Ro(this,j),z&&(this.O?p="headers="+encodeURIComponent(String(Ex(z)))+"&"+p:this.m&&im(j,this.m,z)),sm(this.h,V),this.Ua&&We(j,"TYPE","init"),this.P?(We(j,"$req",p),We(j,"SID","null"),V.T=!0,em(V,j,null)):em(V,j,p),this.G=2}}else this.G==3&&(u?Rx(this,u):this.i.length==0||mx(this.h)||Rx(this))};function Rx(u,p){var j;p?j=p.l:j=u.U++;const R=Cn(u.I);We(R,"SID",u.K),We(R,"RID",j),We(R,"AID",u.T),Ro(u,R),u.m&&u.o&&im(R,u.m,u.o),j=new ds(u,u.j,j,u.B+1),u.m===null&&(j.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Dx(u,j,1e3),j.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sm(u.h,j),em(j,R,p)}function Ro(u,p){u.H&&M(u.H,function(j,R){We(p,R,j)}),u.l&&xx({},function(j,R){We(p,R,j)})}function Dx(u,p,j){j=Math.min(u.i.length,j);var R=u.l?m(u.l.Na,u.l,u):null;e:{var V=u.i;let z=-1;for(;;){const ee=["count="+j];z==-1?0<j?(z=V[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let $e=!0;for(let Pt=0;Pt<j;Pt++){let De=V[Pt].g;const zt=V[Pt].map;if(De-=z,0>De)z=Math.max(0,V[Pt].g-100),$e=!1;else try{VS(zt,ee,"req"+De+"_")}catch{R&&R(zt)}}if($e){R=ee.join("&");break e}}}return u=u.i.splice(0,j),p.D=u,R}function Mx(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;F||q(),O||(F(),O=!0),U.add(p,u),u.v=0}}function om(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=le(m(u.Fa,u),Vx(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Lx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=le(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),Hc(this),Lx(this))};function lm(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function Lx(u){u.g=new ds(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Cn(u.qa);We(p,"RID","rpc"),We(p,"SID",u.K),We(p,"AID",u.T),We(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(p,"TO",u.ja),We(p,"TYPE","xmlhttp"),Ro(u,p),u.m&&u.o&&im(p,u.m,u.o),u.L&&(u.g.I=u.L);var j=u.g;u=u.ia,j.L=1,j.v=zc(Cn(p)),j.m=null,j.P=!0,cx(j,u)}t.Za=function(){this.C!=null&&(this.C=null,Hc(this),om(this),Z(19))};function Gc(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Ox(u,p){var j=null;if(u.g==p){Gc(u),lm(u),u.g=null;var R=2}else if(nm(u.h,p))j=p.D,px(u.h,p),R=1;else return;if(u.G!=0){if(p.o)if(R==1){j=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;R=pi(),kt(R,new pe(R,j)),Wc(u)}else Mx(u);else if(V=p.s,V==3||V==0&&0<p.X||!(R==1&&$S(u,p)||R==2&&om(u)))switch(j&&0<j.length&&(p=u.h,p.i=p.i.concat(j)),V){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Vx(u,p){let j=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(j*=2),j*p}function wi(u,p){if(u.j.info("Error code "+p),p==2){var j=m(u.fb,u),R=u.Xa;const V=!R;R=new xi(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Fc(R,"https"),zc(R),V?MS(R.toString(),j):LS(R.toString(),j)}else Z(2);u.G=0,u.l&&u.l.sa(p),Fx(u),Px(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Fx(u){if(u.G=0,u.ka=[],u.l){const p=gx(u.h);(p.length!=0||u.i.length!=0)&&(C(u.ka,p),C(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function Ux(u,p,j){var R=j instanceof xi?Cn(j):new xi(j);if(R.g!="")p&&(R.g=p+"."+R.g),Uc(R,R.s);else{var V=l.location;R=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var z=new xi(null);R&&Fc(z,R),p&&(z.g=p),V&&Uc(z,V),j&&(z.l=j),R=z}return j=u.D,p=u.ya,j&&p&&We(R,j,p),We(R,"VER",u.la),Ro(u,R),R}function zx(u,p,j){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ct(new $c({eb:j})):new ct(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $x(){}t=$x.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kc(){}Kc.prototype.g=function(u,p){return new br(u,p)};function br(u,p){Nt.call(this),this.g=new Ax(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!w(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new aa(this)}N(br,Nt),br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){am(this.g)},br.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var j={};j.__data__=u,u=j}else this.u&&(j={},j.__data__=No(u),u=j);p.i.push(new ES(p.Ya++,u)),p.G==3&&Wc(p)},br.prototype.N=function(){this.g.l=null,delete this.j,am(this.g),delete this.g,br.aa.N.call(this)};function Bx(u){sa.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const j in p){u=j;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}N(Bx,sa);function qx(){fi.call(this),this.status=1}N(qx,fi);function aa(u){this.g=u}N(aa,$x),aa.prototype.ua=function(){kt(this.g,"a")},aa.prototype.ta=function(u){kt(this.g,new Bx(u))},aa.prototype.sa=function(u){kt(this.g,new qx)},aa.prototype.ra=function(){kt(this.g,"b")},Kc.prototype.createWebChannel=Kc.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,Q_=function(){return new Kc},K_=function(){return pi()},G_=cs,gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,qu=us,Lc.COMPLETE="complete",W_=Lc,Mc.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,el=Mc,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,H_=ct}).apply(typeof pu<"u"?pu:typeof self<"u"?self:typeof window<"u"?window:{});const qy="@firebase/firestore",Hy="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new xh("@firebase/firestore");function ua(){return Bi.logLevel}function se(t,...e){if(Bi.logLevel<=Ee.DEBUG){const r=e.map(l0);Bi.debug(`Firestore (${lo}): ${t}`,...r)}}function ts(t,...e){if(Bi.logLevel<=Ee.ERROR){const r=e.map(l0);Bi.error(`Firestore (${lo}): ${t}`,...r)}}function Qa(t,...e){if(Bi.logLevel<=Ee.WARN){const r=e.map(l0);Bi.warn(`Firestore (${lo}): ${t}`,...r)}}function l0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,Y_(t,n,r)}function Y_(t,e,r){let n=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw ts(n),new Error(n)}function Oe(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||Y_(e,s,n)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends zr{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Wt.UNAUTHENTICATED))}shutdown(){}}class HR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class WR{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Oe(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Wn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wn)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Oe(typeof n.accessToken=="string",31837,{l:n}),new X_(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class GR{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KR{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new GR(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Oe(this.o===void 0,3512);const n=a=>{a.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Oe(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Wy(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=YR(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%62))}return n}}function Se(t,e){return t<e?-1:t>e?1:0}function xp(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),a=e.charAt(n);if(s!==a)return Km(s)===Km(a)?Se(s,a):Km(s)?1:-1}return Se(t.length,e.length)}const XR=55296,JR=57343;function Km(t){const e=t.charCodeAt(0);return e>=XR&&e<=JR}function Ya(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="__name__";class mn{constructor(e,r,n){r===void 0?r=0:r>e.length&&ge(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ge(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return mn.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof mn?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=mn.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return Se(e.length,r.length)}static compareSegments(e,r){const n=mn.isNumericId(e),s=mn.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?mn.extractNumericId(e).compare(mn.extractNumericId(r)):xp(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vs.fromString(e.substring(4,e.length-2))}}class Be extends mn{construct(e,r,n){return new Be(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ne(B.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Be(r)}static emptyPath(){return new Be([])}}const ZR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends mn{construct(e,r,n){return new Mt(e,r,n)}static isValidIdentifier(e){return ZR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gy}static keyField(){return new Mt([Gy])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new ne(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ne(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(a(),s++)}if(a(),o)throw new ne(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(r)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Be.fromString(e))}static fromName(e){return new he(Be.fromString(e).popFirst(5))}static empty(){return new he(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Be.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e,r){if(!r)throw new ne(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e5(t,e,r,n){if(e===!0&&n===!0)throw new ne(B.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Ky(t){if(!he.isDocumentKey(t))throw new ne(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qy(t){if(he.isDocumentKey(t))throw new ne(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Z_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Sh(t);throw new ne(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function t5(t,e){if(e<=0)throw new ne(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const r={typeString:t};return e&&(r.value=e),r}function mc(t,e){if(!Z_(t))throw new ne(B.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(s&&typeof o!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new ne(B.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=-62135596800,Xy=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Xy);return new Qe(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ne(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ne(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Yy)throw new ne(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xy}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mc(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:bt("string",Qe._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Qe(0,0))}static max(){return new we(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=-1;function r5(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(n===1e9?new Qe(r+1,0):new Qe(r,n));return new Ws(s,he.empty(),e)}function n5(t){return new Ws(t.readTime,t.key,Bl)}class Ws{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ws(we.min(),he.empty(),Bl)}static max(){return new Ws(we.max(),he.empty(),Bl)}}function s5(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=he.comparator(t.documentKey,e.documentKey),r!==0?r:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==i5)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new G((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof G?r:G.resolve(r)}catch(r){return G.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):G.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):G.reject(r)}static resolve(e){return new G((r,n)=>{r(e)})}static reject(e){return new G((r,n)=>{n(e)})}static waitFor(e){return new G((r,n)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},c=>n(c))}),o=!0,a===s&&r()})}static or(e){let r=G.resolve(!1);for(const n of e)r=r.next(s=>s?G.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new G((n,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const d=c;r(e[d]).next(h=>{o[d]=h,++l,l===a&&n(o)},h=>s(h))}})}static doWhile(e,r){return new G((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function o5(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function uo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=-1;function Ch(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function l5(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="";function c5(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Jy(e)),e=u5(t.get(r),e);return Jy(e)}function u5(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case ej:r+="";break;default:r+=a}}return r}function Jy(t){return t+ej+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ai(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function tj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,r){this.comparator=e,this.root=r||Dt.EMPTY}insert(e,r){return new at(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gu(this.root,e,this.comparator,!0)}}class gu{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??Dt.RED,this.left=s??Dt.EMPTY,this.right=a??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new Dt(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Dt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,r,n,s,a){return this}insert(e,r,n){return new Dt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ev(this.data.getIterator())}getIteratorFrom(e){return new ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new St(this.comparator);return r.data=e,r}}class ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new jr([])}unionWith(e){let r=new St(Mt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new jr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new rj("Invalid base64 string: "+a):a}}(e);return new Ft(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Ft(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const d5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const r=d5.exec(t);if(Oe(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ks(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="server_timestamp",sj="__type__",ij="__previous_value__",aj="__local_write_time__";function d0(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[sj])==null?void 0:n.stringValue)===nj}function Th(t){const e=t.mapValue.fields[ij];return d0(e)?Th(e):e}function ql(t){const e=Gs(t.mapValue.fields[aj].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,r,n,s,a,o,l,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Dd="(default)";class Hl{constructor(e,r){this.projectId=e,this.database=r||Dd}static empty(){return new Hl("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof Hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="__type__",lj="__max__",xu={mapValue:{fields:{__type__:{stringValue:lj}}}},cj="__vector__",Md="value";function Qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?d0(t)?4:f5(t)?9007199254740991:m5(t)?10:11:ge(28295,{value:t})}function _n(t,e){if(t===e)return!0;const r=Qs(t);if(r!==Qs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Gs(s.timestampValue),l=Gs(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Ks(s.bytesValue).isEqual(Ks(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return mt(s.geoPointValue.latitude)===mt(a.geoPointValue.latitude)&&mt(s.geoPointValue.longitude)===mt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return mt(s.integerValue)===mt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=mt(s.doubleValue),l=mt(a.doubleValue);return o===l?Rd(o)===Rd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],_n);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(Zy(o)!==Zy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!_n(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Wl(t,e){return(t.values||[]).find(r=>_n(r,e))!==void 0}function Xa(t,e){if(t===e)return 0;const r=Qs(t),n=Qs(e);if(r!==n)return Se(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=mt(a.integerValue||a.doubleValue),c=mt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return tv(t.timestampValue,e.timestampValue);case 4:return tv(ql(t),ql(e));case 5:return xp(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Ks(a),c=Ks(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Se(l[d],c[d]);if(h!==0)return h}return Se(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Se(mt(a.latitude),mt(o.latitude));return l!==0?l:Se(mt(a.longitude),mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rv(t.arrayValue,e.arrayValue);case 10:return function(a,o){var m,y,N,E;const l=a.fields||{},c=o.fields||{},d=(m=l[Md])==null?void 0:m.arrayValue,h=(y=c[Md])==null?void 0:y.arrayValue,f=Se(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return f!==0?f:rv(d,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===xu.mapValue&&o===xu.mapValue)return 0;if(a===xu.mapValue)return 1;if(o===xu.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=xp(c[f],h[f]);if(m!==0)return m;const y=Xa(l[c[f]],d[h[f]]);if(y!==0)return y}return Se(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:r})}}function tv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const r=Gs(t),n=Gs(e),s=Se(r.seconds,n.seconds);return s!==0?s:Se(r.nanos,n.nanos)}function rv(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=Xa(r[s],n[s]);if(a)return a}return Se(r.length,n.length)}function Ja(t){return wp(t)}function wp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Gs(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ks(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return he.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=wp(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of n)a?a=!1:s+=",",s+=`${o}:${wp(r.fields[o])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function Hu(t){switch(Qs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Th(t);return e?16+Hu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,a)=>s+Hu(a),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return ai(n.fields,(a,o)=>{s+=a.length+Hu(o)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function nv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yp(t){return!!t&&"integerValue"in t}function h0(t){return!!t&&"arrayValue"in t}function sv(t){return!!t&&"nullValue"in t}function iv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wu(t){return!!t&&"mapValue"in t}function m5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[oj])==null?void 0:n.stringValue)===cj}function gl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ai(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=gl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=gl(t.arrayValue.values[r]);return e}return{...t}}function f5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.value=e}static empty(){return new ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Wu(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(r)}setAll(e){let r=Mt.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=gl(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());Wu(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return _n(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Wu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){ai(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new ur(gl(this.value))}}function uj(t){const e=[];return ai(t.fields,(r,n)=>{const s=new Mt([r]);if(Wu(n)){const a=uj(n.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,r,n,s,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Kt(e,0,we.min(),we.min(),we.min(),ur.empty(),0)}static newFoundDocument(e,r,n,s){return new Kt(e,1,r,we.min(),n,s,0)}static newNoDocument(e,r){return new Kt(e,2,r,we.min(),we.min(),ur.empty(),0)}static newUnknownDocument(e,r){return new Kt(e,3,r,we.min(),we.min(),ur.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,r){this.position=e,this.inclusive=r}}function av(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?n=he.comparator(he.fromName(o.referenceValue),r.key):n=Xa(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!_n(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,r="asc"){this.field=e,this.dir=r}}function p5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dj=class{};class yt extends dj{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new x5(e,r,n):r==="array-contains"?new v5(e,n):r==="in"?new b5(e,n):r==="not-in"?new N5(e,n):r==="array-contains-any"?new _5(e,n):new yt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new w5(e,n):new y5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Xa(r,this.value)):r!==null&&Qs(this.value)===Qs(r)&&this.matchesComparison(Xa(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends dj{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new an(e,r)}matches(e){return hj(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hj(t){return t.op==="and"}function mj(t){return g5(t)&&hj(t)}function g5(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function vp(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+Ja(t.value);if(mj(t))return t.filters.map(e=>vp(e)).join(",");{const e=t.filters.map(r=>vp(r)).join(",");return`${t.op}(${e})`}}function fj(t,e){return t instanceof yt?function(n,s){return s instanceof yt&&n.op===s.op&&n.field.isEqual(s.field)&&_n(n.value,s.value)}(t,e):t instanceof an?function(n,s){return s instanceof an&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,o,l)=>a&&fj(o,s.filters[l]),!0):!1}(t,e):void ge(19439)}function pj(t){return t instanceof yt?function(r){return`${r.field.canonicalString()} ${r.op} ${Ja(r.value)}`}(t):t instanceof an?function(r){return r.op.toString()+" {"+r.getFilters().map(pj).join(" ,")+"}"}(t):"Filter"}class x5 extends yt{constructor(e,r,n){super(e,r,n),this.key=he.fromName(n.referenceValue)}matches(e){const r=he.comparator(e.key,this.key);return this.matchesComparison(r)}}class w5 extends yt{constructor(e,r){super(e,"in",r),this.keys=gj("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class y5 extends yt{constructor(e,r){super(e,"not-in",r),this.keys=gj("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function gj(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>he.fromName(n.referenceValue))}class v5 extends yt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return h0(r)&&Wl(r.arrayValue,this.value)}}class b5 extends yt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Wl(this.value.arrayValue,r)}}class N5 extends yt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Wl(this.value.arrayValue,r)}}class _5 extends yt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!h0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Wl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,r=null,n=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function lv(t,e=null,r=[],n=[],s=null,a=null,o=null){return new j5(t,e,r,n,s,a,o)}function m0(t){const e=ve(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>vp(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Ch(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ja(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ja(n)).join(",")),e.Te=r}return e.Te}function f0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!p5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!fj(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ov(t.startAt,e.startAt)&&ov(t.endAt,e.endAt)}function bp(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,r=null,n=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function E5(t,e,r,n,s,a,o,l){return new ho(t,e,r,n,s,a,o,l)}function Ih(t){return new ho(t)}function cv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xj(t){return t.collectionGroup!==null}function xl(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new St(Mt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Gl(a,n))}),r.has(Mt.keyField().canonicalString())||e.Ie.push(new Gl(Mt.keyField(),n))}return e.Ie}function yn(t){const e=ve(t);return e.Ee||(e.Ee=S5(e,xl(t))),e.Ee}function S5(t,e){if(t.limitType==="F")return lv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Gl(s.field,a)});const r=t.endAt?new Ld(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ld(t.startAt.position,t.startAt.inclusive):null;return lv(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Np(t,e){const r=t.filters.concat([e]);return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Od(t,e,r){return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Ah(t,e){return f0(yn(t),yn(e))&&t.limitType===e.limitType}function wj(t){return`${m0(yn(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>pj(s)).join(", ")}]`),Ch(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Ja(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Ja(s)).join(",")),`Target(${n})`}(yn(t))}; limitType=${t.limitType})`}function Ph(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):he.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of xl(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,c){const d=av(o,l,c);return o.inclusive?d<=0:d<0}(n.startAt,xl(n),s)||n.endAt&&!function(o,l,c){const d=av(o,l,c);return o.inclusive?d>=0:d>0}(n.endAt,xl(n),s))}(t,e)}function k5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yj(t){return(e,r)=>{let n=!1;for(const s of xl(t)){const a=C5(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function C5(t,e,r){const n=t.field.isKeyField()?he.comparator(e.key,r.key):function(a,o,l){const c=o.data.field(a),d=l.data.field(a);return c!==null&&d!==null?Xa(c,d):ge(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ai(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return tj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new at(he.comparator);function rs(){return T5}const vj=new at(he.comparator);function tl(...t){let e=vj;for(const r of t)e=e.insert(r.key,r);return e}function bj(t){let e=vj;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ki(){return wl()}function Nj(){return wl()}function wl(){return new ea(t=>t.toString(),(t,e)=>t.isEqual(e))}const I5=new at(he.comparator),A5=new St(he.comparator);function ke(...t){let e=A5;for(const r of t)e=e.add(r);return e}const P5=new St(Se);function R5(){return P5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function _j(t){return{integerValue:""+t}}function jj(t,e){return l5(e)?_j(e):p0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function D5(t,e,r){return t instanceof Kl?function(s,a){const o={fields:{[sj]:{stringValue:nj},[aj]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&d0(a)&&(a=Th(a)),a&&(o.fields[ij]=a),{mapValue:o}}(r,e):t instanceof Ql?Sj(t,e):t instanceof Yl?kj(t,e):function(s,a){const o=Ej(s,a),l=uv(o)+uv(s.Ae);return yp(o)&&yp(s.Ae)?_j(l):p0(s.serializer,l)}(t,e)}function M5(t,e,r){return t instanceof Ql?Sj(t,e):t instanceof Yl?kj(t,e):r}function Ej(t,e){return t instanceof Xl?function(n){return yp(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Kl extends Rh{}class Ql extends Rh{constructor(e){super(),this.elements=e}}function Sj(t,e){const r=Cj(e);for(const n of t.elements)r.some(s=>_n(s,n))||r.push(n);return{arrayValue:{values:r}}}class Yl extends Rh{constructor(e){super(),this.elements=e}}function kj(t,e){let r=Cj(e);for(const n of t.elements)r=r.filter(s=>!_n(s,n));return{arrayValue:{values:r}}}class Xl extends Rh{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function uv(t){return mt(t.integerValue||t.doubleValue)}function Cj(t){return h0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,r){this.field=e,this.transform=r}}function L5(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Ql&&s instanceof Ql||n instanceof Yl&&s instanceof Yl?Ya(n.elements,s.elements,_n):n instanceof Xl&&s instanceof Xl?_n(n.Ae,s.Ae):n instanceof Kl&&s instanceof Kl}(t.transform,e.transform)}class O5{constructor(e,r){this.version=e,this.transformResults=r}}class sr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dh{}function Ij(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mh(t.key,sr.none()):new fc(t.key,t.data,sr.none());{const r=t.data,n=ur.empty();let s=new St(Mt.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),s=s.add(a)}return new oi(t.key,n,new jr(s.toArray()),sr.none())}}function V5(t,e,r){t instanceof fc?function(s,a,o){const l=s.value.clone(),c=hv(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof oi?function(s,a,o){if(!Gu(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=hv(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(Aj(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function yl(t,e,r,n){return t instanceof fc?function(a,o,l,c){if(!Gu(a.precondition,o))return l;const d=a.value.clone(),h=mv(a.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof oi?function(a,o,l,c){if(!Gu(a.precondition,o))return l;const d=mv(a.fieldTransforms,c,o),h=o.data;return h.setAll(Aj(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(a,o,l){return Gu(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function F5(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=Ej(n.transform,s||null);a!=null&&(r===null&&(r=ur.empty()),r.set(n.field,a))}return r||null}function dv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ya(n,s,(a,o)=>L5(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fc extends Dh{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class oi extends Dh{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Aj(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function hv(t,e,r){const n=new Map;Oe(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);n.set(a.field,M5(o,l,r[s]))}return n}function mv(t,e,r){const n=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);n.set(s.field,D5(a,o,e))}return n}class Mh extends Dh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U5 extends Dh{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&V5(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=yl(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=yl(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Nj();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const c=Ij(o,l);c!==null&&n.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(we.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(r,n)=>dv(r,n))&&Ya(this.baseMutations,e.baseMutations,(r,n)=>dv(r,n))}}class g0{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Oe(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return I5}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,n[o].version);return new g0(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Ae;function q5(t){switch(t){case B.OK:return ge(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function Pj(t){if(t===void 0)return ts("GRPC error has no .code"),B.UNKNOWN;switch(t){case xt.OK:return B.OK;case xt.CANCELLED:return B.CANCELLED;case xt.UNKNOWN:return B.UNKNOWN;case xt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case xt.INTERNAL:return B.INTERNAL;case xt.UNAVAILABLE:return B.UNAVAILABLE;case xt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case xt.NOT_FOUND:return B.NOT_FOUND;case xt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case xt.ABORTED:return B.ABORTED;case xt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case xt.DATA_LOSS:return B.DATA_LOSS;default:return ge(39323,{code:t})}}(Ae=xt||(xt={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=new Vs([4294967295,4294967295],0);function fv(t){const e=H5().encode(t),r=new q_;return r.update(e),new Uint8Array(r.digest())}function pv(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Vs([r,n],0),new Vs([s,a],0)]}class x0{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new rl(`Invalid padding: ${r}`);if(n<0)throw new rl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new rl(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Vs.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(Vs.fromNumber(n)));return s.compare(W5)===1&&(s=new Vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=fv(e),[n,s]=pv(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,s,a);if(!this.we(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new x0(a,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=fv(e),[n,s]=pv(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,s,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Lh(we.min(),s,new at(Se),rs(),ke())}}class pc{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new pc(n,r,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class Rj{constructor(e,r){this.targetId=e,this.Ce=r}}class Dj{constructor(e,r,n=Ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class gv{constructor(){this.ve=0,this.Fe=xv(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),r=ke(),n=ke();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ge(38017,{changeType:a})}}),new pc(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=xv()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class G5{constructor(e){this.Ge=e,this.ze=new Map,this.je=rs(),this.Je=wu(),this.He=wu(),this.Ye=new at(Se)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const a=s.target;if(bp(a))if(n===0){const o=new he(a.path);this.et(r,o,Kt.newNoDocument(o,we.min()))}else Oe(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=Ks(n).toUint8Array()}catch(c){if(c instanceof rj)return Qa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new x0(o,s,a)}catch(c){return Qa(c instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(r,a,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&bp(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Kt.newNoDocument(c,e))}a.Be&&(r.set(o,a.ke()),a.qe())}});let n=ke();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new Lh(e,r,this.Ye,this.je,n);return this.je=rs(),this.Je=wu(),this.He=wu(),this.Ye=new at(Se),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new gv,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new St(Se),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new St(Se),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||se("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gv),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function wu(){return new at(he.comparator)}function xv(){return new at(he.comparator)}const K5={asc:"ASCENDING",desc:"DESCENDING"},Q5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y5={and:"AND",or:"OR"};class X5{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function _p(t,e){return t.useProto3Json||Ch(e)?e:{value:e}}function Vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function J5(t,e){return Vd(t,e.toTimestamp())}function vn(t){return Oe(!!t,49232),we.fromTimestamp(function(r){const n=Gs(r);return new Qe(n.seconds,n.nanos)}(t))}function w0(t,e){return jp(t,e).canonicalString()}function jp(t,e){const r=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Lj(t){const e=Be.fromString(t);return Oe(zj(e),10190,{key:e.toString()}),e}function Ep(t,e){return w0(t.databaseId,e.path)}function Qm(t,e){const r=Lj(e);if(r.get(1)!==t.databaseId.projectId)throw new ne(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ne(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new he(Vj(r))}function Oj(t,e){return w0(t.databaseId,e)}function Z5(t){const e=Lj(t);return e.length===4?Be.emptyPath():Vj(e)}function Sp(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vj(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wv(t,e,r){return{name:Ep(t,e),fields:r.value.mapValue.fields}}function eD(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ge(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Oe(h===void 0||typeof h=="string",58123),Ft.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?B.UNKNOWN:Pj(d.code);return new ne(h,d.message||"")}(o);r=new Dj(n,s,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Qm(t,n.document.name),a=vn(n.document.updateTime),o=n.document.createTime?vn(n.document.createTime):we.min(),l=new ur({mapValue:{fields:n.document.fields}}),c=Kt.newFoundDocument(s,a,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new Ku(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Qm(t,n.document),a=n.readTime?vn(n.readTime):we.min(),o=Kt.newNoDocument(s,a),l=n.removedTargetIds||[];r=new Ku([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Qm(t,n.document),a=n.removedTargetIds||[];r=new Ku([],a,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,o=new B5(s,a),l=n.targetId;r=new Rj(l,o)}}return r}function tD(t,e){let r;if(e instanceof fc)r={update:wv(t,e.key,e.value)};else if(e instanceof Mh)r={delete:Ep(t,e.key)};else if(e instanceof oi)r={update:wv(t,e.key,e.data),updateMask:uD(e.fieldMask)};else{if(!(e instanceof U5))return ge(16599,{Vt:e.type});r={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof Kl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ql)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:J5(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ge(27497)}(t,e.precondition)),r}function rD(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(r=>function(s,a){let o=s.updateTime?vn(s.updateTime):vn(a);return o.isEqual(we.min())&&(o=vn(a)),new O5(o,s.transformResults||[])}(r,e))):[]}function nD(t,e){return{documents:[Oj(t,e.path)]}}function sD(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Oj(t,s);const a=function(d){if(d.length!==0)return Uj(an.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:ha(m.field),direction:oD(m.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=_p(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:s}}function iD(t){let e=Z5(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Oe(n===1,65062);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(f){const m=Fj(f);return m instanceof an&&mj(m)?m.getFilters():[m]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(m=>function(N){return new Gl(ma(N.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Ch(m)?null:m}(r.limit));let c=null;r.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new Ld(y,m)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const m=!f.before,y=f.values||[];return new Ld(y,m)}(r.endAt)),E5(e,s,o,a,l,"F",c,d)}function aD(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Fj(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ma(r.unaryFilter.field);return yt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ma(r.unaryFilter.field);return yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ma(r.unaryFilter.field);return yt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ma(r.unaryFilter.field);return yt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(r){return yt.create(ma(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return an.create(r.compositeFilter.filters.map(n=>Fj(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(r.compositeFilter.op))}(t):ge(30097,{filter:t})}function oD(t){return K5[t]}function lD(t){return Q5[t]}function cD(t){return Y5[t]}function ha(t){return{fieldPath:t.canonicalString()}}function ma(t){return Mt.fromServerFormat(t.fieldPath)}function Uj(t){return t instanceof yt?function(r){if(r.op==="=="){if(iv(r.value))return{unaryFilter:{field:ha(r.field),op:"IS_NAN"}};if(sv(r.value))return{unaryFilter:{field:ha(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(iv(r.value))return{unaryFilter:{field:ha(r.field),op:"IS_NOT_NAN"}};if(sv(r.value))return{unaryFilter:{field:ha(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(r.field),op:lD(r.op),value:r.value}}}(t):t instanceof an?function(r){const n=r.getFilters().map(s=>Uj(s));return n.length===1?n[0]:{compositeFilter:{op:cD(r.op),filters:n}}}(t):ge(54877,{filter:t})}function uD(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function zj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,r,n,s,a=we.min(),o=we.min(),l=Ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.yt=e}}function hD(t){const e=iD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Od(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.Cn=new fD}addToCollectionParentIndex(e,r){return this.Cn.add(r),G.resolve()}getCollectionParents(e,r){return G.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return G.resolve()}deleteFieldIndex(e,r){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,r){return G.resolve()}getDocumentsMatchingTarget(e,r){return G.resolve(null)}getIndexType(e,r){return G.resolve(0)}getFieldIndexes(e,r){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,r){return G.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,r){return G.resolve(Ws.min())}updateCollectionGroup(e,r,n){return G.resolve()}updateIndexEntries(e,r){return G.resolve()}}class fD{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new St(Be.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new St(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$j=41943040;class or{static withCacheSize(e){return new or(e,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or($j,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Za(0)}static cr(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="LruGarbageCollector",pD=1048576;function bv([t,e],[r,n]){const s=Se(t,r);return s===0?Se(e,n):s}class gD{constructor(e){this.Ir=e,this.buffer=new St(bv),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();bv(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class xD{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(vv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){uo(r)?se(vv,"Ignoring IndexedDB error during garbage collection: ",r):await co(r)}await this.Vr(3e5)})}}class wD{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return G.resolve(kh.ce);const n=new gD(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(yv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yv):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,a,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(a=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(d=Date.now(),ua()<=Ee.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function yD(t,e){return new wD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.changes=new ea(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?G.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&yl(n.mutation,s,jr.empty(),Qe.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ke()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ke()){const s=ki();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let o=tl();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=ki();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ke()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let a=rs();const o=wl(),l=function(){return wl()}();return r.forEach((c,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof oi)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),yl(h.mutation,d,h.mutation.getFieldMask(),Qe.now())):o.set(d.key,jr.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>l.set(d,new bD(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,r){const n=wl();let s=new at((o,l)=>o-l),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=r.get(c);if(d===null)return;let h=n.get(c)||jr.empty();h=l.applyToLocalView(d,h),n.set(c,h);const f=(s.get(l.batchId)||ke()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=Nj();h.forEach(m=>{if(!a.has(m)){const y=Ij(r.get(m),n.get(m));y!==null&&f.set(m,y),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return G.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):xj(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):G.resolve(ki());let l=Bl,c=a;return o.next(d=>G.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,ke())).next(h=>({batchId:l,changes:bj(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new he(r)).next(n=>{let s=tl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let o=tl();return this.indexManager.getCollectionParents(e,a).next(l=>G.forEach(l,c=>{const d=function(f,m){return new ho(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(o=>{a.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Kt.newInvalidDocument(h)))});let l=tl();return o.forEach((c,d)=>{const h=a.get(c);h!==void 0&&yl(h.mutation,d,jr.empty(),Qe.now()),Ph(r,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return G.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:vn(s.createTime)}}(r)),G.resolve()}getNamedQuery(e,r){return G.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:hD(s.bundledQuery),readTime:vn(s.readTime)}}(r)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.overlays=new at(he.comparator),this.qr=new Map}getOverlay(e,r){return G.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ki();return G.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.St(e,r,a)}),G.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),G.resolve()}getOverlaysForCollection(e,r,n){const s=ki(),a=r.length+1,o=new he(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>n&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new at((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=a.get(d.largestBatchId);h===null&&(h=ki(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ki(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return G.resolve(l)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new $5(r,n));let a=this.qr.get(r);a===void 0&&(a=ke(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.Qr=new St(Ct.$r),this.Ur=new St(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Ct(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Ct(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new he(new Be([])),n=new Ct(r,e),s=new Ct(r,e+1),a=[];return this.Ur.forEachInRange([n,s],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new he(new Be([])),n=new Ct(r,e),s=new Ct(r,e+1);let a=ke();return this.Ur.forEachInRange([n,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Ct(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ct{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return he.comparator(e.key,r.key)||Se(e.Yr,r.Yr)}static Kr(e,r){return Se(e.Yr,r.Yr)||he.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new St(Ct.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new z5(a,r,n,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ct(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,r){return G.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),a=s<0?0:s;return G.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?u0:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ct(r,0),s=new Ct(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,s],o=>{const l=this.Xr(o.Yr);a.push(l)}),G.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new St(Se);return r.forEach(s=>{const a=new Ct(s,0),o=new Ct(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{n=n.add(l.Yr)})}),G.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;he.isDocumentKey(a)||(a=a.child(""));const o=new Ct(new he(a),0);let l=new St(Se);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Oe(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return G.forEach(r.mutations,s=>{const a=new Ct(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Ct(r,0),s=this.Zr.firstAfterOrEqual(n);return G.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.ri=e,this.docs=function(){return new at(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return G.resolve(n?n.document.mutableCopy():Kt.newInvalidDocument(r))}getEntries(e,r){let n=rs();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Kt.newInvalidDocument(s))}),G.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=rs();const o=r.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||s5(n5(h),n)<=0||(s.has(h.key)||Ph(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return G.resolve(a)}getAllFromCollectionGroup(e,r,n,s){ge(9500)}ii(e,r){return G.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new CD(this)}getSize(e){return G.resolve(this.size)}}class CD extends vD{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),G.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.persistence=e,this.si=new ea(r=>m0(r),f0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new y0,this.targetCount=0,this.ai=Za.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),G.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Za(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,G.resolve()}updateTargetData(e,r){return this.Pr(r),G.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(a).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return G.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),G.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),G.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return G.resolve(n)}containsKey(e,r){return G.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,r){this.ui={},this.overlays={},this.ci=new kh(0),this.li=!1,this.li=!0,this.hi=new ED,this.referenceDelegate=e(this),this.Pi=new TD(this),this.indexManager=new mD,this.remoteDocumentCache=function(s){return new kD(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new dD(r),this.Ii=new _D(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new jD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new SD(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){se("MemoryPersistence","Starting transaction:",e);const s=new ID(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,r){return G.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class ID extends a5{constructor(e){super(),this.currentSequenceNumber=e}}class v0{constructor(e){this.persistence=e,this.Ri=new y0,this.Vi=null}static mi(e){return new v0(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),G.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),G.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),G.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,n=>{const s=he.fromPath(n);return this.gi(e,s).next(a=>{a||r.removeEntry(s,we.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return G.or([()=>G.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class Fd{constructor(e,r){this.persistence=e,this.pi=new ea(n=>c5(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=yD(this,r)}static mi(e,r){return new Fd(e,r)}Ei(){}di(e){return G.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return G.forEach(this.pi,(n,s)=>this.br(e,n,s).next(a=>a?G.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,r).next(l=>{l||(n++,a.removeEntry(o,we.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Hu(e.data.value)),r}br(e,r,n){return G.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return G.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=ke(),s=ke();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new b0(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return e4()?8:o5(Jt())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.ys(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,r,s,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new AD;return this.Ss(e,r,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,r,o,l.size)})}).next(()=>a.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(ua()<=Ee.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",da(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(ua()<=Ee.DEBUG&&se("QueryEngine","Query:",da(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(ua()<=Ee.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",da(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(r))):G.resolve())}ys(e,r){if(cv(r))return G.resolve(null);let n=yn(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Od(r,null,"F"),n=yn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=ke(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const d=this.Ds(r,l);return this.Cs(r,d,o,c.readTime)?this.ys(e,Od(r,null,"F")):this.vs(e,d,r,c)}))})))}ws(e,r,n,s){return cv(r)||s.isEqual(we.min())?G.resolve(null):this.ps.getDocuments(e,n).next(a=>{const o=this.Ds(r,a);return this.Cs(r,o,n,s)?G.resolve(null):(ua()<=Ee.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),da(r)),this.vs(e,o,r,r5(s,Bl)).next(l=>l))})}Ds(e,r){let n=new St(yj(e));return r.forEach((s,a)=>{Ph(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,r,n){return ua()<=Ee.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",da(r)),this.ps.getDocumentsMatchingQuery(e,r,Ws.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="LocalStore",RD=3e8;class DD{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new at(Se),this.xs=new ea(a=>m0(a),f0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ND(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function MD(t,e,r,n){return new DD(t,e,r,n)}async function qj(t,e){const r=ve(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let c=ke();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return r.localDocuments.getDocuments(n,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function LD(t,e){const r=ve(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let y=G.resolve();return m.forEach(N=>{y=y.next(()=>h.getEntry(c,N)).next(E=>{const C=d.docVersions.get(N);Oe(C!==null,48541),E.version.compareTo(C)<0&&(f.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ke();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function Hj(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function OD(t,e){const r=ve(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(r.Pi.removeMatchingKeys(a,h.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(a,h.addedDocuments,f)));let y=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ft.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,n)),s=s.insert(f,y),function(E,C,x){return E.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=RD?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&l.push(r.Pi.updateTargetData(a,y))});let c=rs(),d=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(VD(a,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!n.isEqual(we.min())){const h=r.Pi.getLastRemoteSnapshotVersion(a).next(f=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(h)}return G.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(r.Ms=s,a))}function VD(t,e,r){let n=ke(),s=ke();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=rs();return r.forEach((l,c)=>{const d=a.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):se(N0,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:s}})}function FD(t,e){const r=ve(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=u0),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function UD(t,e){const r=ve(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(a=>a?(s=a,G.resolve(s)):r.Pi.allocateTargetId(n).next(o=>(s=new ks(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function kp(t,e,r){const n=ve(t),s=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!uo(o))throw o;se(N0,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function Nv(t,e,r){const n=ve(t);let s=we.min(),a=ke();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const f=ve(c),m=f.xs.get(h);return m!==void 0?G.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(n,o,yn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?s:we.min(),r?a:ke())).next(l=>(zD(n,k5(e),l),{documents:l,Qs:a})))}function zD(t,e,r){let n=t.Os.get(e)||we.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class _v{constructor(){this.activeTargetIds=R5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $D{constructor(){this.Mo=new _v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _v,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="ConnectivityMonitor";class Ev{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(jv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu=null;function Cp(){return yu===null?yu=function(){return 268435456+Math.round(2147483648*Math.random())}():yu++,"0x"+yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="RestConnection",qD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===Dd?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,a){const o=Cp(),l=this.zo(e,r.toUriEncodedString());se(Ym,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,a);const{host:d}=new URL(l),h=si(d);return this.Jo(e,l,c,n,h).then(f=>(se(Ym,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Qa(Ym,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(e,r,n,s,a,o){return this.Go(e,r,n,s,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),n&&n.headers.forEach((s,a)=>e[a]=s)}zo(e,r){const n=qD[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class GD extends HD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,a){const o=Cp();return new Promise((l,c)=>{const d=new H_;d.setWithCredentials(!0),d.listenOnce(W_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case qu.NO_ERROR:const f=d.getResponseJson();se(Ht,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case qu.TIMEOUT:se(Ht,`RPC '${e}' ${o} timed out`),c(new ne(B.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const m=d.getStatus();if(se(Ht,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const N=y==null?void 0:y.error;if(N&&N.status&&N.message){const E=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(N.status);c(new ne(E,N.message))}else c(new ne(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(B.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{se(Ht,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);se(Ht,`RPC '${e}' ${o} sending request:`,s),d.send(r,"POST",h,n,15)})}T_(e,r,n){const s=Cp(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Q_(),l=K_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const h=a.join("");se(Ht,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let m=!1,y=!1;const N=new WD({Yo:C=>{y?se(Ht,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(se(Ht,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),se(Ht,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},Zo:()=>f.close()}),E=(C,x,w)=>{C.listen(x,g=>{try{w(g)}catch(b){setTimeout(()=>{throw b},0)}})};return E(f,el.EventType.OPEN,()=>{y||(se(Ht,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),E(f,el.EventType.CLOSE,()=>{y||(y=!0,se(Ht,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(f))}),E(f,el.EventType.ERROR,C=>{y||(y=!0,Qa(Ht,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),N.a_(new ne(B.UNAVAILABLE,"The operation could not be completed")))}),E(f,el.EventType.MESSAGE,C=>{var x;if(!y){const w=C.data[0];Oe(!!w,16349);const g=w,b=(g==null?void 0:g.error)||((x=g[0])==null?void 0:x.error);if(b){se(Ht,`RPC '${e}' stream ${s} received error:`,b);const I=b.status;let M=function(S){const k=xt[S];if(k!==void 0)return Pj(k)}(I),A=b.message;M===void 0&&(M=B.INTERNAL,A="Unknown error status: "+I+" with message "+b.message),y=!0,N.a_(new ne(M,A)),f.close()}else se(Ht,`RPC '${e}' stream ${s} received:`,w),N.u_(w)}}),E(l,G_.STAT_EVENT,C=>{C.stat===gp.PROXY?se(Ht,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===gp.NOPROXY&&se(Ht,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){return new X5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,r,n=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="PersistentStream";class Gj{constructor(e,r,n,s,a,o,l,c){this.Mi=e,this.S_=n,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wj(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===B.RESOURCE_EXHAUSTED?(ts(r.toString()),ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new ne(B.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(Sv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(se(Sv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KD extends Gj{constructor(e,r,n,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=eD(this.serializer,e),n=function(a){if(!("targetChange"in a))return we.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?vn(o.readTime):we.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Sp(this.serializer),r.addTarget=function(a,o){let l;const c=o.target;if(l=bp(c)?{documents:nD(a,c)}:{query:sD(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Mj(a,o.resumeToken);const d=_p(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(we.min())>0){l.readTime=Vd(a,o.snapshotVersion.toTimestamp());const d=_p(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=aD(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Sp(this.serializer),r.removeTarget=e,this.q_(r)}}class QD extends Gj{constructor(e,r,n,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=rD(e.writeResults,e.commitTime),n=vn(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Sp(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>tD(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{}class XD extends YD{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,jp(r,n),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ne(B.UNKNOWN,a.toString())})}Ho(e,r,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,jp(r,n),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class JD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ts(r),this.aa=!1):se("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="RemoteStore";class ZD{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{ta(this)&&(se(qi,"Restarting streams for network reachability change."),await async function(c){const d=ve(c);d.Ea.add(4),await gc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Vh(d)}(this))})}),this.Ra=new JD(n,s)}}async function Vh(t){if(ta(t))for(const e of t.da)await e(!0)}async function gc(t){for(const e of t.da)await e(!1)}function Kj(t,e){const r=ve(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),S0(r)?E0(r):mo(r).O_()&&j0(r,e))}function _0(t,e){const r=ve(t),n=mo(r);r.Ia.delete(e),n.O_()&&Qj(r,e),r.Ia.size===0&&(n.O_()?n.L_():ta(r)&&r.Ra.set("Unknown"))}function j0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}mo(t).Y_(e)}function Qj(t,e){t.Va.Ue(e),mo(t).Z_(e)}function E0(t){t.Va=new G5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),mo(t).start(),t.Ra.ua()}function S0(t){return ta(t)&&!mo(t).x_()&&t.Ia.size>0}function ta(t){return ve(t).Ea.size===0}function Yj(t){t.Va=void 0}async function e6(t){t.Ra.set("Online")}async function t6(t){t.Ia.forEach((e,r)=>{j0(t,e)})}async function r6(t,e){Yj(t),S0(t)?(t.Ra.ha(e),E0(t)):t.Ra.set("Unknown")}async function n6(t,e,r){if(t.Ra.set("Online"),e instanceof Dj&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(n){se(qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ud(t,n)}else if(e instanceof Ku?t.Va.Ze(e):e instanceof Rj?t.Va.st(e):t.Va.tt(e),!r.isEqual(we.min()))try{const n=await Hj(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken(Ft.EMPTY_BYTE_STRING,h.snapshotVersion)),Qj(a,c);const f=new ks(h.target,c,d,h.sequenceNumber);j0(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){se(qi,"Failed to raise snapshot:",n),await Ud(t,n)}}async function Ud(t,e,r){if(!uo(e))throw e;t.Ea.add(1),await gc(t),t.Ra.set("Offline"),r||(r=()=>Hj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(qi,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Vh(t)})}function Xj(t,e){return e().catch(r=>Ud(t,r,e))}async function Fh(t){const e=ve(t),r=Ys(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:u0;for(;s6(e);)try{const s=await FD(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,i6(e,s)}catch(s){await Ud(e,s)}Jj(e)&&Zj(e)}function s6(t){return ta(t)&&t.Ta.length<10}function i6(t,e){t.Ta.push(e);const r=Ys(t);r.O_()&&r.X_&&r.ea(e.mutations)}function Jj(t){return ta(t)&&!Ys(t).x_()&&t.Ta.length>0}function Zj(t){Ys(t).start()}async function a6(t){Ys(t).ra()}async function o6(t){const e=Ys(t);for(const r of t.Ta)e.ea(r.mutations)}async function l6(t,e,r){const n=t.Ta.shift(),s=g0.from(n,e,r);await Xj(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fh(t)}async function c6(t,e){e&&Ys(t).X_&&await async function(n,s){if(function(o){return q5(o)&&o!==B.ABORTED}(s.code)){const a=n.Ta.shift();Ys(n).B_(),await Xj(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Fh(n)}}(t,e),Jj(t)&&Zj(t)}async function kv(t,e){const r=ve(t);r.asyncQueue.verifyOperationInProgress(),se(qi,"RemoteStore received new credentials");const n=ta(r);r.Ea.add(3),await gc(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Vh(r)}async function u6(t,e){const r=ve(t);e?(r.Ea.delete(2),await Vh(r)):e||(r.Ea.add(2),await gc(r),r.Ra.set("Unknown"))}function mo(t){return t.ma||(t.ma=function(r,n,s){const a=ve(r);return a.sa(),new KD(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:e6.bind(null,t),t_:t6.bind(null,t),r_:r6.bind(null,t),H_:n6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),S0(t)?E0(t):t.Ra.set("Unknown")):(await t.ma.stop(),Yj(t))})),t.ma}function Ys(t){return t.fa||(t.fa=function(r,n,s){const a=ve(r);return a.sa(),new QD(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:a6.bind(null,t),r_:c6.bind(null,t),ta:o6.bind(null,t),na:l6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fh(t)):(await t.fa.stop(),t.Ta.length>0&&(se(qi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const o=Date.now()+n,l=new k0(e,r,o,s,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C0(t,e){if(ts("AsyncQueue",`${e}: ${t}`),uo(t))return new ne(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{static emptySet(e){return new La(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||he.comparator(r.key,n.key):(r,n)=>he.comparator(r.key,n.key),this.keyedMap=tl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof La)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new La;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.ga=new at(he.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class eo{constructor(e,r,n,s,a,o,l,c,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new eo(e,r,La.emptySet(r),o,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class h6{constructor(){this.queries=Tv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=ve(r),a=s.queries;s.queries=Tv(),a.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new ne(B.ABORTED,"Firestore shutting down"))}}function Tv(){return new ea(t=>wj(t),Ah)}async function T0(t,e){const r=ve(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.ba()&&e.Da()&&(n=2):(a=new d6,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(s,!0);break;case 1:a.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=C0(o,`Initialization of query '${da(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&A0(r)}async function I0(t,e){const r=ve(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function m6(t,e){const r=ve(t);let n=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.Sa)l.Fa(s)&&(n=!0);o.wa=s}}n&&A0(r)}function f6(t,e,r){const n=ve(t),s=n.queries.get(e);if(s)for(const a of s.Sa)a.onError(r);n.queries.delete(e)}function A0(t){t.Ca.forEach(e=>{e.next()})}var Tp,Iv;(Iv=Tp||(Tp={})).Ma="default",Iv.Cache="cache";class P0{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new eo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.key=e}}class tE{constructor(e){this.key=e}}class p6{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=yj(e),this.tu=new La(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new Cv,s=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Ph(this.query,f)?f:null,N=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;m&&y?m.data.isEqual(y.data)?N!==E&&(n.track({type:3,doc:y}),C=!0):this.su(m,y)||(n.track({type:2,doc:y}),C=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!m&&y?(n.track({type:0,doc:y}),C=!0):m&&!y&&(n.track({type:1,doc:m}),C=!0,(c||d)&&(l=!0)),C&&(y?(o=o.add(y),a=E?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),n.track({type:1,doc:h})}return{tu:o,iu:n,Cs:l,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,N){const E=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:C})}};return E(y)-E(N)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(n),s=s??!1;const l=r&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new eo(this.query,e.tu,a,o,e.mutatedKeys,c===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new tE(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new eE(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=ke();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const R0="SyncEngine";class g6{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class x6{constructor(e){this.key=e,this.hu=!1}}class w6{constructor(e,r,n,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ea(l=>wj(l),Ah),this.Iu=new Map,this.Eu=new Set,this.du=new at(he.comparator),this.Au=new Map,this.Ru=new y0,this.Vu={},this.mu=new Map,this.fu=Za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y6(t,e,r=!0){const n=oE(t);let s;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await rE(n,e,r,!0),s}async function v6(t,e){const r=oE(t);await rE(r,e,!0,!1)}async function rE(t,e,r,n){const s=await UD(t.localStore,yn(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await b6(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&Kj(t.remoteStore,s),l}async function b6(t,e,r,n,s){t.pu=(f,m,y)=>async function(E,C,x,w){let g=C.view.ru(x);g.Cs&&(g=await Nv(E.localStore,C.query,!1).then(({documents:A})=>C.view.ru(A,g)));const b=w&&w.targetChanges.get(C.targetId),I=w&&w.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(g,E.isPrimaryClient,b,I);return Pv(E,C.targetId,M.au),M.snapshot}(t,f,m,y);const a=await Nv(t.localStore,e,!0),o=new p6(e,a.Qs),l=o.ru(a.documents),c=pc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Pv(t,r,d.au);const h=new g6(e,r,o);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function N6(t,e,r){const n=ve(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter(o=>!Ah(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await kp(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&_0(n.remoteStore,s.targetId),Ip(n,s.targetId)}).catch(co)):(Ip(n,s.targetId),await kp(n.localStore,s.targetId,!0))}async function _6(t,e){const r=ve(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),_0(r.remoteStore,n.targetId))}async function j6(t,e,r){const n=A6(t);try{const s=await function(o,l){const c=ve(o),d=Qe.now(),h=l.reduce((y,N)=>y.add(N.key),ke());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let N=rs(),E=ke();return c.Ns.getEntries(y,h).next(C=>{N=C,N.forEach((x,w)=>{w.isValidDocument()||(E=E.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,N)).next(C=>{f=C;const x=[];for(const w of l){const g=F5(w,f.get(w.key).overlayedDocument);g!=null&&x.push(new oi(w.key,g,uj(g.value.mapValue),sr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,x,l)}).next(C=>{m=C;const x=C.applyToLocalDocumentSet(f,E);return c.documentOverlayCache.saveOverlays(y,C.batchId,x)})}).then(()=>({batchId:m.batchId,changes:bj(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new at(Se)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(n,s.batchId,r),await xc(n,s.changes),await Fh(n.remoteStore)}catch(s){const a=C0(s,"Failed to persist write");r.reject(a)}}async function nE(t,e){const r=ve(t);try{const n=await OD(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Au.get(a);o&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Oe(o.hu,14607):s.removedDocuments.size>0&&(Oe(o.hu,42227),o.hu=!1))}),await xc(r,n,e)}catch(n){await co(n)}}function Av(t,e,r){const n=ve(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ve(o);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&A0(c)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function E6(t,e,r){const n=ve(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),a=s&&s.key;if(a){let o=new at(he.comparator);o=o.insert(a,Kt.newNoDocument(a,we.min()));const l=ke().add(a),c=new Lh(we.min(),new Map,new at(Se),o,l);await nE(n,c),n.du=n.du.remove(a),n.Au.delete(e),D0(n)}else await kp(n.localStore,e,!1).then(()=>Ip(n,e,r)).catch(co)}async function S6(t,e){const r=ve(t),n=e.batch.batchId;try{const s=await LD(r.localStore,e);iE(r,n,null),sE(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await xc(r,s)}catch(s){await co(s)}}async function k6(t,e,r){const n=ve(t);try{const s=await function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Oe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(n.localStore,e);iE(n,e,r),sE(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await xc(n,s)}catch(s){await co(s)}}function sE(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function iE(t,e,r){const n=ve(t);let s=n.Vu[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function Ip(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||aE(t,n)})}function aE(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(_0(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),D0(t))}function Pv(t,e,r){for(const n of r)n instanceof eE?(t.Ru.addReference(n.key,e),C6(t,n)):n instanceof tE?(se(R0,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||aE(t,n.key)):ge(19791,{wu:n})}function C6(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(se(R0,"New document in limbo: "+r),t.Eu.add(n),D0(t))}function D0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new he(Be.fromString(e)),n=t.fu.next();t.Au.set(n,new x6(r)),t.du=t.du.insert(r,n),Kj(t.remoteStore,new ks(yn(Ih(r.path)),n,"TargetPurposeLimboResolution",kh.ce))}}async function xc(t,e,r){const n=ve(t),s=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const f=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=b0.As(c.targetId,d);a.push(f)}}))}),await Promise.all(o),n.Pu.H_(s),await async function(c,d){const h=ve(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(d,m=>G.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>G.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!uo(f))throw f;se(N0,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),N=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(m,E)}}}(n.localStore,a))}async function T6(t,e){const r=ve(t);if(!r.currentUser.isEqual(e)){se(R0,"User change. New user:",e.toKey());const n=await qj(r.localStore,e);r.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new ne(B.CANCELLED,o))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await xc(r,n.Ls)}}function I6(t,e){const r=ve(t),n=r.Au.get(e);if(n&&n.hu)return ke().add(n.key);{let s=ke();const a=r.Iu.get(e);if(!a)return s;for(const o of a){const l=r.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function oE(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E6.bind(null,e),e.Pu.H_=m6.bind(null,e.eventManager),e.Pu.yu=f6.bind(null,e.eventManager),e}function A6(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k6.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return MD(this.persistence,new PD,e.initialUser,this.serializer)}Cu(e){return new Bj(v0.mi,this.serializer)}Du(e){return new $D}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class P6 extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Oe(this.persistence.referenceDelegate instanceof Fd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new xD(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new Bj(n=>Fd.mi(n,r),this.serializer)}}class Ap{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Av(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=T6.bind(null,this.syncEngine),await u6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new h6}()}createDatastore(e){const r=Oh(e.databaseInfo.databaseId),n=function(a){return new GD(a)}(e.databaseInfo);return function(a,o,l,c){return new XD(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,o,l){return new ZD(n,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>Av(this.syncEngine,r,0),function(){return Ev.v()?new Ev:new BD}())}createSyncEngine(e,r){return function(s,a,o,l,c,d,h){const f=new w6(s,a,o,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=ve(s);se(qi,"RemoteStore shutting down."),a.Ea.add(5),await gc(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="FirestoreClient";class R6{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Wt.UNAUTHENTICATED,this.clientId=c0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{se(Xs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(se(Xs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=C0(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Jm(t,e){t.asyncQueue.verifyOperationInProgress(),se(Xs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await qj(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rv(t,e){t.asyncQueue.verifyOperationInProgress();const r=await D6(t);se(Xs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>kv(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>kv(e.remoteStore,s)),t._onlineComponents=e}async function D6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Xs,"Using user provided OfflineComponentProvider");try{await Jm(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Qa("Error using user provided cache. Falling back to memory cache: "+r),await Jm(t,new zd)}}else se(Xs,"Using default OfflineComponentProvider"),await Jm(t,new P6(void 0));return t._offlineComponents}async function lE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Xs,"Using user provided OnlineComponentProvider"),await Rv(t,t._uninitializedComponentsProvider._online)):(se(Xs,"Using default OnlineComponentProvider"),await Rv(t,new Ap))),t._onlineComponents}function M6(t){return lE(t).then(e=>e.syncEngine)}async function $d(t){const e=await lE(t),r=e.eventManager;return r.onListen=y6.bind(null,e.syncEngine),r.onUnlisten=N6.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=v6.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=_6.bind(null,e.syncEngine),r}function L6(t,e,r={}){const n=new Wn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,d){const h=new M0({next:m=>{h.Nu(),o.enqueueAndForget(()=>I0(a,f));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new ne(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new ne(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new P0(Ih(l.path),h,{includeMetadataChanges:!0,qa:!0});return T0(a,f)}(await $d(t),t.asyncQueue,e,r,n)),n.promise}function O6(t,e,r={}){const n=new Wn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,d){const h=new M0({next:m=>{h.Nu(),o.enqueueAndForget(()=>I0(a,f)),m.fromCache&&c.source==="server"?d.reject(new ne(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new P0(l,h,{includeMetadataChanges:!0,qa:!0});return T0(a,f)}(await $d(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="firestore.googleapis.com",Mv=!0;class Lv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uE,this.ssl=Mv}else this.host=e.host,this.ssl=e.ssl??Mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$j;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pD)throw new ne(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cE(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ne(B.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ne(B.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ne(B.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qR;switch(n.type){case"firstParty":return new KR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ne(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Dv.get(r);n&&(se("ComponentProvider","Removing Datastore"),Dv.delete(r),n.terminate())}(this),Promise.resolve()}}function V6(t,e,r,n={}){var d;t=nr(t,Uh);const s=si(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;s&&(qg(`https://${l}`),Hg("Firestore",!0)),a.host!==uE&&a.host!==l&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:n};if(!qs(c,o)&&(t._setSettings(c),n.mockUserToken)){let h,f;if(typeof n.mockUserToken=="string")h=n.mockUserToken,f=Wt.MOCK_USER;else{h=wN(n.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new ne(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Wt(m)}t._authCredentials=new HR(new X_(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class dt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(mc(r,dt._jsonSchema))return new dt(e,n||null,new he(Be.fromString(r.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:bt("string",dt._jsonSchemaVersion),referencePath:bt("string")};class Fs extends os{constructor(e,r,n){super(e,r,Ih(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new he(e))}withConverter(e){return new Fs(this.firestore,e,this._path)}}function Ne(t,e,...r){if(t=Ue(t),J_("collection","path",e),t instanceof Uh){const n=Be.fromString(e,...r);return Qy(n),new Fs(t,null,n)}{if(!(t instanceof dt||t instanceof Fs))throw new ne(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Be.fromString(e,...r));return Qy(n),new Fs(t.firestore,null,n)}}function ye(t,e,...r){if(t=Ue(t),arguments.length===1&&(e=c0.newId()),J_("doc","path",e),t instanceof Uh){const n=Be.fromString(e,...r);return Ky(n),new dt(t,null,new he(n))}{if(!(t instanceof dt||t instanceof Fs))throw new ne(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Be.fromString(e,...r));return Ky(n),new dt(t.firestore,t instanceof Fs?t.converter:null,new he(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="AsyncQueue";class Vv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wj(this,"async_queue_retry"),this._c=()=>{const n=Xm();n&&se(Ov,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Xm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Xm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Wn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!uo(e))throw e;se(Ov,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,ts("INTERNAL UNHANDLED ERROR: ",Fv(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=k0.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:Fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function Fv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class jn extends Uh{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Vv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vv(e),this._firestoreClient=void 0,await e}}}function F6(t,e){const r=typeof t=="object"?t:wh(),n=typeof t=="string"?t:Dd,s=ii(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=pN("firestore");a&&V6(s,...a)}return s}function wc(t){if(t._terminated)throw new ne(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||U6(t),t._firestoreClient}function U6(t){var n,s,a;const e=t._freezeSettings(),r=function(l,c,d,h){return new h5(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,cE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new R6(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rr(Ft.fromBase64String(e))}catch(r){throw new ne(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Rr(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mc(e,Rr._jsonSchema))return Rr.fromBase64String(e.bytes)}}Rr._jsonSchemaVersion="firestore/bytes/1.0",Rr._jsonSchema={type:bt("string",Rr._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ne(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ne(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ne(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bn._jsonSchemaVersion}}static fromJSON(e){if(mc(e,bn._jsonSchema))return new bn(e.latitude,e.longitude)}}bn._jsonSchemaVersion="firestore/geoPoint/1.0",bn._jsonSchema={type:bt("string",bn._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mc(e,Nn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Nn(e.vectorValues);throw new ne(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nn._jsonSchemaVersion="firestore/vectorValue/1.0",Nn._jsonSchema={type:bt("string",Nn._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=/^__.*__$/;class $6{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,r,this.fieldTransforms):new fc(e,this.data,r,this.fieldTransforms)}}class dE{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new oi(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function hE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class L0{constructor(e,r,n,s,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new L0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hE(this.Ac)&&z6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class B6{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Oh(e)}Cc(e,r,n,s=!1){return new L0({Ac:e,methodName:r,Dc:n,path:Mt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bc(t){const e=t._freezeSettings(),r=Oh(t._databaseId);return new B6(t._databaseId,!!e.ignoreUndefinedProperties,r)}function O0(t,e,r,n,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,s);U0("Data must be an object, but it was:",o,n);const l=pE(n,o);let c,d;if(a.merge)c=new jr(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const m=Pp(e,f,r);if(!o.contains(m))throw new ne(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xE(h,m)||h.push(m)}c=new jr(h),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new $6(new ur(l),c,d)}class zh extends vc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}class V0 extends vc{_toFieldTransform(e){return new Tj(e.path,new Kl)}isEqual(e){return e instanceof V0}}class F0 extends vc{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new Xl(e.serializer,jj(e.serializer,this.Fc));return new Tj(e.path,r)}isEqual(e){return e instanceof F0&&this.Fc===e.Fc}}function mE(t,e,r,n){const s=t.Cc(1,e,r);U0("Data must be an object, but it was:",s,n);const a=[],o=ur.empty();ai(n,(c,d)=>{const h=z0(e,c,r);d=Ue(d);const f=s.yc(h);if(d instanceof zh)a.push(h);else{const m=Nc(d,f);m!=null&&(a.push(h),o.set(h,m))}});const l=new jr(a);return new dE(o,l,s.fieldTransforms)}function fE(t,e,r,n,s,a){const o=t.Cc(1,e,r),l=[Pp(e,n,r)],c=[s];if(a.length%2!=0)throw new ne(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Pp(e,a[m])),c.push(a[m+1]);const d=[],h=ur.empty();for(let m=l.length-1;m>=0;--m)if(!xE(d,l[m])){const y=l[m];let N=c[m];N=Ue(N);const E=o.yc(y);if(N instanceof zh)d.push(y);else{const C=Nc(N,E);C!=null&&(d.push(y),h.set(y,C))}}const f=new jr(d);return new dE(h,f,o.fieldTransforms)}function q6(t,e,r,n=!1){return Nc(r,t.Cc(n?4:3,e))}function Nc(t,e){if(gE(t=Ue(t)))return U0("Unsupported field value:",e,t),pE(t,e);if(t instanceof vc)return function(n,s){if(!hE(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const a=[];let o=0;for(const l of n){let c=Nc(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=Ue(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return jj(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Qe.fromDate(n);return{timestampValue:Vd(s.serializer,a)}}if(n instanceof Qe){const a=new Qe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Vd(s.serializer,a)}}if(n instanceof bn)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Rr)return{bytesValue:Mj(s.serializer,n._byteString)};if(n instanceof dt){const a=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:w0(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Nn)return function(o,l){return{mapValue:{fields:{[oj]:{stringValue:cj},[Md]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return p0(l.serializer,d)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Sh(n)}`)}(t,e)}function pE(t,e){const r={};return tj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ai(t,(n,s)=>{const a=Nc(s,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function gE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof bn||t instanceof Rr||t instanceof dt||t instanceof vc||t instanceof Nn)}function U0(t,e,r){if(!gE(r)||!Z_(r)){const n=Sh(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Pp(t,e,r){if((e=Ue(e))instanceof yc)return e._internalPath;if(typeof e=="string")return z0(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,r)}const H6=new RegExp("[~\\*/\\[\\]]");function z0(t,e,r){if(e.search(H6)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new yc(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Bd(t,e,r,n,s){const a=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${s}`),c+=")"),new ne(B.INVALID_ARGUMENT,l+t+c)}function xE(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field($h("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class W6 extends wE{data(){return super.data()}}function $h(t,e){return typeof e=="string"?z0(t,e):e instanceof yc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $0{}class B0 extends $0{}function je(t,e,...r){let n=[];e instanceof $0&&n.push(e),n=n.concat(r),function(a){const o=a.filter(c=>c instanceof q0).length,l=a.filter(c=>c instanceof Bh).length;if(o>1||o>0&&l>0)throw new ne(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Bh extends B0{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Bh(e,r,n)}_apply(e){const r=this._parse(e);return vE(e._query,r),new os(e.firestore,e.converter,Np(e._query,r))}_parse(e){const r=bc(e.firestore);return function(a,o,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$v(f,h);const N=[];for(const E of f)N.push(zv(c,a,E));m={arrayValue:{values:N}}}else m=zv(c,a,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$v(f,h),m=q6(l,o,f,h==="in"||h==="not-in");return yt.create(d,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Me(t,e,r){const n=e,s=$h("where",t);return Bh._create(s,n,r)}class q0 extends $0{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new q0(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:an.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)vE(o,c),o=Np(o,c)}(e._query,r),new os(e.firestore,e.converter,Np(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class H0 extends B0{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new H0(e,r)}_apply(e){const r=function(s,a,o){if(s.startAt!==null)throw new ne(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gl(a,o)}(e._query,this._field,this._direction);return new os(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new ho(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function ht(t,e="asc"){const r=e,n=$h("orderBy",t);return H0._create(n,r)}class W0 extends B0{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new W0(e,r,n)}_apply(e){return new os(e.firestore,e.converter,Od(e._query,this._limit,this._limitType))}}function ns(t){return t5("limit",t),W0._create("limit",t,"F")}function zv(t,e,r){if(typeof(r=Ue(r))=="string"){if(r==="")throw new ne(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xj(e)&&r.indexOf("/")!==-1)throw new ne(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Be.fromString(r));if(!he.isDocumentKey(n))throw new ne(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return nv(t,new he(n))}if(r instanceof dt)return nv(t,r._key);throw new ne(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(r)}.`)}function $v(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vE(t,e){const r=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ne(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class G6{convertValue(e,r="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return ai(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,s,a;const r=(a=(s=(n=e.fields)==null?void 0:n[Md].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>mt(o.doubleValue));return new Nn(r)}convertGeoPoint(e){return new bn(mt(e.latitude),mt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Th(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const r=Gs(e);return new Qe(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Be.fromString(e);Oe(zj(n),9688,{name:e});const s=new Hl(n.get(1),n.get(3)),a=new he(n.popFirst(5));return s.isEqual(r)||ts(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class nl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ii extends wE{constructor(e,r,n,s,a,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field($h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Ii._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Ii._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ii._jsonSchema={type:bt("string",Ii._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Qu extends Ii{data(e={}){return super.data(e)}}class Ai{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new nl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Qu(this._firestore,this._userDataWriter,n.key,n,new nl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ne(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Qu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new nl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new Qu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new nl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:K6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ai._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function K6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){t=nr(t,dt);const e=nr(t.firestore,jn);return L6(wc(e),t._key).then(r=>bE(e,t,r))}Ai._jsonSchemaVersion="firestore/querySnapshot/1.0",Ai._jsonSchema={type:bt("string",Ai._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class K0 extends G6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,r)}}function Le(t){t=nr(t,os);const e=nr(t.firestore,jn),r=wc(e),n=new K0(e);return yE(t._query),O6(r,t._query).then(s=>new Ai(e,n,t,s))}function Jl(t,e,r){t=nr(t,dt);const n=nr(t.firestore,jn),s=G0(t.converter,e,r);return _c(n,[O0(bc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,sr.none())])}function rt(t,e,r,...n){t=nr(t,dt);const s=nr(t.firestore,jn),a=bc(s);let o;return o=typeof(e=Ue(e))=="string"||e instanceof yc?fE(a,"updateDoc",t._key,e,r,n):mE(a,"updateDoc",t._key,e),_c(s,[o.toMutation(t._key,sr.exists(!0))])}function Qr(t){return _c(nr(t.firestore,jn),[new Mh(t._key,sr.none())])}function Us(t,e){const r=nr(t.firestore,jn),n=ye(t),s=G0(t.converter,e);return _c(r,[O0(bc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,sr.exists(!1))]).then(()=>n)}function Rp(t,...e){var c,d,h;t=Ue(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Uv(e[n])||(r=e[n++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(Uv(e[n])){const f=e[n];e[n]=(c=f.next)==null?void 0:c.bind(f),e[n+1]=(d=f.error)==null?void 0:d.bind(f),e[n+2]=(h=f.complete)==null?void 0:h.bind(f)}let a,o,l;if(t instanceof dt)o=nr(t.firestore,jn),l=Ih(t._key.path),a={next:f=>{e[n]&&e[n](bE(o,t,f))},error:e[n+1],complete:e[n+2]};else{const f=nr(t,os);o=nr(f.firestore,jn),l=f._query;const m=new K0(o);a={next:y=>{e[n]&&e[n](new Ai(o,m,f,y))},error:e[n+1],complete:e[n+2]},yE(t._query)}return function(m,y,N,E){const C=new M0(E),x=new P0(y,C,N);return m.asyncQueue.enqueueAndForget(async()=>T0(await $d(m),x)),()=>{C.Nu(),m.asyncQueue.enqueueAndForget(async()=>I0(await $d(m),x))}}(wc(o),l,s,a)}function _c(t,e){return function(n,s){const a=new Wn;return n.asyncQueue.enqueueAndForget(async()=>j6(await M6(n),s,a)),a.promise}(wc(t),e)}function bE(t,e,r){const n=r.docs.get(e._key),s=new K0(t);return new Ii(t,s,e._key,n,new nl(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=bc(e)}set(e,r,n){this._verifyNotCommitted();const s=Zm(e,this._firestore),a=G0(s.converter,r,n),o=O0(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(o.toMutation(s._key,sr.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const a=Zm(e,this._firestore);let o;return o=typeof(r=Ue(r))=="string"||r instanceof yc?fE(this._dataReader,"WriteBatch.update",a._key,r,n,s):mE(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(o.toMutation(a._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Zm(e,this._firestore);return this._mutations=this._mutations.concat(new Mh(r._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zm(t,e){if((t=Ue(t)).firestore!==e)throw new ne(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Pe(){return new V0("serverTimestamp")}function Bv(t){return new F0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){return wc(t=nr(t,jn)),new Q6(t,e=>_c(t,e))}(function(e,r=!0){(function(s){lo=s})(Ji),sn(new Vr("firestore",(n,{instanceIdentifier:s,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new jn(new WR(n.getProvider("auth-internal")),new QR(o,n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hl(d.options.projectId,h)}(o,s),o);return a={useFetchStreams:r,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),gr(qy,Hy,e),gr(qy,Hy,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebasestorage.googleapis.com",_E="storageBucket",Y6=2*60*1e3,X6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt extends zr{constructor(e,r,n=0){super(ef(e),`Firebase Storage: ${r} (${ef(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ef(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ot||(ot={}));function ef(t){return"storage/"+t}function Q0(){const t="An unknown error occurred, please check the error payload for server response.";return new lt(ot.UNKNOWN,t)}function J6(t){return new lt(ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Z6(t){return new lt(ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lt(ot.UNAUTHENTICATED,t)}function tM(){return new lt(ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function rM(t){return new lt(ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nM(){return new lt(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sM(){return new lt(ot.CANCELED,"User canceled the upload/download.")}function iM(t){return new lt(ot.INVALID_URL,"Invalid URL '"+t+"'.")}function aM(t){return new lt(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oM(){return new lt(ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_E+"' property when initializing the app?")}function lM(){return new lt(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cM(){return new lt(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uM(t){return new lt(ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function qd(t){return new lt(ot.INVALID_ARGUMENT,t)}function jE(){return new lt(ot.APP_DELETED,"The Firebase app was deleted.")}function EE(t){return new lt(ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vl(t,e){return new lt(ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bo(t){throw new lt(ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=hr.makeFromUrl(e,r)}catch{return new hr(e,"")}if(n.path==="")return n;throw aM(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const h="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),N={bucket:1,path:3},E=r===NE?"(?:storage.googleapis.com|storage.cloud.google.com)":r,C="([^?#]*)",x=new RegExp(`^https?://${E}/${s}/${C}`,"i"),g=[{regex:l,indices:c,postModify:a},{regex:y,indices:N,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<g.length;b++){const I=g[b],M=I.regex.exec(e);if(M){const A=M[I.indices.bucket];let _=M[I.indices.path];_||(_=""),n=new hr(A,_),I.postModify(n);break}}if(n==null)throw iM(e);return n}}class dM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t,e,r){let n=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let d=!1;function h(...C){d||(d=!0,e.apply(null,C))}function f(C){s=setTimeout(()=>{s=null,t(y,c())},C)}function m(){a&&clearTimeout(a)}function y(C,...x){if(d){m();return}if(C){m(),h.call(null,C,...x);return}if(c()||o){m(),h.call(null,C,...x);return}n<64&&(n*=2);let g;l===1?(l=2,g=0):g=(n+Math.random())*1e3,f(g)}let N=!1;function E(C){N||(N=!0,m(),!d&&(s!==null?(C||(l=2),clearTimeout(s),f(0)):C||(l=1)))}return f(0),a=setTimeout(()=>{o=!0,E(!0)},r),E}function mM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t){return t!==void 0}function pM(t){return typeof t=="object"&&!Array.isArray(t)}function Y0(t){return typeof t=="string"||t instanceof String}function qv(t){return X0()&&t instanceof Blob}function X0(){return typeof Blob<"u"}function Hv(t,e,r,n){if(n<e)throw qd(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw qd(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function SE(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Pi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Pi||(Pi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,r,n,s,a,o,l,c,d,h,f,m=!0,y=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,E)=>{this.resolve_=N,this.reject_=E,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new vu(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Pi.NO_ERROR,c=a.getStatus();if(!l||gM(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Pi.ABORT;n(!1,new vu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;n(!0,new vu(d,a))})},r=(n,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());fM(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=Q0();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?jE():sM();o(c)}else{const c=nM();o(c)}};this.canceled_?r(!1,new vu(!1,null,!0)):this.backoffId_=hM(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vu{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function wM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function yM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function bM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NM(t,e,r,n,s,a,o=!0,l=!1){const c=SE(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return vM(h,e),wM(h,r),yM(h,a),bM(h,n),new xM(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jM(...t){const e=_M();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(X0())return new Blob(t);throw new lt(ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function EM(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){if(typeof atob>"u")throw uM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tf{constructor(e,r){this.data=e,this.contentType=r||null}}function kE(t,e){switch(t){case Yr.RAW:return new tf(CE(e));case Yr.BASE64:case Yr.BASE64URL:return new tf(TE(t,e));case Yr.DATA_URL:return new tf(CM(e),TM(e))}throw Q0()}function CE(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function kM(t){let e;try{e=decodeURIComponent(t)}catch{throw vl(Yr.DATA_URL,"Malformed data URL.")}return CE(e)}function TE(t,e){switch(t){case Yr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw vl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Yr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw vl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=SM(e)}catch(s){throw s.message.includes("polyfill")?s:vl(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class IE{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw vl(Yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=IM(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function CM(t){const e=new IE(t);return e.base64?TE(Yr.BASE64,e.rest):kM(e.rest)}function TM(t){return new IE(t).contentType}function IM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,r){let n=0,s="";qv(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(qv(this.data_)){const n=this.data_,s=EM(n,e,r);return s===null?null:new On(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new On(n,!0)}}static getBlob(...e){if(X0()){const r=e.map(n=>n instanceof On?n.data_:n);return new On(jM.apply(null,r))}else{const r=e.map(o=>Y0(o)?kE(Yr.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const s=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new On(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){let e;try{e=JSON.parse(t)}catch{return null}return pM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function PM(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function PE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t,e){return e}class er{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||RM}}let bu=null;function DM(t){return!Y0(t)||t.length<2?t:PE(t)}function RE(){if(bu)return bu;const t=[];t.push(new er("bucket")),t.push(new er("generation")),t.push(new er("metageneration")),t.push(new er("name","fullPath",!0));function e(a,o){return DM(o)}const r=new er("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const s=new er("size");return s.xform=n,t.push(s),t.push(new er("timeCreated")),t.push(new er("updated")),t.push(new er("md5Hash",null,!0)),t.push(new er("cacheControl",null,!0)),t.push(new er("contentDisposition",null,!0)),t.push(new er("contentEncoding",null,!0)),t.push(new er("contentLanguage",null,!0)),t.push(new er("contentType",null,!0)),t.push(new er("metadata","customMetadata",!0)),bu=t,bu}function MM(t,e){function r(){const n=t.bucket,s=t.fullPath,a=new hr(n,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function LM(t,e,r){const n={};n.type="file";const s=r.length;for(let a=0;a<s;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return MM(n,t),n}function DE(t,e,r){const n=AE(e);return n===null?null:LM(t,n,r)}function OM(t,e,r,n){const s=AE(e);if(s===null||!Y0(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),y=qh(m,r,n),N=SE({alt:"media",token:d});return y+N})[0]}function VM(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const a=e[s];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class J0{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){if(!t)throw Q0()}function FM(t,e){function r(n,s){const a=DE(t,s,e);return ME(a!==null),a}return r}function UM(t,e){function r(n,s){const a=DE(t,s,e);return ME(a!==null),OM(a,s,t.host,t._protocol)}return r}function LE(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=tM():s=eM():r.getStatus()===402?s=Z6(t.bucket):r.getStatus()===403?s=rM(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function OE(t){const e=LE(t);function r(n,s){let a=e(n,s);return n.getStatus()===404&&(a=J6(t.path)),a.serverResponse=s.serverResponse,a}return r}function zM(t,e,r){const n=e.fullServerUrl(),s=qh(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new J0(s,a,UM(t,r),o);return l.errorHandler=OE(e),l}function $M(t,e){const r=e.fullServerUrl(),n=qh(r,t.host,t._protocol),s="DELETE",a=t.maxOperationRetryTime;function o(c,d){}const l=new J0(n,s,o,a);return l.successCodes=[200,204],l.errorHandler=OE(e),l}function BM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function qM(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=BM(null,e)),n}function HM(t,e,r,n,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let g="";for(let b=0;b<2;b++)g=g+Math.random().toString().slice(2);return g}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=qM(e,n,s),h=VM(d,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",y=On.getBlob(f,n,m);if(y===null)throw lM();const N={name:d.fullPath},E=qh(a,t.host,t._protocol),C="POST",x=t.maxUploadRetryTime,w=new J0(E,C,FM(t,r),x);return w.urlParams=N,w.headers=o,w.body=y.uploadData(),w.errorHandler=LE(e),w}class WM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s,a){if(this.sent_)throw Bo("cannot .send() more than once");if(si(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class GM extends WM{initXhr(){this.xhr_.responseType="text"}}function Z0(){return new GM}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,r){this._service=e,r instanceof hr?this._location=r:this._location=hr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Hi(e,r)}get root(){const e=new hr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PE(this._location.path)}get storage(){return this._service}get parent(){const e=AM(this._location.path);if(e===null)return null;const r=new hr(this._location.bucket,e);return new Hi(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw EE(e)}}function KM(t,e,r){t._throwIfRoot("uploadBytes");const n=HM(t.storage,t._location,RE(),new On(e,!0),r);return t.storage.makeRequestWithTokens(n,Z0).then(s=>({metadata:s,ref:t}))}function QM(t){t._throwIfRoot("getDownloadURL");const e=zM(t.storage,t._location,RE());return t.storage.makeRequestWithTokens(e,Z0).then(r=>{if(r===null)throw cM();return r})}function YM(t){t._throwIfRoot("deleteObject");const e=$M(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Z0)}function XM(t,e){const r=PM(t._location.path,e),n=new hr(t._location.bucket,r);return new Hi(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){return/^[A-Za-z]+:\/\//.test(t)}function ZM(t,e){return new Hi(t,e)}function VE(t,e){if(t instanceof ex){const r=t;if(r._bucket==null)throw oM();const n=new Hi(r,r._bucket);return e!=null?VE(n,e):n}else return e!==void 0?XM(t,e):t}function eL(t,e){if(e&&JM(e)){if(t instanceof ex)return ZM(t,e);throw qd("To use ref(service, url), the first argument must be a Storage instance.")}else return VE(t,e)}function Wv(t,e){const r=e==null?void 0:e[_E];return r==null?null:hr.makeFromBucketSpec(r,t)}function tL(t,e,r,n={}){t.host=`${e}:${r}`;const s=si(e);s&&(qg(`https://${t.host}/b`),Hg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:wN(a,t.app.options.projectId))}class ex{constructor(e,r,n,s,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=NE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Y6,this._maxUploadRetryTime=X6,this._requests=new Set,s!=null?this._bucket=hr.makeFromBucketSpec(s,this._host):this._bucket=Wv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hr.makeFromBucketSpec(this._url,e):this._bucket=Wv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hi(this,e)}_makeRequest(e,r,n,s,a=!0){if(this._deleted)return new dM(jE());{const o=NM(e,this._appId,n,s,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const Gv="@firebase/storage",Kv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="storage";function rL(t,e,r){return t=Ue(t),KM(t,e,r)}function nL(t){return t=Ue(t),QM(t)}function sL(t){return t=Ue(t),YM(t)}function iL(t,e){return t=Ue(t),eL(t,e)}function UE(t=wh(),e){t=Ue(t);const n=ii(t,FE).getImmediate({identifier:e}),s=pN("storage");return s&&zE(n,...s),n}function zE(t,e,r,n={}){tL(t,e,r,n)}function aL(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ex(r,n,s,e,Ji)}function oL(){sn(new Vr(FE,aL,"PUBLIC").setMultipleInstances(!0)),gr(Gv,Kv,""),gr(Gv,Kv,"esm2020")}oL();const Qv=Object.freeze(Object.defineProperty({__proto__:null,StorageError:lt,get StorageErrorCode(){return ot},StringFormat:Yr,_FbsBlob:On,_Location:hr,_dataFromString:kE,_invalidArgument:qd,_invalidRootOperation:EE,connectStorageEmulator:zE,deleteObject:sL,getDownloadURL:nL,getStorage:UE,ref:iL,uploadBytes:rL},Symbol.toStringTag,{value:"Module"}));var lL="firebase",cL="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(lL,cL,"app");const $E={apiKey:"AIzaSyDkPhYGNEdBtRdEeWwHCWfCFtLWqmGBTO8",authDomain:"hackathon-8b0e1.firebaseapp.com",projectId:"hackathon-8b0e1",storageBucket:"hackathon-8b0e1.firebasestorage.app",messagingSenderId:"523976123580",appId:"1:523976123580:web:1f781a5403c7aa6540dcb9",measurementId:"G-GQHD2SXYJ2"},Hh=EN($E);let uL;if(typeof window<"u"&&$E.measurementId)try{uL=MA(Hh)}catch{}const vt=B_(Hh),BE=new pn,J=F6(Hh),dL=UE(Hh),Mp=Object.freeze(Object.defineProperty({__proto__:null,auth:vt,db:J,googleProvider:BE,signInWithEmailAndPassword:s0,storage:dL},Symbol.toStringTag,{value:"Module"})),qE=v.createContext(),hL=({children:t})=>{const[e,r]=v.useState(null),[n,s]=v.useState(!0),[a,o]=v.useState(null),[l,c]=v.useState(!1),[d,h]=v.useState(!1);v.useEffect(()=>{const N=vt.onAuthStateChanged(async E=>{s(!0),o(null);try{if(E){const C=await E.getIdToken(),x=ye(J,"users",E.uid),w=await jt(x),g=w.exists()?w.data():{};g.username&&g.phone&&g.birthDate||h(!0),r({...E,role:g.role||"cliente",displayName:g.displayName||E.displayName,profileData:g,idToken:C}),localStorage.getItem(`tour-${E.uid}`)||c(!0)}else r(null),c(!1),h(!1)}catch(C){console.error("Erro ao buscar dados do usuário:",C),o("Erro ao carregar dados do usuário"),r(E)}finally{s(!1)}});return()=>N()},[]);const f=async()=>{if(e){localStorage.setItem(`tour-${e.uid}`,"true"),c(!1);try{const N=ye(J,"users",e.uid);await Jl(N,{hasSeenTour:!0},{merge:!0})}catch(N){console.error("Erro ao salvar status do tour:",N)}}},m=async()=>{if(e){h(!1);try{const N=ye(J,"users",e.uid),E=await jt(N);if(E.exists()){const C=E.data();r(x=>({...x,profileData:C}))}}catch(N){console.error("Erro ao atualizar dados do usuário:",N)}}},y={user:e,loading:n,error:a,isAuthenticated:!!e,isAdmin:(e==null?void 0:e.role)==="admin",isPsychologist:(e==null?void 0:e.role)==="psicologo",isClient:(e==null?void 0:e.role)==="cliente",isFirstTime:l,needsProfileCompletion:d,markTourAsSeen:f,markProfileAsComplete:m};return i.jsx(qE.Provider,{value:y,children:t})},ze=()=>{const t=v.useContext(qE);if(!t)throw new Error("useAuth deve ser usado dentro de AuthProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const r=v.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>v.createElement("svg",{ref:h,...mL,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${fL(t)}`,l].join(" "),...d},[...e.map(([f,m])=>v.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=te("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=te("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=te("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=te("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=te("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=te("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=te("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=te("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=te("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=te("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=te("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=te("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=te("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=te("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=te("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=te("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rS=Yt.memo(({scrolled:t,scrollToSection:e})=>{const[r,n]=v.useState(!1),[s,a]=v.useState(!1),[o,l]=v.useState(!1),c=gt(),d=v.useRef(null),h=v.useRef(null);v.useEffect(()=>{l(!0)},[]);const f=v.useCallback(()=>{n(x=>!x),a(!1)},[]),m=v.useCallback(()=>{n(!1),a(!1)},[]),y=v.useMemo(()=>[{name:"Início",action:"home",id:"home"},{name:"Recursos",action:"services",id:"services"},{name:"Comunidade",action:"projects",id:"community"},{name:"Depoimentos",action:"testimonials",id:"testimonials"},{name:"Missão",action:"about",id:"about"}],[]),N=v.useCallback(x=>{x==="home"?window.scrollTo({top:0,behavior:"smooth"}):e(x),m()},[e,m]),E=v.useCallback(()=>{c("/"),window.scrollTo({top:0,behavior:"smooth"}),m()},[c,m]),C=v.useCallback(()=>{e("contact"),m()},[e,m]);return v.useEffect(()=>{const x=w=>{d.current&&!d.current.contains(w.target)&&m()};return r&&(document.addEventListener("mousedown",x),document.addEventListener("touchstart",x)),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("touchstart",x)}},[r,m]),v.useEffect(()=>{const x=w=>{w.key==="Escape"&&m()};return r&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[r]),v.useEffect(()=>{r&&h.current&&h.current.focus()},[r]),v.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),i.jsx("header",{className:`fixed top-2 md:top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-6xl px-4 md:px-6 transition-all duration-1000 transform ${o?"translate-y-0 opacity-100":"-translate-y-8 opacity-0"}`,children:i.jsxs("nav",{ref:d,className:`
          bg-white/5 border border-white/10 rounded-2xl 
          shadow-lg shadow-black/20 transition-all duration-500 backdrop-blur-md
          ${t?"bg-white/8 border-white/15 shadow-2xl shadow-black/30":"bg-white/5 border-white/20"}
        `,role:"navigation","aria-label":"Navegação principal",children:[i.jsxs("div",{className:"flex items-center justify-between px-5 md:px-6 py-3",children:[i.jsxs("button",{onClick:E,className:"flex items-center space-x-3 md:space-x-4 group","aria-label":"Ir para página inicial",children:[i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-xl flex items-center justify-center transition-all duration-300 overflow-hidden bg-white/10 border border-white/20 backdrop-blur-md group-hover:bg-white/15 group-hover:border-white/30 group-hover:shadow-lg group-hover:shadow-white/10 group-hover:scale-105",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1 group-hover:scale-110 transition-transform duration-300",loading:"eager",width:"48",height:"48"})}),i.jsx("span",{className:"text-lg md:text-xl font-light text-white tracking-wide group-hover:text-white/90 transition-colors",children:"Sereno"})]}),i.jsxs("div",{className:"hidden lg:flex items-center space-x-6 xl:space-x-8",children:[y.map((x,w)=>i.jsxs("button",{onClick:()=>N(x.action),className:"relative text-white/70 hover:text-white transition-all duration-300 text-sm font-light tracking-wide group","aria-label":`Ir para seção ${x.name}`,style:{transitionDelay:`${w*100}ms`},children:[x.name,i.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]},x.name)),i.jsx("button",{onClick:C,className:"group relative bg-white text-black px-6 py-2.5 rounded-lg transition-all duration-300 text-sm font-light tracking-wide transform hover:bg-white/90 hover:scale-105 backdrop-blur-md shadow-lg hover:shadow-xl","aria-label":"Ir para seção de contato",children:i.jsx("span",{className:"relative z-10",children:"Começar Agora"})})]}),i.jsx("button",{className:"lg:hidden text-white hover:bg-white/10 p-2.5 rounded-lg transition-all duration-300 backdrop-blur-md hover:scale-105",onClick:f,"aria-label":r?"Fechar menu":"Abrir menu","aria-expanded":r,"aria-controls":"mobile-menu","aria-haspopup":"true",children:r?i.jsx(Zt,{className:"w-5 h-5"}):i.jsx(JE,{className:"w-5 h-5"})})]}),r&&i.jsx("div",{id:"mobile-menu",className:"lg:hidden border-t border-white/10 px-5 py-5 bg-white/5 backdrop-blur-md animate-in slide-in-from-top-2 duration-300",role:"menu","aria-label":"Menu de navegação móvel",children:i.jsxs("div",{className:"flex flex-col space-y-3",children:[y.map((x,w)=>i.jsx("button",{ref:w===0?h:null,onClick:()=>N(x.action),className:"text-white/70 hover:text-white transition-all duration-300 py-2.5 text-sm text-left font-light tracking-wide hover:bg-white/5 rounded-lg px-3",role:"menuitem","aria-label":`Ir para seção ${x.name}`,style:{transitionDelay:`${w*100}ms`},children:x.name},x.name)),i.jsx("button",{onClick:C,className:"bg-white text-black px-6 py-3 rounded-lg hover:bg-white/90 transition-all duration-300 w-full text-sm font-light tracking-wide mt-3 backdrop-blur-md hover:scale-105",role:"menuitem","aria-label":"Ir para seção de contato",children:"Começar Agora"})]})})]})})});rS.displayName="Navbar";function _l(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function Up(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function PL(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function t1(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function r1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function RL(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function DL(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function rf(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ML(t,e){let r=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(r*r+n*n+s*s)}function LL(t,e){let r=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return r*r+n*n+s*s}function n1(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function OL(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function VL(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function zp(t,e){let r=e[0],n=e[1],s=e[2],a=r*r+n*n+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function nS(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function s1(t,e,r){let n=e[0],s=e[1],a=e[2],o=r[0],l=r[1],c=r[2];return t[0]=s*c-a*l,t[1]=a*o-n*c,t[2]=n*l-s*o,t}function FL(t,e,r,n){let s=e[0],a=e[1],o=e[2];return t[0]=s+n*(r[0]-s),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t}function UL(t,e,r,n,s){const a=Math.exp(-n*s);let o=e[0],l=e[1],c=e[2];return t[0]=r[0]+(o-r[0])*a,t[1]=r[1]+(l-r[1])*a,t[2]=r[2]+(c-r[2])*a,t}function zL(t,e,r){let n=e[0],s=e[1],a=e[2],o=r[3]*n+r[7]*s+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*s+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*s+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*s+r[10]*a+r[14])/o,t}function $L(t,e,r){let n=e[0],s=e[1],a=e[2],o=r[3]*n+r[7]*s+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*s+r[8]*a)/o,t[1]=(r[1]*n+r[5]*s+r[9]*a)/o,t[2]=(r[2]*n+r[6]*s+r[10]*a)/o,t}function BL(t,e,r){let n=e[0],s=e[1],a=e[2];return t[0]=n*r[0]+s*r[3]+a*r[6],t[1]=n*r[1]+s*r[4]+a*r[7],t[2]=n*r[2]+s*r[5]+a*r[8],t}function qL(t,e,r){let n=e[0],s=e[1],a=e[2],o=r[0],l=r[1],c=r[2],d=r[3],h=l*a-c*s,f=c*n-o*a,m=o*s-l*n,y=l*m-c*f,N=c*h-o*m,E=o*f-l*h,C=d*2;return h*=C,f*=C,m*=C,y*=2,N*=2,E*=2,t[0]=n+h+y,t[1]=s+f+N,t[2]=a+m+E,t}const HL=function(){const t=[0,0,0],e=[0,0,0];return function(r,n){Up(t,r),Up(e,n),zp(t,t),zp(e,e);let s=nS(t,e);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function WL(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class Xr extends Array{constructor(e=0,r=e,n=e){return super(e,r,n),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,r=e,n=e){return e.length?this.copy(e):(PL(this,e,r,n),this)}copy(e){return Up(this,e),this}add(e,r){return r?t1(this,e,r):t1(this,this,e),this}sub(e,r){return r?r1(this,e,r):r1(this,this,e),this}multiply(e){return e.length?RL(this,this,e):rf(this,this,e),this}divide(e){return e.length?DL(this,this,e):rf(this,this,1/e),this}inverse(e=this){return VL(this,e),this}len(){return _l(this)}distance(e){return e?ML(this,e):_l(this)}squaredLen(){return n1(this)}squaredDistance(e){return e?LL(this,e):n1(this)}negate(e=this){return OL(this,e),this}cross(e,r){return r?s1(this,e,r):s1(this,this,e),this}scale(e){return rf(this,this,e),this}normalize(){return zp(this,this),this}dot(e){return nS(this,e)}equals(e){return WL(this,e)}applyMatrix3(e){return BL(this,this,e),this}applyMatrix4(e){return zL(this,this,e),this}scaleRotateMatrix4(e){return $L(this,this,e),this}applyQuaternion(e){return qL(this,this,e),this}angle(e){return HL(this,e)}lerp(e,r){return FL(this,this,e,r),this}smoothLerp(e,r,n){return UL(this,this,e,r,n),this}clone(){return new Xr(this[0],this[1],this[2])}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}transformDirection(e){const r=this[0],n=this[1],s=this[2];return this[0]=e[0]*r+e[4]*n+e[8]*s,this[1]=e[1]*r+e[5]*n+e[9]*s,this[2]=e[2]*r+e[6]*n+e[10]*s,this.normalize()}}const i1=new Xr;let GL=1,KL=1,a1=!1;class QL{constructor(e,r={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=r,this.id=GL++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in r)this.addAttribute(n,r[n])}addAttribute(e,r){if(this.attributes[e]=r,r.id=KL++,r.size=r.size||1,r.type=r.type||(r.data.constructor===Float32Array?this.gl.FLOAT:r.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),r.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,r.normalized=r.normalized||!1,r.stride=r.stride||0,r.offset=r.offset||0,r.count=r.count||(r.stride?r.data.byteLength/r.stride:r.data.length/r.size),r.divisor=r.instanced||0,r.needsUpdate=!1,r.usage=r.usage||this.gl.STATIC_DRAW,r.buffer||this.updateAttribute(r),r.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==r.count*r.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,r.count*r.divisor);this.instancedCount=r.count*r.divisor}else e==="index"?this.drawRange.count=r.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,r.count))}updateAttribute(e){const r=!e.buffer;r&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),r?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((r,{name:n,type:s})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const a=this.attributes[n];this.gl.bindBuffer(a.target,a.buffer),this.glState.boundBuffer=a.buffer;let o=1;s===35674&&(o=2),s===35675&&(o=3),s===35676&&(o=4);const l=a.size/o,c=o===1?0:o*o*4,d=o===1?0:o*4;for(let h=0;h<o;h++)this.gl.vertexAttribPointer(r+h,l,a.type,a.normalized,a.stride+c,a.offset+h*d),this.gl.enableVertexAttribArray(r+h),this.gl.renderer.vertexAttribDivisor(r+h,a.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:r=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((a,{name:o})=>{const l=this.attributes[o];l.needsUpdate&&this.updateAttribute(l)});let n=2;((s=this.attributes.index)==null?void 0:s.type)===this.gl.UNSIGNED_INT&&(n=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n,this.instancedCount):this.gl.renderer.drawArraysInstanced(r,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n):this.gl.drawArrays(r,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!a1)return console.warn("No position buffer data found to compute bounds"),a1=!0}computeBoundingBox(e){e||(e=this.getPosition());const r=e.data,n=e.size;this.bounds||(this.bounds={min:new Xr,max:new Xr,center:new Xr,scale:new Xr,radius:1/0});const s=this.bounds.min,a=this.bounds.max,o=this.bounds.center,l=this.bounds.scale;s.set(1/0),a.set(-1/0);for(let c=0,d=r.length;c<d;c+=n){const h=r[c],f=r[c+1],m=r[c+2];s.x=Math.min(h,s.x),s.y=Math.min(f,s.y),s.z=Math.min(m,s.z),a.x=Math.max(h,a.x),a.y=Math.max(f,a.y),a.z=Math.max(m,a.z)}l.sub(a,s),o.add(s,a).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const r=e.data,n=e.size;this.bounds||this.computeBoundingBox(e);let s=0;for(let a=0,o=r.length;a<o;a+=n)i1.fromArray(r,a),s=Math.max(s,this.bounds.center.squaredDistance(i1));this.bounds.radius=Math.sqrt(s)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let YL=1;const o1={};class XL{constructor(e,{vertex:r,fragment:n,uniforms:s={},transparent:a=!1,cullFace:o=e.BACK,frontFace:l=e.CCW,depthTest:c=!0,depthWrite:d=!0,depthFunc:h=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=s,this.id=YL++,r||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=a,this.cullFace=o,this.frontFace=l,this.depthTest=c,this.depthWrite=d,this.depthFunc=h,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:r,fragment:n})}setShaders({vertex:e,fragment:r}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${l1(e)}`)),r&&(this.gl.shaderSource(this.fragmentShader,r),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${l1(r)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<n;o++){let l=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(l,this.gl.getUniformLocation(this.program,l.name));const c=l.name.match(/(\w+)/g);l.uniformName=c[0],l.nameComponents=c.slice(1)}this.attributeLocations=new Map;const s=[],a=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<a;o++){const l=this.gl.getActiveAttrib(this.program,o),c=this.gl.getAttribLocation(this.program,l.name);c!==-1&&(s[c]=l.name,this.attributeLocations.set(l,c))}this.attributeOrder=s.join("")}setBlendFunc(e,r,n,s){this.blendFunc.src=e,this.blendFunc.dst=r,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=s,e&&(this.transparent=!0)}setBlendEquation(e,r){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=r}setStencilFunc(e,r,n){this.stencilRef=r,this.stencilFunc.func=e,this.stencilFunc.ref=r,this.stencilFunc.mask=n}setStencilOp(e,r,n){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=r,this.stencilOp.depthPass=n}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let r=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((s,a)=>{let o=this.uniforms[a.uniformName];for(const l of a.nameComponents){if(!o)break;if(l in o)o=o[l];else{if(Array.isArray(o.value))break;o=void 0;break}}if(!o)return c1(`Active uniform ${a.name} has not been supplied`);if(o&&o.value===void 0)return c1(`${a.name} uniform is missing a value parameter`);if(o.value.texture)return r=r+1,o.value.update(r),nf(this.gl,a.type,s,r);if(o.value.length&&o.value[0].texture){const l=[];return o.value.forEach(c=>{r=r+1,c.update(r),l.push(r)}),nf(this.gl,a.type,s,l)}nf(this.gl,a.type,s,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function nf(t,e,r,n){n=n.length?JL(n):n;const s=t.renderer.state.uniformLocations.get(r);if(n.length)if(s===void 0||s.length!==n.length)t.renderer.state.uniformLocations.set(r,n.slice(0));else{if(ZL(s,n))return;s.set?s.set(n):eO(s,n),t.renderer.state.uniformLocations.set(r,s)}else{if(s===n)return;t.renderer.state.uniformLocations.set(r,n)}switch(e){case 5126:return n.length?t.uniform1fv(r,n):t.uniform1f(r,n);case 35664:return t.uniform2fv(r,n);case 35665:return t.uniform3fv(r,n);case 35666:return t.uniform4fv(r,n);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return n.length?t.uniform1iv(r,n):t.uniform1i(r,n);case 35671:case 35667:return t.uniform2iv(r,n);case 35672:case 35668:return t.uniform3iv(r,n);case 35673:case 35669:return t.uniform4iv(r,n);case 35674:return t.uniformMatrix2fv(r,!1,n);case 35675:return t.uniformMatrix3fv(r,!1,n);case 35676:return t.uniformMatrix4fv(r,!1,n)}}function l1(t){let e=t.split(`
`);for(let r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join(`
`)}function JL(t){const e=t.length,r=t[0].length;if(r===void 0)return t;const n=e*r;let s=o1[n];s||(o1[n]=s=new Float32Array(n));for(let a=0;a<e;a++)s.set(t[a],a*r);return s}function ZL(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function eO(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e[r]}let sf=0;function c1(t){sf>100||(console.warn(t),sf++,sf>100&&console.warn("More than 100 program warnings - stopping logs."))}const af=new Xr;let tO=1;class rO{constructor({canvas:e=document.createElement("canvas"),width:r=300,height:n=150,dpr:s=1,alpha:a=!1,depth:o=!0,stencil:l=!1,antialias:c=!1,premultipliedAlpha:d=!1,preserveDrawingBuffer:h=!1,powerPreference:f="default",autoClear:m=!0,webgl:y=2}={}){const N={alpha:a,depth:o,stencil:l,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:h,powerPreference:f};this.dpr=s,this.alpha=a,this.color=!0,this.depth=o,this.stencil=l,this.premultipliedAlpha=d,this.autoClear=m,this.id=tO++,y===2&&(this.gl=e.getContext("webgl2",N)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",N)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(r,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,r){this.width=e,this.height=r,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=r*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:r+"px"})}setViewport(e,r,n=0,s=0){this.state.viewport.width===e&&this.state.viewport.height===r||(this.state.viewport.width=e,this.state.viewport.height=r,this.state.viewport.x=n,this.state.viewport.y=s,this.gl.viewport(n,s,e,r))}setScissor(e,r,n=0,s=0){this.gl.scissor(n,s,e,r)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,r,n,s){this.state.blendFunc.src===e&&this.state.blendFunc.dst===r&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=e,this.state.blendFunc.dst=r,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=s,n!==void 0?this.gl.blendFuncSeparate(e,r,n,s):this.gl.blendFunc(e,r))}setBlendEquation(e,r){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===r)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=r,r!==void 0?this.gl.blendEquationSeparate(e,r):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,r,n){this.state.stencilFunc===e&&this.state.stencilRef===r&&this.state.stencilFuncMask===n||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=r||0,this.state.stencilFuncMask=n||0,this.gl.stencilFunc(e||this.gl.ALWAYS,r||0,n||0))}setStencilOp(e,r,n){this.state.stencilFail===e&&this.state.stencilDepthFail===r&&this.state.stencilDepthPass===n||(this.state.stencilFail=e,this.state.stencilDepthFail=r,this.state.stencilDepthPass=n,this.gl.stencilOp(e,r,n))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:r=null}={}){this.state.framebuffer!==r&&(this.state.framebuffer=r,this.gl.bindFramebuffer(e,r))}getExtension(e,r,n){return r&&this.gl[r]?this.gl[r].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),r?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:e.zDepth!==r.zDepth?e.zDepth-r.zDepth:r.id-e.id}sortTransparent(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.zDepth!==r.zDepth?r.zDepth-e.zDepth:r.id-e.id}sortUI(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:r.id-e.id}getRenderList({scene:e,camera:r,frustumCull:n,sort:s}){let a=[];if(r&&n&&r.updateFrustum(),e.traverse(o=>{if(!o.visible)return!0;o.draw&&(n&&o.frustumCulled&&r&&!r.frustumIntersectsMesh(o)||a.push(o))}),s){const o=[],l=[],c=[];a.forEach(d=>{d.program.transparent?d.program.depthTest?l.push(d):c.push(d):o.push(d),d.zDepth=0,!(d.renderOrder!==0||!d.program.depthTest||!r)&&(d.worldMatrix.getTranslation(af),af.applyMatrix4(r.projectionViewMatrix),d.zDepth=af.z)}),o.sort(this.sortOpaque),l.sort(this.sortTransparent),c.sort(this.sortUI),a=o.concat(l,c)}return a}render({scene:e,camera:r,target:n=null,update:s=!0,sort:a=!0,frustumCull:o=!0,clear:l}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(l||this.autoClear&&l!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!n||n.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&e.updateMatrixWorld(),r&&r.updateMatrixWorld(),this.getRenderList({scene:e,camera:r,frustumCull:o,sort:a}).forEach(d=>{d.draw({camera:r})})}}function nO(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function sO(t,e,r,n,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t}function iO(t,e){let r=e[0],n=e[1],s=e[2],a=e[3],o=r*r+n*n+s*s+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=s*o,t[3]=a*o,t}function aO(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function oO(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function lO(t,e,r){r=r*.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function u1(t,e,r){let n=e[0],s=e[1],a=e[2],o=e[3],l=r[0],c=r[1],d=r[2],h=r[3];return t[0]=n*h+o*l+s*d-a*c,t[1]=s*h+o*c+a*l-n*d,t[2]=a*h+o*d+n*c-s*l,t[3]=o*h-n*l-s*c-a*d,t}function cO(t,e,r){r*=.5;let n=e[0],s=e[1],a=e[2],o=e[3],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*l,t[1]=s*c+a*l,t[2]=a*c-s*l,t[3]=o*c-n*l,t}function uO(t,e,r){r*=.5;let n=e[0],s=e[1],a=e[2],o=e[3],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c-a*l,t[1]=s*c+o*l,t[2]=a*c+n*l,t[3]=o*c-s*l,t}function dO(t,e,r){r*=.5;let n=e[0],s=e[1],a=e[2],o=e[3],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+s*l,t[1]=s*c-n*l,t[2]=a*c+o*l,t[3]=o*c-a*l,t}function hO(t,e,r,n){let s=e[0],a=e[1],o=e[2],l=e[3],c=r[0],d=r[1],h=r[2],f=r[3],m,y,N,E,C;return y=s*c+a*d+o*h+l*f,y<0&&(y=-y,c=-c,d=-d,h=-h,f=-f),1-y>1e-6?(m=Math.acos(y),N=Math.sin(m),E=Math.sin((1-n)*m)/N,C=Math.sin(n*m)/N):(E=1-n,C=n),t[0]=E*s+C*c,t[1]=E*a+C*d,t[2]=E*o+C*h,t[3]=E*l+C*f,t}function mO(t,e){let r=e[0],n=e[1],s=e[2],a=e[3],o=r*r+n*n+s*s+a*a,l=o?1/o:0;return t[0]=-r*l,t[1]=-n*l,t[2]=-s*l,t[3]=a*l,t}function fO(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function pO(t,e){let r=e[0]+e[4]+e[8],n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[s*3+s]&&(s=2);let a=(s+1)%3,o=(s+2)%3;n=Math.sqrt(e[s*3+s]-e[a*3+a]-e[o*3+o]+1),t[s]=.5*n,n=.5/n,t[3]=(e[a*3+o]-e[o*3+a])*n,t[a]=(e[a*3+s]+e[s*3+a])*n,t[o]=(e[o*3+s]+e[s*3+o])*n}return t}function gO(t,e,r="YXZ"){let n=Math.sin(e[0]*.5),s=Math.cos(e[0]*.5),a=Math.sin(e[1]*.5),o=Math.cos(e[1]*.5),l=Math.sin(e[2]*.5),c=Math.cos(e[2]*.5);return r==="XYZ"?(t[0]=n*o*c+s*a*l,t[1]=s*a*c-n*o*l,t[2]=s*o*l+n*a*c,t[3]=s*o*c-n*a*l):r==="YXZ"?(t[0]=n*o*c+s*a*l,t[1]=s*a*c-n*o*l,t[2]=s*o*l-n*a*c,t[3]=s*o*c+n*a*l):r==="ZXY"?(t[0]=n*o*c-s*a*l,t[1]=s*a*c+n*o*l,t[2]=s*o*l+n*a*c,t[3]=s*o*c-n*a*l):r==="ZYX"?(t[0]=n*o*c-s*a*l,t[1]=s*a*c+n*o*l,t[2]=s*o*l-n*a*c,t[3]=s*o*c+n*a*l):r==="YZX"?(t[0]=n*o*c+s*a*l,t[1]=s*a*c+n*o*l,t[2]=s*o*l-n*a*c,t[3]=s*o*c-n*a*l):r==="XZY"&&(t[0]=n*o*c-s*a*l,t[1]=s*a*c-n*o*l,t[2]=s*o*l+n*a*c,t[3]=s*o*c+n*a*l),t}const xO=nO,wO=sO,yO=aO,vO=iO;class bO extends Array{constructor(e=0,r=0,n=0,s=1){super(e,r,n,s),this.onChange=()=>{},this._target=this;const a=["0","1","2","3"];return new Proxy(this,{set(o,l){const c=Reflect.set(...arguments);return c&&a.includes(l)&&o.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return oO(this._target),this.onChange(),this}set(e,r,n,s){return e.length?this.copy(e):(wO(this._target,e,r,n,s),this.onChange(),this)}rotateX(e){return cO(this._target,this._target,e),this.onChange(),this}rotateY(e){return uO(this._target,this._target,e),this.onChange(),this}rotateZ(e){return dO(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return mO(this._target,e),this.onChange(),this}conjugate(e=this._target){return fO(this._target,e),this.onChange(),this}copy(e){return xO(this._target,e),this.onChange(),this}normalize(e=this._target){return vO(this._target,e),this.onChange(),this}multiply(e,r){return r?u1(this._target,e,r):u1(this._target,this._target,e),this.onChange(),this}dot(e){return yO(this._target,e)}fromMatrix3(e){return pO(this._target,e),this.onChange(),this}fromEuler(e,r){return gO(this._target,e,e.order),r||this.onChange(),this}fromAxisAngle(e,r){return lO(this._target,e,r),this.onChange(),this}slerp(e,r){return hO(this._target,this._target,e,r),this.onChange(),this}fromArray(e,r=0){return this._target[0]=e[r],this._target[1]=e[r+1],this._target[2]=e[r+2],this._target[3]=e[r+3],this.onChange(),this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e}}const NO=1e-6;function _O(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function jO(t,e,r,n,s,a,o,l,c,d,h,f,m,y,N,E,C){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t[4]=a,t[5]=o,t[6]=l,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=m,t[12]=y,t[13]=N,t[14]=E,t[15]=C,t}function EO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function SO(t,e){let r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],N=e[12],E=e[13],C=e[14],x=e[15],w=r*l-n*o,g=r*c-s*o,b=r*d-a*o,I=n*c-s*l,M=n*d-a*l,A=s*d-a*c,_=h*E-f*N,S=h*C-m*N,k=h*x-y*N,T=f*C-m*E,D=f*x-y*E,P=m*x-y*C,$=w*P-g*D+b*T+I*k-M*S+A*_;return $?($=1/$,t[0]=(l*P-c*D+d*T)*$,t[1]=(s*D-n*P-a*T)*$,t[2]=(E*A-C*M+x*I)*$,t[3]=(m*M-f*A-y*I)*$,t[4]=(c*k-o*P-d*S)*$,t[5]=(r*P-s*k+a*S)*$,t[6]=(C*b-N*A-x*g)*$,t[7]=(h*A-m*b+y*g)*$,t[8]=(o*D-l*k+d*_)*$,t[9]=(n*k-r*D-a*_)*$,t[10]=(N*M-E*b+x*w)*$,t[11]=(f*b-h*M-y*w)*$,t[12]=(l*S-o*T-c*_)*$,t[13]=(r*T-n*S+s*_)*$,t[14]=(E*g-N*I-C*w)*$,t[15]=(h*I-f*g+m*w)*$,t):null}function sS(t){let e=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],d=t[8],h=t[9],f=t[10],m=t[11],y=t[12],N=t[13],E=t[14],C=t[15],x=e*o-r*a,w=e*l-n*a,g=e*c-s*a,b=r*l-n*o,I=r*c-s*o,M=n*c-s*l,A=d*N-h*y,_=d*E-f*y,S=d*C-m*y,k=h*E-f*N,T=h*C-m*N,D=f*C-m*E;return x*D-w*T+g*k+b*S-I*_+M*A}function d1(t,e,r){let n=e[0],s=e[1],a=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=e[9],y=e[10],N=e[11],E=e[12],C=e[13],x=e[14],w=e[15],g=r[0],b=r[1],I=r[2],M=r[3];return t[0]=g*n+b*l+I*f+M*E,t[1]=g*s+b*c+I*m+M*C,t[2]=g*a+b*d+I*y+M*x,t[3]=g*o+b*h+I*N+M*w,g=r[4],b=r[5],I=r[6],M=r[7],t[4]=g*n+b*l+I*f+M*E,t[5]=g*s+b*c+I*m+M*C,t[6]=g*a+b*d+I*y+M*x,t[7]=g*o+b*h+I*N+M*w,g=r[8],b=r[9],I=r[10],M=r[11],t[8]=g*n+b*l+I*f+M*E,t[9]=g*s+b*c+I*m+M*C,t[10]=g*a+b*d+I*y+M*x,t[11]=g*o+b*h+I*N+M*w,g=r[12],b=r[13],I=r[14],M=r[15],t[12]=g*n+b*l+I*f+M*E,t[13]=g*s+b*c+I*m+M*C,t[14]=g*a+b*d+I*y+M*x,t[15]=g*o+b*h+I*N+M*w,t}function kO(t,e,r){let n=r[0],s=r[1],a=r[2],o,l,c,d,h,f,m,y,N,E,C,x;return e===t?(t[12]=e[0]*n+e[4]*s+e[8]*a+e[12],t[13]=e[1]*n+e[5]*s+e[9]*a+e[13],t[14]=e[2]*n+e[6]*s+e[10]*a+e[14],t[15]=e[3]*n+e[7]*s+e[11]*a+e[15]):(o=e[0],l=e[1],c=e[2],d=e[3],h=e[4],f=e[5],m=e[6],y=e[7],N=e[8],E=e[9],C=e[10],x=e[11],t[0]=o,t[1]=l,t[2]=c,t[3]=d,t[4]=h,t[5]=f,t[6]=m,t[7]=y,t[8]=N,t[9]=E,t[10]=C,t[11]=x,t[12]=o*n+h*s+N*a+e[12],t[13]=l*n+f*s+E*a+e[13],t[14]=c*n+m*s+C*a+e[14],t[15]=d*n+y*s+x*a+e[15]),t}function CO(t,e,r){let n=r[0],s=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function TO(t,e,r,n){let s=n[0],a=n[1],o=n[2],l=Math.hypot(s,a,o),c,d,h,f,m,y,N,E,C,x,w,g,b,I,M,A,_,S,k,T,D,P,$,ae;return Math.abs(l)<NO?null:(l=1/l,s*=l,a*=l,o*=l,c=Math.sin(r),d=Math.cos(r),h=1-d,f=e[0],m=e[1],y=e[2],N=e[3],E=e[4],C=e[5],x=e[6],w=e[7],g=e[8],b=e[9],I=e[10],M=e[11],A=s*s*h+d,_=a*s*h+o*c,S=o*s*h-a*c,k=s*a*h-o*c,T=a*a*h+d,D=o*a*h+s*c,P=s*o*h+a*c,$=a*o*h-s*c,ae=o*o*h+d,t[0]=f*A+E*_+g*S,t[1]=m*A+C*_+b*S,t[2]=y*A+x*_+I*S,t[3]=N*A+w*_+M*S,t[4]=f*k+E*T+g*D,t[5]=m*k+C*T+b*D,t[6]=y*k+x*T+I*D,t[7]=N*k+w*T+M*D,t[8]=f*P+E*$+g*ae,t[9]=m*P+C*$+b*ae,t[10]=y*P+x*$+I*ae,t[11]=N*P+w*$+M*ae,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function IO(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function iS(t,e){let r=e[0],n=e[1],s=e[2],a=e[4],o=e[5],l=e[6],c=e[8],d=e[9],h=e[10];return t[0]=Math.hypot(r,n,s),t[1]=Math.hypot(a,o,l),t[2]=Math.hypot(c,d,h),t}function AO(t){let e=t[0],r=t[1],n=t[2],s=t[4],a=t[5],o=t[6],l=t[8],c=t[9],d=t[10];const h=e*e+r*r+n*n,f=s*s+a*a+o*o,m=l*l+c*c+d*d;return Math.sqrt(Math.max(h,f,m))}const aS=function(){const t=[1,1,1];return function(e,r){let n=t;iS(n,r);let s=1/n[0],a=1/n[1],o=1/n[2],l=r[0]*s,c=r[1]*a,d=r[2]*o,h=r[4]*s,f=r[5]*a,m=r[6]*o,y=r[8]*s,N=r[9]*a,E=r[10]*o,C=l+f+E,x=0;return C>0?(x=Math.sqrt(C+1)*2,e[3]=.25*x,e[0]=(m-N)/x,e[1]=(y-d)/x,e[2]=(c-h)/x):l>f&&l>E?(x=Math.sqrt(1+l-f-E)*2,e[3]=(m-N)/x,e[0]=.25*x,e[1]=(c+h)/x,e[2]=(y+d)/x):f>E?(x=Math.sqrt(1+f-l-E)*2,e[3]=(y-d)/x,e[0]=(c+h)/x,e[1]=.25*x,e[2]=(m+N)/x):(x=Math.sqrt(1+E-l-f)*2,e[3]=(c-h)/x,e[0]=(y+d)/x,e[1]=(m+N)/x,e[2]=.25*x),e}}();function PO(t,e,r,n){let s=_l([t[0],t[1],t[2]]);const a=_l([t[4],t[5],t[6]]),o=_l([t[8],t[9],t[10]]);sS(t)<0&&(s=-s),r[0]=t[12],r[1]=t[13],r[2]=t[14];const c=t.slice(),d=1/s,h=1/a,f=1/o;c[0]*=d,c[1]*=d,c[2]*=d,c[4]*=h,c[5]*=h,c[6]*=h,c[8]*=f,c[9]*=f,c[10]*=f,aS(e,c),n[0]=s,n[1]=a,n[2]=o}function RO(t,e,r,n){const s=t,a=e[0],o=e[1],l=e[2],c=e[3],d=a+a,h=o+o,f=l+l,m=a*d,y=a*h,N=a*f,E=o*h,C=o*f,x=l*f,w=c*d,g=c*h,b=c*f,I=n[0],M=n[1],A=n[2];return s[0]=(1-(E+x))*I,s[1]=(y+b)*I,s[2]=(N-g)*I,s[3]=0,s[4]=(y-b)*M,s[5]=(1-(m+x))*M,s[6]=(C+w)*M,s[7]=0,s[8]=(N+g)*A,s[9]=(C-w)*A,s[10]=(1-(m+E))*A,s[11]=0,s[12]=r[0],s[13]=r[1],s[14]=r[2],s[15]=1,s}function DO(t,e){let r=e[0],n=e[1],s=e[2],a=e[3],o=r+r,l=n+n,c=s+s,d=r*o,h=n*o,f=n*l,m=s*o,y=s*l,N=s*c,E=a*o,C=a*l,x=a*c;return t[0]=1-f-N,t[1]=h+x,t[2]=m-C,t[3]=0,t[4]=h-x,t[5]=1-d-N,t[6]=y+E,t[7]=0,t[8]=m+C,t[9]=y-E,t[10]=1-d-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function MO(t,e,r,n,s){let a=1/Math.tan(e/2),o=1/(n-s);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(s+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*s*n*o,t[15]=0,t}function LO(t,e,r,n,s,a,o){let l=1/(e-r),c=1/(n-s),d=1/(a-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*l,t[13]=(s+n)*c,t[14]=(o+a)*d,t[15]=1,t}function OO(t,e,r,n){let s=e[0],a=e[1],o=e[2],l=n[0],c=n[1],d=n[2],h=s-r[0],f=a-r[1],m=o-r[2],y=h*h+f*f+m*m;y===0?m=1:(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let N=c*m-d*f,E=d*h-l*m,C=l*f-c*h;return y=N*N+E*E+C*C,y===0&&(d?l+=1e-6:c?d+=1e-6:c+=1e-6,N=c*m-d*f,E=d*h-l*m,C=l*f-c*h,y=N*N+E*E+C*C),y=1/Math.sqrt(y),N*=y,E*=y,C*=y,t[0]=N,t[1]=E,t[2]=C,t[3]=0,t[4]=f*C-m*E,t[5]=m*N-h*C,t[6]=h*E-f*N,t[7]=0,t[8]=h,t[9]=f,t[10]=m,t[11]=0,t[12]=s,t[13]=a,t[14]=o,t[15]=1,t}function h1(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function m1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function VO(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}class Yd extends Array{constructor(e=1,r=0,n=0,s=0,a=0,o=1,l=0,c=0,d=0,h=0,f=1,m=0,y=0,N=0,E=0,C=1){return super(e,r,n,s,a,o,l,c,d,h,f,m,y,N,E,C),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,r,n,s,a,o,l,c,d,h,f,m,y,N,E,C){return e.length?this.copy(e):(jO(this,e,r,n,s,a,o,l,c,d,h,f,m,y,N,E,C),this)}translate(e,r=this){return kO(this,r,e),this}rotate(e,r,n=this){return TO(this,n,e,r),this}scale(e,r=this){return CO(this,r,typeof e=="number"?[e,e,e]:e),this}add(e,r){return r?h1(this,e,r):h1(this,this,e),this}sub(e,r){return r?m1(this,e,r):m1(this,this,e),this}multiply(e,r){return e.length?r?d1(this,e,r):d1(this,this,e):VO(this,this,e),this}identity(){return EO(this),this}copy(e){return _O(this,e),this}fromPerspective({fov:e,aspect:r,near:n,far:s}={}){return MO(this,e,r,n,s),this}fromOrthogonal({left:e,right:r,bottom:n,top:s,near:a,far:o}){return LO(this,e,r,n,s,a,o),this}fromQuaternion(e){return DO(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return SO(this,e),this}compose(e,r,n){return RO(this,e,r,n),this}decompose(e,r,n){return PO(this,e,r,n),this}getRotation(e){return aS(e,this),this}getTranslation(e){return IO(e,this),this}getScaling(e){return iS(e,this),this}getMaxScaleOnAxis(){return AO(this)}lookAt(e,r,n){return OO(this,e,r,n),this}determinant(){return sS(this)}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this[3]=e[r+3],this[4]=e[r+4],this[5]=e[r+5],this[6]=e[r+6],this[7]=e[r+7],this[8]=e[r+8],this[9]=e[r+9],this[10]=e[r+10],this[11]=e[r+11],this[12]=e[r+12],this[13]=e[r+13],this[14]=e[r+14],this[15]=e[r+15],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e[r+4]=this[4],e[r+5]=this[5],e[r+6]=this[6],e[r+7]=this[7],e[r+8]=this[8],e[r+9]=this[9],e[r+10]=this[10],e[r+11]=this[11],e[r+12]=this[12],e[r+13]=this[13],e[r+14]=this[14],e[r+15]=this[15],e}}function FO(t,e,r="YXZ"){return r==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):r==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):r==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):r==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):r==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):r==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const f1=new Yd;class UO extends Array{constructor(e=0,r=e,n=e,s="YXZ"){super(e,r,n),this.order=s,this.onChange=()=>{},this._target=this;const a=["0","1","2"];return new Proxy(this,{set(o,l){const c=Reflect.set(...arguments);return c&&a.includes(l)&&o.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,r=e,n=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=r,this._target[2]=n,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,r=this.order){return FO(this._target,e,r),this.onChange(),this}fromQuaternion(e,r=this.order,n){return f1.fromQuaternion(e),this._target.fromRotationMatrix(f1,r),n||this.onChange(),this}fromArray(e,r=0){return this._target[0]=e[r],this._target[1]=e[r+1],this._target[2]=e[r+2],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}}class zO{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Yd,this.worldMatrix=new Yd,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Xr,this.quaternion=new bO,this.scale=new Xr(1),this.rotation=new UO,this.up=new Xr(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,r=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,r&&e&&e.addChild(this,!1)}addChild(e,r=!0){~this.children.indexOf(e)||this.children.push(e),r&&e.setParent(this,!1)}removeChild(e,r=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),r&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let r=0,n=this.children.length;r<n;r++)this.children[r].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let r=0,n=this.children.length;r<n;r++)this.children[r].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,r=!1){r?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function $O(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function BO(t,e){let r=e[0],n=e[1],s=e[2],a=e[3],o=r+r,l=n+n,c=s+s,d=r*o,h=n*o,f=n*l,m=s*o,y=s*l,N=s*c,E=a*o,C=a*l,x=a*c;return t[0]=1-f-N,t[3]=h-x,t[6]=m+C,t[1]=h+x,t[4]=1-d-N,t[7]=y-E,t[2]=m-C,t[5]=y+E,t[8]=1-d-f,t}function qO(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function HO(t,e,r,n,s,a,o,l,c,d){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t[4]=a,t[5]=o,t[6]=l,t[7]=c,t[8]=d,t}function WO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function GO(t,e){let r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=h*o-l*d,m=-h*a+l*c,y=d*a-o*c,N=r*f+n*m+s*y;return N?(N=1/N,t[0]=f*N,t[1]=(-h*n+s*d)*N,t[2]=(l*n-s*o)*N,t[3]=m*N,t[4]=(h*r-s*c)*N,t[5]=(-l*r+s*a)*N,t[6]=y*N,t[7]=(-d*r+n*c)*N,t[8]=(o*r-n*a)*N,t):null}function p1(t,e,r){let n=e[0],s=e[1],a=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=r[0],y=r[1],N=r[2],E=r[3],C=r[4],x=r[5],w=r[6],g=r[7],b=r[8];return t[0]=m*n+y*o+N*d,t[1]=m*s+y*l+N*h,t[2]=m*a+y*c+N*f,t[3]=E*n+C*o+x*d,t[4]=E*s+C*l+x*h,t[5]=E*a+C*c+x*f,t[6]=w*n+g*o+b*d,t[7]=w*s+g*l+b*h,t[8]=w*a+g*c+b*f,t}function KO(t,e,r){let n=e[0],s=e[1],a=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=r[0],y=r[1];return t[0]=n,t[1]=s,t[2]=a,t[3]=o,t[4]=l,t[5]=c,t[6]=m*n+y*o+d,t[7]=m*s+y*l+h,t[8]=m*a+y*c+f,t}function QO(t,e,r){let n=e[0],s=e[1],a=e[2],o=e[3],l=e[4],c=e[5],d=e[6],h=e[7],f=e[8],m=Math.sin(r),y=Math.cos(r);return t[0]=y*n+m*o,t[1]=y*s+m*l,t[2]=y*a+m*c,t[3]=y*o-m*n,t[4]=y*l-m*s,t[5]=y*c-m*a,t[6]=d,t[7]=h,t[8]=f,t}function YO(t,e,r){let n=r[0],s=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function XO(t,e){let r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],N=e[12],E=e[13],C=e[14],x=e[15],w=r*l-n*o,g=r*c-s*o,b=r*d-a*o,I=n*c-s*l,M=n*d-a*l,A=s*d-a*c,_=h*E-f*N,S=h*C-m*N,k=h*x-y*N,T=f*C-m*E,D=f*x-y*E,P=m*x-y*C,$=w*P-g*D+b*T+I*k-M*S+A*_;return $?($=1/$,t[0]=(l*P-c*D+d*T)*$,t[1]=(c*k-o*P-d*S)*$,t[2]=(o*D-l*k+d*_)*$,t[3]=(s*D-n*P-a*T)*$,t[4]=(r*P-s*k+a*S)*$,t[5]=(n*k-r*D-a*_)*$,t[6]=(E*A-C*M+x*I)*$,t[7]=(C*b-N*A-x*g)*$,t[8]=(N*M-E*b+x*w)*$,t):null}class JO extends Array{constructor(e=1,r=0,n=0,s=0,a=1,o=0,l=0,c=0,d=1){return super(e,r,n,s,a,o,l,c,d),this}set(e,r,n,s,a,o,l,c,d){return e.length?this.copy(e):(HO(this,e,r,n,s,a,o,l,c,d),this)}translate(e,r=this){return KO(this,r,e),this}rotate(e,r=this){return QO(this,r,e),this}scale(e,r=this){return YO(this,r,e),this}multiply(e,r){return r?p1(this,e,r):p1(this,this,e),this}identity(){return WO(this),this}copy(e){return qO(this,e),this}fromMatrix4(e){return $O(this,e),this}fromQuaternion(e){return BO(this,e),this}fromBasis(e,r,n){return this.set(e[0],e[1],e[2],r[0],r[1],r[2],n[0],n[1],n[2]),this}inverse(e=this){return GO(this,e),this}getNormalMatrix(e){return XO(this,e),this}}let ZO=0;class eV extends zO{constructor(e,{geometry:r,program:n,mode:s=e.TRIANGLES,frustumCulled:a=!0,renderOrder:o=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=ZO++,this.geometry=r,this.program=n,this.mode=s,this.frustumCulled=a,this.renderOrder=o,this.modelViewMatrix=new Yd,this.normalMatrix=new JO,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}));let r=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:r}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}))}}class tV extends QL{constructor(e,{attributes:r={}}={}){Object.assign(r,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,r)}}const rV="#ffffff",g1=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:[1,1,1]},x1=(t,e,r)=>{switch(t){case"top-left":return{anchor:[0,-.2*r],dir:[0,1]};case"top-right":return{anchor:[e,-.2*r],dir:[0,1]};case"left":return{anchor:[-.2*e,.5*r],dir:[1,0]};case"right":return{anchor:[(1+.2)*e,.5*r],dir:[-1,0]};case"bottom-left":return{anchor:[0,(1+.2)*r],dir:[0,-1]};case"bottom-center":return{anchor:[.5*e,(1+.2)*r],dir:[0,-1]};case"bottom-right":return{anchor:[e,(1+.2)*r],dir:[0,-1]};default:return{anchor:[.5*e,-.2*r],dir:[0,1]}}},sx=({raysOrigin:t="top-center",raysColor:e=rV,raysSpeed:r=1,lightSpread:n=1,rayLength:s=2,pulsating:a=!1,fadeDistance:o=1,saturation:l=1,followMouse:c=!0,mouseInfluence:d=.1,noiseAmount:h=0,distortion:f=0,className:m=""})=>{const y=v.useRef(null),N=v.useRef(null),E=v.useRef(null),C=v.useRef({x:.5,y:.5}),x=v.useRef({x:.5,y:.5}),w=v.useRef(null),g=v.useRef(null),b=v.useRef(null),[I,M]=v.useState(!1),A=v.useRef(null);return v.useEffect(()=>{if(y.current)return A.current=new IntersectionObserver(_=>{const S=_[0];M(S.isIntersecting)},{threshold:.1}),A.current.observe(y.current),()=>{A.current&&(A.current.disconnect(),A.current=null)}},[]),v.useEffect(()=>!I||!y.current?void 0:(b.current&&(b.current(),b.current=null),(async()=>{if(!y.current||(await new Promise(U=>setTimeout(U,10)),!y.current))return;const S=new rO({dpr:Math.min(window.devicePixelRatio,2),alpha:!0});E.current=S;const k=S.gl;for(k.canvas.style.width="100%",k.canvas.style.height="100%";y.current.firstChild;)y.current.removeChild(y.current.firstChild);y.current.appendChild(k.canvas);const T=`
attribute vec2 position;
varying vec2 vUv;
void main() {
  vUv = position * 0.5 + 0.5;
  gl_Position = vec4(position, 0.0, 1.0);
}`,D=`precision highp float;

uniform float iTime;
uniform vec2  iResolution;

uniform vec2  rayPos;
uniform vec2  rayDir;
uniform vec3  raysColor;
uniform float raysSpeed;
uniform float lightSpread;
uniform float rayLength;
uniform float pulsating;
uniform float fadeDistance;
uniform float saturation;
uniform vec2  mousePos;
uniform float mouseInfluence;
uniform float noiseAmount;
uniform float distortion;

varying vec2 vUv;

float noise(vec2 st) {
  return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
}

float rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord,
                  float seedA, float seedB, float speed) {
  vec2 sourceToCoord = coord - raySource;
  vec2 dirNorm = normalize(sourceToCoord);
  float cosAngle = dot(dirNorm, rayRefDirection);

  float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;
  
  float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));

  float distance = length(sourceToCoord);
  float maxDistance = iResolution.x * rayLength;
  float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);
  
  float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);
  float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;

  float baseStrength = clamp(
    (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +
    (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),
    0.0, 1.0
  );

  return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);
  
  vec2 finalRayDir = rayDir;
  if (mouseInfluence > 0.0) {
    vec2 mouseScreenPos = mousePos * iResolution.xy;
    vec2 mouseDirection = normalize(mouseScreenPos - rayPos);
    finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));
  }

  vec4 rays1 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349,
                           1.5 * raysSpeed);
  vec4 rays2 = vec4(1.0) *
               rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234,
                           1.1 * raysSpeed);

  fragColor = rays1 * 0.5 + rays2 * 0.4;

  if (noiseAmount > 0.0) {
    float n = noise(coord * 0.01 + iTime * 0.1);
    fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);
  }

  float brightness = 1.0 - (coord.y / iResolution.y);
  fragColor.x *= 0.1 + brightness * 0.8;
  fragColor.y *= 0.3 + brightness * 0.6;
  fragColor.z *= 0.5 + brightness * 0.5;

  if (saturation != 1.0) {
    float gray = dot(fragColor.rgb, vec3(0.299, 0.587, 0.114));
    fragColor.rgb = mix(vec3(gray), fragColor.rgb, saturation);
  }

  fragColor.rgb *= raysColor;
}

void main() {
  vec4 color;
  mainImage(color, gl_FragCoord.xy);
  gl_FragColor  = color;
}`,P={iTime:{value:0},iResolution:{value:[1,1]},rayPos:{value:[0,0]},rayDir:{value:[0,1]},raysColor:{value:g1(e)},raysSpeed:{value:r},lightSpread:{value:n},rayLength:{value:s},pulsating:{value:a?1:0},fadeDistance:{value:o},saturation:{value:l},mousePos:{value:[.5,.5]},mouseInfluence:{value:d},noiseAmount:{value:h},distortion:{value:f}};N.current=P;const $=new tV(k),ae=new XL(k,{vertex:T,fragment:D,uniforms:P}),oe=new eV(k,{geometry:$,program:ae});g.current=oe;const F=()=>{if(!y.current||!S)return;S.dpr=Math.min(window.devicePixelRatio,2);const{clientWidth:U,clientHeight:q}=y.current;S.setSize(U,q);const ue=S.dpr,re=U*ue,H=q*ue;P.iResolution.value=[re,H];const{anchor:fe,dir:xe}=x1(t,re,H);P.rayPos.value=fe,P.rayDir.value=xe},O=U=>{if(!(!E.current||!N.current||!g.current)){P.iTime.value=U*.001,c&&d>0&&(x.current.x=x.current.x*.92+C.current.x*(1-.92),x.current.y=x.current.y*.92+C.current.y*(1-.92),P.mousePos.value=[x.current.x,x.current.y]);try{S.render({scene:oe}),w.current=requestAnimationFrame(O)}catch(q){console.warn("WebGL rendering error:",q);return}}};window.addEventListener("resize",F),F(),w.current=requestAnimationFrame(O),b.current=()=>{if(w.current&&(cancelAnimationFrame(w.current),w.current=null),window.removeEventListener("resize",F),S)try{const U=S.gl.canvas,q=S.gl.getExtension("WEBGL_lose_context");q&&q.loseContext(),U&&U.parentNode&&U.parentNode.removeChild(U)}catch(U){console.warn("Error during WebGL cleanup:",U)}E.current=null,N.current=null,g.current=null}})(),()=>{b.current&&(b.current(),b.current=null)}),[I,t,e,r,n,s,a,o,l,c,d,h,f]),v.useEffect(()=>{if(!N.current||!y.current||!E.current)return;const _=N.current,S=E.current;_.raysColor.value=g1(e),_.raysSpeed.value=r,_.lightSpread.value=n,_.rayLength.value=s,_.pulsating.value=a?1:0,_.fadeDistance.value=o,_.saturation.value=l,_.mouseInfluence.value=d,_.noiseAmount.value=h,_.distortion.value=f;const{clientWidth:k,clientHeight:T}=y.current,D=S.dpr,{anchor:P,dir:$}=x1(t,k*D,T*D);_.rayPos.value=P,_.rayDir.value=$},[e,r,n,t,s,a,o,l,d,h,f]),v.useEffect(()=>{const _=S=>{if(!y.current||!E.current)return;const k=y.current.getBoundingClientRect(),T=(S.clientX-k.left)/k.width,D=(S.clientY-k.top)/k.height;C.current={x:T,y:D}};if(c)return window.addEventListener("mousemove",_),()=>window.removeEventListener("mousemove",_)},[c]),i.jsx("div",{ref:y,className:`absolute inset-0 w-full h-full pointer-events-none z-0 overflow-hidden ${m}`.trim()})},nV=()=>{const[t,e]=v.useState(0);return v.useEffect(()=>{const r=()=>{const n=window.pageYOffset,s=document.documentElement.scrollHeight-window.innerHeight,a=n/s*100;e(a)};return window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)},[]),i.jsx("div",{className:"scroll-indicator",children:i.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-white to-white/80 transition-all duration-100 ease-out",style:{width:`${t}%`}})})},oS=Yt.memo(({scrollToSection:t})=>{const[e,r]=v.useState(!1),[n,s]=v.useState(!1);v.useEffect(()=>{r(!0);const l=setTimeout(()=>{s(!0)},500);return()=>clearTimeout(l)},[]);const a=v.useCallback(()=>{t("services")},[t]),o=v.useMemo(()=>[{icon:wr,text:"Comunidade Segura"},{icon:Ki,text:"Apoio Profissional"},{icon:wr,text:"Crescimento Pessoal"}],[]);return i.jsxs("section",{className:"relative pb-12 min-h-screen flex items-center z-20","aria-labelledby":"hero-title",role:"banner",children:[i.jsx("div",{className:"container-responsive relative",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsxs("div",{className:`inline-flex items-center space-x-3 backdrop-blur-md bg-white/5 border border-white/10 rounded-full px-5 py-2.5 mb-6 md:mb-8 transition-all duration-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),i.jsx("span",{className:"text-white/80 text-xs md:text-sm font-light tracking-wider uppercase",children:"Saúde Mental • Comunidade • Apoio"})]}),i.jsx("div",{className:"mb-6 md:mb-8",children:i.jsxs("h1",{id:"hero-title",className:"text-3xl md:text-5xl lg:text-6xl font-extralight mb-4 md:mb-5 leading-[0.9] md:leading-[0.85] tracking-tight",children:[i.jsx("span",{className:`block text-white transition-all duration-1000 delay-300 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-12"}`,children:"Compartilhe,"}),i.jsxs("span",{className:`block text-white transition-all duration-1000 delay-500 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-12"}`,children:["Entenda-se,"," ",i.jsx("span",{className:`font-semibold transition-all duration-1000 delay-700 ${n?"opacity-100":"opacity-0"}`,children:"Evolua."})]})]})}),i.jsx("p",{className:`text-base md:text-lg text-white/70 mb-8 md:mb-12 max-w-2xl mx-auto leading-relaxed font-light tracking-wide transition-all duration-1000 delay-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:"Conecte-se com uma comunidade acolhedora, compartilhe suas experiências sem julgamentos e tenha acesso a profissionais de saúde mental verificados."}),i.jsx("div",{className:`flex justify-center items-center space-x-6 mb-6 transition-all duration-1000 delay-1200 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:o.map((l,c)=>i.jsxs("div",{className:"flex items-center space-x-2 text-white/60 text-xs md:text-sm",style:{animationDelay:`${1200+c*200}ms`},children:[i.jsx(l.icon,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"}),i.jsx("span",{children:l.text})]},c))}),i.jsx("div",{className:`flex justify-center items-center transition-all duration-1000 delay-1200 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:i.jsx("button",{onClick:a,className:"group relative bg-transparent border border-white/30 text-white px-6 py-3 md:px-8 md:py-4 rounded-xl transition-all duration-300 text-sm md:text-base font-light tracking-wide hover:bg-white/5 backdrop-blur-md focus-ring hover:scale-105","aria-label":"Explorar recursos e funcionalidades da plataforma",children:i.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2 md:space-x-3",children:[i.jsx("span",{children:"Explorar Recursos"}),i.jsx(wr,{className:"w-3.5 h-3.5 md:w-4 md:h-4 transition-all duration-300 group-hover:scale-110","aria-hidden":"true"})]})})}),i.jsx("div",{className:`mt-12 transition-all duration-1000 delay-1500 ${e?"opacity-100":"opacity-0"}`,children:i.jsxs("div",{className:"flex flex-col items-center space-y-2 text-white/40 text-xs",children:[i.jsx("span",{children:"Role para descobrir mais"}),i.jsx("div",{className:"w-5 h-8 border-2 border-white/20 rounded-full flex justify-center",children:i.jsx("div",{className:"w-1 h-2.5 bg-white/40 rounded-full mt-1.5 animate-bounce"})})]})})]})}),i.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[i.jsx("div",{className:`absolute top-16 left-8 w-1.5 h-1.5 bg-white/20 rounded-full transition-all duration-2000 delay-500 ${e?"opacity-100 scale-100":"opacity-0 scale-0"}`}),i.jsx("div",{className:`absolute top-32 right-16 w-1 h-1 bg-white/30 rounded-full transition-all duration-2000 delay-700 ${e?"opacity-100 scale-100":"opacity-0 scale-0"}`}),i.jsx("div",{className:`absolute bottom-32 left-16 w-1.5 h-1.5 bg-white/25 rounded-full transition-all duration-2000 delay-900 ${e?"opacity-100 scale-100":"opacity-0 scale-0"}`})]})]})});oS.displayName="HeroSection";const lS=Yt.memo(({icon:t,title:e,description:r,delay:n,inView:s})=>{const a=v.useCallback(()=>{console.log(`Feature clicked: ${e}`)},[e]);return i.jsxs("div",{className:`glass-card p-6 md:p-8 transition-all duration-1000 transform hover:-translate-y-2 hover:shadow-xl hover:shadow-white/10 backdrop-blur-md cursor-pointer group ${s?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:`${n}ms`},onClick:a,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),a())},role:"button",tabIndex:0,"aria-label":`Recurso: ${e}. ${r}`,children:[i.jsx("div",{className:"flex items-center justify-center w-14 h-14 md:w-16 md:h-16 rounded-xl bg-white/5 border border-white/10 mb-5 backdrop-blur-md group-hover:bg-white/10 transition-all duration-300 group-hover:scale-110",children:i.jsx(t,{className:"w-7 h-7 md:w-8 md:h-8 text-white/80 group-hover:text-white transition-colors duration-300","aria-hidden":"true"})}),i.jsx("h3",{className:"text-lg md:text-xl font-light mb-3 text-white tracking-wide group-hover:text-white/90 transition-colors duration-300",children:e}),i.jsx("p",{className:"text-white/70 leading-relaxed text-sm md:text-base font-light group-hover:text-white/80 transition-colors duration-300",children:r}),i.jsx("div",{className:"mt-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("div",{className:"w-10 h-0.5 bg-gradient-to-r from-white/30 to-white/10"})})]})});lS.displayName="FeatureCard";const sV=Yt.memo(({title:t,desc:e,icon:r,index:n,inView:s,delay:a})=>{const[o,l]=v.useState(!1),c=v.useCallback(()=>{l(!0)},[]),d=v.useCallback(()=>{l(!1)},[]),h=v.useCallback(()=>{console.log(`Community group clicked: ${t}`)},[t]),f=v.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),h())},[h]);return i.jsxs("div",{className:`group relative overflow-hidden rounded-xl aspect-square bg-white/5 border border-white/10 transition-all duration-1000 transform hover:scale-[1.02] hover:shadow-xl hover:shadow-white/10 backdrop-blur-md cursor-pointer ${s?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:`${a}ms`},onMouseEnter:c,onMouseLeave:d,onClick:h,onKeyDown:f,role:"button",tabIndex:0,"aria-label":`Grupo de comunidade: ${t}. ${e}`,children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 md:w-18 md:h-18 rounded-xl bg-white/10 flex items-center justify-center mx-auto mb-4 border border-white/20 backdrop-blur-md transition-all duration-300 group-hover:bg-white/15 group-hover:border-white/30 group-hover:scale-110",children:i.jsx(r,{className:"w-8 h-8 md:w-9 md:h-9 text-white/80 transition-all duration-300 group-hover:scale-110","aria-hidden":"true"})}),i.jsx("h3",{className:"text-lg md:text-xl font-light mb-2 text-white tracking-wide transition-all duration-300 group-hover:text-white/90",children:t}),i.jsx("p",{className:"text-white/70 text-sm md:text-base font-light transition-all duration-300 group-hover:text-white/80 leading-relaxed",children:e})]})}),i.jsx("div",{className:`absolute inset-0 bg-black/80 transition-all duration-500 flex items-end p-6 ${o?"opacity-100":"opacity-0"}`,children:i.jsx("button",{className:"w-full bg-white text-black py-3 rounded-lg font-light transform transition-all duration-500 text-base tracking-wide backdrop-blur-md hover:bg-white/90 hover:scale-105",style:{transform:o?"translateY(0)":"translateY(4px)"},"aria-label":`Participar do grupo ${t}`,children:"Participar"})}),i.jsx("div",{className:`absolute top-4 right-4 w-2.5 h-2.5 bg-white/40 rounded-full transition-all duration-300 ${o?"opacity-100 scale-100":"opacity-0 scale-0"}`})]})});sV.displayName="CommunityCard";const cS=Yt.memo(({name:t,role:e,content:r})=>i.jsxs("div",{className:"glass-card p-8 md:p-10 hover:bg-white/10 transition-all duration-300 hover:scale-105",role:"article","aria-labelledby":"testimonial-author",children:[i.jsx("div",{className:"flex justify-end mb-5",children:i.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center",children:i.jsx(CL,{className:"w-5 h-5 text-white/60","aria-hidden":"true"})})}),i.jsx("div",{className:"flex items-center mb-5",role:"img","aria-label":"Avaliação de 5 estrelas",children:[...Array(5)].map((n,s)=>i.jsx(En,{className:"w-4 h-4 md:w-5 md:h-5 text-yellow-400 fill-current mr-1","aria-hidden":"true"},s))}),i.jsx("blockquote",{className:"text-white/80 mb-6 italic text-base md:text-lg leading-relaxed font-light",children:i.jsxs("p",{className:"relative",children:[i.jsx("span",{className:"text-3xl text-white/20 absolute -left-2 -top-2",children:'"'}),r,i.jsx("span",{className:"text-3xl text-white/20 absolute -right-2 -bottom-2",children:'"'})]})}),i.jsxs("footer",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{id:"testimonial-author",className:"font-semibold text-base md:text-lg text-white tracking-wide mb-1",children:t}),i.jsx("p",{className:"text-white/60 text-sm font-light",children:e})]}),i.jsx("div",{className:"w-10 h-px bg-gradient-to-r from-white/20 to-transparent"})]})]}));cS.displayName="TestimonialCard";const iV=()=>i.jsx("footer",{className:"relative z-10 py-16 md:py-20 border-t border-white/10 bg-white/5 backdrop-blur-md",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-7xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-12 mb-12",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center overflow-hidden bg-white/10 border border-white/20 backdrop-blur-md",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1",loading:"lazy"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-2xl font-light text-white tracking-wide block",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm font-light",children:"Saúde mental para todos"})]})]}),i.jsx("p",{className:"text-white/70 text-base leading-relaxed max-w-md",children:"Conectando pessoas através da tecnologia e comunidade para promover o bem-estar mental e emocional."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Links Rápidos"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Sobre Nós"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Nossos Serviços"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Comunidade"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"text-white/60 hover:text-white transition-all duration-300 text-sm font-light",children:"Blog"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Contato"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsxs("li",{className:"flex items-center space-x-3 text-white/60 text-sm font-light",children:[i.jsx(fo,{className:"w-4 h-4"}),i.jsx("span",{children:"contato@sereno.com"})]}),i.jsxs("li",{className:"flex items-center space-x-3 text-white/60 text-sm font-light",children:[i.jsx(on,{className:"w-4 h-4"}),i.jsx("span",{children:"+55 (11) 99999-9999"})]}),i.jsxs("li",{className:"flex items-center space-x-3 text-white/60 text-sm font-light",children:[i.jsx(to,{className:"w-4 h-4"}),i.jsx("span",{children:"São Paulo, SP"})]})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center pt-8 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-6 mb-6 md:mb-0",children:[i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(_L,{className:"w-5 h-5 text-white/60 hover:text-white"})}),i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(yL,{className:"w-5 h-5 text-white/60 hover:text-white"})}),i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(IL,{className:"w-5 h-5 text-white/60 hover:text-white"})}),i.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:i.jsx(jL,{className:"w-5 h-5 text-white/60 hover:text-white"})})]}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 mb-6 md:mb-0",children:[i.jsx("a",{href:"#",className:"text-white/50 hover:text-white transition-all duration-300 text-sm font-light",children:"Termos de Uso"}),i.jsx("a",{href:"#",className:"text-white/50 hover:text-white transition-all duration-300 text-sm font-light",children:"Política de Privacidade"}),i.jsx("a",{href:"#",className:"text-white/50 hover:text-white transition-all duration-300 text-sm font-light",children:"Cookies"})]}),i.jsxs("p",{className:"text-white/50 text-sm font-light text-center md:text-right",children:["© ",new Date().getFullYear()," Sereno. Feito com ",i.jsx(wr,{className:"w-4 h-4 inline text-red-400"})," para você."]})]})]})}),w1={async cleanupAnonymousPosts(){try{const t=Ne(J,"posts"),e=new Date(Date.now()-24*60*60*1e3),r=je(t,Me("isAnonymous","==",!0),Me("createdAt","<",e)),n=await Le(r);if(n.empty)return console.log("Nenhum post anônimo antigo encontrado para limpeza"),{deletedCount:0};const s=n.docs.map(async o=>{const l=o.id,c=Ne(J,"comments"),d=je(c,Me("postId","==",l)),f=(await Le(d)).docs.map(m=>Qr(m.ref));return await Promise.all(f),await Qr(o.ref),l}),a=await Promise.all(s);return console.log(`Limpeza concluída: ${a.length} posts anônimos antigos foram deletados`),{deletedCount:a.length,deletedPostIds:a}}catch(t){throw console.error("Erro durante limpeza de posts anônimos:",t),t}},async cleanupPrivatePosts(){try{const t=Ne(J,"posts"),e=new Date(Date.now()-7*24*60*60*1e3),r=je(t,Me("visibility","==","private"),Me("createdAt","<",e)),n=await Le(r);if(n.empty)return console.log("Nenhum post privado antigo encontrado para limpeza"),{deletedCount:0};const s=n.docs.map(async o=>{const l=o.id,c=Ne(J,"comments"),d=je(c,Me("postId","==",l)),f=(await Le(d)).docs.map(m=>Qr(m.ref));return await Promise.all(f),await Qr(o.ref),l}),a=await Promise.all(s);return console.log(`Limpeza concluída: ${a.length} posts privados antigos foram deletados`),{deletedCount:a.length,deletedPostIds:a}}catch(t){throw console.error("Erro durante limpeza de posts privados:",t),t}},async cleanupOldNotifications(){try{const t=Ne(J,"notifications"),e=new Date;e.setDate(e.getDate()-30);const r=je(t,Me("createdAt","<",e)),n=await Le(r);if(n.empty){console.log("Nenhuma notificação antiga para limpar");return}const s=Dp(J);n.docs.forEach(a=>{s.delete(a.ref)}),await s.commit(),console.log(`Limpeza de notificações: ${n.docs.length} notificações antigas removidas`)}catch(t){console.error("Erro ao limpar notificações antigas:",t)}},async runAllCleanups(){console.log("Iniciando limpeza automática...");try{await Promise.all([this.cleanupAnonymousPosts(),this.cleanupPrivatePosts(),this.cleanupOldNotifications()]),console.log("Limpeza automática concluída com sucesso")}catch(t){console.error("Erro durante limpeza automática:",t)}}};typeof window<"u"&&(setInterval(()=>{w1.runAllCleanups().catch(t=>{console.error("Erro na limpeza automática:",t)})},60*60*1e3),setTimeout(()=>{w1.runAllCleanups().catch(t=>{console.error("Erro na limpeza inicial:",t)})},5*60*1e3));const qo=(t=.1,e="0px 0px -100px 0px")=>{const[r,n]=v.useState(null),[s,a]=v.useState(!1);return v.useEffect(()=>{if(!r)return;const o=new IntersectionObserver(([l])=>{l.isIntersecting&&a(!0)},{threshold:t,rootMargin:e});return o.observe(r),()=>o.disconnect()},[r,t,e]),[n,s]};function aV(){const t=gt(),[e,r]=v.useState(!1),[n,s]=v.useState(!1),[a,o]=qo(.15,"0px 0px -50px 0px"),[l,c]=qo(.15,"0px 0px -50px 0px"),[d,h]=qo(.15,"0px 0px -50px 0px"),[f,m]=qo(.15,"0px 0px -50px 0px"),[y,N]=qo(.15,"0px 0px -50px 0px"),[E,C]=v.useState(0),[x,w]=v.useState({x:0,y:0}),g=v.useRef(null);v.useEffect(()=>{const T=D=>{w({x:D.clientX/window.innerWidth*2-1,y:D.clientY/window.innerHeight*2-1})};return window.addEventListener("mousemove",T,{passive:!0}),()=>window.removeEventListener("mousemove",T)},[]);const b=v.useMemo(()=>[{name:"Eduardo Silva Pimenta da Mota",role:"Usuário do Sereno",content:"O Sereno me ajudou a encontrar uma comunidade que entende o que estou passando. É incrível poder compartilhar sem medo de julgamentos."},{name:"Bruno de Medeiros Rodrigues",role:"Aluno de Sistemas da Informação",content:"O Sereno me permite alcançar mais pessoas que precisam de ajuda. A plataforma é intuitiva e segura."},{name:"Pedro Henrique Cavalcante dos Santos",role:"Membro da Comunidade",content:"Os grupos de apoio me deram força para enfrentar a ansiedade. Encontrei pessoas que realmente me entendem."}],[]),I=v.useMemo(()=>[{icon:wr,title:"Compartilhamento Seguro",description:"Compartilhe seus sentimentos de forma anônima ou pública, em um ambiente livre de julgamentos e acolhedor."},{icon:pt,title:"Grupos de Apoio",description:"Participe de comunidades temáticas focadas em desafios específicos como ansiedade, TDAH, autoconfiança e mais."},{icon:nt,title:"Chat com Profissionais",description:"Conecte-se diretamente com psicólogos verificados para atendimento personalizado e orientação especializada."},{icon:Ri,title:"Autoavaliação Diária",description:"Acompanhe seu bem-estar mental através de questionários diários e gráficos de evolução personalizados."}],[]),M=v.useMemo(()=>[{title:"Ansiedade",desc:"Grupo de apoio para gerenciar ansiedade",icon:Ri,color:"from-white to-gray-200"},{title:"Autoconfiança",desc:"Desenvolvimento pessoal e autoestima",icon:Ki,color:"from-white to-gray-200"},{title:"TDAH & Foco",desc:"Estratégias e suporte para TDAH",icon:Yu,color:"from-white to-gray-200"}],[]),A=v.useCallback(()=>{const T=window.scrollY;r(T>50)},[]),_=v.useCallback(T=>{const D=document.getElementById(T);if(D){const ae=D.getBoundingClientRect().top+window.pageYOffset-120;D.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),setTimeout(()=>{window.scrollTo({top:ae,behavior:"smooth"})},100)}},[]),S=v.useCallback(T=>{C(T),g.current&&(clearInterval(g.current),g.current=setInterval(()=>{C(D=>(D+1)%b.length)},8e3))},[b.length]);v.useEffect(()=>{s(!0),document.documentElement.style.scrollBehavior="smooth";let T=!1;const D=()=>{T||(requestAnimationFrame(()=>{A(),T=!1}),T=!0)};return window.addEventListener("scroll",D,{passive:!0}),g.current=setInterval(()=>{C(P=>(P+1)%b.length)},8e3),()=>{window.removeEventListener("scroll",D),document.documentElement.style.scrollBehavior="auto",g.current&&clearInterval(g.current)}},[A,b.length]);const k=Yt.memo(()=>i.jsx("div",{className:"relative z-10 py-8",children:i.jsxs("div",{className:"relative mx-8 md:mx-16 lg:mx-32",children:[i.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),i.jsx("div",{className:"absolute inset-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent blur-sm"}),i.jsx("div",{className:"absolute left-1/4 -top-1 w-1 h-1 bg-white/30 rounded-full animate-pulse"}),i.jsx("div",{className:"absolute left-3/4 -top-0.5 w-0.5 h-0.5 bg-white/20 rounded-full animate-pulse",style:{animationDelay:"1s"}})]})}));return i.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden relative",children:[i.jsx(nV,{}),i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-48 h-48 bg-white/[0.01] rounded-full blur-2xl animate-pulse",style:{transform:`translate(${x.x*10}px, ${x.y*10}px)`,animationDuration:"6s"}}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-white/[0.005] rounded-full blur-2xl animate-pulse",style:{transform:`translate(${x.x*-8}px, ${x.y*-8}px)`,animationDuration:"8s",animationDelay:"3s"}})]}),i.jsx(rS,{scrolled:e,scrollToSection:_}),i.jsxs("section",{className:"relative z-10 min-h-screen flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 z-0",children:i.jsx(sx,{raysOrigin:"top-center",raysColor:"#ffffff",raysSpeed:.8,lightSpread:1.2,rayLength:2,followMouse:!0,mouseInfluence:.1,noiseAmount:.03,distortion:.01,className:"w-full h-full"})}),i.jsx("div",{className:"relative z-10",children:i.jsx(oS,{scrollToSection:_,inView:n})})]}),i.jsx("section",{id:"services",ref:a,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-6xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-8",children:i.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${o?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"Como Funciona"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${o?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Descubra como o Sereno pode transformar sua jornada de saúde mental através da tecnologia e comunidade."}),i.jsxs("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:[i.jsx("div",{className:"w-1 h-1 bg-white/20 rounded-full animate-pulse"}),i.jsx("div",{className:"w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),i.jsx("div",{className:"w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{animationDelay:"1s"}})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-6 md:gap-8",children:I.map((T,D)=>i.jsx("div",{className:"group relative",children:i.jsx(lS,{icon:T.icon,title:T.title,description:T.description,delay:D*150+400,inView:o})},T.title))})]})}),i.jsx(k,{}),i.jsx("section",{id:"projects",ref:l,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-6xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-8",children:i.jsx("div",{className:"w-12 h-px bg-white/20"})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${c?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"Nossa Comunidade"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${c?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Conheça os grupos de apoio e espaços de conexão que fazem do Sereno um lugar especial."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 md:gap-10 lg:gap-12 mb-16",children:M.map((T,D)=>i.jsxs("div",{className:`group relative transition-all duration-700 transform hover:scale-105 ${c?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:`${D*200+400}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/10 rounded-2xl blur-lg opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10"}),i.jsxs("div",{className:"relative bg-white/5 border border-white/10 rounded-2xl p-8 md:p-10 lg:p-12 backdrop-blur-md hover:bg-white/10 hover:border-white/20 transition-all duration-500 cursor-pointer min-h-[280px] md:min-h-[320px] flex flex-col overflow-hidden",children:[i.jsx("div",{className:"relative flex items-center justify-center w-20 h-20 md:w-24 md:h-24 rounded-2xl bg-white/10 border border-white/20 mb-8 backdrop-blur-md group-hover:bg-white/20 group-hover:scale-110 transition-all duration-500 mx-auto",children:i.jsx(T.icon,{className:"w-10 h-10 md:w-12 md:h-12 text-white/80 group-hover:text-white transition-all duration-500"})}),i.jsxs("div",{className:"relative text-center flex-1 flex flex-col justify-center",children:[i.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-light mb-4 text-white group-hover:text-white/95 transition-colors duration-500",children:T.title}),i.jsx("p",{className:"text-white/70 text-base md:text-lg leading-relaxed group-hover:text-white/85 transition-colors duration-500 mb-6",children:T.desc}),i.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0",children:i.jsxs("div",{className:"inline-flex items-center text-white/60 text-sm font-light group-hover:text-white/80 transition-colors duration-300",children:[i.jsx("span",{className:"mr-2",children:"Participar"}),i.jsx("svg",{className:"w-4 h-4 transition-all duration-300 group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]}),i.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-white/20 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:animate-pulse"}),i.jsx("div",{className:"absolute bottom-4 left-4 w-1.5 h-1.5 bg-white/15 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-700 delay-300 group-hover:animate-pulse"})]})]},T.title))})]})}),i.jsx(k,{}),i.jsx("section",{id:"testimonials",ref:d,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-4xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-6",children:i.jsx("div",{className:"w-8 h-8 border border-white/10 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white/20 rounded-full animate-pulse"})})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${h?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"O Que Nossos Usuários Dizem"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${h?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Histórias reais de pessoas que encontraram apoio e transformação através do Sereno."})]}),i.jsxs("div",{className:`max-w-4xl mx-auto relative transition-all duration-700 transform ${h?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.4s"},children:[i.jsxs("div",{className:"relative",children:[i.jsx(cS,{...b[E]}),i.jsx("div",{className:"absolute -top-4 -left-4 text-4xl text-white/10 font-serif",children:'"'}),i.jsx("div",{className:"absolute -bottom-4 -right-4 text-4xl text-white/10 font-serif rotate-180",children:'"'})]}),i.jsx("div",{className:"flex justify-center mt-10 space-x-3",children:b.map((T,D)=>i.jsx("button",{onClick:()=>S(D),className:`w-3 h-3 rounded-full transition-all duration-300 hover:scale-110 ${D===E?"bg-white scale-125 shadow-lg shadow-white/30":"bg-white/30 hover:bg-white/50"}`,"aria-label":`Ver depoimento ${D+1}`},D))})]})]})}),i.jsx(k,{}),i.jsx("section",{id:"about",ref:f,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsx("div",{className:"container mx-auto px-4 md:px-6 max-w-6xl",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-12 md:gap-16",children:[i.jsxs("div",{className:`flex-1 transition-all duration-1000 transform ${m?"translate-x-0 opacity-100":"-translate-x-16 opacity-0"}`,children:[i.jsxs("div",{className:"relative",children:[i.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white",children:"Nossa Missão"}),i.jsx("div",{className:"absolute -left-4 top-0 w-0.5 h-16 bg-gradient-to-b from-white/30 to-transparent"})]}),i.jsx("p",{className:"text-lg md:text-xl text-white/70 mb-6 leading-relaxed hover:text-white/80 transition-colors duration-300",children:"O Sereno nasceu da necessidade de democratizar o acesso à saúde mental. Acreditamos que todos merecem ter um espaço seguro para compartilhar, se conectar e receber apoio especializado quando necessário."}),i.jsx("p",{className:"text-lg md:text-xl text-white/70 mb-8 leading-relaxed hover:text-white/80 transition-colors duration-300",children:"Nossa plataforma combina tecnologia, comunidade e profissionais verificados para criar um ecossistema completo de cuidado mental, onde cada pessoa pode encontrar o suporte que precisa para evoluir."}),i.jsxs("button",{onClick:()=>_("contact"),className:"group bg-white text-black px-6 py-3 rounded-xl font-light transition-all duration-300 hover:bg-white/90 text-base tracking-wide hover:scale-105 hover:shadow-lg hover:shadow-white/20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-white/30 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),i.jsx("span",{className:"relative group-hover:mr-2 transition-all duration-300",children:"Saiba Mais"}),i.jsx("span",{className:"relative opacity-0 group-hover:opacity-100 transition-all duration-300",children:"→"})]})]}),i.jsx("div",{className:`flex-1 transition-all duration-700 transform ${m?"translate-x-0 opacity-100":"translate-x-16 opacity-0"}`,style:{transitionDelay:"0.3s"},children:i.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{icon:ZE,label:"Segurança"},{icon:wr,label:"Cuidado"},{icon:Ri,label:"Inteligência"},{icon:pt,label:"Comunidade"}].map((T,D)=>i.jsxs("div",{className:"group aspect-square rounded-xl bg-white/5 border border-white/10 backdrop-blur-md flex flex-col items-center justify-center hover:bg-white/10 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-white/10 cursor-pointer",style:{transitionDelay:`${D*100}ms`},children:[i.jsx(T.icon,{className:"w-12 h-12 text-white/80 group-hover:text-white group-hover:scale-110 transition-all duration-300 mb-2"}),i.jsx("span",{className:"text-white/60 group-hover:text-white/80 text-sm font-light transition-all duration-300",children:T.label})]},T.label))})})]})})}),i.jsx(k,{}),i.jsx("section",{id:"contact",ref:y,className:"relative z-10 py-16 md:py-24 min-h-screen flex items-center",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-6 max-w-2xl",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16 relative",children:[i.jsx("div",{className:"absolute -top-8 left-1/4 opacity-10",children:i.jsx(fo,{className:"w-3 h-3 text-white"})}),i.jsx("div",{className:"absolute -top-6 right-1/4 opacity-10",children:i.jsx(on,{className:"w-2 h-2 text-white"})}),i.jsx("h2",{className:`text-3xl md:text-5xl lg:text-6xl font-extralight mb-6 text-white transition-all duration-1000 transform ${N?"translate-y-0 opacity-100":"translate-y-16 opacity-0"}`,children:"Vamos Conversar?"}),i.jsx("p",{className:`text-lg md:text-xl text-white/70 max-w-2xl mx-auto transition-all duration-1000 transform ${N?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.2s"},children:"Entre em contato e vamos conversar sobre como o Sereno pode ajudar você ou sua organização."})]}),i.jsx("div",{className:`max-w-2xl mx-auto transition-all duration-700 transform ${N?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,style:{transitionDelay:"0.4s"},children:i.jsx("div",{className:"group relative bg-white/5 border border-white/10 rounded-xl p-8 backdrop-blur-md hover:bg-white/10 transition-all duration-500",children:i.jsxs("div",{className:"relative z-10",children:[i.jsx("h3",{className:"text-2xl font-light mb-6 text-white text-center transition-all duration-300 group-hover:text-white/95",children:"Acesse sua Conta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("button",{className:"w-full bg-white text-black py-4 rounded-xl font-light transition-all duration-300 hover:bg-white/90 text-base tracking-wide backdrop-blur-md hover:scale-105 hover:shadow-lg hover:shadow-white/20",onClick:()=>t("/login"),children:"Fazer Login"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-white/10"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-4 bg-black text-white/50 font-light",children:"ou"})})]}),i.jsx("button",{className:"w-full bg-transparent border border-white/30 text-white py-4 rounded-xl font-light transition-all duration-300 hover:bg-white/5 text-base tracking-wide backdrop-blur-md hover:scale-105 hover:border-white/50 hover:shadow-lg hover:shadow-white/10",onClick:()=>t("/register"),children:"Criar Conta"})]}),i.jsx("p",{className:"text-white/50 text-sm text-center mt-6 font-light transition-colors duration-300 group-hover:text-white/60",children:"Comece sua jornada de saúde mental hoje mesmo"})]})})})]})}),i.jsx(iV,{})]})}const oV=()=>{const{groupId:t}=fh(),e=gt(),[r,n]=v.useState(null),[s,a]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[h,f]=v.useState(null),[m,y]=v.useState(!1),[N,E]=v.useState(!1),[C,x]=v.useState(!1),[w,g]=v.useState(!1),[b,I]=v.useState(""),[M,A]=v.useState(""),[_,S]=v.useState("all"),k={id:t,name:"Ansiedade & Estresse",description:"Um grupo de apoio para pessoas que lidam com ansiedade e estresse no dia a dia. Compartilhe suas experiências, receba apoio e aprenda estratégias de enfrentamento.",avatar:null,memberCount:1247,postCount:89,createdAt:new Date("2024-01-15"),rules:["Respeite todos os membros","Mantenha as discussões focadas no tema do grupo","Não compartilhe informações pessoais de outros","Seja gentil e acolhedor","Reporte comportamentos inadequados"],tags:["ansiedade","estresse","saúde mental","apoio","bem-estar"],privacy:"public",category:"Saúde Mental",location:"Online",meetingSchedule:"Toda quarta-feira às 20h",admins:["admin1","admin2"],members:["user1","user2","user3"]},T=[{id:1,author:{id:"user1",name:"Maria Santos",avatar:null},content:"Hoje foi um dia difícil no trabalho. A ansiedade estava muito alta durante uma reunião importante. Alguém tem alguma técnica de respiração que funcione bem para vocês?",timestamp:new Date(Date.now()-1e3*60*30),likes:12,comments:8,liked:!1,tags:["ansiedade","trabalho","técnicas"]},{id:2,author:{id:"user2",name:"João Silva",avatar:null},content:"Queria compartilhar uma vitória pessoal: consegui fazer uma apresentação em público sem ter um ataque de pânico! A terapia e os exercícios de mindfulness estão funcionando. Obrigado a todos pelo apoio!",timestamp:new Date(Date.now()-1e3*60*60*2),likes:45,comments:15,liked:!0,tags:["vitória","mindfulness","terapia"]},{id:3,author:{id:"user3",name:"Ana Costa",avatar:null},content:"Alguém já experimentou meditação guiada? Estou pensando em começar mas não sei por onde começar. Alguma recomendação de app ou canal no YouTube?",timestamp:new Date(Date.now()-1e3*60*60*4),likes:8,comments:12,liked:!1,tags:["meditação","dicas","apps"]}];v.useEffect(()=>{(async()=>{try{const O=auth.currentUser;if(!O){e("/login");return}d(O);const U=doc(db,"users",O.uid),q=await getDoc(U);if(q.exists()){const ue=q.data();f(ue),y(k.members.includes(O.uid)),E(k.admins.includes(O.uid))}n(k),a(T)}catch(O){console.error("Erro ao buscar dados:",O)}finally{l(!1)}})()},[t,e]);const D=async()=>{try{y(!0),x(!1),n(F=>({...F,memberCount:F.memberCount+1}))}catch(F){console.error("Erro ao entrar no grupo:",F)}},P=async()=>{try{y(!1),n(F=>({...F,memberCount:F.memberCount-1}))}catch(F){console.error("Erro ao sair do grupo:",F)}},$=async()=>{if(b.trim())try{const F={id:Date.now(),author:{id:c.uid,name:(h==null?void 0:h.displayName)||c.displayName||"Usuário",avatar:c.photoURL},content:b,timestamp:new Date,likes:0,comments:0,liked:!1,tags:[]};a(O=>[F,...O]),I(""),n(O=>({...O,postCount:O.postCount+1}))}catch(F){console.error("Erro ao criar post:",F)}},ae=F=>{a(O=>O.map(U=>U.id===F?{...U,liked:!U.liked,likes:U.liked?Array.isArray(U.likes)?U.likes.filter(q=>q!=="current-user"):[]:Array.isArray(U.likes)?[...U.likes,"current-user"]:["current-user"]}:U))},oe=s.filter(F=>{const O=F.content.toLowerCase().includes(M.toLowerCase())||F.author.name.toLowerCase().includes(M.toLowerCase()),U=_==="all"||_==="popular"&&(Array.isArray(F.likes)?F.likes.length:0)>10||_==="recent"&&F.timestamp>new Date(Date.now()-1e3*60*60*24);return O&&U});return o?i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Carregando grupo..."})}):i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"bg-black/95 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:i.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs("button",{onClick:()=>e("/home"),className:"flex items-center space-x-2 text-white/70 hover:text-white transition-colors",children:[i.jsx(li,{className:"w-5 h-5"}),i.jsx("span",{children:"Voltar"})]}),i.jsx("h1",{className:"text-xl font-light",children:r.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[N&&i.jsx("button",{onClick:()=>g(!0),className:"text-white/70 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/10",children:i.jsx(Di,{className:"w-5 h-5"})}),i.jsx("button",{className:"text-white/70 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/10",children:i.jsx(ci,{className:"w-5 h-5"})})]})]})})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8 mb-8 backdrop-blur-md",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-start space-y-6 lg:space-y-0 lg:space-x-8",children:[i.jsx("div",{className:"w-32 h-32 rounded-2xl bg-white/10 border border-white/20 flex items-center justify-center flex-shrink-0",children:r.avatar?i.jsx("img",{src:r.avatar,alt:r.name,className:"w-full h-full object-cover rounded-2xl"}):i.jsx(pt,{className:"w-16 h-16 text-white/50"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-light mb-2",children:r.name}),i.jsx("p",{className:"text-white/70 text-lg mb-4",children:r.description}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:r.tags.map((F,O)=>i.jsxs("span",{className:"bg-white/10 px-3 py-1 rounded-full text-sm text-white/80",children:["#",F]},O))}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-white/60",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(pt,{className:"w-4 h-4"}),i.jsxs("span",{children:[r.memberCount," membros"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(nt,{className:"w-4 h-4"}),i.jsxs("span",{children:[r.postCount," posts"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xe,{className:"w-4 h-4"}),i.jsxs("span",{children:["Criado em ",r.createdAt.toLocaleDateString("pt-BR")]})]})]})]}),i.jsxs("div",{className:"flex flex-col space-y-3",children:[m?i.jsxs("button",{onClick:P,className:"bg-red-600/20 border border-red-500/30 text-red-300 px-6 py-2 rounded-xl font-light hover:bg-red-600/30 transition-all duration-300",children:[i.jsx(AL,{className:"w-4 h-4 inline mr-2"}),"Sair do Grupo"]}):i.jsxs("button",{onClick:()=>x(!0),className:"bg-white text-black px-6 py-2 rounded-xl font-light hover:bg-white/90 transition-all duration-300",children:[i.jsx(tS,{className:"w-4 h-4 inline mr-2"}),"Entrar no Grupo"]}),i.jsxs("button",{className:"bg-white/10 border border-white/30 text-white px-6 py-2 rounded-xl font-light hover:bg-white/20 transition-all duration-300",children:[i.jsx(Kd,{className:"w-4 h-4 inline mr-2"}),"Compartilhar"]})]})]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md",children:[i.jsx("h3",{className:"text-xl font-light mb-4",children:"Regras do Grupo"}),i.jsx("ul",{className:"space-y-2 text-sm text-white/80",children:r.rules.map((F,O)=>i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx("span",{className:"text-white/50 mt-1",children:"•"}),i.jsx("span",{children:F})]},O))})]}),i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md",children:[i.jsx("h3",{className:"text-xl font-light mb-4",children:"Encontros"}),i.jsxs("div",{className:"space-y-3 text-sm text-white/80",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xe,{className:"w-4 h-4 text-white/50"}),i.jsx("span",{children:r.meetingSchedule})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(to,{className:"w-4 h-4 text-white/50"}),i.jsx("span",{children:r.location})]})]})]}),i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md",children:[i.jsx("h3",{className:"text-xl font-light mb-4",children:"Estatísticas"}),i.jsxs("div",{className:"space-y-3 text-sm text-white/80",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Membros ativos:"}),i.jsx("span",{className:"text-white",children:"1,247"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Posts esta semana:"}),i.jsx("span",{className:"text-white",children:"23"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Novos membros:"}),i.jsx("span",{className:"text-white",children:"+12"})]})]})]})]}),i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-light",children:"Discussões"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Pesquisar posts...",value:M,onChange:F=>A(F.target.value),className:"bg-white/10 border border-white/20 rounded-lg pl-10 pr-4 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 text-sm"})]}),i.jsxs("select",{value:_,onChange:F=>S(F.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-white/30 text-sm",children:[i.jsx("option",{value:"all",children:"Todos"}),i.jsx("option",{value:"recent",children:"Recentes"}),i.jsx("option",{value:"popular",children:"Populares"})]})]})]}),m&&i.jsxs("div",{className:"bg-white/5 border border-white/20 rounded-xl p-4 mb-6",children:[i.jsx("textarea",{placeholder:"Compartilhe algo com o grupo...",value:b,onChange:F=>I(F.target.value),rows:3,className:"w-full bg-transparent border-none text-white placeholder-white/50 focus:outline-none resize-none"}),i.jsxs("div",{className:"flex items-center justify-between mt-3",children:[i.jsx("div",{className:"text-xs text-white/50",children:"Use #hashtags para categorizar seu post"}),i.jsx("button",{onClick:$,disabled:!b.trim(),className:"bg-white text-black px-4 py-2 rounded-lg font-light hover:bg-white/90 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Publicar"})]})]}),i.jsx("div",{className:"space-y-4",children:oe.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nt,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),i.jsx("p",{className:"text-white/50 text-lg",children:"Nenhum post encontrado"}),i.jsx("p",{className:"text-white/30 text-sm mt-2",children:M||_!=="all"?"Tente ajustar os filtros de busca":"Seja o primeiro a iniciar uma discussão!"})]}):oe.map(F=>i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-md",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:F.author.avatar?i.jsx("img",{src:F.author.avatar,alt:"",className:"w-full h-full rounded-full"}):i.jsx("span",{className:"text-white/70",children:F.author.name.charAt(0)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("span",{className:"font-medium text-white",children:F.author.name}),i.jsxs("span",{className:"text-white/50 text-sm",children:[F.timestamp.toLocaleDateString("pt-BR")," às ",F.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]}),i.jsx("p",{className:"text-white/90 mb-3 leading-relaxed",children:F.content}),F.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:F.tags.map((O,U)=>i.jsxs("span",{className:"bg-white/10 px-2 py-1 rounded-full text-xs text-white/60",children:["#",O]},U))}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[i.jsxs("button",{onClick:()=>ae(F.id),className:`flex items-center space-x-1 transition-colors ${F.liked?"text-red-400":"text-white/60 hover:text-white"}`,children:[i.jsx(wr,{className:`w-4 h-4 ${F.liked?"fill-current":""}`}),i.jsx("span",{children:Array.isArray(F.likes)?F.likes.length:0})]}),i.jsxs("button",{className:"flex items-center space-x-1 text-white/60 hover:text-white transition-colors",children:[i.jsx(nt,{className:"w-4 h-4"}),i.jsx("span",{children:F.commentCount||0})]}),i.jsx("button",{className:"text-white/60 hover:text-white transition-colors",children:i.jsx(Kd,{className:"w-4 h-4"})})]})]})]})},F.id))})]})]}),C&&i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-black/95 border border-white/10 rounded-2xl p-6 max-w-md w-full",children:[i.jsx("h3",{className:"text-xl font-light mb-4",children:"Entrar no Grupo"}),i.jsxs("p",{className:"text-white/70 mb-6",children:['Você está prestes a entrar no grupo "',r.name,'". Ao entrar, você concorda em seguir as regras do grupo e manter um ambiente respeitoso.']}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:D,className:"bg-white text-black px-4 py-2 rounded-xl font-light hover:bg-white/90 transition-all duration-300 flex-1",children:"Entrar no Grupo"}),i.jsx("button",{onClick:()=>x(!1),className:"bg-transparent border border-white/30 text-white px-4 py-2 rounded-xl font-light hover:bg-white/10 transition-all duration-300",children:"Cancelar"})]})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-black/95 border border-white/10 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-light",children:"Configurações do Grupo"}),i.jsx("button",{onClick:()=>g(!1),className:"text-white/50 hover:text-white transition-colors",children:i.jsx(Zt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-light mb-3",children:"Informações Básicas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Nome do Grupo"}),i.jsx("input",{type:"text",defaultValue:r.name,className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Categoria"}),i.jsx("input",{type:"text",defaultValue:r.category,className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-light mb-3",children:"Descrição"}),i.jsx("textarea",{defaultValue:r.description,rows:3,className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 resize-none"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-light mb-3",children:"Regras"}),i.jsxs("div",{className:"space-y-2",children:[r.rules.map((F,O)=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"text",defaultValue:F,className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"}),i.jsx("button",{className:"text-red-400 hover:text-red-300 p-1",children:i.jsx(Qt,{className:"w-4 h-4"})})]},O)),i.jsx("button",{className:"text-white/70 hover:text-white text-sm",children:"+ Adicionar regra"})]})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{className:"bg-white text-black px-4 py-2 rounded-xl font-light hover:bg-white/90 transition-all duration-300 flex-1",children:"Salvar Alterações"}),i.jsx("button",{onClick:()=>g(!1),className:"bg-transparent border border-white/30 text-white px-4 py-2 rounded-xl font-light hover:bg-white/10 transition-all duration-300",children:"Cancelar"})]})]})]})})]})};function uS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=uS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function lV(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=uS(t))&&(n&&(n+=" "),n+=e);return n}const ix="-",cV=t=>{const e=dV(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(ix);return l[0]===""&&l.length!==1&&l.shift(),dS(l,e)||uV(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},dS=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?dS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(ix);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},y1=/^\[(.+)\]$/,uV=t=>{if(y1.test(t)){const e=y1.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},dV=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return mV(Object.entries(t.classGroups),r).forEach(([a,o])=>{$p(o,n,a,e)}),n},$p=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:v1(e,s);a.classGroupId=r;return}if(typeof s=="function"){if(hV(s)){$p(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{$p(o,v1(e,a),r,n)})})},v1=(t,e)=>{let r=t;return e.split(ix).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},hV=t=>t.isThemeGetter,mV=(t,e)=>e?t.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[r,s]}):t,fV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},hS="!",pV=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let d=0,h=0,f;for(let C=0;C<l.length;C++){let x=l[C];if(d===0){if(x===s&&(n||l.slice(C,C+a)===e)){c.push(l.slice(h,C)),h=C+a;continue}if(x==="/"){f=C;continue}}x==="["?d++:x==="]"&&d--}const m=c.length===0?l:l.substring(h),y=m.startsWith(hS),N=y?m.substring(1):m,E=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:N,maybePostfixModifierPosition:E}};return r?l=>r({className:l,parseClassName:o}):o},gV=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},xV=t=>({cache:fV(t.cacheSize),parseClassName:pV(t),...cV(t)}),wV=/\s+/,yV=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(wV);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=r(d);let N=!!y,E=n(N?m.substring(0,y):m);if(!E){if(!N){l=d+(l.length>0?" "+l:l);continue}if(E=n(m),!E){l=d+(l.length>0?" "+l:l);continue}N=!1}const C=gV(h).join(":"),x=f?C+hS:C,w=x+E;if(a.includes(w))continue;a.push(w);const g=s(E,N);for(let b=0;b<g.length;++b){const I=g[b];a.push(x+I)}l=d+(l.length>0?" "+l:l)}return l};function vV(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=mS(e))&&(n&&(n+=" "),n+=r);return n}const mS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=mS(t[n]))&&(r&&(r+=" "),r+=e);return r};function bV(t,...e){let r,n,s,a=o;function o(c){const d=e.reduce((h,f)=>f(h),t());return r=xV(d),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=yV(c,r);return s(c,h),h}return function(){return a(vV.apply(null,arguments))}}const Ge=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},fS=/^\[(?:([a-z-]+):)?(.+)\]$/i,NV=/^\d+\/\d+$/,_V=new Set(["px","full","screen"]),jV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,kV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,In=t=>Va(t)||_V.has(t)||NV.test(t),gs=t=>po(t,"length",LV),Va=t=>!!t&&!Number.isNaN(Number(t)),of=t=>po(t,"number",Va),Ho=t=>!!t&&Number.isInteger(Number(t)),TV=t=>t.endsWith("%")&&Va(t.slice(0,-1)),be=t=>fS.test(t),xs=t=>jV.test(t),IV=new Set(["length","size","percentage"]),AV=t=>po(t,IV,pS),PV=t=>po(t,"position",pS),RV=new Set(["image","url"]),DV=t=>po(t,RV,VV),MV=t=>po(t,"",OV),Wo=()=>!0,po=(t,e,r)=>{const n=fS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},LV=t=>EV.test(t)&&!SV.test(t),pS=()=>!1,OV=t=>kV.test(t),VV=t=>CV.test(t),FV=()=>{const t=Ge("colors"),e=Ge("spacing"),r=Ge("blur"),n=Ge("brightness"),s=Ge("borderColor"),a=Ge("borderRadius"),o=Ge("borderSpacing"),l=Ge("borderWidth"),c=Ge("contrast"),d=Ge("grayscale"),h=Ge("hueRotate"),f=Ge("invert"),m=Ge("gap"),y=Ge("gradientColorStops"),N=Ge("gradientColorStopPositions"),E=Ge("inset"),C=Ge("margin"),x=Ge("opacity"),w=Ge("padding"),g=Ge("saturate"),b=Ge("scale"),I=Ge("sepia"),M=Ge("skew"),A=Ge("space"),_=Ge("translate"),S=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",be,e],D=()=>[be,e],P=()=>["",In,gs],$=()=>["auto",Va,be],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],oe=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",be],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[Va,be];return{cacheSize:500,separator:":",theme:{colors:[Wo],spacing:[In,gs],blur:["none","",xs,be],brightness:ue(),borderColor:[t],borderRadius:["none","","full",xs,be],borderSpacing:D(),borderWidth:P(),contrast:ue(),grayscale:U(),hueRotate:ue(),invert:U(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[TV,gs],inset:T(),margin:T(),opacity:ue(),padding:D(),saturate:ue(),scale:ue(),sepia:U(),skew:ue(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[xs]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),be]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ho,be]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Ho,be]}],"grid-cols":[{"grid-cols":[Wo]}],"col-start-end":[{col:["auto",{span:["full",Ho,be]},be]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Wo]}],"row-start-end":[{row:["auto",{span:[Ho,be]},be]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[xs]},xs]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xs,gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",of]}],"font-family":[{font:[Wo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",Va,of]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",In,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",In,gs]}],"underline-offset":[{"underline-offset":["auto",In,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),PV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",AV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DV]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...oe(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:oe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...oe()]}],"outline-offset":[{"outline-offset":[In,be]}],"outline-w":[{outline:[In,gs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[In,gs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xs,MV]}],"shadow-color":[{shadow:[Wo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",xs,be]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[g]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[g]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Ho,be]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[In,gs,of]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},UV=bV(FV);function ei(...t){return UV(lV(t))}const zs=v.forwardRef(({className:t,type:e="text",variant:r="default",size:n="default",error:s,label:a,helperText:o,leftIcon:l,rightIcon:c,onLeftIconClick:d,onRightIconClick:h,...f},m)=>{const y="w-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black",N={default:"bg-black/50 border border-white/20 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50",filled:"bg-white/5 border border-white/10 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50",outline:"bg-transparent border-2 border-white/20 text-white placeholder-white/50 focus:border-white/50 focus:ring-white/50"},E={sm:"px-3 py-2 text-sm rounded-lg",default:"px-4 py-3 text-base rounded-xl",lg:"px-6 py-4 text-lg rounded-2xl"},C=s?"border-red-500 focus:border-red-500 focus:ring-red-500":"",x=ei(y,N[r],E[n],C,t),w=l&&d,g=c&&h;return i.jsxs("div",{className:"w-full",children:[a&&i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:a}),i.jsxs("div",{className:"relative",children:[w&&i.jsx("button",{type:"button",onClick:d,className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1 text-white/50 hover:text-white/70 transition-colors focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-black rounded","aria-label":"Ação do ícone esquerdo",children:i.jsx(l,{className:"w-4 h-4"})}),i.jsx("input",{type:e,className:ei(x,w&&"pl-10",g&&"pr-10"),ref:m,...f}),g&&i.jsx("button",{type:"button",onClick:h,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-white/50 hover:text-white/70 transition-colors focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-black rounded","aria-label":"Ação do ícone direito",children:i.jsx(c,{className:"w-4 h-4"})})]}),s&&i.jsx("p",{className:"mt-1 text-sm text-red-400",children:s}),o&&!s&&i.jsx("p",{className:"mt-1 text-sm text-white/50",children:o})]})});zs.displayName="Input";const It=Yt.forwardRef(({className:t,variant:e="default",padding:r="md",hover:n=!1,children:s,...a},o)=>{const l="rounded-2xl transition-all duration-300",c={default:"bg-white/5 border border-white/10",glass:"bg-white/10 backdrop-blur-md border border-white/20",elevated:"bg-white/5 border border-white/10 shadow-2xl",bordered:"bg-transparent border-2 border-white/20"},d={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=n?"hover:bg-white/10 hover:border-white/20 hover:scale-[1.02]":"";return i.jsx("div",{ref:o,className:ei(l,c[e],d[r],h,t),...a,children:s})});It.displayName="Card";const zV=Yt.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:ei("flex flex-col space-y-1.5 pb-4",t),...e})),$V=Yt.forwardRef(({className:t,...e},r)=>i.jsx("h3",{ref:r,className:ei("text-lg font-semibold leading-none tracking-tight text-white",t),...e})),BV=Yt.forwardRef(({className:t,...e},r)=>i.jsx("p",{ref:r,className:ei("text-sm text-white/70",t),...e})),qV=Yt.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:ei("pt-0",t),...e})),HV=Yt.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:ei("flex items-center pt-4",t),...e}));It.Header=zV;It.Title=$V;It.Description=BV;It.Content=qV;It.Footer=HV;const gS=({trigger:t,duration:e=3e3})=>{const r=v.useRef(null),n=v.useRef([]),s=v.useRef(null);return v.useEffect(()=>{if(!t)return;const a=r.current,o=a.getContext("2d"),l=()=>{a.width=window.innerWidth,a.height=window.innerHeight};l(),window.addEventListener("resize",l);const c=150,d=["#667eea","#764ba2","#f093fb","#4facfe","#00f2fe","#43e97b","#38f9d7"];class h{constructor(){this.x=Math.random()*a.width,this.y=-10,this.w=Math.random()*10+5,this.h=Math.random()*5+2,this.rotation=Math.random()*360,this.rotationSpeed=Math.random()*10-5,this.speedX=Math.random()*6-3,this.speedY=Math.random()*3+2,this.gravity=.1,this.color=d[Math.floor(Math.random()*d.length)],this.opacity=1,this.fadeSpeed=Math.random()*.02+.01}update(){this.x+=this.speedX,this.y+=this.speedY,this.speedY+=this.gravity,this.rotation+=this.rotationSpeed,this.opacity-=this.fadeSpeed,(this.x>a.width||this.x<0)&&(this.speedX*=-.8),this.y>a.height&&(this.speedY*=-.6,this.y=a.height)}draw(){o.save(),o.translate(this.x,this.y),o.rotate(this.rotation*Math.PI/180),o.globalAlpha=this.opacity,o.fillStyle=this.color,o.fillRect(-this.w/2,-this.h/2,this.w,this.h),o.restore()}isDead(){return this.opacity<=0||this.y>a.height+50}}n.current=[];for(let y=0;y<c;y++)n.current.push(new h);const f=()=>{o.clearRect(0,0,a.width,a.height),n.current=n.current.filter(y=>(y.update(),y.draw(),!y.isDead())),n.current.length>0&&(s.current=requestAnimationFrame(f))};f();const m=setTimeout(()=>{s.current&&cancelAnimationFrame(s.current)},e);return()=>{window.removeEventListener("resize",l),s.current&&cancelAnimationFrame(s.current),clearTimeout(m)}},[t,e]),i.jsx("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-50",style:{background:"transparent"}})},b1=()=>{const[t,e]=v.useState([]),[r,n]=v.useState([]),[s,a]=v.useState(""),[o,l]=v.useState("all"),[c,d]=v.useState(!1),[h,f]=v.useState(0);ze(),v.useEffect(()=>{const g=[{id:"1",name:"Ansiedade e Bem-estar",description:"Grupo de apoio para pessoas que lidam com ansiedade. Compartilhe experiências e aprenda técnicas de relaxamento.",memberCount:127,maxMembers:200,isPrivate:!1,category:"Saúde Mental",tags:["ansiedade","bem-estar","apoio"],createdAt:"2024-01-15",lastActivity:"2024-01-20",isMember:!1,isFeatured:!0,rating:4.8},{id:"2",name:"Psicólogos em Ação",description:"Comunidade exclusiva para psicólogos trocarem experiências e discutirem casos clínicos.",memberCount:45,maxMembers:100,isPrivate:!0,category:"Profissional",tags:["psicologia","casos clínicos","profissional"],createdAt:"2024-01-10",lastActivity:"2024-01-19",isMember:!0,isFeatured:!1,rating:4.9},{id:"3",name:"Meditação e Mindfulness",description:"Aprenda técnicas de meditação e mindfulness para melhorar sua saúde mental e qualidade de vida.",memberCount:89,maxMembers:150,isPrivate:!1,category:"Bem-estar",tags:["meditação","mindfulness","bem-estar"],createdAt:"2024-01-12",lastActivity:"2024-01-18",isMember:!1,isFeatured:!0,rating:4.7},{id:"4",name:"Depressão - Juntos Somos Mais Fortes",description:"Espaço seguro para compartilhar experiências sobre depressão e encontrar apoio mútuo.",memberCount:203,maxMembers:300,isPrivate:!1,category:"Saúde Mental",tags:["depressão","apoio","comunidade"],createdAt:"2024-01-05",lastActivity:"2024-01-21",isMember:!1,isFeatured:!0,rating:4.9},{id:"5",name:"Relacionamentos Saudáveis",description:"Discussões sobre como construir e manter relacionamentos saudáveis e equilibrados.",memberCount:156,maxMembers:250,isPrivate:!1,category:"Relacionamentos",tags:["relacionamentos","saudável","comunicação"],createdAt:"2024-01-08",lastActivity:"2024-01-20",isMember:!1,isFeatured:!1,rating:4.6}],b=g.filter(I=>I.isMember);e(g),n(b)},[]);const m=v.useCallback(async()=>{console.warn("Entrada em grupos desativada neste build.")},[]),y=v.useCallback(async()=>{console.warn("Saída de grupos desativada neste build.")},[]),N=v.useCallback(async g=>{g.preventDefault();try{const b={...E,id:Date.now().toString(),memberCount:1,isMember:!0,category:"Personalizado",tags:[],createdAt:new Date().toISOString().split("T")[0],lastActivity:new Date().toISOString().split("T")[0],isFeatured:!1,rating:0};e(I=>[b,...I]),n(I=>[b.id,...I]),d(!1),C({name:"",description:"",isPrivate:!1,maxMembers:50}),f(I=>I+1),console.log("Grupo criado:",b)}catch(b){console.error("Erro ao criar grupo:",b)}},[E]),[E,C]=v.useState({name:"",description:"",isPrivate:!1,maxMembers:50}),x=t.filter(g=>{const b=g.name.toLowerCase().includes(s.toLowerCase())||g.description.toLowerCase().includes(s.toLowerCase()),I=o==="all"||o==="public"&&!g.isPrivate||o==="private"&&g.isPrivate||o==="member"&&g.isMember||o==="featured"&&g.isFeatured;return b&&I}),w=t.filter(g=>g.isFeatured);return i.jsxs(i.Fragment,{children:[i.jsx(gS,{trigger:h}),i.jsx("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 section-header",children:"Explorar Grupos da Comunidade"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Conecte-se com pessoas que compartilham interesses similares e participe de grupos de apoio"})]}),w.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx(En,{className:"w-6 h-6 text-yellow-500"}),i.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Grupos em Destaque"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(g=>i.jsx(lf,{group:g,onJoin:m,onLeave:y,isUserGroup:g.isMember,isFeatured:!0},g.id))})]}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-8",children:[i.jsx("div",{className:"flex-1",children:i.jsx(zs,{type:"text",placeholder:"Pesquisar grupos...",value:s,onChange:g=>a(g.target.value),leftIcon:yr,className:"w-full"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Todos os Grupos"}),i.jsx("option",{value:"featured",children:"Em Destaque"}),i.jsx("option",{value:"public",children:"Grupos Públicos"}),i.jsx("option",{value:"private",children:"Grupos Privados"}),i.jsx("option",{value:"member",children:"Meus Grupos"})]}),i.jsxs("button",{onClick:()=>d(!0),className:"btn-primary flex items-center gap-2",children:[i.jsx(Ur,{className:"w-5 h-5"}),"Criar Grupo"]})]})]}),r.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 section-header",children:"Meus Grupos"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(g=>{const b=t.find(I=>I.id===g);return b?i.jsx(lf,{group:b,onLeave:y,isUserGroup:!0},b.id):null})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 section-header",children:o==="member"?"Meus Grupos":"Todos os Grupos"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(g=>i.jsx(lf,{group:g,onJoin:m,onLeave:y,isUserGroup:g.isMember},g.id))})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Criar Novo Grupo"}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Grupo"}),i.jsx(zs,{type:"text",value:E.name,onChange:g=>C(b=>({...b,name:g.target.value})),placeholder:"Digite o nome do grupo",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),i.jsx("textarea",{value:E.description,onChange:g=>C(b=>({...b,description:g.target.value})),placeholder:"Descreva o propósito do grupo",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",required:!0})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:E.isPrivate,onChange:g=>C(b=>({...b,isPrivate:g.target.checked})),className:"mr-2"}),"Grupo Privado"]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Máximo de Membros"}),i.jsx(zs,{type:"number",value:E.maxMembers,onChange:g=>C(b=>({...b,maxMembers:parseInt(g.target.value)})),min:"2",max:"1000"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 btn-primary",children:"Criar Grupo"})]})]})]})})]})})]})},lf=({group:t,onJoin:e,onLeave:r,isUserGroup:n,isFeatured:s=!1})=>i.jsx(It,{className:"group hover:shadow-lg transition-all duration-300",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center",children:i.jsx(pt,{className:"w-5 h-5 text-black"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.name}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.isPrivate?i.jsxs(i.Fragment,{children:[i.jsx(ec,{className:"w-4 h-4"}),i.jsx("span",{children:"Privado"})]}):i.jsxs(i.Fragment,{children:[i.jsx(YE,{className:"w-4 h-4"}),i.jsx("span",{children:"Público"})]}),s&&i.jsx(En,{className:"w-4 h-4 text-yellow-500"})]})]})]}),t.isMember&&i.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Membro"})]}),i.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:t.description}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[i.jsxs("span",{children:[t.memberCount,"/",t.maxMembers," membros"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(En,{className:"w-4 h-4 text-yellow-500"}),i.jsx("span",{children:t.rating})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.slice(0,3).map((a,o)=>i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:a},o))}),i.jsx("div",{className:"flex gap-2",children:n?i.jsx("button",{onClick:()=>r(t.id),className:"flex-1 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-colors",children:"Sair do Grupo"}):i.jsx("button",{onClick:()=>e(t.id),className:"flex-1 btn-primary",children:"Entrar no Grupo"})})]})}),WV="modulepreload",GV=function(t){return"/"+t},N1={},Sa=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=GV(c),c in N1)return;N1[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":WV,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Nu=[{id:"1",content:"Hoje foi um dia incrível! Consegui enfrentar uma situação que me causava muita ansiedade. A terapia está realmente fazendo diferença na minha vida. É incrível como pequenos passos podem levar a grandes mudanças! 💪✨",author:"Maria Silva",userId:"user1",avatar:null,createdAt:new Date("2024-01-15T10:00:00"),updatedAt:new Date("2024-01-15T10:00:00"),likes:["user2","user3"],commentCount:2,shares:1,tags:["ansiedade","terapia","progresso"],isAnonymous:!1,visibility:"public",isEdited:!1},{id:"2",content:"Estou me sentindo um pouco perdido ultimamente. Alguém mais já passou por isso? Às vezes parece que estou andando em círculos...",author:"João Santos",userId:"user2",avatar:null,createdAt:new Date("2024-01-15T09:30:00"),updatedAt:new Date("2024-01-15T09:30:00"),likes:["user1"],commentCount:1,shares:0,tags:["reflexão","apoio"],isAnonymous:!1,visibility:"public",isEdited:!1},{id:"3",content:"Dica do dia: respiração 4-7-8. Inspire por 4 segundos, segure por 7, expire por 8. Funciona muito bem para momentos de estresse! 🧘‍♀️",author:"Ana Costa",userId:"user3",avatar:null,createdAt:new Date("2024-01-15T09:00:00"),updatedAt:new Date("2024-01-15T09:00:00"),likes:["user1","user2","user4"],commentCount:0,shares:3,tags:["dica","respiração","estresse"],isAnonymous:!1,visibility:"public",isEdited:!1},{id:"4",content:"Post anônimo para testar funcionalidade",author:"Usuário Anônimo",userId:"user1",avatar:null,createdAt:new Date("2024-01-15T08:30:00"),updatedAt:new Date("2024-01-15T08:30:00"),likes:[],commentCount:0,shares:0,tags:["teste"],isAnonymous:!0,visibility:"anonymous",isEdited:!1}],_1=[{id:"user1",displayName:"Maria Silva",email:"maria@email.com",photoURL:null,role:"cliente",bio:"Em busca de equilíbrio mental e emocional",location:"São Paulo, SP",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-15")},{id:"user2",displayName:"João Santos",email:"joao@email.com",photoURL:null,role:"cliente",bio:"Aprendendo a lidar com a ansiedade",location:"Rio de Janeiro, RJ",createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-15")},{id:"user3",displayName:"Ana Costa",email:"ana@email.com",photoURL:null,role:"cliente",bio:"Psicóloga em formação, apaixonada por ajudar pessoas",location:"Belo Horizonte, MG",createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")}],j1=[{id:"1",postId:"1",authorId:"user2",authorName:"João Santos",authorAvatar:null,content:"Que ótimo que está se sentindo melhor! A terapia realmente faz diferença.",likes:[],createdAt:new Date("2024-01-15T10:05:00")},{id:"2",postId:"1",authorId:"user3",authorName:"Ana Costa",authorAvatar:null,content:"Continue assim! O progresso é gradual mas muito gratificante.",likes:["user1"],createdAt:new Date("2024-01-15T10:10:00")}],E1={async createUserProfile(t,e){try{const r=ye(J,"users",t);return await rt(r,{...e,createdAt:Pe(),updatedAt:Pe()}),{success:!0,userId:t}}catch(r){throw console.error("Erro ao criar perfil:",r),r}},async getUserProfile(t){try{const e=ye(J,"users",t),r=await jt(e);return r.exists()?{id:r.id,...r.data()}:null}catch(e){return console.warn("Firebase não disponível, usando dados mockados:",e),_1.find(n=>n.id===t)||null}},async updateUserProfile(t,e){try{const r=ye(J,"users",t);return await rt(r,{...e,updatedAt:Pe()}),{success:!0}}catch(r){throw console.error("Erro ao atualizar perfil:",r),r}},async updateUserBasicProfile(t,e){try{const r=ye(J,"users",t);return await rt(r,{displayName:e.displayName,username:e.username,bio:e.bio,phone:e.phone,birthDate:e.birthDate,updatedAt:Pe()}),{success:!0}}catch(r){throw console.error("Erro ao atualizar perfil básico:",r),r}},async getUsersByRole(t){try{const e=Ne(J,"users"),r=je(e,Me("role","==",t));return(await Le(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.warn("Firebase não disponível, usando dados mockados:",e),_1.filter(r=>r.role===t)}}},Ns={async createPost(t){try{const e=Ne(J,"posts");return{success:!0,postId:(await Us(e,{...t,createdAt:Pe(),updatedAt:Pe(),likes:[],commentCount:0,shares:0,isEdited:!1})).id}}catch(e){throw console.error("Erro ao criar post:",e),e}},async deletePost(t){try{const e=ye(J,"posts",t),r=await jt(e);if(r.exists()){const n=r.data();await Qr(e);const s=Ne(J,"comments"),a=je(s,Me("postId","==",t)),l=(await Le(a)).docs.map(c=>Qr(c.ref));return await Promise.all(l),!0}return!1}catch(e){throw console.error("Erro ao deletar post:",e),e}},async getPosts(t=20,e=0){try{const r=Ne(J,"posts");let n=je(r,ht("createdAt","desc"),ns(t));return(await Le(n)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.visibility==="public")}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados mockados"),Nu.filter(n=>n.visibility==="public").slice(e,e+t)):(console.warn("Erro ao buscar posts do Firebase, usando dados mockados:",r),Nu.filter(n=>n.visibility==="public").slice(e,e+t))}},async getUserPosts(t,e=50,r=null){try{const n=Ne(J,"posts");let s=je(n,ht("createdAt","desc"),ns(e));return(await Le(s)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>r===t?l.userId===t:l.userId===t&&l.visibility==="public")}catch(n){return n.code==="failed-precondition"||n.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados mockados"),Nu.filter(s=>r===t?s.userId===t:s.userId===t&&s.visibility==="public").slice(0,e)):(console.warn("Erro ao buscar posts do usuário no Firebase, usando dados mockados:",n),Nu.filter(s=>r===t?s.userId===t:s.userId===t&&s.visibility==="public").slice(0,e))}},async togglePostLike(t,e){try{const r=ye(J,"posts",t),n=await jt(r);if(n.exists()){const s=n.data(),a=s.likes||[];if(a.includes(e))await rt(r,{likes:a.filter(l=>l!==e),updatedAt:Pe()});else if(await rt(r,{likes:[...a,e],updatedAt:Pe()}),s.userId!==e)try{await _s.createLikeNotification(t,s.userId,e,"Usuário")}catch(l){console.warn("Erro ao criar notificação de curtida:",l)}return!0}return!1}catch(r){throw console.error("Erro ao curtir post:",r),r}}},cf={async recordMood(t,e){try{const r=Ne(J,"moods");return{success:!0,moodId:(await Us(r,{userId:t,...e,recordedAt:Pe()})).id}}catch(r){throw console.error("Erro ao registrar humor:",r),r}},async getUserMoodHistory(t,e=30){try{const r=Ne(J,"moods"),n=je(r,ht("recordedAt","desc"),ns(e));return(await Le(n)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.userId===t)}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),[]):(console.error("Erro ao buscar histórico de humor:",r),[])}},async getMoodStats(t,e="week"){try{const r=Ne(J,"moods"),n=je(r,ht("recordedAt","desc")),a=(await Le(n)).docs.map(h=>h.data()).filter(h=>h.userId===t),o=new Date;let l=[];if(e==="week"){const h=new Date(o.getTime()-6048e5);l=a.filter(f=>{var m;return((m=f.recordedAt)==null?void 0:m.toDate())>h})}else if(e==="month"){const h=new Date(o.getTime()-2592e6);l=a.filter(f=>{var m;return((m=f.recordedAt)==null?void 0:m.toDate())>h})}const c=l.reduce((h,f)=>h+(f.intensity||0),0),d=l.length>0?c/l.length:0;return{totalEntries:l.length,averageMood:Math.round(d*10)/10,period:e,moods:l}}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados vazios"),{totalEntries:0,averageMood:0,period:e,moods:[]}):(console.error("Erro ao calcular estatísticas de humor:",r),{totalEntries:0,averageMood:0,period:e,moods:[]})}}},_s={async createNotification(t){try{const e=Ne(J,"notifications");return{success:!0,notificationId:(await Us(e,{...t,createdAt:Pe(),read:!1})).id}}catch(e){throw console.error("Erro ao criar notificação:",e),e}},async getUserNotifications(t,e=50){try{const r=Ne(J,"notifications"),n=je(r,ht("createdAt","desc"),ns(e));return(await Le(n)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.recipientId===t)}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),[]):(console.error("Erro ao buscar notificações:",r),[])}},async markNotificationAsRead(t){try{const e=ye(J,"notifications",t);return await rt(e,{read:!0,readAt:Pe()}),!0}catch(e){throw console.error("Erro ao marcar notificação como lida:",e),e}},async markAllNotificationsAsRead(t){try{const e=Ne(J,"notifications"),r=je(e,ht("createdAt","desc")),n=await Le(r),s=Dp(J);return n.docs.filter(o=>{const l=o.data();return l.recipientId===t&&!l.read}).forEach(o=>{s.update(o.ref,{read:!0,readAt:Pe()})}),await s.commit(),!0}catch(e){return e.code==="failed-precondition"||e.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),!0):(console.error("Erro ao marcar todas como lidas:",e),!1)}},async deleteNotification(t){try{const e=ye(J,"notifications",t);return await Qr(e),!0}catch(e){throw console.error("Erro ao deletar notificação:",e),e}},async clearAllNotifications(t){try{const e=Ne(J,"notifications"),r=je(e,ht("createdAt","desc")),n=await Le(r),s=Dp(J);return n.docs.filter(o=>o.data().recipientId===t).forEach(o=>{s.delete(o.ref)}),await s.commit(),!0}catch(e){return e.code==="failed-precondition"||e.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando array vazio"),!0):(console.error("Erro ao limpar notificações:",e),!1)}},async createLikeNotification(t,e,r,n){if(e!==r)try{await this.createNotification({type:"like",title:"Curtida no seu post",message:`${n} curtiu seu post`,recipientId:e,senderId:r,senderName:n,postId:t,actionUrl:`/post/${t}`})}catch(s){console.error("Erro ao criar notificação de curtida:",s)}},async createCommentNotification(t,e,r,n,s){if(e!==r)try{await this.createNotification({type:"comment",title:"Novo comentário",message:`${n} comentou: "${s.substring(0,50)}${s.length>50?"...":""}"`,recipientId:e,senderId:r,senderName:n,postId:t,commentContent:s,actionUrl:`/post/${t}`})}catch(a){console.error("Erro ao criar notificação de comentário:",a)}},async createFollowNotification(t,e,r){try{await this.createNotification({type:"follow",title:"Novo seguidor",message:`${e} começou a te seguir`,recipientId:r,senderId:t,senderName:e,actionUrl:`/user-profile/${t}`})}catch(n){console.error("Erro ao criar notificação de seguidor:",n)}}},Pn={async addComment(t,e){try{const r=Ne(J,"comments"),n=await Us(r,{postId:t,...e,createdAt:Pe(),likes:[],isHidden:!1,isReported:!1,reportedBy:[],reportReasons:[]}),s=ye(J,"posts",t),a=await jt(s);if(a.exists()){const o=a.data();if(await rt(s,{commentCount:Bv(1)}),o.userId!==e.userId)try{await _s.createCommentNotification(t,o.userId,e.userId,"Usuário",e.content)}catch(l){console.warn("Erro ao criar notificação de comentário:",l)}}return{success:!0,commentId:n.id}}catch(r){throw console.error("Erro ao adicionar comentário:",r),r}},async editComment(t,e){try{const r=ye(J,"comments",t);return await rt(r,{content:e,updatedAt:Pe(),isEdited:!0}),!0}catch(r){throw console.error("Erro ao editar comentário:",r),r}},async deleteComment(t){try{const e=ye(J,"comments",t),r=await jt(e);if(r.exists()){const n=r.data();await Qr(e);const s=ye(J,"posts",n.postId);return await rt(s,{commentCount:Bv(-1)}),!0}return!1}catch(e){throw console.error("Erro ao deletar comentário:",e),e}},async toggleCommentVisibility(t){try{const e=ye(J,"comments",t),r=await jt(e);if(r.exists()){const n=r.data().isHidden||!1;return await rt(e,{isHidden:!n,updatedAt:Pe()}),!0}return!1}catch(e){throw console.error("Erro ao alterar visibilidade do comentário:",e),e}},async reportComment(t,e){var r;try{const n=ye(J,"comments",t),s=await jt(n);if(s.exists()){const a=s.data(),o=a.reportedBy||[],l=a.reportReasons||[];return await rt(n,{isReported:!0,reportedBy:[...o,(r=auth.currentUser)==null?void 0:r.uid],reportReasons:[...l,e],updatedAt:Pe()}),!0}return!1}catch(n){throw console.error("Erro ao reportar comentário:",n),n}},async toggleCommentLike(t,e){try{const r=ye(J,"comments",t),n=await jt(r);if(n.exists()){const a=n.data().likes||[];return a.includes(e)?await rt(r,{likes:a.filter(l=>l!==e),updatedAt:Pe()}):await rt(r,{likes:[...a,e],updatedAt:Pe()}),!0}return!1}catch(r){throw console.error("Erro ao curtir comentário:",r),r}},async getPostComments(t,e=50){try{const r=Ne(J,"comments"),n=je(r,ht("createdAt","asc"),ns(e));return(await Le(n)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.postId===t)}catch(r){return r.code==="failed-precondition"||r.code==="unimplemented"?(console.warn("Índice não configurado no Firestore, usando dados mockados"),j1.filter(n=>n.postId===t).slice(0,e)):(console.warn("Erro ao buscar comentários do Firebase, usando dados mockados:",r),j1.filter(n=>n.postId===t).slice(0,e))}}},_u={async createDiaryEntry(t){try{const e=Ne(J,"diaryEntries");return{success:!0,entryId:(await Us(e,{...t,createdAt:Pe(),updatedAt:Pe()})).id}}catch(e){throw console.error("Erro ao criar entrada no diário:",e),e}},async getUserDiaryEntries(t,e=50){try{const r=Ne(J,"diaryEntries");try{const n=je(r,Me("userId","==",t),ht("createdAt","desc"),ns(e));return(await Le(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(n){if(n.code==="failed-precondition"||n.code==="unimplemented"){console.warn("Índice não configurado no Firestore, usando consulta simples");const s=je(r,ht("createdAt","desc"),ns(e*2));return(await Le(s)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.userId===t).slice(0,e)}throw n}}catch(r){return console.error("Erro ao buscar entradas do diário:",r),[]}},async updateDiaryEntry(t,e){try{const r=ye(J,"diaryEntries",t);return await rt(r,{...e,updatedAt:Pe()}),{success:!0}}catch(r){throw console.error("Erro ao atualizar entrada do diário:",r),r}},async deleteDiaryEntry(t){try{const e=ye(J,"diaryEntries",t);return await Qr(e),{success:!0}}catch(e){throw console.error("Erro ao deletar entrada do diário:",e),e}}},S1={async uploadPostImage(t,e){try{const{storage:r}=await Sa(async()=>{const{storage:f}=await Promise.resolve().then(()=>Mp);return{storage:f}},[]),{ref:n,uploadBytes:s,getDownloadURL:a}=await Sa(async()=>{const{ref:f,uploadBytes:m,getDownloadURL:y}=await Promise.resolve().then(()=>Qv);return{ref:f,uploadBytes:m,getDownloadURL:y}},void 0);if(!t||!t.type.startsWith("image/"))throw new Error("Arquivo deve ser uma imagem");if(t.size>5*1024*1024)throw new Error("Imagem deve ter menos de 5MB");const o=Date.now(),l=`posts/${e}/${o}_${t.name}`,c=n(r,l),d=await s(c,t);return{success:!0,url:await a(d.ref),fileName:l,size:t.size,type:t.type}}catch(r){throw console.error("Erro ao fazer upload da imagem:",r),r}},async deletePostImage(t){try{const{storage:e}=await Sa(async()=>{const{storage:a}=await Promise.resolve().then(()=>Mp);return{storage:a}},void 0),{ref:r,deleteObject:n}=await Sa(async()=>{const{ref:a,deleteObject:o}=await Promise.resolve().then(()=>Qv);return{ref:a,deleteObject:o}},void 0),s=r(e,t);return await n(s),{success:!0}}catch(e){throw console.error("Erro ao deletar imagem:",e),e}},validateImageFile(t){const e=[];t.type.startsWith("image/")||e.push("Arquivo deve ser uma imagem"),t.size>5*1024*1024&&e.push("Imagem deve ter menos de 5MB");const r=[".jpg",".jpeg",".png",".gif",".webp"],n="."+t.name.split(".").pop().toLowerCase();return r.includes(n)||e.push("Formato de imagem não suportado. Use: JPG, PNG, GIF ou WebP"),{isValid:e.length===0,errors:e}}},js={convertTimestamp(t){return t&&t.toDate?t.toDate():t},formatDate(t,e={}){const r={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return(t instanceof Date?t:this.convertTimestamp(t)).toLocaleDateString("pt-BR",{...r,...e})},getRelativeTime(t){const e=new Date,r=t instanceof Date?t:this.convertTimestamp(t),n=e-r,s=Math.floor(n/(1e3*60)),a=Math.floor(n/(1e3*60*60)),o=Math.floor(n/(1e3*60*60*24));return s<1?"Agora mesmo":s<60?`${s}m atrás`:a<24?`${a}h atrás`:o<7?`${o}d atrás`:this.formatDate(r,{year:"numeric",month:"short",day:"numeric"})}},KV=()=>{const[t,e]=v.useState({username:"",birthDate:"",phone:"",bio:"",profilePhotoURL:"",bannerPhotoURL:""}),[r,n]=v.useState(!1),[s,a]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(null),[h,f]=v.useState(null),m=gt(),y=v.useRef(),N=v.useRef();v.useEffect(()=>{const g=vt.onAuthStateChanged(async b=>{if(b){a(b);const I=ye(J,"users",b.uid),M=await jt(I);if(M.exists()){const A=M.data();if(l(A),A.username&&A.phone&&A.birthDate){m("/home");return}}}else m("/login")});return()=>g()},[m]);const E=g=>{const{name:b,value:I}=g.target;e({...t,[b]:I})},C=(g,b)=>{const I=g.target.files[0];if(I){if(!I.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem.");return}if(I.size>2*1024*1024){alert("A imagem deve ter no máximo 2MB para upload direto.");return}const M=new FileReader;M.onload=A=>{const _=A.target.result;b==="profile"?(e(S=>({...S,profilePhotoURL:_})),d(_)):(e(S=>({...S,bannerPhotoURL:_})),f(_))},M.readAsDataURL(I)}},x=g=>{g==="profile"?(e(b=>({...b,profilePhotoURL:""})),d(null)):(e(b=>({...b,bannerPhotoURL:""})),f(null))},w=async g=>{if(g.preventDefault(),!t.username||!t.birthDate||!t.phone){alert("Por favor, preencha todos os campos obrigatórios.");return}if(!/^[a-zA-Z0-9_]{3,20}$/.test(t.username)){alert("O username deve ter entre 3 e 20 caracteres e conter apenas letras, números e underscore (_).");return}n(!0);try{const I=ye(J,"users",s.uid),M={username:t.username.toLowerCase(),birthDate:t.birthDate,phone:t.phone,bio:t.bio||"",profilePhotoURL:t.profilePhotoURL||(o==null?void 0:o.profilePhotoURL)||null,bannerPhotoURL:t.bannerPhotoURL||(o==null?void 0:o.bannerPhotoURL)||null,updatedAt:Pe(),createdAt:(o==null?void 0:o.createdAt)||Pe(),email:s.email,displayName:s.displayName||s.email,role:"cliente",isProfileComplete:!0};console.log("Salvando dados do usuário:",M),await Jl(I,M,{merge:!0});try{await _s.createNotification({type:"welcome",title:"Bem-vindo ao Sereno! 🎉",message:"Seu perfil foi criado com sucesso. Comece a explorar a plataforma e conectar-se com outros usuários.",recipientId:s.uid,senderId:"system",senderName:"Sereno",actionUrl:"/home"})}catch(A){console.warn("Erro ao criar notificação de boas-vindas:",A)}console.log("Perfil criado com sucesso!"),m("/connected")}catch(I){console.error("Erro ao salvar dados:",I),alert(`Erro ao salvar os dados: ${I.message}`)}finally{n(!1)}};return s?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx(sx,{}),i.jsxs("div",{className:"relative w-full max-w-2xl z-10",children:[i.jsx("button",{type:"button",onClick:()=>{vt.signOut(),m("/login")},className:"absolute -top-2 -left-2 p-2 text-white/80 hover:text-white transition-colors","aria-label":"Sair e voltar para login",children:i.jsx(li,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center backdrop-blur-md",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1",loading:"eager"})})}),i.jsx("h1",{className:"text-2xl font-semibold text-white mb-1",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Complete seu perfil"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-xl font-light text-white mb-2",children:["Bem-vindo, ",s.displayName||s.email,"!"]}),i.jsx("p",{className:"text-white/60 text-sm",children:"Para continuar, precisamos de algumas informações adicionais"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Fotos do Perfil (Opcional)"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-light text-white/80",children:"Foto do Banner"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-full h-32 bg-white/10 border-2 border-dashed border-white/20 rounded-lg flex items-center justify-center overflow-hidden",children:h?i.jsx("img",{src:h,alt:"Preview do banner",className:"w-full h-full object-cover"}):i.jsxs("div",{className:"text-center",children:[i.jsx(nx,{className:"w-8 h-8 text-white/40 mx-auto mb-2"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Clique para selecionar uma imagem"})]})}),i.jsx("button",{type:"button",onClick:()=>{var g;return(g=N.current)==null?void 0:g.click()},className:"absolute inset-0 w-full h-full bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx(eS,{className:"w-6 h-6 text-white"})}),h&&i.jsx("button",{type:"button",onClick:()=>x("banner"),className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white transition-colors",children:i.jsx(Zt,{className:"w-4 h-4"})}),i.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:g=>C(g,"banner"),className:"hidden"})]}),i.jsx("p",{className:"text-xs text-white/50",children:"Tamanho máximo: 2MB. Formatos: JPG, PNG, GIF"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-light text-white/80",children:"Foto de Perfil"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-24 h-24 bg-white/10 border-2 border-dashed border-white/20 rounded-full flex items-center justify-center overflow-hidden",children:c?i.jsx("img",{src:c,alt:"Preview da foto de perfil",className:"w-full h-full object-cover"}):i.jsx(He,{className:"w-12 h-12 text-white/40"})}),i.jsx("button",{type:"button",onClick:()=>{var g;return(g=y.current)==null?void 0:g.click()},className:"absolute inset-0 w-full h-full bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center rounded-full",children:i.jsx(Wd,{className:"w-6 h-6 text-white"})}),c&&i.jsx("button",{type:"button",onClick:()=>x("profile"),className:"absolute -top-1 -right-1 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white transition-colors",children:i.jsx(Zt,{className:"w-3 h-3"})}),i.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:g=>C(g,"profile"),className:"hidden"})]}),i.jsx("div",{className:"flex-1",children:i.jsx("p",{className:"text-white/60 text-sm",children:"Selecione uma foto para seu perfil"})})]}),i.jsx("p",{className:"text-xs text-white/50",children:"Tamanho máximo: 2MB. Formatos: JPG, PNG, GIF"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Informações Básicas"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"username",className:"block text-xs font-light text-white/80",children:"Username *"}),i.jsxs("div",{className:"relative",children:[i.jsx(tx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",id:"username",name:"username",value:t.username,onChange:E,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"seu_username",required:!0,minLength:3,maxLength:20,pattern:"[a-zA-Z0-9_]{3,20}"})]}),i.jsx("p",{className:"text-xs text-white/50 mt-1",children:"3-20 caracteres, apenas letras, números e _"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"birthDate",className:"block text-xs font-light text-white/80",children:"Data de Nascimento *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"date",id:"birthDate",name:"birthDate",value:t.birthDate,onChange:E,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"phone",className:"block text-xs font-light text-white/80",children:"Telefone *"}),i.jsxs("div",{className:"relative",children:[i.jsx(on,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:E,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"(11) 99999-9999",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"bio",className:"block text-xs font-light text-white/80",children:"Biografia"}),i.jsxs("div",{className:"relative",children:[i.jsx(QE,{className:"absolute left-3 top-3 w-4 h-4 text-white/50"}),i.jsx("textarea",{id:"bio",name:"bio",value:t.bio,onChange:E,rows:3,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm resize-none",placeholder:"Conte um pouco sobre você...",maxLength:200})]}),i.jsxs("p",{className:"text-xs text-white/50 mt-1",children:[t.bio.length,"/200 caracteres"]})]})]}),i.jsx("button",{type:"submit",disabled:r,className:"w-full py-2.5 px-4 bg-white text-black hover:bg-white/90 disabled:bg-white/60 font-medium rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 disabled:cursor-not-allowed shadow-lg text-sm",children:r?"Salvando...":"Completar Perfil"})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-white/70 text-xs",children:"Estes dados são necessários para personalizar sua experiência"})})]}),i.jsx("div",{className:"mt-6 text-center text-white/50 text-xs",children:i.jsxs("p",{children:["Conecte-se, Entenda-se, ",i.jsx("span",{className:"text-white",children:"Evolua."})]})})]})]}):i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Carregando..."})})},QV=()=>{const t=gt(),{markProfileAsComplete:e}=ze(),[r,n]=v.useState(2);v.useEffect(()=>{(async()=>{try{await e(),console.log("Perfil marcado como completo com sucesso")}catch(c){console.error("Erro ao marcar perfil como completo:",c)}})();const o=setTimeout(()=>{console.log("Redirecionando para /home..."),t("/home")},2e3),l=setInterval(()=>{n(c=>c<=1?(clearInterval(l),0):c-1)},1e3);return()=>{clearTimeout(o),clearInterval(l)}},[t,e]);const s=()=>{console.log("Redirecionamento manual para /home..."),t("/home")};return i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx(sx,{}),i.jsx("div",{className:"relative w-full max-w-lg z-10 text-center",children:i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center",children:i.jsx(tn,{className:"w-12 h-12 text-green-400"})})}),i.jsx("h1",{className:"text-3xl font-light mb-3 text-white",children:"Perfil Completo!"}),i.jsx("p",{className:"text-white/70 text-lg mb-6",children:"Seu perfil foi criado com sucesso. Bem-vindo ao Sereno!"}),i.jsxs("div",{className:"space-y-3 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-white/60",children:[i.jsx(He,{className:"w-4 h-4"}),i.jsx("span",{children:"Perfil personalizado configurado"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-white/60",children:[i.jsx(Ki,{className:"w-4 h-4"}),i.jsx("span",{children:"Pronto para explorar a plataforma"})]})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("p",{className:"text-white/50 text-sm mb-2",children:"Redirecionando automaticamente em:"}),i.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[r," segundos"]})]}),i.jsx("button",{onClick:s,className:"w-full py-3 px-6 bg-white/10 border border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg",children:"Ir para Home Agora (Teste)"})]})})]})},YV=()=>{const{user:t}=ze(),[e,r]=v.useState(""),[n,s]=v.useState(""),[a,o]=v.useState([]),[l,c]=v.useState(!1),[d,h]=v.useState(null),[f,m]=v.useState(""),y=["Como você se sentiu hoje?","Qual foi o melhor momento do seu dia?","O que você gostaria de melhorar amanhã?","Por que você está grato hoje?","Que desafio você enfrentou hoje?"];v.useEffect(()=>{t&&N()},[t]);const N=async()=>{if(t)try{c(!0);const I=await _u.getUserDiaryEntries(t.uid,20);o(I)}catch(I){console.error("Erro ao carregar entradas do diário:",I)}finally{c(!1)}},E=async()=>{if(!(!e.trim()||!n||!t))try{c(!0);const I={userId:t.uid,prompt:n,content:e.trim(),userName:t.displayName||"Usuário",userEmail:t.email};await _u.createDiaryEntry(I),await N(),r(""),s("");const M=document.querySelector("[data-save-entry]");M&&(M.innerHTML='<Check className="w-4 h-4" /><span>Salvo!</span>',setTimeout(()=>{M.innerHTML='<Send className="w-4 h-4" /><span>Salvar Reflexão</span>'},2e3))}catch(I){console.error("Erro ao salvar entrada:",I),alert("Erro ao salvar reflexão. Tente novamente.")}finally{c(!1)}},C=async I=>{if(f.trim())try{c(!0),await _u.updateDiaryEntry(I,{content:f.trim(),isEdited:!0}),await N(),h(null),m("")}catch(M){console.error("Erro ao editar entrada:",M),alert("Erro ao editar reflexão. Tente novamente.")}finally{c(!1)}},x=async I=>{if(confirm("Tem certeza que deseja excluir esta reflexão?"))try{c(!0),await _u.deleteDiaryEntry(I),await N()}catch(M){console.error("Erro ao excluir entrada:",M),alert("Erro ao excluir reflexão. Tente novamente.")}finally{c(!1)}},w=I=>{h(I.id),m(I.content)},g=()=>{h(null),m("")},b=I=>I?js.formatDate(I,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Data não disponível";return t?i.jsxs("div",{className:"space-y-6 animation-initial animate-fade-in-up animation-delay-100",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(Oa,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Diário Evolutivo"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Escolha uma reflexão para começar:"}),i.jsx("div",{className:"space-y-2",children:y.map((I,M)=>i.jsx("button",{onClick:()=>s(I),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${n===I?"bg-white/10 border border-white/20 text-white":"bg-gray-800/30 hover:bg-gray-700/30 text-gray-300"}`,children:i.jsx("span",{className:"text-sm",children:I})},M))})]}),i.jsxs("div",{className:"space-y-4",children:[n&&i.jsx("div",{className:"bg-white/10 border border-white/20 rounded-lg p-3",children:i.jsx("p",{className:"text-gray-300 text-sm font-medium",children:n})}),i.jsx("textarea",{value:e,onChange:I=>r(I.target.value),placeholder:"Escreva seus pensamentos e sentimentos aqui...",className:"w-full bg-gray-800/50 border border-gray-600/50 rounded-xl p-4 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-all duration-200 min-h-[120px]"}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:E,disabled:!e.trim()||!n||l,"data-save-entry":!0,className:"bg-gradient-to-r from-white to-gray-200 text-black px-6 py-2 rounded-lg font-medium hover:from-gray-200 hover:to-gray-300 transform hover:scale-105 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Ec,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Reflexão"})]})})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Reflexões Recentes"}),l?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),i.jsx("p",{className:"text-white/50 mt-2",children:"Carregando..."})]}):a.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Oa,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/70 mb-2",children:"Nenhuma reflexão ainda"}),i.jsx("p",{className:"text-white/50",children:"Comece escrevendo sua primeira reflexão acima"})]}):i.jsx("div",{className:"space-y-3",children:a.map(I=>i.jsx("div",{className:"bg-gray-800/30 rounded-lg p-4",children:d===I.id?i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"bg-white/10 border border-white/20 rounded-lg p-3",children:i.jsx("p",{className:"text-gray-300 text-sm font-medium",children:I.prompt})}),i.jsx("textarea",{value:f,onChange:M=>m(M.target.value),className:"w-full bg-gray-800/50 border border-gray-600/50 rounded-lg p-3 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-all duration-200 min-h-[100px]"}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:g,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors duration-200",children:i.jsx(Zt,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>C(I.id),disabled:!f.trim()||l,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Zs,{className:"w-4 h-4"})})]})]}):i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white text-sm mb-2 font-medium",children:I.prompt}),i.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:I.content}),i.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[i.jsx("p",{className:"text-gray-500 text-xs",children:b(I.createdAt)}),I.isEdited&&i.jsx("span",{className:"text-gray-500 text-xs bg-gray-700/50 px-2 py-1 rounded",children:"Editado"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>w(I),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200",title:"Editar",children:i.jsx(Wh,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>x(I.id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-all duration-200",title:"Excluir",children:i.jsx(Qt,{className:"w-4 h-4"})})]})]})})},I.id))})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Oa,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/70 mb-2",children:"Faça login para usar o diário"}),i.jsx("p",{className:"text-white/50",children:"Entre na sua conta para começar a escrever suas reflexões"})]})};function XV(){return i.jsx(YV,{})}const JV=()=>{var b;const t=gt(),[e,r]=v.useState([]),[n,s]=v.useState([]),[a,o]=v.useState(""),[l,c]=v.useState("all"),[d,h]=v.useState("popular"),[f,m]=v.useState(!0),[y,N]=v.useState([]),E=[{id:1,name:"Ansiedade ",description:"Um espaço seguro para compartilhar experiências sobre ansiedade e encontrar apoio mútuo. Dicas, técnicas de respiração e muito mais.",icon:"🧘",memberCount:1250,category:"mental-health",isPrivate:!1,createdAt:new Date(2023,5,15),tags:["ansiedade","bem-estar","respiração","mindfulness"],lastActivity:new Date(Date.now()-2*60*60*1e3),moderators:["Dr. Ana Silva","Psic. Carlos Santos"],rules:["Seja respeitoso","Não dê conselhos médicos","Compartilhe experiências pessoais"]},{id:2,name:"Apoio Emocional",description:"Comunidade de apoio para pessoas que lidam com depressão. Aqui você não está sozinho(a).",icon:"🌱",memberCount:980,category:"mental-health",isPrivate:!1,createdAt:new Date(2023,4,10),tags:["depressão","apoio","suporte","recovery"],lastActivity:new Date(Date.now()-1*60*60*1e3),moderators:["Dra. Maria Costa"],rules:["Ambiente seguro","Sem julgamentos","Apoio mútuo"]},{id:3,name:"Meditação Diária",description:"Pratique meditação em grupo e compartilhe suas experiências de mindfulness.",icon:"🕯️",memberCount:750,category:"wellness",isPrivate:!1,createdAt:new Date(2023,3,20),tags:["meditação","mindfulness","paz","relaxamento"],lastActivity:new Date(Date.now()-3*60*60*1e3),moderators:["Mestre João"],rules:["Prática diária","Compartilhe experiências","Respeite o silêncio"]},{id:4,name:"Relacionamentos Saudáveis",description:"Discussões sobre relacionamentos, comunicação e desenvolvimento pessoal.",icon:"💝",memberCount:650,category:"relationships",isPrivate:!1,createdAt:new Date(2023,6,5),tags:["relacionamentos","comunicação","amor","família"],lastActivity:new Date(Date.now()-30*60*1e3),moderators:["Terapeuta Ana"],rules:["Respeito mútuo","Sem ataques pessoais","Compartilhe com responsabilidade"]},{id:5,name:"Autoestima e Confiança",description:"Construindo amor próprio e confiança juntos. Exercícios práticos e apoio.",icon:"⭐",memberCount:820,category:"self-improvement",isPrivate:!1,createdAt:new Date(2023,2,12),tags:["autoestima","confiança","amor próprio","crescimento"],lastActivity:new Date(Date.now()-45*60*1e3),moderators:["Coach Laura"],rules:["Positividade","Sem comparações","Celebre conquistas"]},{id:6,name:"Pais e Filhos",description:"Comunidade para pais compartilharem experiências na criação dos filhos.",icon:"👨‍👩‍👧‍👦",memberCount:1100,category:"family",isPrivate:!1,createdAt:new Date(2023,1,8),tags:["paternidade","filhos","educação","família"],lastActivity:new Date(Date.now()-20*60*1e3),moderators:["Psic. Infantil Maria"],rules:["Experiências construtivas","Sem julgamentos","Apoio parental"]},{id:7,name:"Carreira e Burnout",description:"Discussões sobre vida profissional, estresse no trabalho e equilíbrio.",icon:"💼",memberCount:890,category:"career",isPrivate:!1,createdAt:new Date(2023,7,18),tags:["carreira","burnout","trabalho","estresse"],lastActivity:new Date(Date.now()-4*60*60*1e3),moderators:["Coach Pedro"],rules:["Confidencialidade","Apoio profissional","Sem spam"]},{id:8,name:"Grupo VIP - Terapia",description:"Grupo privado para discussões mais profundas sobre terapia e crescimento.",icon:"🔒",memberCount:45,category:"therapy",isPrivate:!0,createdAt:new Date(2023,0,25),tags:["terapia","privado","crescimento","suporte"],lastActivity:new Date(Date.now()-1*60*60*1e3),moderators:["Dr. Ricardo"],rules:["Máxima confidencialidade","Aprovação necessária","Compromisso sério"]}],C=[{id:"all",name:"Todas",icon:YE},{id:"mental-health",name:"Saúde Mental",icon:"🧠"},{id:"wellness",name:"Bem-estar",icon:"🌿"},{id:"relationships",name:"Relacionamentos",icon:"💕"},{id:"self-improvement",name:"Desenvolvimento",icon:"📈"},{id:"family",name:"Família",icon:"👨‍👩‍👧‍👦"},{id:"career",name:"Carreira",icon:"💼"},{id:"therapy",name:"Terapia",icon:"🔒"}];v.useEffect(()=>{setTimeout(()=>{r(E),s(E),m(!1)},1e3)},[]),v.useEffect(()=>{let I=e;switch(l!=="all"&&(I=I.filter(M=>M.category===l)),a&&(I=I.filter(M=>M.name.toLowerCase().includes(a.toLowerCase())||M.description.toLowerCase().includes(a.toLowerCase())||M.tags.some(A=>A.toLowerCase().includes(a.toLowerCase())))),d){case"popular":I.sort((M,A)=>A.memberCount-M.memberCount);break;case"recent":I.sort((M,A)=>A.lastActivity-M.lastActivity);break;case"alphabetical":I.sort((M,A)=>M.name.localeCompare(A.name));break}s(I)},[e,l,a,d]);const x=()=>{console.warn("Entrada em comunidades desativada neste build.")},w=()=>{console.warn("Saída de comunidades desativada neste build.")},g=I=>{const A=Math.floor((new Date-I)/(1e3*60));return A<60?`${A}m atrás`:A<1440?`${Math.floor(A/60)}h atrás`:`${Math.floor(A/1440)}d atrás`};return f?i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando comunidades..."})]})}):i.jsxs("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg transition-colors",children:i.jsx(li,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Explorar Comunidades"}),i.jsx("p",{className:"text-white/70",children:"Encontre grupos que combinam com seus interesses"})]})]})}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar comunidades, tags, temas...",value:a,onChange:I=>o(I.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(vL,{className:"w-5 h-5 text-white/70"}),i.jsxs("select",{value:d,onChange:I=>h(I.target.value),className:"bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"popular",children:"Mais Populares"}),i.jsx("option",{value:"recent",children:"Recentes"}),i.jsx("option",{value:"alphabetical",children:"A-Z"})]})]})})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:C.map(I=>i.jsxs("button",{onClick:()=>c(I.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l===I.id?"bg-blue-600 text-white":"bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"}`,children:[i.jsx("span",{className:"mr-2",children:typeof I.icon=="string"?I.icon:"🌐"}),I.name]},I.id))})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-white",children:[n.length," comunidades encontradas"]}),i.jsxs("p",{className:"text-white/60 text-sm",children:[l!=="all"&&`Categoria: ${(b=C.find(I=>I.id===l))==null?void 0:b.name}`,a&&` • Busca: "${a}"`]})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(I=>{const M=y.includes(I.id);return i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 hover:bg-white/15 transition-all duration-200",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center text-2xl",children:I.icon}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-bold text-white text-lg",children:I.name}),I.isPrivate&&i.jsx(ec,{className:"w-4 h-4 text-yellow-400"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/60",children:[i.jsx(pt,{className:"w-4 h-4"}),i.jsxs("span",{children:[I.memberCount.toLocaleString()," membros"]})]})]})]}),i.jsx("button",{onClick:()=>M?w(I.id):x(I.id),className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 cursor-pointer bg-white hover:bg-gray-100",title:M?"Sair da comunidade":"Entrar na comunidade",children:M?i.jsx(Zs,{className:"w-5 h-5 text-black"}):i.jsx(Ur,{className:"w-5 h-5 text-black"})})]}),i.jsx("p",{className:"text-white/80 text-sm leading-relaxed mb-4 line-clamp-3",children:I.description}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[I.tags.slice(0,3).map((A,_)=>i.jsxs("span",{className:"px-2 py-1 bg-white/10 rounded-full text-xs text-white/70 border border-white/20",children:["#",A]},_)),I.tags.length>3&&i.jsxs("span",{className:"px-2 py-1 bg-white/5 rounded-full text-xs text-white/50",children:["+",I.tags.length-3]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-white/50",children:[i.jsx(Lt,{className:"w-3 h-3"}),i.jsx("span",{children:g(I.lastActivity)})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-white/50",children:[i.jsx(En,{className:"w-3 h-3"}),i.jsx("span",{children:"Moderado"})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[i.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Moderadores:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:I.moderators.map((A,_)=>i.jsx("span",{className:"text-xs text-white bg-white/10 px-2 py-1 rounded",children:A},_))})]})]},I.id)})}),n.length===0&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),i.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"Nenhuma comunidade encontrada"}),i.jsx("p",{className:"text-white/70 mb-6",children:"Tente ajustar seus filtros ou termo de busca"}),i.jsx("button",{onClick:()=>{o(""),c("all")},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Limpar Filtros"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Não encontrou o que procura?"}),i.jsx("p",{className:"text-white/70 mb-4",children:"Sugira uma nova comunidade ou entre em contato conosco"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx("button",{className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Sugerir Comunidade"}),i.jsx("button",{className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-lg font-medium transition-colors",children:"Entrar em Contato"})]})]})]})},Gh=()=>{const[t,e]=v.useState([]),[r,n]=v.useState(!0),[s,a]=v.useState(null),[o,l]=v.useState(!0),{user:c}=ze(),d=v.useCallback(async()=>{try{n(!0),a(null);const x=await Ns.getPosts(20),w=x.map(g=>({...g,createdAt:js.convertTimestamp(g.createdAt),updatedAt:g.updatedAt?js.convertTimestamp(g.updatedAt):void 0}));e(w),l(x.length===20)}catch(x){a(x instanceof Error?x.message:"Erro ao carregar posts"),console.error("Erro ao carregar posts:",x)}finally{n(!1)}},[]),h=v.useCallback(async()=>{if(!(r||!o))try{n(!0);const x=await Ns.getPosts(20,t.length);if(x.length===0){l(!1);return}const w=x.map(g=>({...g,createdAt:js.convertTimestamp(g.createdAt),updatedAt:g.updatedAt?js.convertTimestamp(g.updatedAt):void 0}));e(g=>[...g,...w]),l(x.length===20)}catch(x){a(x instanceof Error?x.message:"Erro ao carregar mais posts"),console.error("Erro ao carregar mais posts:",x)}finally{n(!1)}},[r,o,t.length]),f=v.useCallback(async x=>{if(!c)throw new Error("Usuário não autenticado");try{const w=await Ns.createPost(x);if(w.success){const g={id:w.postId,...x,isAnonymous:!1,createdAt:new Date,likes:[],commentCount:0,shares:0,isEdited:!1};return e(b=>[g,...b]),!0}return!1}catch(w){throw console.error("Erro ao criar post:",w),w}},[c]),m=v.useCallback(async x=>{if(!c)throw new Error("Usuário não autenticado");try{return await Ns.deletePost(x)?(e(g=>g.filter(b=>b.id!==x)),!0):!1}catch(w){throw console.error("Erro ao deletar post:",w),w}},[c]),y=v.useCallback(async x=>{if(!c)return!1;try{const w=await Ns.togglePostLike(x,c.uid);return w&&e(g=>g.map(b=>{if(b.id===x){const M=b.likes.includes(c.uid)?b.likes.filter(A=>A!==c.uid):[...b.likes,c.uid];return{...b,likes:M}}return b})),w}catch(w){return console.error("Erro ao curtir post:",w),!1}},[c]),N=v.useCallback(x=>{if(!c)return!1;const w=t.find(g=>g.id===x);return w?w.likes.includes(c.uid):!1},[t,c]),E=v.useCallback(async(x,w)=>{if(!c)throw new Error("Usuário não autenticado");try{const g={authorId:c.uid,authorName:c.displayName||c.email||"Usuário",authorAvatar:c.photoURL,content:w.trim()},b=await Pn.addComment(x,g);return b.success?(e(I=>I.map(M=>M.id===x?{...M,commentCount:M.commentCount+1}:M)),b.commentId):null}catch(g){throw console.error("Erro ao adicionar comentário:",g),g}},[c]),C=v.useCallback(async x=>{try{return(await Pn.getPostComments(x)).map(g=>({...g,createdAt:js.convertTimestamp(g.createdAt)}))}catch(w){throw console.error("Erro ao buscar comentários:",w),w}},[]);return v.useEffect(()=>{d()},[d]),{posts:t,loading:r,error:s,hasMore:o,loadMorePosts:h,createPost:f,deletePost:m,togglePostLike:y,isPostLiked:N,addComment:E,getPostComments:C,refreshPosts:d}},xS=({onPostCreated:t,onCancel:e,isModal:r=!1})=>{const{user:n}=ze(),{createPost:s}=Gh(),[a,o]=v.useState(""),[l,c]=v.useState(""),[d,h]=v.useState("public"),[f,m]=v.useState(!1),[y,N]=v.useState(""),[E,C]=v.useState(null),[x,w]=v.useState(null),[g,b]=v.useState(!1),I=v.useRef(null),M=P=>{const $=P.target.files[0];if(!$)return;const ae=S1.validateImageFile($);if(!ae.isValid){N(ae.errors.join(", "));return}const oe=new FileReader;oe.onload=F=>{w(F.target.result),C($),N("")},oe.readAsDataURL($)},A=()=>{C(null),w(null),I.current&&(I.current.value="")},_=async()=>{if(!E)return null;b(!0);try{return await S1.uploadPostImage(E,n.uid)}catch(P){return N(`Erro ao fazer upload da imagem: ${P.message}`),null}finally{b(!1)}},S=async P=>{if(P.preventDefault(),!a.trim()){N("Por favor, escreva algo para postar.");return}m(!0),N("");try{let $=null;if(E&&($=await _(),!$)){m(!1);return}const ae={content:a.trim(),tags:l.trim()?l.trim().split(",").map(F=>F.trim().replace("#","")):[],visibility:d,userId:n.uid,author:n.displayName||n.email||"Usuário",avatar:n.photoURL,image:$?{url:$.url,fileName:$.fileName,size:$.size,type:$.type}:null};await s(ae)&&(o(""),c(""),h("public"),C(null),w(null),I.current&&(I.current.value=""),t&&t(ae))}catch($){N("Erro ao criar post. Tente novamente."),console.error("Erro ao criar post:",$)}finally{m(!1)}},k=()=>{e&&e()},T=P=>{h(P)},D=()=>{switch(d){case"public":return"Todos podem ver este post";case"private":return"Apenas você pode ver este post";default:return"Todos podem ver este post"}};return i.jsxs("div",{className:`${r?"":"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6"}`,children:[!r&&i.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Compartilhe algo..."}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("textarea",{value:a,onChange:P=>o(P.target.value),placeholder:"O que você gostaria de compartilhar hoje?",className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:4,maxLength:500}),i.jsx("div",{className:"flex justify-between items-center mt-2",children:i.jsxs("span",{className:"text-xs text-white/50",children:[a.length,"/500 caracteres"]})})]}),x&&i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:x,alt:"Preview da imagem",className:"w-full max-h-64 object-cover rounded-lg border border-white/20"}),i.jsx("button",{type:"button",onClick:A,className:"absolute top-2 right-2 p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors duration-200","aria-label":"Remover imagem",children:i.jsx(Zt,{className:"w-4 h-4"})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"relative",children:[i.jsx(XE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",value:l,onChange:P=>c(P.target.value),placeholder:"Adicione tags (separadas por vírgula)",className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30"})]}),i.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Ex: ansiedade, terapia, bem-estar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Visibilidade do Post"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"public",label:"Público",icon:i.jsx(Gi,{className:"w-4 h-4"})},{value:"private",label:"Privado",icon:i.jsx(Zl,{className:"w-4 h-4"})}].map(P=>i.jsxs("button",{type:"button",onClick:()=>T(P.value),className:`p-3 rounded-lg border transition-all duration-200 flex flex-col items-center space-y-2 ${d===P.value?"border-white/50 bg-white/20 text-white":"border-white/20 bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"}`,children:[P.icon,i.jsx("span",{className:"text-xs font-medium",children:P.label})]},P.value))}),i.jsx("p",{className:"text-xs text-white/60",children:D()})]}),y&&i.jsx("div",{className:"text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-2",children:y}),i.jsxs("div",{className:"flex items-center justify-between pt-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{type:"button",onClick:()=>{var P;return(P=I.current)==null?void 0:P.click()},className:`p-2 rounded-full transition-all duration-200 ${E?"text-green-400 hover:text-green-300 hover:bg-green-400/10":"text-white/50 hover:text-white hover:bg-white/10"}`,disabled:f||g,title:"Adicionar imagem",children:g?i.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):E?i.jsx(nx,{className:"w-5 h-5"}):i.jsx(eS,{className:"w-5 h-5"})}),i.jsx("input",{ref:I,type:"file",accept:"image/*",className:"hidden",onChange:M,disabled:f||g}),E&&i.jsx("button",{type:"button",onClick:A,className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-400/10 rounded-full transition-all duration-200",disabled:f||g,title:"Remover imagem",children:i.jsx(Qt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[r&&e&&i.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",disabled:f||g,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:f||g||!a.trim(),className:"px-6 py-2 bg-white text-black rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:bg-white/30 disabled:scale-100 disabled:cursor-not-allowed flex items-center space-x-2",children:f||g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),i.jsx("span",{children:g?"Enviando imagem...":"Postando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ec,{className:"w-4 h-4"}),i.jsx("span",{children:"Postar"})]})})]})]})]})]})},ZV=t=>{let e=null,r=null;try{const{useUserPosts:s}=require("../contexts/UserPostsContext");r=s(),e=r==null?void 0:r.addUserPost}catch{console.log("UserPostsContext não disponível, sincronização desabilitada")}const n=s=>{if(e){const a={id:Date.now().toString(),...s,createdAt:new Date,likes:[],commentCount:0,shares:0,isEdited:!1};e(a)}t.onPostCreated&&t.onPostCreated(s)};return i.jsx(xS,{...t,onPostCreated:n})},eF=t=>{const[e,r]=v.useState([]),[n,s]=v.useState(!0),[a,o]=v.useState(null),[l,c]=v.useState(!0),{user:d}=ze(),h=v.useCallback(async()=>{if(t)try{s(!0),o(null);const w=await Pn.getPostComments(t,50),g=w.map(b=>({...b,createdAt:js.convertTimestamp(b.createdAt),updatedAt:b.updatedAt?js.convertTimestamp(b.updatedAt):void 0}));r(g),c(w.length===50)}catch(w){o(w instanceof Error?w.message:"Erro ao carregar comentários"),console.error("Erro ao carregar comentários:",w)}finally{s(!1)}},[t]),f=v.useCallback(async(w,g=!1)=>{if(!d||!t)throw new Error("Usuário não autenticado ou post não especificado");try{const b={authorId:d.uid,authorName:g?"Usuário Anônimo":d.displayName||d.email||"Usuário",authorAvatar:g?null:d.photoURL,content:w.trim(),isAnonymous:g},I=await Pn.addComment(t,b);if(I.success){const M={id:I.commentId,postId:t,...b,likes:[],createdAt:new Date,isHidden:!1,isReported:!1};return r(A=>[M,...A]),I.commentId}return null}catch(b){throw console.error("Erro ao adicionar comentário:",b),b}},[d,t]),m=v.useCallback(async(w,g)=>{if(!d)throw new Error("Usuário não autenticado");try{return await Pn.editComment(w,g)?(r(I=>I.map(M=>M.id===w?{...M,content:g,isEdited:!0,updatedAt:new Date}:M)),!0):!1}catch(b){throw console.error("Erro ao editar comentário:",b),b}},[d]),y=v.useCallback(async w=>{if(!d)throw new Error("Usuário não autenticado");try{return await Pn.deleteComment(w)?(r(b=>b.filter(I=>I.id!==w)),!0):!1}catch(g){throw console.error("Erro ao deletar comentário:",g),g}},[d]),N=v.useCallback(async w=>{if(!d)throw new Error("Usuário não autenticado");try{return await Pn.toggleCommentVisibility(w)?(r(b=>b.map(I=>I.id===w?{...I,isHidden:!I.isHidden}:I)),!0):!1}catch(g){throw console.error("Erro ao ocultar comentário:",g),g}},[d]),E=v.useCallback(async(w,g)=>{if(!d)throw new Error("Usuário não autenticado");try{return await Pn.reportComment(w,g)?(r(I=>I.map(M=>M.id===w?{...M,isReported:!0,reportedBy:[...M.reportedBy||[],d.uid],reportReasons:[...M.reportReasons||[],g]}:M)),!0):!1}catch(b){throw console.error("Erro ao reportar comentário:",b),b}},[d]),C=v.useCallback(async w=>{if(!d)throw new Error("Usuário não autenticado");try{return await Pn.toggleCommentLike(w,d.uid)?(r(b=>b.map(I=>I.id===w?I.likes.includes(d.uid)?{...I,likes:I.likes.filter(A=>A!==d.uid)}:{...I,likes:[...I.likes,d.uid]}:I)),!0):!1}catch(g){throw console.error("Erro ao curtir comentário:",g),g}},[d]),x=v.useCallback(w=>{if(!d)return!1;const g=e.find(b=>b.id===w);return g?g.likes.includes(d.uid):!1},[d,e]);return v.useEffect(()=>{h()},[h]),{comments:e,loading:n,error:a,hasMore:l,loadMoreComments:h,addComment:f,editComment:m,deleteComment:y,hideComment:N,reportComment:E,toggleCommentLike:C,isCommentLiked:x,refreshComments:h}},tF=({postId:t})=>{const[e,r]=v.useState(""),[n,s]=v.useState(!1),[a,o]=v.useState(null),[l,c]=v.useState(null),[d,h]=v.useState(null),[f,m]=v.useState(""),[y,N]=v.useState(null),[E,C]=v.useState(""),x=v.useRef(null),{user:w}=ze(),{comments:g,loading:b,error:I,addComment:M,editComment:A,deleteComment:_,toggleCommentLike:S,isCommentLiked:k,hideComment:T,reportComment:D}=eF(t),P=async H=>{if(H.preventDefault(),!e.trim())return;await M(e,n)&&(r(""),s(!1))},$=async H=>{if(!f.trim())return;await A(H,f)&&(h(null),m(""))},ae=async H=>{window.confirm("Tem certeza que deseja deletar este comentário?")&&await _(H)&&o(null)},oe=async H=>{await T(H)&&o(null)},F=async H=>{if(!E.trim()){alert("Por favor, informe o motivo do report.");return}await D(H,E)&&(N(null),C(""),o(null))},O=async H=>{await S(H)},U=H=>{const xe=new Date-H,K=Math.floor(xe/(1e3*60)),Y=Math.floor(xe/(1e3*60*60)),Ce=Math.floor(xe/(1e3*60*60*24));return K<1?"Agora mesmo":K<60?`${K}m atrás`:Y<24?`${Y}h atrás`:Ce<7?`${Ce}d atrás`:H.toLocaleDateString("pt-BR")},q=H=>w&&(H.authorId===w.uid||w.role==="admin"),ue=H=>w&&(H.authorId===w.uid||w.role==="admin"),re=H=>w&&H.authorId!==w.uid;return v.useEffect(()=>{const H=fe=>{a&&!fe.target.closest(".comment-menu")&&o(null)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[a]),b?i.jsxs("div",{className:"text-center text-white/50 py-8",children:[i.jsx("div",{className:"loading-spinner mx-auto mb-4"}),"Carregando comentários..."]}):I?i.jsxs("div",{className:"text-center text-red-400 py-8",children:["Erro ao carregar comentários: ",I]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:i.jsx("form",{onSubmit:P,className:"space-y-3",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:w!=null&&w.photoURL?i.jsx("img",{src:w.photoURL,alt:w.displayName,className:"w-8 h-8 rounded-full"}):i.jsx(He,{className:"w-4 h-4 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("textarea",{ref:x,value:e,onChange:H=>r(H.target.value),placeholder:"Adicione um comentário...",className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:3}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/70 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:n,onChange:H=>s(H.target.checked),className:"w-4 h-4 rounded border-white/30 bg-white/10 text-white focus:ring-white/30"}),i.jsx("span",{children:"Comentar anonimamente"})]}),i.jsxs("button",{type:"submit",disabled:!e.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-white text-black rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:bg-white/30 disabled:scale-100 disabled:cursor-not-allowed",children:[i.jsx(Ec,{className:"w-4 h-4"}),i.jsx("span",{children:"Comentar"})]})]})]})]})})}),i.jsx("div",{className:"space-y-4",children:g.length===0?i.jsx("div",{className:"text-center text-white/50 py-8",children:"Nenhum comentário ainda. Seja o primeiro a comentar!"}):g.map(H=>{var fe;return i.jsx("div",{className:`bg-white/5 rounded-lg p-4 ${H.isHidden?"opacity-50":""}`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:H.authorAvatar?i.jsx("img",{src:H.authorAvatar,alt:H.authorName,className:"w-8 h-8 rounded-full"}):i.jsx(He,{className:"w-4 h-4 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h5",{className:"font-medium text-white",children:H.authorName}),H.isAnonymous&&i.jsx("span",{className:"text-xs bg-white/20 text-white/70 px-2 py-1 rounded-full",children:"Anônimo"}),i.jsx("span",{className:"text-xs text-white/50",children:U(H.createdAt)}),H.isEdited&&i.jsx("span",{className:"text-xs text-white/30",children:"(editado)"})]}),i.jsxs("div",{className:"relative comment-menu",children:[i.jsx("button",{onClick:()=>o(a===H.id?null:H.id),className:"p-1 text-white/50 hover:text-white transition-colors rounded-full hover:bg-white/10",children:i.jsx(ci,{className:"w-4 h-4"})}),a===H.id&&i.jsx("div",{className:"absolute right-0 top-8 bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg shadow-xl z-10 min-w-[160px]",children:i.jsxs("div",{className:"py-1",children:[q(H)&&i.jsxs("button",{onClick:()=>{h(H.id),m(H.content),o(null)},className:"w-full px-4 py-2 text-left text-white hover:bg-white/20 transition-colors flex items-center space-x-2",children:[i.jsx(jc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),q(H)&&i.jsxs("button",{onClick:()=>ae(H.id),className:"w-full px-4 py-2 text-left text-red-400 hover:bg-red-500/20 transition-colors flex items-center space-x-2",children:[i.jsx(Qt,{className:"w-4 h-4"}),i.jsx("span",{children:"Deletar"})]}),ue(H)&&i.jsxs("button",{onClick:()=>oe(H.id),className:"w-full px-4 py-2 text-left text-white hover:bg-white/20 transition-colors flex items-center space-x-2",children:[i.jsx(Zl,{className:"w-4 h-4"}),i.jsx("span",{children:H.isHidden?"Mostrar":"Ocultar"})]}),re(H)&&i.jsxs("button",{onClick:()=>N(H.id),className:"w-full px-4 py-2 text-left text-orange-400 hover:bg-orange-500/20 transition-colors flex items-center space-x-2",children:[i.jsx(rx,{className:"w-4 h-4"}),i.jsx("span",{children:"Reportar"})]})]})})]})]}),d===H.id?i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{value:f,onChange:xe=>m(xe.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:3}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>$(H.id),className:"px-3 py-1 bg-white text-black rounded-lg text-sm font-medium hover:bg-white/90 transition-colors",children:"Salvar"}),i.jsx("button",{onClick:()=>{h(null),m("")},className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm font-medium hover:bg-white/20 transition-colors",children:"Cancelar"})]})]}):i.jsx("p",{className:"text-white/90 leading-relaxed",children:H.content}),i.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[i.jsxs("button",{onClick:()=>O(H.id),className:`flex items-center space-x-1 transition-colors ${k(H.id)?"text-red-400":"text-white/50 hover:text-white"}`,children:[i.jsx(wr,{className:`w-4 h-4 ${k(H.id)?"fill-current":""}`}),i.jsx("span",{className:"text-sm",children:((fe=H.likes)==null?void 0:fe.length)||0})]}),i.jsxs("button",{onClick:()=>c(l===H.id?null:H.id),className:"flex items-center space-x-1 text-white/50 hover:text-white transition-colors",children:[i.jsx(Vp,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Responder"})]})]}),l===H.id&&i.jsx("div",{className:"mt-3 pl-6 border-l-2 border-white/20",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:w!=null&&w.photoURL?i.jsx("img",{src:w.photoURL,alt:w.displayName,className:"w-6 h-6 rounded-full"}):i.jsx(He,{className:"w-3 h-3 text-white/70"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("textarea",{placeholder:"Responder ao comentário...",className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30",rows:2}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/70 cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-white/30 bg-white/10 text-white focus:ring-white/30"}),i.jsx("span",{children:"Responder anonimamente"})]}),i.jsx("button",{className:"px-3 py-1 bg-white text-black rounded-lg text-sm font-medium hover:bg-white/90 transition-colors",children:"Responder"})]})]})]})})]})]})},H.id)})}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Hd,{className:"w-6 h-6 text-orange-400"}),i.jsx("h3",{className:"text-xl font-medium text-white",children:"Reportar Comentário"})]}),i.jsx("p",{className:"text-white/70 mb-4",children:"Por favor, informe o motivo pelo qual está reportando este comentário:"}),i.jsx("textarea",{value:E,onChange:H=>C(H.target.value),placeholder:"Descreva o motivo do report...",className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 mb-4",rows:3}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:()=>{N(null),C("")},className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:()=>F(y),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors",children:"Reportar"})]})]})})]})},rF=()=>{gt();const{user:t}=ze(),[e,r]=v.useState(null),[n,s]=v.useState(null);v.useState(new Set);const{posts:a,loading:o,error:l,hasMore:c,loadMorePosts:d,togglePostLike:h,isPostLiked:f,deletePost:m}=Gh(),y=async x=>{t&&await h(x)},N=async x=>{if(window.confirm("Tem certeza que deseja deletar este post?")){s(x);try{await m(x)&&r(null)}catch(w){console.error("Erro ao deletar post:",w)}finally{s(null)}}},E=x=>{console.log("Edit post:",x),r(null)},C=x=>{if(!x)return"Agora mesmo";const w=new Date,g=x.toDate?x.toDate():new Date(x),b=w-g,I=Math.floor(b/(1e3*60)),M=Math.floor(b/(1e3*60*60)),A=Math.floor(b/(1e3*60*60*24));return I<1?"Agora mesmo":I<60?`${I}m atrás`:M<24?`${M}h atrás`:A<7?`${A}d atrás`:g.toLocaleDateString("pt-BR")};return o&&a.length===0?i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando posts..."})]}):l&&a.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(rx,{className:"w-12 h-12 text-red-400"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Erro ao carregar posts"}),i.jsx("p",{className:"text-white/40 mb-6",children:l}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors",children:"Tentar novamente"})]}):a.length===0?i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(nt,{className:"w-12 h-12 text-white/30"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Nenhum post ainda"}),i.jsx("p",{className:"text-white/40",children:"Seja o primeiro a compartilhar algo!"})]}):i.jsxs("div",{className:"space-y-6",children:[a.map(x=>{var w,g,b;return i.jsxs("article",{className:"bg-white/5 border border-white/10 rounded-xl p-6 hover:bg-white/10 transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg",children:x.isAnonymous?"?":((w=x.author)==null?void 0:w.charAt(0))||"U"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"text-white font-semibold",children:x.isAnonymous?"Usuário Anônimo":x.author}),x.isAnonymous&&i.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:"Anônimo"}),x.visibility==="private"&&i.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:"Privado"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white/60",children:[i.jsx(Lt,{className:"w-3 h-3"}),i.jsx("span",{children:C(x.createdAt)}),x.isEdited&&i.jsx("span",{className:"text-xs text-white/40",children:"(editado)"})]})]})]}),t&&(x.userId===t.uid||t.role==="admin")&&i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>r(e===x.id?null:x.id),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(ci,{className:"w-4 h-4 text-white/60"})}),e===x.id&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white/10 backdrop-blur-xl border border-white/20 rounded-lg shadow-xl z-10",children:[i.jsxs("button",{onClick:()=>E(x.id),className:"w-full px-4 py-2 text-left text-white hover:bg-white/10 flex items-center space-x-2 rounded-t-lg",children:[i.jsx(jc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>N(x.id),disabled:n===x.id,className:"w-full px-4 py-2 text-left text-red-400 hover:bg-red-500/20 flex items-center space-x-2 rounded-b-lg disabled:opacity-50",children:[i.jsx(Qt,{className:"w-4 h-4"}),i.jsx("span",{children:n===x.id?"Deletando...":"Deletar"})]})]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-white/90 text-lg leading-relaxed mb-3",children:x.content}),x.tags&&x.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:x.tags.map((I,M)=>i.jsxs("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 text-sm rounded-full border border-blue-500/30",children:["#",I]},M))})]}),i.jsx("div",{className:"flex items-center justify-between text-sm text-white/60 mb-4",children:i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("span",{children:[((g=x.likes)==null?void 0:g.length)||0," curtidas"]})})}),i.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:i.jsx("div",{className:"flex items-center space-x-6",children:i.jsxs("button",{onClick:()=>y(x.id),disabled:!t,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${f(x.id)?"bg-red-500/20 text-red-400 border border-red-500/30":"text-white/70 hover:text-white hover:bg-white/10"} ${t?"":"opacity-50 cursor-not-allowed"}`,children:[i.jsx(wr,{className:`w-5 h-5 ${f(x.id)?"fill-current":""}`}),i.jsx("span",{className:"font-medium",children:f(x.id)?"Curtido":"Curtir"}),((b=x.likes)==null?void 0:b.length)>0&&i.jsxs("span",{className:"text-sm",children:["(",x.likes.length,")"]})]})})})]},x.id)}),c&&i.jsx("div",{className:"text-center",children:i.jsx("button",{onClick:d,disabled:o,className:"px-8 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors disabled:opacity-50",children:o?"Carregando...":"Carregar mais posts"})})]})},nF=(t=1e3)=>{const[e,r]=v.useState(new Date);return v.useEffect(()=>{const n=setInterval(()=>{r(new Date)},t);return()=>clearInterval(n)},[t]),e},sF=t=>{const e=nF(6e4);return{...v.useMemo(()=>{const n=e.getHours(),s=t||"Usuário";return n<12?{text:`Bom dia, ${s}!`,icon:e1,period:"morning"}:n<18?{text:`Boa tarde, ${s}!`,icon:e1,period:"afternoon"}:{text:`Boa noite, ${s}!`,icon:EL,period:"evening"}},[e,t]),currentTime:e,formattedDate:e.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},uf="psychologists",k1="PsychologistAccount",ca="patients",Go="sessions",iF="progress",C1="evaluations";class ui{constructor(){this.currentUser=vt.currentUser}async getRecommendedPsychologists(e=4){try{const r=Ne(J,k1),n=je(r,Me("isAvailable","==",!0),ht("rating","desc"),ht("yearsExperience","desc"),ns(e)),s=await Le(n),a=[];return s.forEach(o=>{const l=o.data();a.push({id:o.id,name:l.displayName||"Psicólogo",specialty:l.specialty||"Psicologia Clínica",experience:l.yearsExperience?`${l.yearsExperience} anos`:"5 anos",rating:l.rating||5,bio:l.bio||"Psicólogo especializado em atendimento clínico",crp:l.crp||"CRP não informado",acceptsOnline:l.acceptsOnline||!1,avatar:l.avatar||"👨‍⚕️",initials:this.generateInitials(l.displayName||"Psicólogo")})}),a.sort((o,l)=>{if(l.rating!==o.rating)return l.rating-o.rating;const c=parseInt(o.experience)||0;return(parseInt(l.experience)||0)-c}),a}catch(r){console.error("Erro ao buscar psicólogos recomendados:",r);try{const n=Ne(J,k1),s=je(n,Me("isAvailable","==",!0)),a=await Le(s),o=[];return a.forEach(l=>{const c=l.data();o.push({id:l.id,name:c.displayName||"Psicólogo",specialty:c.specialty||"Psicologia Clínica",experience:c.yearsExperience?`${c.yearsExperience} anos`:"5 anos",rating:c.rating||5,bio:c.bio||"Psicólogo especializado em atendimento clínico",crp:c.crp||"CRP não informado",acceptsOnline:c.acceptsOnline||!1,avatar:c.avatar||"👨‍⚕️",initials:this.generateInitials(c.displayName||"Psicólogo")})}),o.sort((l,c)=>{if(c.rating!==l.rating)return c.rating-l.rating;const d=parseInt(l.experience)||0;return(parseInt(c.experience)||0)-d}),o.slice(0,e)}catch(n){return console.error("Erro na busca fallback:",n),[]}}}generateInitials(e){if(!e)return"PS";const r=e.trim().split(" ");if(r.length===1)return r[0].substring(0,2).toUpperCase();const n=r[0].charAt(0),s=r[r.length-1].charAt(0);return`${n}${s}`.toUpperCase()}async getPsychologistData(e){try{const r=ye(J,uf,e),n=await jt(r);if(n.exists())return{id:n.id,...n.data()};throw new Error("Psicólogo não encontrado")}catch(r){throw console.error("Erro ao buscar dados do psicólogo:",r),r}}async updatePsychologistData(e,r){try{const n=ye(J,uf,e);return await rt(n,{...r,updatedAt:Pe()}),!0}catch(n){throw console.error("Erro ao atualizar dados do psicólogo:",n),n}}async getPatients(e){try{const r=je(Ne(J,ca),Me("psychologistId","==",e),ht("createdAt","desc")),n=await Le(r),s=[];return n.forEach(a=>{s.push({id:a.id,...a.data()})}),s}catch(r){throw console.error("Erro ao buscar pacientes:",r),r}}async addPatient(e,r){try{return(await Us(Ne(J,ca),{...r,psychologistId:e,createdAt:Pe(),status:"active",progress:0})).id}catch(n){throw console.error("Erro ao adicionar paciente:",n),n}}async updatePatient(e,r){try{const n=ye(J,ca,e);return await rt(n,{...r,updatedAt:Pe()}),!0}catch(n){throw console.error("Erro ao atualizar paciente:",n),n}}async getSessions(e,r={}){try{let n=je(Ne(J,Go),Me("psychologistId","==",e));r.status&&(n=je(n,Me("status","==",r.status))),r.date&&(n=je(n,Me("date",">=",r.date))),n=je(n,ht("date","asc"),ht("time","asc"));const s=await Le(n),a=[];return s.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(n){throw console.error("Erro ao buscar sessões:",n),n}}async createSession(e,r){try{return(await Us(Ne(J,Go),{...r,psychologistId:e,createdAt:Pe(),status:"pending"})).id}catch(n){throw console.error("Erro ao criar sessão:",n),n}}async updateSessionStatus(e,r){try{const n=ye(J,Go,e);return await rt(n,{status:r,updatedAt:Pe()}),!0}catch(n){throw console.error("Erro ao atualizar status da sessão:",n),n}}async getDashboardStats(e){try{const r=je(Ne(J,ca),Me("psychologistId","==",e),Me("status","==","active")),s=(await Le(r)).size,a=new Date,o=new Date(a.getFullYear(),a.getMonth(),1),l=je(Ne(J,Go),Me("psychologistId","==",e),Me("date",">=",o),Me("status","==","completed")),d=(await Le(l)).size,h=je(Ne(J,C1),Me("psychologistId","==",e)),f=await Le(h);let m=0,y=0;f.forEach(g=>{const b=g.data();b.rating&&(m+=b.rating,y++)});const N=y>0?(m/y).toFixed(1):0,E=new Date;E.setDate(E.getDate()-7);const C=je(Ne(J,ca),Me("psychologistId","==",e),Me("createdAt",">=",E)),w=(await Le(C)).size;return{activePatients:s,totalSessions:d,successRate:87,avgSessionTime:45,rating:N,newPatients:w}}catch(r){throw console.error("Erro ao buscar estatísticas:",r),r}}async getPatientProgress(e){try{const r=je(Ne(J,iF),Me("patientId","==",e),ht("date","desc"),ns(10)),n=await Le(r),s=[];return n.forEach(a=>{s.push({id:a.id,...a.data()})}),s}catch(r){throw console.error("Erro ao buscar progresso do paciente:",r),r}}async addSessionEvaluation(e,r,n){try{return(await Us(Ne(J,C1),{...n,psychologistId:e,sessionId:r,createdAt:Pe()})).id}catch(s){throw console.error("Erro ao adicionar avaliação:",s),s}}subscribeToPatients(e,r){const n=je(Ne(J,ca),Me("psychologistId","==",e),ht("createdAt","desc"));return Rp(n,s=>{const a=[];s.forEach(o=>{a.push({id:o.id,...o.data()})}),r(a)})}subscribeToSessions(e,r){const n=je(Ne(J,Go),Me("psychologistId","==",e),ht("date","asc"),ht("time","asc"));return Rp(n,s=>{const a=[];s.forEach(o=>{a.push({id:o.id,...o.data()})}),r(a)})}async markTourAsSeen(e){try{const r=ye(J,uf,e);return await rt(r,{hasSeenTour:!0,updatedAt:Pe()}),!0}catch(r){throw console.error("Erro ao marcar tour como visto:",r),r}}}const aF=new ui,wS=async t=>{try{return{success:!0,data:await new ui().getPatients(t)}}catch(e){return console.error("Erro ao buscar pacientes:",e),{success:!1,error:e.message}}},oF=async(t,e)=>{try{return{success:!0,data:{id:await new ui().addPatient(t,e)}}}catch(r){return console.error("Erro ao criar paciente:",r),{success:!1,error:r.message}}},yS=async(t,e={})=>{try{return{success:!0,data:await new ui().getSessions(t,e)}}catch(r){return console.error("Erro ao buscar sessões:",r),{success:!1,error:r.message}}},lF=async t=>{try{return{success:!0,data:{id:await new ui().createSession(t.psychologistId,t)}}}catch(e){return console.error("Erro ao criar sessão:",e),{success:!1,error:e.message}}},cF=async(t,e)=>{try{return await new ui().updateSessionStatus(t,e.status),{success:!0}}catch(r){return console.error("Erro ao atualizar sessão:",r),{success:!1,error:r.message}}},uF=async t=>{try{return{success:!0,data:await new ui().getDashboardStats(t)}}catch(e){return console.error("Erro ao buscar estatísticas:",e),{success:!1,error:e.message}}},dF=async t=>{try{return{success:!0,data:[]}}catch(e){return console.error("Erro ao buscar mensagens:",e),{success:!1,error:e.message}}},hF=async t=>{try{return{success:!0,data:{id:Date.now().toString()}}}catch(e){return console.error("Erro ao criar mensagem:",e),{success:!1,error:e.message}}},mF=async t=>{try{return{success:!0}}catch(e){return console.error("Erro ao marcar mensagem como lida:",e),{success:!1,error:e.message}}},fF=async t=>{try{return await new ui().markTourAsSeen(t),{success:!0}}catch(e){return console.error("Erro ao marcar tour como visto:",e),{success:!1,error:e.message}}},pF=async t=>{try{return{success:!0,data:[]}}catch(e){return console.error("Erro ao buscar relatórios:",e),{success:!1,error:e.message}}},gF=async t=>{try{return{success:!0,data:{id:Date.now().toString()}}}catch(e){return console.error("Erro ao criar relatório:",e),{success:!1,error:e.message}}},vS=Yt.memo(({showWelcomeMessage:t=!1})=>{v.useState(0);const[e,r]=v.useState(!0),[n,s]=v.useState([]),[a,o]=v.useState(!0),{user:l}=ze(),c=gt(),{text:d,icon:h,formattedDate:f}=sF((l==null?void 0:l.username)||(l==null?void 0:l.displayName));v.useEffect(()=>{if(t){r(!0);const _=setTimeout(()=>{r(!1)},1500);return()=>clearTimeout(_)}},[t]);const[m,y]=v.useState(!1);v.useEffect(()=>{if(t&&e){const _=setTimeout(()=>{y(!0)},1e3);return()=>clearTimeout(_)}else y(!1)},[t,e]);const[N,E]=v.useState(null),[C,x]=v.useState(!1),w=v.useMemo(()=>[{frase:"A jornada de mil milhas começa com um único passo.",autor:"Lao Tzu"},{frase:"A felicidade não é algo pronto. Ela vem das suas próprias ações.",autor:"Dalai Lama"},{frase:"Cada dia é uma nova oportunidade para ser melhor.",autor:"Desconhecido"},{frase:"A mente é como um paraquedas. Só funciona quando está aberta.",autor:"Frank Zappa"},{frase:"O bem-estar começa com a aceitação de quem você é.",autor:"Desconhecido"}],[]),g=v.useCallback(async()=>{try{o(!0);const _=await aF.getRecommendedPsychologists(4);s(_)}catch(_){console.error("Erro ao buscar psicólogos recomendados:",_),s([])}finally{o(!1)}},[]);v.useEffect(()=>{g()},[g]);const b=v.useCallback(async()=>{x(!0);try{await new Promise(S=>setTimeout(S,500));const _=Math.floor(Math.random()*w.length);E(w[_])}catch{E(null)}finally{x(!1)}},[w]);v.useEffect(()=>{b()},[b]);const I=v.useCallback(()=>{b()},[b]),M=v.useCallback(_=>{c(`/home/profile/${_.id}`)},[c]),A=v.useCallback(()=>{},[]);return i.jsxs(It,{variant:"glass",padding:"lg",className:"mb-8 animation-initial animate-fade-in-up",children:[e&&i.jsx(It.Header,{children:i.jsxs("div",{className:`text-center mb-6 animation-initial animate-fade-in-up animation-delay-100 ${t&&m?"welcome-greeting-fade-out":""}`,children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(h,{className:"w-6 h-6 text-gray-400","aria-hidden":"true"}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:d})]}),i.jsx("time",{className:"text-gray-400",dateTime:new Date().toISOString(),children:f})]})}),i.jsxs(It.Content,{children:[i.jsx(It,{variant:"glass",padding:"lg",className:"mb-6 animation-initial animate-fade-in-up animation-delay-200",children:i.jsxs("div",{onKeyDown:A,tabIndex:0,role:"region","aria-label":"Mensagem motivacional","aria-live":"polite",children:[i.jsx("div",{className:"text-center min-h-[100px] flex flex-col justify-center",children:C?i.jsx("div",{className:"text-white/70",children:"Carregando frase..."}):N?i.jsxs(i.Fragment,{children:[i.jsxs("blockquote",{className:"text-white text-lg leading-relaxed mb-3",children:['"',N.frase,'"']}),i.jsxs("cite",{className:"text-gray-300 text-sm font-medium not-italic",children:["- ",N.autor]})]}):i.jsx("div",{className:"text-white/70",children:"Não foi possível carregar a frase agora."})}),i.jsx("div",{className:"flex items-center justify-center mt-6",children:i.jsx("button",{onClick:I,className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors focus-ring","aria-label":"Atualizar frase",children:"Nova frase"})}),i.jsxs("div",{className:"text-center mt-4",children:[i.jsx("p",{className:"text-sm text-gray-300",children:"Ajudando na construção da sua própria história!"}),i.jsx("div",{className:"flex justify-center space-x-1 mt-2",role:"img","aria-label":"Corações de apoio",children:[...Array(3)].map((_,S)=>i.jsx(wr,{className:"w-4 h-4 text-gray-400 fill-current","aria-hidden":"true"},S))})]})]})}),i.jsxs(It,{variant:"glass",padding:"lg",children:[i.jsx(It.Header,{children:i.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Psicólogos Recomendados"})}),i.jsx(It.Content,{children:a?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),i.jsx("span",{className:"text-white/70 ml-3",children:"Carregando psicólogos..."})]}):n.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(He,{className:"w-12 h-12 text-white/30 mx-auto mb-3"}),i.jsx("p",{className:"text-white/70 text-sm",children:"Nenhum psicólogo disponível no momento"}),i.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Tente novamente mais tarde"})]}):i.jsx("div",{className:"space-y-4",children:n.map(_=>i.jsx("article",{className:"bg-white/5 border border-white/10 rounded-xl p-4 hover:bg-white/10 transition-all duration-200 group cursor-pointer",onClick:()=>M(_),children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-200",children:i.jsx("span",{className:"text-white font-bold text-sm",children:_.initials})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-semibold text-base group-hover:text-white/90 transition-colors duration-200",children:_.name}),i.jsx("p",{className:"text-gray-300 text-sm mt-1",children:_.specialty})]}),i.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-500/20 px-2 py-1 rounded-lg",children:[i.jsx(En,{className:"w-3 h-3 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:_.rating})]})]}),i.jsxs("p",{className:"text-gray-400 text-xs mb-3",children:["Experiência: ",_.experience]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.acceptsOnline&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-400 border border-green-400/20",children:[i.jsx(nt,{className:"w-3 h-3 mr-1"}),"Online"]}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-400/20",children:[i.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Disponível"]})]})]}),i.jsx("button",{onClick:S=>{S.stopPropagation(),M(_)},className:"px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200 flex-shrink-0 group-hover:scale-105 transform","aria-label":`Ver perfil de ${_.name}`,children:"Ver Perfil"})]})},_.id))})})]})]})]})});vS.displayName="WelcomeScreen";function xF(){return i.jsxs(i.Fragment,{children:[i.jsx(vS,{}),i.jsx(ZV,{}),i.jsx(rF,{})]})}const T1=()=>{var pi,Eo;const[t,e]=v.useState(""),[r,n]=v.useState(""),[s,a]=v.useState("track"),[o,l]=v.useState(null);v.useState([]);const[c,d]=v.useState(!1),[h,f]=v.useState(""),[m,y]=v.useState("week"),[N,E]=v.useState(!1),[C,x]=v.useState(""),[w,g]=v.useState(""),[b,I]=v.useState("individual"),[M,A]=v.useState(""),[_,S]=v.useState(null),[k,T]=v.useState([]),[D,P]=v.useState(!1),[$,ae]=v.useState(0),[oe,F]=v.useState(new Date().getFullYear()),[O,U]=v.useState(new Date().getMonth()),[q,ue]=v.useState(null),[re,H]=v.useState({}),[fe,xe]=v.useState(!1),K=[{emoji:"😊",label:"Feliz",value:"happy",color:"bg-green-500"},{emoji:"😔",label:"Triste",value:"sad",color:"bg-blue-500"},{emoji:"😡",label:"Raiva",value:"angry",color:"bg-red-500"},{emoji:"😰",label:"Medo",value:"fear",color:"bg-yellow-500"},{emoji:"😌",label:"Paz",value:"peace",color:"bg-purple-500"},{emoji:"❤️",label:"Amor",value:"love",color:"bg-pink-500"}],Y=["Sono","Eu Mesmo(a)","Família","Saúde","Amizades","Estudos","Lazer","Trabalho","Relação","Luto","Finanças","Outras"],Ce=["09:00","10:00","11:00","14:00","15:00","16:00","17:00"],Fe=[{id:"individual",label:"Sessão Individual",description:"Acompanhamento personalizado"},{id:"couple",label:"Terapia de Casal",description:"Para relacionamentos"},{id:"family",label:"Terapia Familiar",description:"Para toda a família"},{id:"group",label:"Grupo Terapêutico",description:"Compartilhando experiências"}],Te=L=>Object.entries(L).map(([W,Z])=>({id:W,date:new Date(W),mood:Z.mood,cause:Z.cause,intensity:Z.intensity||5,notes:`Humor registrado em ${new Date(W).toLocaleDateString("pt-BR")}`,timestamp:Z.timestamp})).sort((W,Z)=>Z.date-W.date),vr=(L,W)=>{const Z=new Date,pe=new Date;switch(W){case"week":pe.setDate(Z.getDate()-7);break;case"month":pe.setMonth(Z.getMonth()-1);break;case"year":pe.setFullYear(Z.getFullYear()-1);break;default:return L}return L.filter(le=>le.date>=pe)},ls=(L,W)=>{if(!W.trim())return L;const Z=W.toLowerCase();return L.filter(pe=>{var le;return pe.cause.toLowerCase().includes(Z)||pe.notes.toLowerCase().includes(Z)||((le=K.find(ce=>ce.value===pe.mood))==null?void 0:le.label.toLowerCase().includes(Z))})},go=()=>{const L=Te(re);if(L.length===0)return[];const W={};L.forEach(le=>{W[le.mood]=(W[le.mood]||0)+1});const Z=L.length;return Object.entries(W).map(([le,ce])=>{const Ie=Math.round(ce/Z*100),de=K.find(Ut=>Ut.value===le);return{mood:(de==null?void 0:de.label)||le,color:(de==null?void 0:de.color)||"bg-gray-500",percentage:Ie,count:ce,trend:"up"}}).sort((le,ce)=>ce.percentage-le.percentage)},xo=()=>{const L=Te(re);if(L.length===0)return{goals:[],insights:[]};const W=wo(L),Z=Sc(L),pe=Kh(L);return{goals:[{id:"consecutive",title:"Meta: 7 dias consecutivos",progress:W,target:7,icon:Yu,color:"text-blue-400"}],insights:[{id:"weekly",title:"Melhor humor da semana",value:Z,icon:Yv,color:"text-yellow-400"},...pe]}},wo=L=>{if(L.length===0)return 0;L.sort((le,ce)=>le.date-ce.date);let W=0,Z=new Date;const pe=new Date().toISOString().split("T")[0];if(!re[pe])return 0;for(let le=0;le<30;le++){const ce=new Date(Z);ce.setDate(Z.getDate()-le);const Ie=ce.toISOString().split("T")[0];if(re[Ie])W++;else break}return W},Sc=L=>{const W=new Date;W.setDate(W.getDate()-7);const Z=L.filter(ce=>ce.date>=W);if(Z.length===0)return"Nenhuma entrada ainda";const pe=Z.reduce((ce,Ie)=>(Ie.intensity||5)>(ce.intensity||5)?Ie:ce),le=K.find(ce=>ce.value===pe.mood);return le?le.label:"Indefinido"},Kh=L=>{const W=[];if(L.length===0)return W;const Z={};L.forEach(Ie=>{Z[Ie.mood]=(Z[Ie.mood]||0)+1});const pe=Object.entries(Z).reduce((Ie,de)=>Z[Ie[0]]>Z[de[0]]?Ie:de);if(pe){const Ie=K.find(de=>de.value===pe[0]);W.push({id:"frequent",title:"Humor mais frequente",value:Ie?Ie.label:"Indefinido",icon:bl,color:"text-green-400"})}const le={};L.forEach(Ie=>{le[Ie.cause]=(le[Ie.cause]||0)+1});const ce=Object.entries(le).reduce((Ie,de)=>le[Ie[0]]>le[de[0]]?Ie:de);return ce&&W.push({id:"cause",title:"Causa mais comum",value:ce[0],icon:pt,color:"text-purple-400"}),W},Qh=async L=>{if(confirm("Tem certeza que deseja excluir esta entrada de humor?"))try{xe(!0);const W=vt.currentUser;if(!W){alert("Usuário não autenticado");return}const Z=ye(J,"users",W.uid,"moods",L.id);await Qr(Z),H(pe=>{const le={...pe};return delete le[L.id],le}),alert("Entrada de humor excluída com sucesso!")}catch(W){console.error("Erro ao excluir entrada de humor:",W),alert("Erro ao excluir entrada de humor. Tente novamente.")}finally{xe(!1)}},yo=()=>{const L=Te(re),W=vr(L,m);return ls(W,h)},ra=()=>go(),di=()=>xo(),Yh=L=>["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][L],vo=(L,W)=>new Date(L,W+1,0).getDate(),bo=(L,W)=>new Date(L,W,1).getDay(),kc=(L,W)=>{var de,Ut;const Z=vo(L,W),pe=bo(L,W),le=[],ce=new Date,Ie=ce.getFullYear()===L&&ce.getMonth()===W;for(let Ir=0;Ir<pe;Ir++)le.push({day:null,mood:null,intensity:null,date:null,isToday:!1});for(let Ir=1;Ir<=Z;Ir++){const us=new Date(L,W,Ir).toISOString().split("T")[0],Lc=Ie&&ce.getDate()===Ir;le.push({day:Ir,mood:((de=re[us])==null?void 0:de.mood)||null,intensity:((Ut=re[us])==null?void 0:Ut.intensity)||null,date:us,isToday:Lc})}return le},Nt=L=>{L==="prev"?O===0?(U(11),F(oe-1)):U(O-1):O===11?(U(0),F(oe+1)):U(O+1)},kt=L=>{F(oe+L)},na=()=>{const L=new Date;F(L.getFullYear()),U(L.getMonth()),ue({day:L.getDate(),date:L.toISOString().split("T")[0]})},Cc=(L,W)=>{L&&W&&(ue({day:L,date:W}),console.log("Data selecionada:",{day:L,date:W}))},Tc=async(L,W)=>{try{const Z=vt.currentUser;if(!Z)return console.error("Usuário não autenticado"),!1;const pe=ye(J,"users",Z.uid,"moods",L);return await Jl(pe,{...W,date:L,timestamp:new Date,userId:Z.uid}),console.log("Humor salvo no Firebase:",L,W),!0}catch(Z){return console.error("Erro ao salvar humor no Firebase:",Z),!1}},Ic=async()=>{try{xe(!0);const L=vt.currentUser;if(!L){console.error("Usuário não autenticado");return}const W=Ne(J,"users",L.uid,"moods"),Z=je(W,ht("timestamp","desc"));return Rp(Z,le=>{const ce={};le.forEach(Ie=>{const de=Ie.data();ce[de.date]={mood:de.mood,cause:de.cause,intensity:de.intensity||5,timestamp:de.timestamp}}),H(ce),console.log("Dados de humor carregados:",ce)})}catch(L){console.error("Erro ao carregar dados de humor:",L)}finally{xe(!1)}},hi=kc(oe,O),Ac=async()=>{if(!(!t||!r))try{xe(!0);const L=(q==null?void 0:q.date)||new Date().toISOString().split("T")[0],W=re[L],Z={mood:t,cause:r,intensity:5,timestamp:W?re[L].timestamp:new Date,updatedAt:new Date};await Tc(L,Z)?(H(le=>({...le,[L]:Z})),d(!1),e(""),n(""),ue(null),console.log(`${W?"Humor editado":"Humor registrado"} com sucesso para:`,L)):alert(`Erro ao ${W?"editar":"salvar"} humor. Tente novamente.`)}catch(L){console.error(`Erro ao ${q!=null&&q.date&&re[q.date]?"editar":"registrar"} humor:`,L),alert(`Erro ao ${q!=null&&q.date&&re[q.date]?"editar":"registrar"} humor. Tente novamente.`)}finally{xe(!1)}},Pc=async(L,W)=>{if(!L||!W){T([]);return}try{P(!0);const Z=Ne(J,"PsychologistAccount"),pe=je(Z,Me("isAvailable","==",!0)),le=await Le(pe),ce=[];le.forEach(Ie=>{const de=Ie.data(),Ut=de.availableSlots||["09:00","14:00","16:00"];Ut.includes(W)&&ce.push({id:Ie.id,name:de.displayName||de.name||"Psicólogo",specialty:de.specialty||de.approach||"Psicologia Clínica",experience:de.yearsExperience?`${de.yearsExperience} anos`:"5 anos",rating:de.rating||5,availableSlots:Ut,avatar:de.avatar||"👨‍⚕️",description:de.bio||de.description||"Psicólogo especializado em atendimento clínico",email:de.email,phone:de.phone||"",crp:de.crp||"CRP não informado",education:de.education||"Psicologia",languages:de.languages||["Português"],isAvailable:de.isAvailable!==!1,selectedTime:W,approach:de.approach||de.specialty||"",certifications:de.certifications||[],insurance:de.insurance||!1,virtualSessions:de.virtualSessions!==!1,inPersonSessions:de.inPersonSessions!==!1,totalSessions:de.totalSessions||0,acceptsOnline:de.acceptsOnline||!1})}),ce.sort((Ie,de)=>{if(de.rating!==Ie.rating)return de.rating-Ie.rating;const Ut=parseInt(Ie.experience)||0;return(parseInt(de.experience)||0)-Ut}),T(ce),ce.length===0?console.log(`Nenhum psicólogo disponível para ${L} às ${W}`):console.log(`Psicólogos disponíveis para ${L} às ${W}:`,ce)}catch(Z){console.error("Erro ao buscar psicólogos:",Z),T([])}finally{P(!1)}},No=()=>{if(!C||!w||!b||!_){alert("Por favor, preencha todos os campos obrigatórios, incluindo a seleção do psicólogo.");return}console.log("Agendando sessão:",{date:C,time:w,type:b,psychologist:{id:_.id,name:_.name,email:_.email,phone:_.phone,crp:_.crp},notes:M}),x(""),g(""),I("individual"),A(""),S(null),ae(0),E(!1),alert(`Sessão agendada com sucesso com ${_.name} para ${new Date(C).toLocaleDateString("pt-BR")} às ${w}! Em breve entraremos em contato para confirmar.`)},Xh=(L=0)=>{const W=[],Z=new Date;let pe;if(L===0)pe=new Date(Z);else{const le=(8-Z.getDay())%7,ce=new Date(Z);ce.setDate(Z.getDate()+le),pe=new Date(ce),pe.setDate(ce.getDate()+L*7)}for(let le=0;le<7;le++){const ce=new Date(pe);ce.setDate(pe.getDate()+le),W.push({date:ce.toISOString().split("T")[0],day:ce.toLocaleDateString("pt-BR",{weekday:"short"}),dayNumber:ce.getDate(),fullDay:ce.toLocaleDateString("pt-BR",{weekday:"long"}),month:ce.toLocaleDateString("pt-BR",{month:"short"}),isToday:ce.toDateString()===Z.toDateString()})}return W},Rc=(L,W)=>{L&&W&&(Pc(L,W),S(null),console.log(`Buscando psicólogos disponíveis para ${L} às ${W}...`))},_o=async()=>{try{const L=Ne(J,"PsychologistAccount"),W=je(L,Me("isAvailable","==",!0)),pe=(await Le(W)).size;return console.log(`Total de psicólogos disponíveis no sistema: ${pe}`),pe===0?(console.warn("⚠️ Nenhum psicólogo disponível no sistema ainda"),console.log("💡 Verifique se há psicólogos cadastrados na coleção PsychologistAccount")):console.log("✅ Psicólogos disponíveis encontrados no sistema:",pe),pe}catch(L){return console.error("Erro ao verificar psicólogos no sistema:",L),0}},Dc=()=>{ae(L=>L+1),x(""),S(null),T([])},Mc=()=>{$>0&&(ae(L=>L-1),x(""),S(null),T([]))},mi=()=>{ae(0),x(""),S(null),T([])};v.useEffect(()=>{const L=async()=>{try{const Z=vt.currentUser;if(Z){const pe=ye(J,"users",Z.uid),le=await jt(pe);le.exists()&&l(le.data())}}catch(Z){console.error("Erro ao buscar dados do usuário:",Z)}};(async()=>{await L(),await Ic(),await _o()})()},[]),v.useEffect(()=>{vt.currentUser&&Ic()},[oe,O]),v.useEffect(()=>{s!=="scheduling"&&(T([]),S(null),ae(0),x(""),g(""))},[s]);const sa=L=>{const W=K.find(Z=>Z.value===L);return W?W.color:"bg-gray-500"},fi=L=>{switch(L){case"happy":return"😊";case"sad":return"😔";case"angry":return"😡";case"fear":return"😰";case"peace":return"😌";case"love":return"❤️";default:return"😐"}},jo=(()=>{const L=Object.values(re).filter(pe=>{var ce;const le=new Date(((ce=pe.timestamp)==null?void 0:ce.toDate())||pe.timestamp);return le.getMonth()===O&&le.getFullYear()===oe}),W=L.length,Z=W>0?L.reduce((pe,le)=>pe+({happy:8,sad:3,angry:2,fear:4,peace:7,love:9}[le.mood]||5),0)/W:0;return{totalEntries:W,averageMood:Math.round(Z*10)/10}})();return i.jsx("div",{className:"min-h-screen bg-black py-8 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 animate-pulse"}),i.jsx("div",{className:"absolute top-4 right-8 w-1 h-1 bg-white/30 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.3s"}}),i.jsx("div",{className:"absolute top-8 right-16 w-0.5 h-0.5 bg-white/20 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.6s"}}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 relative z-10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(bl,{className:"w-7 h-7 text-gray-400 group-hover:text-white transition-all duration-300 group-hover:rotate-12 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-500"})]}),i.jsx("h2",{className:"text-2xl font-bold text-white group-hover:tracking-wide transition-all duration-300",children:"Rastreador de Humor"})]}),i.jsxs("button",{onClick:()=>d(!c),className:"group/add bg-white/10 border border-white/30 text-white px-5 py-2.5 rounded-lg hover:bg-white/20 transition-all duration-300 text-sm hover:scale-110 hover:shadow-lg relative overflow-hidden flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/add:opacity-100 transition-opacity duration-300 group-hover/add:animate-pulse"}),i.jsx(Ur,{className:"w-4 h-4 inline mr-2 group-hover/add:rotate-90 group-hover/add:scale-125 transition-all duration-300 relative z-10"}),i.jsx("span",{className:"relative z-10 group-hover/add:font-medium transition-all duration-300",children:"Registrar Humor"})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 bg-white/5 rounded-xl p-1.5 relative z-10",children:[{id:"track",label:"Rastreamento"},{id:"history",label:"Histórico"},{id:"analytics",label:"Análises"},{id:"scheduling",label:"Agendar Sessão"}].map((L,W)=>i.jsxs("button",{onClick:()=>a(L.id),className:`group/tab flex-1 min-w-[120px] px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 relative overflow-hidden ${s===L.id?"bg-white text-black shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover/tab:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"relative z-10 group-hover/tab:tracking-wide transition-all duration-300",children:L.label})]},L.id))})]}),c&&i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 transition-all duration-500 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:q&&re[q.date]?"Editar Humor":"Registrar Humor"}),i.jsxs("button",{onClick:()=>d(!1),className:"group/close text-white/50 hover:text-white hover:scale-125 hover:rotate-90 transition-all duration-300 p-2",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/close:opacity-100 transition-opacity duration-300"}),"✕"]})]}),i.jsxs("div",{className:"space-y-8 relative z-10",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Escolha uma Opção:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:K.map((L,W)=>i.jsxs("button",{onClick:()=>e(L.value),className:`group/mood flex flex-col items-center space-y-3 p-4 rounded-2xl transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${t===L.value?"bg-white/10 border border-white/20 scale-105 shadow-lg":"bg-gray-800/30 hover:bg-gray-700/50"}`,style:{animationDelay:`${W*100}ms`,transform:"translateZ(0)"},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/mood:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"text-3xl group-hover/mood:scale-125 group-hover/mood:rotate-12 transition-all duration-300 relative z-10",children:L.emoji}),i.jsx("span",{className:"text-sm text-gray-300 group-hover/mood:text-white group-hover/mood:font-medium transition-all duration-300 relative z-10",children:L.label}),i.jsx("div",{className:"absolute top-1 right-1 w-1 h-1 bg-white/40 rounded-full opacity-0 group-hover/mood:opacity-100 group-hover/mood:animate-ping transition-opacity duration-300"})]},L.value))})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Principal Causa:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Y.map((L,W)=>i.jsxs("button",{onClick:()=>n(L),className:`group/cause p-3 rounded-xl text-xs transition-all duration-300 hover:scale-105 hover:-translate-y-0.5 relative overflow-hidden ${r===L?"bg-white/10 border border-white/20 text-white":"bg-gray-800/30 hover:bg-gray-700/50 text-gray-300 hover:text-white"}`,style:{animationDelay:`${W*50}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/cause:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"relative z-10 group-hover/cause:font-medium transition-all duration-300",children:L})]},L))})]}),i.jsxs("button",{onClick:Ac,disabled:!t||!r||fe,className:"group/submit w-full bg-gradient-to-r from-white to-gray-200 text-black py-4 px-4 rounded-xl font-bold hover:from-gray-200 hover:to-gray-300 transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover/submit:opacity-100 transition-opacity duration-300 group-hover/submit:animate-pulse"}),i.jsx("span",{className:"relative z-10 group-hover/submit:tracking-wider group-hover/submit:font-bold transition-all duration-300",children:fe?"Salvando...":q&&re[q.date]?"ATUALIZAR":"REGISTRAR"})]})]})]}),s==="track"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 z-0"}),i.jsxs("div",{className:"flex flex-col items-center mb-6 relative z-20",children:[i.jsxs("h3",{className:"text-2xl font-semibold text-white group-hover:tracking-wide transition-all duration-300 mb-4 text-center",children:[Yh(O)," de ",oe]}),i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("button",{onClick:()=>kt(-1),className:"group/year p-2 text-gray-400 hover:text-white hover:scale-125 hover:rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Ano anterior",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/year:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(xL,{className:"w-4 h-4 relative z-10"})]}),i.jsx("span",{className:"text-sm text-gray-300 px-3 py-1 font-medium bg-white/5 rounded-lg",children:oe}),i.jsxs("button",{onClick:()=>kt(1),className:"group/year p-2 text-gray-400 hover:text-white hover:scale-125 hover:-rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Próximo ano",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/year:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(wL,{className:"w-4 h-4 relative z-10"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:()=>Nt("prev"),className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Mês anterior",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(Gd,{className:"w-4 h-4 relative z-10"})]}),i.jsxs("button",{onClick:na,className:"group/today px-4 py-2 text-blue-400 hover:text-blue-300 hover:scale-105 transition-all duration-300 bg-blue-500/10 rounded-lg hover:bg-blue-500/20 text-sm font-medium relative z-30",title:"Voltar para hoje",children:[i.jsx("div",{className:"absolute -inset-2 bg-blue-500/10 rounded-full opacity-0 group-hover/today:opacity-100 transition-opacity duration-300 z-0"}),i.jsx("span",{className:"relative z-10",children:"Hoje"})]}),i.jsxs("button",{onClick:()=>Nt("next"),className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:-rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Próximo mês",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(Wi,{className:"w-4 h-4 relative z-10"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3 relative z-20",children:["D","S","T","Q","Q","S","S"].map((L,W)=>i.jsx("div",{className:"text-center text-xs text-gray-400 p-2 group-hover:text-white/70 transition-colors duration-300 font-medium",children:L},`${L}-${W}`))}),i.jsx("div",{className:"grid grid-cols-7 gap-1 relative z-20",children:hi.map((L,W)=>i.jsx("button",{onClick:()=>Cc(L.day,L.date),disabled:!L.day,className:`group/day aspect-square flex flex-col items-center justify-center text-sm rounded-xl transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg relative z-30 ${L.day?L.mood?`${sa(L.mood)} text-white`:(q==null?void 0:q.date)===L.date?"bg-white/20 border border-white/30 text-white":L.isToday?"bg-blue-500/20 border border-blue-400/30 text-blue-300":"text-gray-300 hover:bg-gray-700/50 hover:text-white":"invisible"}`,style:{animationDelay:`${W*20}ms`},children:L.day&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs group-hover/day:font-bold transition-all duration-300",children:L.day}),L.mood&&i.jsx("span",{className:"text-xs opacity-75 group-hover/day:opacity-100 group-hover/day:scale-110 transition-all duration-300",children:fi(L.mood)}),L.isToday&&!L.mood&&i.jsx("span",{className:"text-xs text-blue-400 group-hover/day:scale-110 transition-all duration-300",children:"•"}),!L.mood&&!L.isToday&&i.jsx("span",{className:"text-xs text-gray-500 group-hover/day:text-gray-400 transition-colors duration-300",children:"+"})]})},W))}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 relative z-20",children:[i.jsx("h4",{className:"text-sm text-white/70 mb-3",children:"Legenda:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(L=>i.jsxs("div",{className:"flex items-center space-x-1.5",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${L.color}`}),i.jsx("span",{className:"text-xs text-white/60",children:L.label})]},L.value))})]}),q&&i.jsx("div",{className:"mt-4 p-4 bg-white/10 rounded-lg border border-white/20 relative z-20",children:i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-sm text-white/70",children:"Data selecionada:"}),i.jsx("div",{className:"text-white font-medium mt-1",children:new Date(q.date).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),re[q.date]?i.jsxs("div",{className:"mt-3 p-3 bg-white/5 rounded-lg border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx("span",{className:"text-2xl",children:fi(re[q.date].mood)}),i.jsx("span",{className:"text-white font-medium",children:(pi=K.find(L=>L.value===re[q.date].mood))==null?void 0:pi.label})]}),i.jsxs("div",{className:"text-white/70 text-sm mb-3",children:["Causa: ",i.jsx("span",{className:"text-white font-medium",children:re[q.date].cause})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-white/50",children:[i.jsx(Lt,{className:"w-3 h-3"}),i.jsxs("span",{children:["Registrado em: ",new Date(((Eo=re[q.date].timestamp)==null?void 0:Eo.toDate())||re[q.date].timestamp).toLocaleString("pt-BR")]})]}),i.jsx("button",{onClick:()=>{e(re[q.date].mood),n(re[q.date].cause),d(!0)},className:"mt-3 text-xs text-yellow-400 hover:text-yellow-300 underline transition-colors duration-300 relative z-30",children:"Editar humor"})]}):i.jsx("button",{onClick:()=>d(!0),className:"mt-3 text-sm text-blue-400 hover:text-blue-300 underline transition-colors duration-300 relative z-30",children:"Registrar humor nesta data"})]})})]}),i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-6 group-hover:tracking-wide transition-all duration-300 relative z-10",children:"Resumo da Semana"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 relative z-10",children:[{emoji:"😊",title:"Humor Médio",value:`${jo.averageMood}/10`},{emoji:"📊",title:"Entradas",value:`${jo.totalEntries} este mês`}].map((L,W)=>i.jsxs("div",{className:"group/stat text-center p-6 bg-white/5 rounded-xl hover:bg-white/10 hover:scale-105 hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",style:{animationDelay:`${W*200}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/stat:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"text-3xl mb-3 group-hover/stat:scale-125 group-hover/stat:rotate-12 transition-all duration-300 relative z-10",children:L.emoji}),i.jsx("div",{className:"text-white font-medium group-hover/stat:tracking-wide transition-all duration-300 relative z-10",children:L.title}),i.jsx("div",{className:"text-white/70 text-sm group-hover/stat:text-white group-hover/stat:font-medium transition-all duration-300 relative z-10",children:L.value})]},L.title))})]})]}),s==="history"&&i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:"Histórico de Humor"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[i.jsxs("div",{className:"relative group/search flex-grow sm:flex-grow-0",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4 group-hover/search:text-white/80 group-hover/search:scale-125 group-hover/search:rotate-90 transition-all duration-300"}),i.jsx("input",{type:"text",placeholder:"Pesquisar entradas...",value:h,onChange:L=>f(L.target.value),className:"bg-white/10 border border-white/20 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 text-sm hover:bg-white/15 hover:border-white/30 focus:scale-105 transition-all duration-300 w-full"}),i.jsx("div",{className:"absolute inset-0 rounded-lg ring-1 ring-white/0 group-hover/search:ring-white/20 transition-all duration-300 pointer-events-none"})]}),i.jsxs("select",{value:m,onChange:L=>y(L.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-white/30 text-sm hover:bg-white/15 hover:border-white/30 hover:scale-105 transition-all duration-300",children:[i.jsx("option",{value:"week",children:"Esta semana"}),i.jsx("option",{value:"month",children:"Este mês"}),i.jsx("option",{value:"year",children:"Este ano"})]})]})]}),i.jsx("div",{className:"space-y-5 relative z-10",children:yo().length===0?i.jsxs("div",{className:"text-center py-16 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx(bl,{className:"w-20 h-20 text-white/30 mx-auto mb-6 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("h3",{className:"text-xl font-medium text-white/70 mb-3 group-hover:text-white/90 transition-colors duration-300",children:"Nenhuma entrada de humor"}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Comece registrando seu humor usando o botão acima"})]}):yo().map((L,W)=>i.jsxs("div",{className:"group/entry bg-white/5 border border-white/10 rounded-xl p-5 hover:bg-white/10 hover:border-white/20 hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/entry:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${sa(L.mood)} group-hover/entry:scale-110 group-hover/entry:rotate-6 transition-all duration-300`,children:i.jsx("span",{className:"text-2xl group-hover/entry:scale-125 transition-all duration-300",children:fi(L.mood)})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-white group-hover/entry:tracking-wide transition-all duration-300",children:L.cause}),i.jsx("p",{className:"text-sm text-white/70 group-hover/entry:text-white/90 transition-colors duration-300",children:L.notes}),i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-white/50 mt-2 group-hover/entry:text-white/70 transition-colors duration-300",children:[i.jsx(Lt,{className:"w-3 h-3 group-hover/entry:rotate-12 transition-all duration-300"}),i.jsx("span",{children:L.date.toLocaleDateString("pt-BR")}),i.jsx("span",{children:"•"}),i.jsxs("span",{children:["Intensidade: ",L.intensity,"/10"]})]})]})]}),i.jsx("div",{className:"flex space-x-3",children:i.jsxs("button",{onClick:()=>Qh(L),className:"group/delete text-white/50 hover:text-white p-2 hover:scale-125 hover:rotate-12 transition-all duration-300",children:[i.jsx("div",{className:"absolute -inset-2 bg-red-500/10 rounded-full opacity-0 group-hover/delete:opacity-100 transition-opacity duration-300"}),i.jsx(Qt,{className:"w-4 h-4"})]})})]})]},L.id))})]}),s==="analytics"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex items-center space-x-3 mb-6 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Js,{className:"w-6 h-6 text-gray-400 group-hover:text-white transition-all duration-300 group-hover:rotate-12 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-500"})]}),i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:"Estatísticas Mensais"})]}),i.jsx("div",{className:"space-y-4 relative z-10",children:ra().length===0?i.jsxs("div",{className:"text-center py-12 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Js,{className:"w-16 h-16 text-white/30 mx-auto mb-4 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Nenhuma estatística disponível"}),i.jsx("p",{className:"text-white/30 text-sm group-hover:text-white/50 transition-colors duration-300",children:"Registre seu humor para ver análises"})]}):ra().map((L,W)=>i.jsxs("div",{className:"group/stat flex items-center justify-between hover:bg-white/5 p-4 rounded-xl hover:scale-105 transition-all duration-300 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/stat:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-center space-x-4 relative z-10",children:[i.jsx("div",{className:`w-5 h-5 rounded ${L.color} group-hover/stat:scale-125 group-hover/stat:rotate-12 transition-all duration-300`}),i.jsx("span",{className:"text-sm text-gray-300 group-hover/stat:text-white group-hover/stat:font-medium transition-all duration-300",children:L.mood})]}),i.jsxs("div",{className:"flex items-center space-x-2 relative z-10",children:[i.jsxs("span",{className:"text-sm text-gray-400 group-hover/stat:text-white/90 transition-colors duration-300",children:[L.percentage,"%"]}),L.trend==="up"?i.jsx(Gn,{className:"w-4 h-4 text-green-400 group-hover/stat:scale-125 group-hover/stat:rotate-12 transition-all duration-300"}):i.jsx(TL,{className:"w-4 h-4 text-red-400 group-hover/stat:scale-125 group-hover/stat:-rotate-12 transition-all duration-300"})]})]},W))})]}),i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-6 group-hover:tracking-wide transition-all duration-300 relative z-10",children:"Metas e Insights"}),i.jsxs("div",{className:"space-y-6 relative z-10",children:[di().goals.length===0?i.jsxs("div",{className:"text-center py-12 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Yu,{className:"w-16 h-16 text-white/30 mx-auto mb-4 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Nenhuma meta definida"}),i.jsx("p",{className:"text-white/30 text-sm group-hover:text-white/50 transition-colors duration-300",children:"Comece registrando seu humor para definir metas"})]}):di().goals.map((L,W)=>i.jsxs("div",{className:"group/goal flex items-center space-x-4 p-4 bg-white/5 rounded-xl hover:bg-white/10 hover:scale-105 hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/goal:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yu,{className:"w-6 h-6 text-blue-400 group-hover/goal:scale-125 group-hover/goal:rotate-12 transition-all duration-300"}),i.jsx("div",{className:"absolute -inset-2 bg-blue-400/10 rounded-full opacity-0 group-hover/goal:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"text-white font-medium group-hover/goal:tracking-wide transition-all duration-300",children:L.title}),i.jsxs("div",{className:"text-white/70 text-sm group-hover/goal:text-white/90 transition-colors duration-300",children:["Progresso: ",L.progress,"/",L.target," dias"]})]})]},L.id)),di().insights.length===0?i.jsxs("div",{className:"text-center py-12 group/empty",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Yv,{className:"w-16 h-16 text-white/30 mx-auto mb-4 group-hover:text-white/50 transition-all duration-500 group-hover:scale-110 group-hover:rotate-12"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-opacity duration-500"})})]}),i.jsx("p",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300",children:"Nenhuma meta definida"}),i.jsx("p",{className:"text-white/30 text-sm group-hover:text-white/50 transition-colors duration-300",children:"Comece registrando seu humor para definir metas"})]}):di().insights.map((L,W)=>i.jsxs("div",{className:"group/insight flex items-center space-x-4 p-4 bg-white/5 rounded-xl hover:bg-white/10 hover:scale-105 hover:-translate-y-1 transition-all duration-300 hover:shadow-lg relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/insight:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"relative",children:[i.jsx(L.icon,{className:`w-6 h-6 ${L.color} group-hover/insight:scale-125 group-hover/insight:rotate-12 transition-all duration-300`}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/insight:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"text-white font-medium group-hover/insight:tracking-wide transition-all duration-300",children:L.title}),i.jsx("div",{className:"text-white/70 text-sm group-hover/insight:text-white/90 transition-colors duration-300",children:L.value})]})]},L.id))]})]})]}),s==="scheduling"&&i.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl hover:bg-white/15 hover:border-white/30 hover:shadow-3xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"flex items-center space-x-3 mb-8 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(nt,{className:"w-6 h-6 text-gray-400 group-hover:text-white transition-all duration-300 group-hover:rotate-12 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-pulse transition-all duration-500"})]}),i.jsx("h3",{className:"text-xl font-semibold text-white group-hover:tracking-wide transition-all duration-300",children:"Agendar Sessão com Psicólogo"})]}),i.jsxs("div",{className:"space-y-8 relative z-10",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Tipo de Sessão:"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Fe.map((L,W)=>i.jsxs("button",{onClick:()=>I(L.id),className:`group/session p-4 rounded-xl border transition-all duration-300 text-left hover:scale-105 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${b===L.id?"bg-white/10 border-white/30 text-white":"bg-gray-800/30 border-gray-600/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/session:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"font-medium text-sm group-hover/session:tracking-wide transition-all duration-300 relative z-10",children:L.label}),i.jsx("div",{className:"text-xs text-gray-400 mt-2 group-hover/session:text-white/70 transition-colors duration-300 relative z-10",children:L.description}),i.jsx("div",{className:"absolute top-2 right-2 w-1 h-1 bg-white/40 rounded-full opacity-0 group-hover/session:opacity-100 group-hover/session:animate-ping transition-opacity duration-300"})]},L.id))})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("label",{className:"text-sm font-medium text-gray-300 group-hover:text-white/90 transition-colors duration-300",children:"Data:"}),i.jsxs("div",{className:"flex items-center space-x-2 relative z-30",children:[i.jsxs("button",{onClick:Mc,disabled:$===0,className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:rotate-0 relative z-30",title:"Semana anterior",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(Gd,{className:"w-4 h-4 relative z-10"})]}),i.jsxs("button",{onClick:mi,className:"group/today px-3 py-1.5 text-blue-400 hover:text-blue-300 hover:scale-105 transition-all duration-300 bg-blue-500/10 rounded-lg hover:bg-blue-500/20 text-xs font-medium relative z-30",title:"Voltar para esta semana",children:[i.jsx("div",{className:"absolute -inset-2 bg-blue-500/10 rounded-full opacity-0 group-hover/today:opacity-100 transition-opacity duration-300 z-0"}),i.jsx("span",{className:"relative z-10",children:"Hoje"})]}),i.jsxs("button",{onClick:Dc,className:"group/nav p-2 text-gray-400 hover:text-white hover:scale-125 hover:-rotate-12 transition-all duration-300 bg-white/5 rounded-lg hover:bg-white/10 relative z-30",title:"Próxima semana",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full opacity-0 group-hover/nav:opacity-100 transition-opacity duration-300 z-0"}),i.jsx(Wi,{className:"w-4 h-4 relative z-10"})]})]})]}),i.jsx("div",{className:"text-center mb-3",children:i.jsx("span",{className:"text-xs text-white/60",children:$===0?"Esta semana (começando hoje)":$===1?"Próxima semana (segunda a domingo)":`${$} semanas à frente (segunda a domingo)`})}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:Xh($).map((L,W)=>i.jsxs("button",{onClick:()=>{x(L.date),w&&Rc(L.date,w)},className:`group/date p-3 rounded-xl text-center transition-all duration-300 hover:scale-110 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${C===L.date?"bg-white text-black shadow-lg":L.isToday?"bg-blue-500/20 border border-blue-400/30 text-blue-300":"bg-gray-800/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/date:opacity-100 transition-opacity duration-300 z-0"}),i.jsx("div",{className:"text-xs text-gray-400 group-hover/date:font-medium transition-all duration-300 relative z-10",children:L.day}),i.jsx("div",{className:"font-medium group-hover/date:font-bold group-hover/date:scale-110 transition-all duration-300 relative z-10",children:L.dayNumber}),L.month&&i.jsx("div",{className:"text-xs text-gray-500 group-hover/date:text-gray-700 transition-colors duration-300 relative z-10",children:L.month}),L.isToday&&i.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]},L.date))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Horário:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Ce.map((L,W)=>i.jsxs("button",{onClick:()=>{g(L),C&&Rc(C,L)},className:`group/time p-4 rounded-xl text-center transition-all duration-300 hover:scale-105 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${w===L?"bg-white text-black shadow-lg":"bg-gray-800/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/time:opacity-100 transition-opacity duration-300"}),i.jsx("span",{className:"relative z-10 group-hover/time:font-bold group-hover/time:tracking-wide transition-all duration-300",children:L})]},L))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Escolha seu Psicólogo:"}),!C||!w?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Xe,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Selecione uma data e horário primeiro"}),i.jsx("p",{className:"text-white/50 text-sm",children:"Os psicólogos disponíveis aparecerão aqui"})]}):D?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Buscando psicólogos disponíveis..."})]}):k.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(pt,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Nenhum psicólogo disponível para este horário"}),i.jsx("p",{className:"text-white/50 text-sm",children:"Tente outro horário ou data"}),i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-400/20 rounded-lg",children:i.jsx("p",{className:"text-yellow-400 text-xs",children:"💡 Dica: Psicólogos são mostrados apenas quando estão disponíveis no horário selecionado"})}),i.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-400/20 rounded-lg",children:i.jsx("p",{className:"text-blue-400 text-xs",children:"🔍 Buscando psicólogos na coleção 'PsychologistAccount'"})}),i.jsx("div",{className:"p-3 bg-green-500/10 border border-green-400/20 rounded-lg",children:i.jsx("p",{className:"text-green-400 text-xs",children:"✅ Verifique se há psicólogos cadastrados na coleção PsychologistAccount"})})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-center p-3 bg-green-500/10 border border-green-400/20 rounded-lg",children:i.jsxs("p",{className:"text-green-400 text-sm font-medium",children:["✨ ",k.length," psicólogo",k.length>1?"s":""," disponível",k.length>1?"eis":""," para ",w]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map((L,W)=>i.jsxs("button",{onClick:()=>S(L),className:`group/psychologist p-4 rounded-xl border transition-all duration-300 text-left hover:scale-105 hover:-translate-y-1 hover:shadow-lg relative overflow-hidden ${(_==null?void 0:_.id)===L.id?"bg-white/10 border-white/30 text-white ring-2 ring-white/30":"bg-gray-800/30 border-gray-600/30 text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,style:{animationDelay:`${W*100}ms`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover/psychologist:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-start justify-between mb-3 relative z-10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:"text-2xl group-hover/psychologist:scale-125 transition-all duration-300",children:L.avatar}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-sm group-hover/psychologist:tracking-wide transition-all duration-300",children:L.name}),i.jsx("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:L.specialty})]})]}),i.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-500/20 px-2 py-1 rounded-lg",children:[i.jsx("span",{className:"text-yellow-400 text-xs",children:"⭐"}),i.jsx("span",{className:"text-yellow-400 text-xs font-medium",children:L.rating})]})]}),i.jsxs("div",{className:"space-y-2 relative z-10",children:[i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Experiência:"})," ",L.experience]}),i.jsx("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:L.description}),i.jsxs("div",{className:"space-y-1",children:[L.crp&&L.crp!=="CRP não informado"&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"CRP:"})," ",L.crp]}),L.education&&L.education!=="Psicologia"&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Formação:"})," ",L.education]}),L.languages&&L.languages.length>0&&L.languages[0]!=="Português"&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Idiomas:"})," ",L.languages.join(", ")]}),L.approach&&i.jsxs("div",{className:"text-xs text-gray-400 group-hover/psychologist:text-white/70 transition-colors duration-300",children:[i.jsx("span",{className:"font-medium",children:"Abordagem:"})," ",L.approach]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[i.jsx("div",{className:"text-xs text-gray-400 mb-2 group-hover/psychologist:text-white/70 transition-colors duration-300",children:"Horário selecionado:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-sm px-3 py-1 bg-green-500/20 border border-green-400/30 rounded-md text-green-400 font-medium",children:L.selectedTime}),i.jsx("span",{className:"text-xs text-white/60",children:"✓ Disponível"})]})]}),(L.email||L.phone)&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[i.jsx("div",{className:"text-xs text-gray-400 mb-1 group-hover/psychologist:text-white/70 transition-colors duration-300",children:"Contato:"}),i.jsxs("div",{className:"space-y-1",children:[L.email&&i.jsxs("div",{className:"text-xs text-blue-400 group-hover/psychologist:text-blue-300 transition-colors duration-300",children:["📧 ",L.email]}),L.phone&&i.jsxs("div",{className:"text-xs text-green-400 group-hover/psychologist:text-blue-300 transition-colors duration-300",children:["📞 ",L.phone]})]})]})]}),(_==null?void 0:_.id)===L.id&&i.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]},L.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 group-hover:text-white/90 transition-colors duration-300",children:"Observações (opcional):"}),i.jsxs("div",{className:"relative group/textarea",children:[i.jsx("textarea",{value:M,onChange:L=>A(L.target.value),placeholder:"Descreva brevemente o que gostaria de abordar na sessão...",className:"w-full bg-gray-800/50 border border-gray-600/50 rounded-xl p-4 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-white/50 transition-all duration-300 min-h-[100px] hover:bg-gray-800/70 hover:border-gray-500/50 focus:scale-[1.01] hover:shadow-lg focus:shadow-xl"}),i.jsx("div",{className:"absolute inset-0 rounded-xl ring-1 ring-white/0 group-hover/textarea:ring-white/20 group-focus-within/textarea:ring-white/40 transition-all duration-300 pointer-events-none"})]})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsxs("button",{onClick:No,disabled:!C||!w||!b||!_,className:"group/schedule bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-4 rounded-xl font-bold hover:from-green-600 hover:to-green-700 transform hover:scale-110 transition-all duration-300 flex items-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl hover:shadow-green-500/25 relative overflow-hidden disabled:hover:scale-100",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover/schedule:opacity-100 transition-opacity duration-300 group-hover/schedule:animate-pulse"}),i.jsx(Xe,{className:"w-5 h-5 group-hover/schedule:rotate-12 group-hover/schedule:scale-125 transition-all duration-300 relative z-10"}),i.jsx("span",{className:"relative z-10 group-hover/schedule:tracking-wide group-hover/schedule:font-bold transition-all duration-300",children:_?`Agendar com ${_.name.split(" ")[0]}`:"Agendar Sessão"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-1 h-1 bg-white/50 rounded-full opacity-0 group-hover/schedule:opacity-100 group-hover/schedule:animate-ping transition-opacity duration-300"}),i.jsx("div",{className:"absolute -bottom-1 -left-1 w-0.5 h-0.5 bg-white/30 rounded-full opacity-0 group-hover/schedule:opacity-100 group-hover/schedule:animate-ping transition-opacity duration-300",style:{animationDelay:"0.2s"}})]})})]})]})]})})},ju=()=>{const{roomCode:t}=fh(),e=gt(),r=Sn();console.log("🔍 LiveChat renderizado com parâmetros:",{urlRoomCode:t,pathname:r.pathname});const[n,s]=v.useState(""),a=v.useRef(null),[o,l]=v.useState([]),{user:c}=ze(),[d,h]=v.useState(""),[f,m]=v.useState(null),[y,N]=v.useState("");v.useState(""),v.useState("all");const[E,C]=v.useState("conversas"),[x,w]=v.useState(null);v.useState(!1);const[g,b]=v.useState("disconnected");v.useState({name:"",description:"",category:"saude-mental",isPrivate:!1,maxMembers:100});const I=v.useRef(null),M=()=>{var O;(O=I.current)==null||O.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{M()},[o]),v.useEffect(()=>{console.log("🔍 useEffect detectando código da sala:",{urlRoomCode:t,pathname:r.pathname}),t?(console.log("🏠 Código da sala detectado na URL:",t),s(t),m(t),h(t),console.log("✅ Estado atualizado com código da sala:",t)):console.log("ℹ️ Nenhum código de sala na URL")},[t,r.pathname]);const A=v.useCallback(()=>{const O=c==null?void 0:c.uid;if(!O||!n)return null;const[U,q]=[O,n].sort();return`${U}_${q}`},[c==null?void 0:c.uid,n]);v.useEffect(()=>{const O=A();if(!O)return;console.log("🔌 Tentando conectar WebSocket para sala:",O),b("connecting");const U=()=>{try{const q=(c==null?void 0:c.idToken)||localStorage.getItem("firebase_token");console.log("🔑 Token disponível:",!!q,"User:",c==null?void 0:c.uid);const ue=`ws://localhost:8000/ws/chat/${O}/?token=${q}`;console.log(`🌐 Conectando ao backend Django: ${ue}`);const re=new WebSocket(ue);a.current=re;const H=setTimeout(()=>{re.readyState===WebSocket.CONNECTING&&(console.log("⏰ Timeout na conexão WebSocket"),re.close(),b("error"))},5e3);re.onopen=function(fe){clearTimeout(H),console.log("✅ WebSocket conectado com sucesso ao backend Django!"),b("connected"),re.send(JSON.stringify({type:"ping",message:"Teste de conexão"}))},re.onmessage=function(fe){console.log("📨 Mensagem recebida do backend:",fe.data);try{const xe=JSON.parse(fe.data);switch(xe.type){case"connection_established":console.log("✅ Conexão estabelecida:",xe);break;case"pong":console.log("🏓 Pong recebido - conexão ativa");break;case"chat_message":if(console.log("💬 Mensagem de chat recebida:",xe),console.log("🆔 É própria mensagem?",xe.is_own),xe.is_own)console.log("⏭️ Mensagem própria ignorada (já foi adicionada localmente)");else{console.log("✅ Adicionando mensagem de outro usuário");const K={id:Date.now()+Math.random(),message:xe.message,isOwn:!1,user:xe.user_name||"Usuário",user_id:xe.user_id,user_avatar:xe.user_avatar,time:new Date(xe.timestamp).toLocaleTimeString(),status:"delivered",timestamp:xe.timestamp};l(Y=>Y.some(Fe=>Fe.message===K.message&&Fe.user_id===K.user_id&&Math.abs(new Date(Fe.timestamp)-new Date(K.timestamp))<1e3)?(console.log("⏭️ Mensagem duplicada ignorada"),Y):(console.log("📝 Adicionando nova mensagem:",K),[...Y,K]))}break;case"message_sent":console.log("✅ Confirmação: Mensagem enviada com sucesso!"),l(K=>K.map(Y=>Y.isOwn&&Y.status==="sending"&&Y.message===xe.message?{...Y,status:"delivered"}:Y));break;case"error":console.error("❌ Erro do servidor:",xe.message);break;default:console.log("⚠️ Tipo de mensagem desconhecido:",xe.type)}}catch(xe){console.error("❌ Erro ao processar mensagem:",xe)}},re.onclose=function(fe){clearTimeout(H),console.log("ℹ️ WebSocket fechado:",fe.code,fe.reason),b("disconnected"),a.current=null,fe.code!==1e3&&setTimeout(()=>{A()&&(console.log("🔄 Tentando reconectar..."),U())},3e3)},re.onerror=function(fe){clearTimeout(H),console.error("❌ Erro na conexão WebSocket:",fe),b("error"),a.current=null}}catch(q){console.error("❌ Erro ao criar WebSocket:",q),b("error"),a.current=null}};return U(),()=>{a.current&&a.current.readyState===WebSocket.OPEN&&a.current.close(1e3,"Componente desmontado")}},[A,c==null?void 0:c.uid,c==null?void 0:c.idToken]);const _=O=>{switch(O){case"sending":return i.jsx(Lt,{className:"w-3 h-3 text-white/40 animate-pulse"});case"delivered":return i.jsx(Zs,{className:"w-3 h-3 text-white/60"});case"read":return i.jsx(WE,{className:"w-3 h-3 text-blue-400"});default:return null}},S=()=>{if(console.log("🚀 handleSendMessage chamado!"),console.log("📝 Mensagem:",y),!y.trim()){console.log("❌ Mensagem vazia, não enviando");return}const O=y.trim(),U=new Date().toISOString(),q={id:Date.now()+Math.random(),message:O,isOwn:!0,user:(c==null?void 0:c.displayName)||(c==null?void 0:c.name)||"Você",user_id:(c==null?void 0:c.uid)||"local_user",time:new Date().toLocaleTimeString(),status:"sending",timestamp:U};l(re=>[...re,q]),console.log("✅ Mensagem própria adicionada ao estado:",q),N("");const ue=a.current;if(ue&&ue.readyState===WebSocket.OPEN){console.log("📤 Enviando via WebSocket para o backend Django:",O);try{const re={type:"chat_message",message:O};ue.send(JSON.stringify(re)),console.log("✅ Mensagem enviada via WebSocket!"),setTimeout(()=>{l(H=>H.map(fe=>fe.id===q.id&&fe.status==="sending"?{...fe,status:"delivered"}:fe))},500)}catch(re){console.error("❌ Erro ao enviar via WebSocket:",re),l(H=>H.map(fe=>fe.id===q.id?{...fe,status:"error"}:fe))}}else console.log("🔌 WebSocket não está conectado"),l(re=>re.map(H=>H.id===q.id?{...H,status:"offline"}:H))},k=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),S())},T=()=>{l([]),console.log("🧹 Todas as mensagens foram limpas!")},D=()=>{l(O=>O.filter(U=>U.isOwn)),console.log("🧹 Mensagens de outros usuários foram limpas!")},P=()=>{const O={id:Date.now()+Math.random(),message:"Mensagem de teste do usuário remoto",isOwn:!1,user:"Usuário Teste",user_id:"test_user_123",user_avatar:null,time:new Date().toLocaleTimeString(),status:"delivered",timestamp:new Date().toISOString()};console.log("🧪 Adicionando mensagem de teste:",O),l(U=>[...U,O])},$=()=>{switch(g){case"connected":return"bg-green-400";case"connecting":return"bg-yellow-400 animate-pulse";case"error":return"bg-red-400";default:return"bg-gray-400"}},ae=()=>{switch(g){case"connected":return"Online (Tempo Real)";case"connecting":return"Conectando...";case"error":return"Erro de Conexão";default:return"Desconectado"}},oe=(O,U,q)=>i.jsxs("button",{onClick:()=>C(O),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 ${E===O?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:text-white"}`,children:[i.jsx(q,{className:"w-4 h-4"}),i.jsx("span",{children:U})]}),F={total:o.length,own:o.filter(O=>O.isOwn).length,others:o.filter(O=>!O.isOwn).length,uniqueUsers:Array.from(new Set(o.filter(O=>!O.isOwn).map(O=>O.user_id))).length};return i.jsxs("div",{className:"w-full",children:[i.jsxs(It,{variant:"glass",padding:"lg",children:[i.jsxs(It.Header,{children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(nt,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:t?`Chat - Sala: ${t}`:"Conversas em Tempo Real"}),t&&i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("span",{className:"text-sm text-green-400 bg-green-400/10 px-2 py-1 rounded-full",children:["URL: /home/chat/",t]})})]}),i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx(zs,{type:"text",placeholder:"Digite o código da sala (ex: sala1208)",value:d,onChange:O=>h(O.target.value),variant:"glass",size:"sm",className:"flex-1"}),i.jsx("button",{onClick:()=>{if(!d.trim())return;const O=d.trim();console.log("🚪 Entrando na sala:",O);const U=`/home/chat/${O}`;console.log("🔗 Atualizando URL para:",U),e(U,{replace:!0}),s(O),m(O),console.log("✅ Sala configurada e URL atualizada")},disabled:!d.trim(),className:"px-3 py-2 bg-white text-black rounded-lg disabled:opacity-50",children:"Entrar"})]}),i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[oe("conversas","Conversas",nt),oe("psicologos","Psicólogos",He),oe("grupos","Grupos",pt)]})})]}),i.jsx(It.Content,{children:!n&&!t&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nt,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/70 mb-2",children:"Digite um código de sala para começar"}),i.jsx("p",{className:"text-white/50",children:"Ou use a URL diretamente: /home/chat/nomeddasala"})]})})]}),(n||t)&&i.jsxs(It,{variant:"glass",className:"overflow-hidden mt-4",children:[i.jsx("div",{className:"bg-white/5 p-4 border-b border-white/10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>{m(null),w(null),s(""),e("/home/chat",{replace:!0})},className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(li,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center",children:i.jsx(He,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:"Conversa"}),i.jsxs("p",{className:"text-sm text-white/70",children:["Sala: ",t||n]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${$()}`}),i.jsx("span",{className:`text-xs ${g==="connected"?"text-green-400":g==="connecting"?"text-yellow-400":"text-red-400"}`,children:ae()})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"text-xs text-white/50 bg-white/10 px-2 py-1 rounded",children:["📊 ",F.total," msgs | 👤 ",F.own," suas | 👥 ",F.others," outros"]}),i.jsx("button",{onClick:P,className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded hover:bg-blue-500/30 transition-colors",title:"Adicionar mensagem de teste",children:"🧪 Teste"}),i.jsx("button",{onClick:D,className:"text-xs bg-orange-500/20 text-orange-300 px-2 py-1 rounded hover:bg-orange-500/30 transition-colors",title:"Limpar mensagens de outros usuários",children:"🧹 Outros"}),i.jsx("button",{onClick:T,className:"text-xs bg-red-500/20 text-red-300 px-2 py-1 rounded hover:bg-red-500/30 transition-colors",title:"Limpar todas as mensagens",children:"🗑️ Tudo"})]})]})}),i.jsx("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:o.length>0?i.jsxs(i.Fragment,{children:[o.map((O,U)=>(console.log(`🔍 Renderizando mensagem ${U}:`,O),i.jsxs("div",{className:`flex ${O.isOwn?"justify-end":"justify-start"} mb-4`,children:[!O.isOwn&&i.jsxs("div",{className:"flex flex-col items-center mr-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-white/10 border-2 border-white/20",children:O.user_avatar?i.jsx("img",{src:O.user_avatar,alt:O.user,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/70 text-lg font-bold",children:O.user.charAt(0).toUpperCase()})}),i.jsx("span",{className:"text-xs text-white/60 mt-1 max-w-20 truncate",children:O.user})]}),i.jsxs("div",{className:`max-w-xs px-4 py-3 rounded-2xl relative ${O.isOwn?"bg-blue-500 text-white rounded-br-md":"bg-white/10 text-white rounded-bl-md border border-white/20"}`,children:[i.jsx("p",{className:"text-sm leading-relaxed",children:O.message}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsx("span",{className:`text-xs ${O.isOwn?"text-blue-100":"text-white/50"}`,children:O.time}),O.isOwn&&i.jsxs("div",{className:"flex items-center space-x-1",children:[_(O.status),O.status==="error"&&i.jsx("span",{className:"text-xs text-red-400",children:"Erro"}),O.status==="offline"&&i.jsx("span",{className:"text-xs text-yellow-400",children:"Offline"})]})]})]}),O.isOwn&&i.jsxs("div",{className:"flex flex-col items-center ml-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-blue-400 border-2 border-blue-300",children:i.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-sm font-bold",children:"Eu"})}),i.jsx("span",{className:"text-xs text-white/60 mt-1",children:"Você"})]})]},O.id))),i.jsx("div",{ref:I})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nt,{className:"w-12 h-12 text-white/30 mx-auto mb-3"}),i.jsx("p",{className:"text-white/50",children:"Nenhuma mensagem ainda"}),i.jsx("p",{className:"text-sm text-white/30",children:"Comece a conversa!"})]})}),i.jsxs("div",{className:"p-4 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(SL,{className:"w-5 h-5"})}),i.jsx(zs,{type:"text",value:y,onChange:O=>N(O.target.value),onKeyPress:k,placeholder:"Digite sua mensagem...",variant:"glass",size:"sm",className:"flex-1",disabled:g!=="connected"}),i.jsx("button",{onClick:S,disabled:!y.trim()||g!=="connected",className:"p-2 bg-white text-black rounded-lg hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Ec,{className:"w-5 h-5"})})]}),g!=="connected"&&i.jsx("div",{className:"text-xs text-yellow-400 mt-2 text-center",children:g==="connecting"?"Conectando ao servidor...":"Sem conexão com o servidor"})]})]})]})},wF=()=>{const[t,e]=v.useState({email:"",password:""}),[r,n]=v.useState(!1),[s,a]=v.useState(!1),[o,l]=v.useState("user"),[c,d]=v.useState(null),[h,f]=v.useState(null),m=w=>{e({...t,[w.target.name]:w.target.value})},y=async w=>{if(w.preventDefault(),!t.email||!t.password){alert("Por favor, preencha todos os campos.");return}a(!0);try{const b=(await s0(vt,t.email,t.password)).user;console.log("Login realizado com sucesso:",b.email),alert("Login realizado com sucesso!"),C(o==="psychologist"?"/psychologist-dashboard":"/home")}catch(g){console.error("Erro no login:",g);let b="Erro ao fazer login.";switch(g.code){case"auth/user-not-found":b="Usuário não encontrado.";break;case"auth/wrong-password":b="Senha incorreta.";break;case"auth/invalid-email":b="Email inválido.";break;case"auth/too-many-requests":b="Muitas tentativas. Tente novamente mais tarde.";break;default:b=g.message}alert(b)}finally{a(!1)}},N=async()=>{a(!0);try{const g=(await U_(vt,BE)).user;console.log("Login com Google realizado com sucesso:",g.email),alert("Login com Google realizado com sucesso!"),C("/home")}catch(w){console.error("Erro no login com Google:",w);let g="Erro ao fazer login com Google.";switch(w.code){case"auth/popup-closed-by-user":g="Login cancelado pelo usuário.";break;case"auth/popup-blocked":g="Popup bloqueado pelo navegador. Permita popups para este site.";break;case"auth/cancelled-popup-request":g="Muitas tentativas de login. Aguarde um momento.";break;case"auth/account-exists-with-different-credential":g="Uma conta já existe com este email usando outro método de login.";break;default:g=w.message}alert(g)}finally{a(!1)}},E=async()=>{if(!t.email){alert("Digite seu e-mail para receber o link de redefinição.");return}try{const{sendPasswordResetEmail:w}=await Sa(async()=>{const{sendPasswordResetEmail:g}=await Promise.resolve().then(()=>BR);return{sendPasswordResetEmail:g}},void 0);await w(vt,t.email),alert("Email de redefinição enviado! Verifique sua caixa de entrada.")}catch(w){console.error("Erro ao enviar email de redefinição:",w);let g="Erro ao enviar email de redefinição.";switch(w.code){case"auth/user-not-found":g="Usuário não encontrado com este email.";break;case"auth/invalid-email":g="Email inválido.";break;case"auth/too-many-requests":g="Muitas tentativas. Tente novamente mais tarde.";break;default:g=w.message}alert(g)}},C=gt(),x=()=>i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(8)].map((w,g)=>i.jsx("div",{className:"absolute top-0 left-1/2 w-px h-full bg-gradient-to-b from-white/20 via-white/5 to-transparent transform-gpu origin-top",style:{transform:`translateX(-50%) rotate(${g*45}deg)`,animation:`pulse ${2+g*.5}s ease-in-out infinite alternate`}},g))});return i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx(x,{}),i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(15)].map((w,g)=>i.jsx("div",{className:"absolute w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`}},g))}),i.jsxs("div",{className:"relative w-full max-w-md z-10 animate-fade-in animate-slide-up",children:[i.jsx("button",{type:"button",onClick:()=>C("/"),className:"absolute -top-2 -left-2 p-2 text-white/80 hover:text-white transition-all duration-300 hover:scale-110 hover:rotate-12 group","aria-label":"Voltar para início",onMouseEnter:()=>f("back"),onMouseLeave:()=>f(null),children:i.jsx(li,{className:`w-6 h-6 transition-all duration-300 ${h==="back"?"drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":""}`})}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center backdrop-blur-md hover:scale-110 hover:rotate-12 transition-all duration-500 hover:bg-white/20 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] group cursor-pointer overflow-hidden",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-8 h-8 object-contain group-hover:brightness-110 transition-all duration-300"})})}),i.jsx("h1",{className:"text-2xl font-semibold text-white mb-1 hover:text-white/90 transition-colors duration-300",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm hover:text-white/80 transition-colors duration-300",children:"Sua Rede de Apoio em Saúde Mental"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl hover:bg-white/[0.07] hover:border-white/20 transition-all duration-500 hover:shadow-[0_20px_60px_rgba(255,255,255,0.1)] group",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-light text-white mb-1 group-hover:text-white/95 transition-colors duration-300",children:"Acesse sua jornada"}),i.jsx("p",{className:"text-white/60 text-sm group-hover:text-white/70 transition-colors duration-300",children:"Faça login para continuar sua evolução pessoal"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(Ki,{className:"w-3 h-3 text-white/40 animate-pulse"}),i.jsx("span",{className:"text-xs text-white/60",children:"Tipo de usuário:"}),i.jsx(Ki,{className:"w-3 h-3 text-white/40 animate-pulse",style:{animationDelay:"0.5s"}})]}),i.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1 border border-white/20 hover:border-white/30 transition-all duration-300 hover:bg-white/15",children:[i.jsxs("button",{type:"button",onClick:()=>l("user"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${o==="user"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(He,{className:`w-3 h-3 mr-1.5 transition-all duration-300 ${o==="user"?"animate-bounce":"group-hover:scale-110"}`}),"Usuário"]}),i.jsxs("button",{type:"button",onClick:()=>l("psychologist"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${o==="psychologist"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(Ri,{className:`w-3 h-3 mr-1.5 transition-all duration-300 ${o==="psychologist"?"animate-pulse":"group-hover:scale-110"}`}),"Profissional"]})]})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1 group",children:[i.jsx("label",{htmlFor:"email",className:"block text-xs font-light text-white/80 group-hover:text-white/90 transition-colors duration-300",children:"E-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(fo,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50 transition-all duration-300 ${c==="email"?"text-white/80 scale-110":"group-hover:text-white/70"}`}),i.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:m,onFocus:()=>d("email"),onBlur:()=>d(null),className:`w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300 text-sm hover:bg-black/60 hover:border-white/30 ${c==="email"?"scale-[1.02] shadow-[0_0_15px_rgba(255,255,255,0.1)]":""}`,placeholder:"seu@email.com",required:!0})]})]}),i.jsxs("div",{className:"space-y-1 group",children:[i.jsx("label",{htmlFor:"password",className:"block text-xs font-light text-white/80 group-hover:text-white/90 transition-colors duration-300",children:"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(ec,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50 transition-all duration-300 ${c==="password"?"text-white/80 scale-110":"group-hover:text-white/70"}`}),i.jsx("input",{type:r?"text":"password",id:"password",name:"password",value:t.password,onChange:m,onFocus:()=>d("password"),onBlur:()=>d(null),className:`w-full pl-9 pr-10 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300 text-sm hover:bg-black/60 hover:border-white/30 ${c==="password"?"scale-[1.02] shadow-[0_0_15px_rgba(255,255,255,0.1)]":""}`,placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-all duration-300 hover:scale-110",children:r?i.jsx(Zl,{className:"w-4 h-4 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]"}):i.jsx(Gi,{className:"w-4 h-4 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center group cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"w-3 h-3 rounded border-white/30 bg-black/40 text-white focus:ring-white/30 focus:ring-2 transition-all duration-300 hover:scale-110"}),i.jsx("span",{className:"ml-2 text-xs text-white/70 group-hover:text-white/90 transition-colors duration-300",children:"Lembrar de mim"})]}),i.jsx("button",{type:"button",onClick:E,className:"text-xs text-white/80 hover:text-white transition-all duration-300 hover:scale-105 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"Esqueceu a senha?"})]}),i.jsxs("button",{type:"submit",disabled:s,className:"w-full py-2.5 px-4 bg-white text-black hover:bg-white/90 disabled:bg-white/60 font-medium rounded-lg transition-all duration-300 transform hover:scale-[1.02] hover:shadow-[0_8px_30px_rgba(255,255,255,0.3)] disabled:scale-100 disabled:cursor-not-allowed shadow-lg text-sm group overflow-hidden relative",onMouseEnter:()=>f("submit"),onMouseLeave:()=>f(null),children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full transition-transform duration-1000 ${h==="submit"&&!s?"translate-x-full":""}`}),s?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin mr-2"}),"Entrando..."]}):i.jsx("span",{className:"relative z-10",children:"Entrar"})]})]}),o==="user"&&i.jsxs("div",{className:"mt-4 animate-fade-in",style:{animationDelay:"0.2s"},children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-white/10"})}),i.jsx("div",{className:"relative flex justify-center text-xs",children:i.jsx("span",{className:"px-4 bg-black text-white/60",children:"ou continue com"})})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2",children:i.jsxs("button",{onClick:N,type:"button",className:"flex items-center justify-center py-1.5 px-4 border border-white/20 rounded-lg text-white/80 hover:text-white hover:border-white/30 transition-all duration-300 text-sm hover:scale-[1.02] hover:bg-white/5 hover:shadow-[0_4px_20px_rgba(255,255,255,0.1)] group relative overflow-hidden",onMouseEnter:()=>f("google"),onMouseLeave:()=>f(null),children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-white/10 via-white/20 to-white/10 opacity-0 transition-opacity duration-300 ${h==="google"?"opacity-100":""}`}),i.jsxs("svg",{className:"w-4 h-4 mr-2 relative z-10 group-hover:scale-110 transition-transform duration-300",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[i.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.37c-.23 1.22-.93 2.25-1.98 2.94v2.45h3.2c1.87-1.72 2.97-4.25 2.97-7.4z",fill:"#4285F4"}),i.jsx("path",{d:"M12 23c2.7 0 4.96-.9 6.62-2.45l-3.2-2.45c-.9.6-2.06.96-3.42.96-2.63 0-4.85-1.77-5.64-4.15H3.01v2.6C4.65 20.98 8.06 23 12 23z",fill:"#34A853"}),i.jsx("path",{d:"M6.36 14.91c-.2-.6-.32-1.24-.32-1.91s.12-1.31.32-1.91V8.49H3.01A11 11 0 0 0 2 12c0 1.76.42 3.41 1.01 4.91l3.35-2z",fill:"#FBBC05"}),i.jsx("path",{d:"M12 5.27c1.47 0 2.8.51 3.84 1.5l2.88-2.88C16.94 2.23 14.7 1.32 12 1.32 8.06 1.32 4.65 3.34 3.01 6.09l3.35 2.6C7.15 7.31 9.37 5.27 12 5.27z",fill:"#EA4335"})]}),i.jsx("span",{className:"relative z-10",children:"Google"})]})})]}),o==="psychologist"&&i.jsx("div",{className:"mt-4 animate-fade-in",style:{animationDelay:"0.3s"},children:i.jsxs("div",{className:"bg-white/10 border border-white/20 rounded-lg p-3 text-center hover:bg-white/15 hover:border-white/30 transition-all duration-300 hover:scale-[1.02] hover:shadow-[0_0_20px_rgba(255,255,255,0.2)] group",children:[i.jsx(Ri,{className:"w-5 h-5 text-white mx-auto mb-1.5 group-hover:scale-110 group-hover:animate-pulse transition-transform duration-300"}),i.jsx("p",{className:"text-white text-xs font-medium group-hover:text-white transition-colors duration-300",children:"Login Profissional"}),i.jsx("p",{className:"text-white/80 text-xs group-hover:text-white transition-colors duration-300",children:"Psicólogos devem usar suas credenciais registradas"})]})}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-white/70 text-sm",children:["Não tem uma conta?"," ",i.jsx("button",{onClick:()=>C("/register"),className:"text-white hover:text-white/80 font-medium transition-all duration-300 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)] hover:scale-105 inline-block",children:"Cadastre-se"})]})})]}),i.jsx("div",{className:"mt-6 text-center text-white/50 text-xs animate-fade-in",style:{animationDelay:"0.5s"},children:i.jsxs("p",{className:"hover:text-white/70 transition-colors duration-300 cursor-default",children:["Conecte-se, Entenda-se, ",i.jsx("span",{className:"text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.3)] transition-all duration-300",children:"Evolua."})]})})]})]})},bS=()=>{const[t,e]=v.useState([]),[r,n]=v.useState(0),[s,a]=v.useState(!0),{user:o}=ze(),l=async()=>{if(!(o!=null&&o.uid)){e([]),n(0),a(!1);return}try{a(!0);const m=await _s.getUserNotifications(o.uid);e(m);const y=m.filter(N=>!N.read);n(y.length)}catch(m){console.error("Erro ao buscar notificações:",m),e([]),n(0)}finally{a(!1)}},c=async m=>{try{await _s.markNotificationAsRead(m),e(y=>y.map(N=>N.id===m?{...N,read:!0}:N)),n(y=>Math.max(0,y-1))}catch(y){console.error("Erro ao marcar notificação como lida:",y)}},d=async()=>{if(o!=null&&o.uid)try{await _s.markAllNotificationsAsRead(o.uid),e(m=>m.map(y=>({...y,read:!0}))),n(0)}catch(m){console.error("Erro ao marcar todas como lidas:",m)}},h=async m=>{try{await _s.deleteNotification(m),e(N=>N.filter(E=>E.id!==m));const y=t.find(N=>N.id===m);y&&!y.read&&n(N=>Math.max(0,N-1))}catch(y){console.error("Erro ao deletar notificação:",y)}},f=async()=>{if(o!=null&&o.uid)try{await _s.clearAllNotifications(o.uid),e([]),n(0)}catch(m){console.error("Erro ao limpar notificações:",m)}};return v.useEffect(()=>{l()},[o==null?void 0:o.uid]),{notifications:t,unreadCount:r,loading:s,fetchNotifications:l,markAsRead:c,markAllAsRead:d,deleteNotification:h,clearAllNotifications:f}},NS=Yt.memo(({activeTab:t,setActiveTab:e,onStartTour:r})=>{const[n,s]=v.useState(!1),[a,o]=v.useState(!1),[l,c]=v.useState(""),{user:d,loading:h}=ze(),{unreadCount:f}=bS(),m=gt(),y=v.useRef(null),N=v.useRef(null),E=v.useRef(null),C=v.useCallback(()=>{s(_=>!_),o(!1)},[]),x=v.useCallback(()=>{o(_=>!_),s(!1)},[]),w=v.useCallback(()=>{s(!1),o(!1)},[]),g=v.useMemo(()=>[{name:"Início",tab:"home",icon:Lp,path:"/home"},{name:"Chat",tab:"chat",icon:nt,path:"/home/chat"},{name:"Diário",tab:"diary",icon:Oa,path:"/home/diary"},{name:"Humor",tab:"humor",icon:Js,path:"/home/humor"},{name:"Grupos",tab:"groups",icon:Xe,path:"/home/groups"},{name:"Notificações",tab:"notifications",icon:$n,path:"/home/notifications"},{name:"Configurações",tab:"settings",icon:Di,path:"/home/settings"},{name:"Meu Perfil",tab:"profile",icon:He,path:"/home/profile"}],[]),b=v.useCallback(_=>{m(_.path),w()},[m,w]),I=v.useCallback(async()=>{try{const{auth:_}=await Sa(async()=>{const{auth:S}=await Promise.resolve().then(()=>Mp);return{auth:S}},void 0);await _.signOut(),m("/login"),w()}catch(_){console.error("Erro ao sair:",_),alert("Erro ao sair. Tente novamente.")}},[m,w]),M=v.useCallback(_=>{_.preventDefault(),l.trim()&&console.log("Searching for:",l)},[l]),A=v.useCallback(_=>{c(_.target.value)},[]);return v.useEffect(()=>{const _=S=>{y.current&&!y.current.contains(S.target)&&N.current&&!N.current.contains(S.target)&&w()};return(n||a)&&(document.addEventListener("mousedown",_),document.addEventListener("touchstart",_)),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_)}},[n,a,w]),v.useEffect(()=>{const _=S=>{S.key==="Escape"&&w()};return(n||a)&&document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[n,a,w]),v.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),h?i.jsx("header",{className:"bg-black border-b border-white/20 sticky top-0 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),i.jsx("span",{className:"text-white/70",children:"Carregando..."})]})})}):i.jsx("header",{className:"bg-black border-b border-white/20 sticky top-0 z-30",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{className:"lg:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors duration-200",onClick:C,"aria-label":"Abrir menu de navegação","aria-expanded":n,"aria-controls":"mobile-menu",children:n?i.jsx(Zt,{className:"w-5 h-5"}):i.jsx(JE,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:()=>m("/home"),className:"flex items-center space-x-3 group","aria-label":"Ir para página inicial",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-5 h-5 object-contain group-hover:scale-105 transition-transform duration-200",loading:"eager"})}),i.jsx("span",{className:"text-white font-semibold text-lg group-hover:text-white/90 transition-colors duration-200",children:"Sereno"})]}),i.jsx("div",{className:"hidden lg:block ml-8",children:i.jsx("form",{onSubmit:M,className:"relative",children:i.jsx(zs,{ref:E,type:"text",placeholder:"Pesquisar posts, grupos, pessoas...",value:l,onChange:A,variant:"glass",size:"sm",radius:"xl",className:"w-80",leftIcon:yr,onLeftIconClick:()=>M({preventDefault:()=>{}}),"aria-label":"Pesquisar na plataforma"})})})]}),i.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-5",children:[g.slice(0,4).map(_=>i.jsx("button",{onClick:()=>b(_),className:`p-2 rounded-lg transition-colors duration-200 ${t===_.tab?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"aria-label":`Navegar para ${_.name}`,"aria-current":t===_.tab?"page":void 0,children:i.jsx(_.icon,{className:"w-5 h-5","aria-hidden":"true"})},_.name)),i.jsxs("button",{onClick:()=>b(g.find(_=>_.tab==="notifications")),className:`p-2 rounded-lg transition-colors duration-200 relative ${t==="notifications"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"aria-label":"Ver notificações","aria-current":t==="notifications"?"page":void 0,children:[i.jsx($n,{className:"w-5 h-5","aria-hidden":"true"}),f>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:f})]}),i.jsx("button",{onClick:()=>b(g.find(_=>_.tab==="settings")),className:`p-2 rounded-lg transition-colors duration-200 ${t==="settings"?"bg-white/20 text-white":"text-white/70 hover:text-white hover:bg-white/10"}`,"aria-label":"Configurações","aria-current":t==="settings"?"page":void 0,children:i.jsx(Di,{className:"w-5 h-5","aria-hidden":"true"})}),i.jsx("button",{onClick:r,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-200",title:"Iniciar tour do aplicativo","aria-label":"Iniciar tour do aplicativo",children:i.jsx(Jv,{className:"w-5 h-5","aria-hidden":"true"})})]}),d?i.jsxs("div",{className:"relative",ref:N,children:[i.jsxs("button",{className:"flex items-center space-x-3 text-white/70 hover:text-white transition-colors duration-200 p-2 rounded-lg hover:bg-white/10",onClick:x,"aria-label":"Menu do usuário","aria-expanded":a,"aria-haspopup":"true",children:[i.jsx(He,{className:"w-5 h-5","aria-hidden":"true"}),i.jsx("span",{className:"text-sm font-light",children:d.displayName||"Usuário"})]}),a&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-black border border-white/20 rounded-lg shadow-lg py-1 z-50",children:[i.jsxs("button",{onClick:()=>{m("/home/profile"),o(!1)},className:"w-full text-left px-4 py-2 text-white hover:bg-white/10 transition-colors duration-200 flex items-center space-x-2","aria-label":"Ver meu perfil",children:[i.jsx(He,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Meu Perfil"})]}),i.jsxs("button",{onClick:()=>{m("/home/settings"),o(!1)},className:"w-full text-left px-4 py-2 text-white hover:bg-white/10 transition-colors duration-200 flex items-center space-x-2","aria-label":"Configurações do perfil",children:[i.jsx(Di,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Configurações"})]}),i.jsxs("button",{onClick:I,className:"w-full text-left px-4 py-2 text-white hover:bg-white/10 transition-colors duration-200 flex items-center space-x-2","aria-label":"Sair da conta",children:[i.jsx(Op,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Sair"})]})]})]}):i.jsx("button",{onClick:()=>m("/login"),className:"px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200","aria-label":"Fazer login",children:"Login"})]})]}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden",onClick:w,style:{opacity:n?1:0,transition:"opacity 150ms ease-in-out",pointerEvents:n?"auto":"none"}}),i.jsxs("div",{ref:y,className:"fixed left-0 top-0 h-full w-80 bg-black/95 border-r border-white/20 z-50 lg:hidden transform transition-transform duration-200 ease-in-out flex flex-col",style:{transform:n?"translateX(0)":"translateX(-100%)",pointerEvents:n?"auto":"none"},children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-5 h-5 object-contain"})}),i.jsx("span",{className:"text-white font-semibold text-lg",children:"Sereno"})]}),i.jsx("button",{onClick:w,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-200","aria-label":"Fechar menu",children:i.jsx(Zt,{className:"w-5 h-5"})})]}),d&&i.jsx("div",{className:"p-4 border-b border-white/20 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:i.jsx(He,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-white font-medium truncate text-sm",children:d.displayName||"Usuário"}),i.jsx("div",{className:"text-white/60 text-xs truncate",children:d.email||""})]})]})}),i.jsx("div",{className:"p-4 border-b border-white/20 flex-shrink-0",children:i.jsx("form",{onSubmit:M,className:"relative",children:i.jsx(zs,{type:"text",placeholder:"Pesquisar...",value:l,onChange:A,variant:"glass",size:"sm",radius:"xl",className:"w-full",leftIcon:yr,onLeftIconClick:()=>M({preventDefault:()=>{}}),"aria-label":"Pesquisar na plataforma"})})}),i.jsx("div",{className:"flex-1 overflow-y-auto py-4 min-h-0",children:i.jsxs("div",{className:"space-y-1 px-4",children:[g.map(_=>i.jsxs("button",{onClick:()=>b(_),className:`w-full flex items-center justify-between p-3 rounded-lg transition-all duration-200 ${t===_.tab?"bg-white/20 text-white":"text-white/80 hover:bg-white/10 hover:text-white"}`,"aria-label":`Navegar para ${_.name}`,"aria-current":t===_.tab?"page":void 0,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${t===_.tab?"bg-white/20":"bg-white/10"}`,children:i.jsx(_.icon,{className:`w-4 h-4 ${t===_.tab?"text-white":"text-white/70"}`,"aria-hidden":"true"})}),i.jsx("span",{className:"font-medium text-sm",children:_.name})]}),i.jsx(Wi,{className:"w-4 h-4 text-white/40","aria-hidden":"true"})]},_.name)),i.jsxs("button",{onClick:()=>{r(),w()},className:"w-full flex items-center justify-between p-3 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition-all duration-200","aria-label":"Ajuda e tour do aplicativo",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-white/10",children:i.jsx(Jv,{className:"w-4 h-4 text-white/70","aria-hidden":"true"})}),i.jsx("span",{className:"font-medium text-sm",children:"Ajuda e Tour"})]}),i.jsx(Wi,{className:"w-4 h-4 text-white/40","aria-hidden":"true"})]})]})}),i.jsx("div",{className:"p-4 border-t border-white/20 flex-shrink-0",children:d?i.jsxs("button",{onClick:I,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200","aria-label":"Sair da conta",children:[i.jsx(Op,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"Sair"})]}):i.jsx("button",{onClick:()=>{m("/login"),w()},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-white text-black rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200","aria-label":"Fazer login",children:i.jsx("span",{children:"Login"})})})]})]})]})})});NS.displayName="Header";const yF=()=>{const t=v.useRef(null);return v.useEffect(()=>{const e=t.current,r=e.getContext("2d");let n;const s=()=>{e.width=window.innerWidth,e.height=window.innerHeight};s(),window.addEventListener("resize",s);const a=[];class o{constructor(d,h,f,m,y){this.y=d,this.amplitude=h,this.frequency=f,this.speed=m,this.color=y,this.offset=0,this.opacity=.1}update(){this.offset+=this.speed}draw(){r.beginPath(),r.moveTo(0,this.y);for(let h=0;h<=e.width;h+=2){const f=this.y+Math.sin((h+this.offset)*this.frequency)*this.amplitude;r.lineTo(h,f)}r.lineTo(e.width,e.height),r.lineTo(0,e.height),r.closePath();const d=r.createLinearGradient(0,this.y-this.amplitude,0,this.y+this.amplitude);d.addColorStop(0,`${this.color}00`),d.addColorStop(.5,`${this.color}${Math.floor(this.opacity*255).toString(16).padStart(2,"0")}`),d.addColorStop(1,`${this.color}00`),r.fillStyle=d,r.fill()}}a.push(new o(e.height*.3,30,.02,.5,"#ffffff")),a.push(new o(e.height*.6,40,.015,.3,"#ffffff")),a.push(new o(e.height*.8,25,.025,.7,"#ffffff"));const l=()=>{r.clearRect(0,0,e.width,e.height),a.forEach(c=>{c.update(),c.draw()}),n=requestAnimationFrame(l)};return l(),()=>{window.removeEventListener("resize",s),cancelAnimationFrame(n)}},[]),i.jsx("canvas",{ref:t,className:"fixed inset-0 pointer-events-none z-0 animation-initial animate-fade-in-scale animation-delay-600",style:{background:"transparent"}})},vF=({onOpenHumorTab:t})=>{const{user:e}=ze(),[r,n]=v.useState([{day:"Seg",mood:0,energy:0},{day:"Ter",mood:0,energy:0},{day:"Qua",mood:0,energy:0},{day:"Qui",mood:0,energy:0},{day:"Sex",mood:0,energy:0},{day:"Sáb",mood:0,energy:0},{day:"Dom",mood:0,energy:0}]),[s,a]=v.useState(5),[o,l]=v.useState(5),[c,d]=v.useState(5),[h,f]=v.useState(!1),[m,y]=v.useState(null),N=10,E=v.useRef(null),[C,x]=v.useState(!1);v.useEffect(()=>{(async()=>{if(!e)return;const I=await cf.getUserMoodHistory(e.uid,7),M=[0,0,0,0,0,0,0].map((A,_)=>{const S=["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"][_],k=I.filter(P=>{var ae;const $=(ae=P.recordedAt)!=null&&ae.toDate?P.recordedAt.toDate():new Date(P.recordedAt);return $&&$.getDay()===(_+1)%7}),T=k.length?Math.round(k.reduce((P,$)=>P+($.intensity||0),0)/k.length):0,D=k.length?Math.round(k.reduce((P,$)=>P+($.energy||0),0)/k.length):0;return{day:S,mood:T,energy:D}});n(M)})()},[e]);const w=async()=>{if(!e){alert("Usuário não autenticado");return}if(s<0||s>10||o<0||o>10||c<0||c>10){alert("Por favor, verifique se todos os valores estão entre 0 e 10");return}f(!0);try{const b={intensity:parseInt(s),energy:parseInt(o),stability:parseInt(c),notes:"Check-in diário",tags:["daily","checkin"],date:new Date().toISOString().split("T")[0],timestamp:new Date().toISOString()};console.log("Salvando check-in no Firebase:",b);const I=await cf.recordMood(e.uid,b);if(I&&I.success){console.log("Check-in salvo com sucesso:",I.moodId),y(new Date);try{const M=await cf.getUserMoodHistory(e.uid,7),A=["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"].map((_,S)=>{const k=M.filter(P=>{var ae;const $=(ae=P.recordedAt)!=null&&ae.toDate?P.recordedAt.toDate():new Date(P.recordedAt);return $&&$.getDay()===(S+1)%7}),T=k.length?Math.round(k.reduce((P,$)=>P+($.intensity||0),0)/k.length):0,D=k.length?Math.round(k.reduce((P,$)=>P+($.energy||0),0)/k.length):0;return{day:_,mood:T,energy:D}});n(A)}catch(M){console.warn("Erro ao atualizar histórico, mas check-in foi salvo:",M)}setTimeout(()=>{a(5),l(5),d(5)},1e3)}else throw new Error("Falha ao salvar check-in no Firebase")}catch(b){console.error("Erro ao salvar check-in:",b);let I="Erro ao salvar check-in. Tente novamente.";b.code==="permission-denied"?I="Erro de permissão. Verifique se você está logado.":b.code==="unavailable"?I="Serviço temporariamente indisponível. Tente novamente em alguns minutos.":b.code==="network-error"&&(I="Erro de conexão. Verifique sua internet."),alert(I)}finally{f(!1)}},g=({value:b,onChange:I,label:M})=>i.jsxs("div",{className:"space-y-2 group/slider",children:[i.jsxs("label",{className:"text-sm font-medium text-white/80 group-hover/slider:text-white transition-colors duration-300",children:[M,": ",b,"/10"]}),i.jsxs("div",{className:"relative h-2 bg-white/10 rounded-full overflow-hidden group-hover/slider:bg-white/20 transition-all duration-300",children:[i.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-full"}),i.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-white/60 to-white/80 rounded-full transition-all duration-300 group-hover/slider:from-white/80 group-hover/slider:to-white shadow-lg group-hover/slider:shadow-white/25",style:{width:`${b/N*100}%`}}),i.jsx("div",{className:"absolute top-1/2 w-5 h-5 bg-white rounded-full shadow-lg transform -translate-y-1/2 cursor-pointer transition-all duration-300 hover:scale-110 hover:shadow-xl group-hover/slider:scale-110 group-hover/slider:shadow-2xl group-hover/slider:shadow-white/40 ring-2 ring-white/20 group-hover/slider:ring-white/40",style:{left:`${b/N*100}%`,marginLeft:"-10px"},onMouseDown:A=>{const _=k=>{const T=A.currentTarget.parentElement.getBoundingClientRect(),D=Math.max(0,Math.min(N,Math.round((k.clientX-T.left)/T.width*N)));I(D)},S=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",S)}}),i.jsx("input",{type:"range",min:"0",max:"10",value:b,onChange:A=>I(parseInt(A.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex justify-between text-xs text-white/40 group-hover/slider:text-white/60 transition-colors duration-300",children:[i.jsx("span",{children:"0"}),i.jsx("span",{children:"5"}),i.jsx("span",{children:"10"})]})]});return i.jsxs("div",{className:"space-y-6 animation-initial animate-fade-in-right animation-delay-200",children:[i.jsxs("div",{className:"group bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:from-white/10 hover:to-white/15 transition-all duration-500 hover:shadow-2xl hover:shadow-white/5 hover:border-white/30 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 animate-pulse"}),i.jsxs("div",{className:"flex items-center space-x-2 mb-6 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Xe,{className:"w-5 h-5 text-white/80 group-hover:text-white transition-colors duration-300 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full blur opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:scale-150"}),i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsx("h2",{className:"text-lg font-semibold text-white group-hover:text-white/90 transition-all duration-300 group-hover:tracking-wide",children:"Check-in Diário"}),m&&i.jsxs("div",{className:"flex items-center space-x-2 ml-auto text-green-400 text-sm",children:[i.jsx(tn,{className:"w-4 h-4"}),i.jsxs("span",{children:["Salvo às ",m.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]}),i.jsxs("div",{className:"space-y-6 relative z-10",children:[i.jsx(g,{value:s,onChange:a,label:"Intensidade"}),i.jsx(g,{value:o,onChange:l,label:"Energia"}),i.jsx(g,{value:c,onChange:d,label:"Estabilidade"}),i.jsx("button",{onClick:w,disabled:h,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-300 transform ${h?"bg-gray-500 text-gray-300 cursor-not-allowed scale-100":m?"bg-green-500 text-white hover:bg-green-600 hover:scale-105 hover:shadow-xl hover:shadow-green-500/25":"bg-gradient-to-r from-white to-gray-200 text-black hover:from-gray-200 hover:to-gray-300 hover:scale-105 hover:shadow-xl hover:shadow-white/25"} shadow-lg`,children:h?i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"}),i.jsx("span",{children:"Salvando..."})]}):m?i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(tn,{className:"w-4 h-4"}),i.jsx("span",{children:"Check-in Salvo!"})]}):"Salvar Check-in"})]}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),i.jsxs("div",{ref:E,className:`group bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:from-white/10 hover:to-white/15 transition-all duration-500 hover:shadow-2xl hover:shadow-white/5 hover:border-white/30 relative overflow-hidden ${C?"ring-2 ring-white/50":""}`,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 animate-pulse"}),i.jsxs("div",{className:"flex items-center space-x-2 mb-12 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Gn,{className:"w-5 h-5 text-white/80 group-hover:text-white transition-colors duration-300 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full blur opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:scale-150"}),i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsx("h2",{className:"text-lg font-semibold text-white group-hover:text-white/90 transition-all duration-300 group-hover:tracking-wide",children:"Tendência Semanal"})]}),i.jsxs("div",{className:"space-y-4 relative z-10",children:[i.jsx("div",{className:"flex items-end justify-between h-32 px-2",children:r.map((b,I)=>i.jsxs("div",{className:"flex flex-col items-center flex-1 group/day",children:[i.jsxs("div",{className:"relative w-full max-w-[20px] flex flex-col items-center space-y-1",children:[i.jsx("div",{className:"w-full bg-gradient-to-t from-gray-400/70 to-gray-300/70 rounded-sm transition-all duration-500 hover:from-gray-400 hover:to-gray-300 group-hover/day:scale-110 group-hover/day:shadow-lg group-hover/day:shadow-gray-400/25 relative overflow-hidden",style:{height:`${b.energy/N*80}px`,minHeight:"8px"},children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover/day:opacity-100 transition-opacity duration-500 group-hover/day:animate-pulse"})}),i.jsx("div",{className:"w-full bg-gradient-to-t from-white/70 to-gray-200/70 rounded-sm transition-all duration-500 hover:from-white hover:to-gray-200 group-hover/day:scale-110 group-hover/day:shadow-lg group-hover/day:shadow-white/25 relative overflow-hidden",style:{height:`${b.mood/N*80}px`,minHeight:"8px"},children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover/day:opacity-100 transition-opacity duration-500 group-hover/day:animate-pulse"})})]}),i.jsx("span",{className:"text-xs text-white/60 font-medium group-hover/day:text-white transition-colors duration-300 group-hover/day:scale-110 group-hover/day:font-semibold",children:b.day}),i.jsx("div",{className:"absolute top-2 right-2 w-1 h-1 bg-white/30 rounded-full opacity-0 group-hover/day:opacity-100 group-hover/day:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"absolute top-4 right-6 w-0.5 h-0.5 bg-white/20 rounded-full opacity-0 group-hover/day:opacity-100 group-hover/day:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.5s"}})]},I))}),i.jsxs("div",{className:"flex items-center justify-center space-x-4 pt-4 border-t border-gray-700/30",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-white to-gray-200 rounded-sm"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Humor"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-gray-400 to-gray-500 rounded-sm"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Energia"})]})]})]}),i.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700/30 relative z-10",children:i.jsxs("button",{onClick:()=>t("scheduling"),className:"w-full bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-white/25 flex items-center justify-center space-x-2 text-sm transform",children:[i.jsx(nt,{className:"w-4 h-4"}),i.jsx("span",{children:"Agendar Sessão"})]})})]})]})},bF=({message:t,type:e="info",duration:r=5e3,onClose:n,isVisible:s=!0})=>{const[a,o]=v.useState(!1);v.useEffect(()=>{if(s){o(!0);const h=setTimeout(()=>{l()},r);return()=>clearTimeout(h)}},[s,r]);const l=()=>{o(!1),setTimeout(()=>{n==null||n()},300)},c=()=>{switch(e){case"success":return i.jsx(tn,{className:"w-5 h-5 text-green-400"});case"error":return i.jsx(Hd,{className:"w-5 h-5 text-red-400"});case"warning":return i.jsx(Hd,{className:"w-5 h-5 text-yellow-400"});default:return i.jsx(NL,{className:"w-5 h-5 text-blue-400"})}},d=()=>{switch(e){case"success":return"bg-green-500/20 border-green-500/30";case"error":return"bg-red-500/20 border-red-500/30";case"warning":return"bg-yellow-500/20 border-yellow-500/30";default:return"bg-blue-500/20 border-blue-500/30"}};return s?i.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full transform transition-all duration-300 ease-out ${a?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,children:i.jsx("div",{className:`${d()} backdrop-blur-xl border rounded-xl p-4 shadow-2xl`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:c()}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-white text-sm leading-relaxed",children:t})}),i.jsx("button",{onClick:l,className:"flex-shrink-0 p-1 text-white/60 hover:text-white transition-colors rounded-full hover:bg-white/10",children:i.jsx(Zt,{className:"w-4 h-4"})})]})})}):null},NF=({setActiveTab:t})=>{const e=gt(),[r,n]=v.useState(0),[s,a]=v.useState(""),o=[{id:1,name:"Ansiedade",icon:"🧘‍♀️",memberCount:1250,description:"Compartilhe experiências e dicas para lidar com ansiedade"},{id:2,name:"Estresse",icon:"🌿",memberCount:980,description:"Um espaço seguro para falar sobre depressão"},{id:3,name:"Autoestima",icon:"✨",memberCount:820,description:"Construindo confiança e amor próprio"},{id:4,name:"Relacionamentos",icon:"💝",memberCount:650,description:"Discussões sobre relacionamentos saudáveis"},{id:5,name:"Meditação Diária",icon:"🕯️",memberCount:750,description:"Pratique meditação em grupo"}],l=[{id:1,name:"Maria Silva",status:"Online há 2 horas",friendshipTime:"Amigos há 3 meses",avatarBg:"bg-gradient-to-r from-gray-600 to-gray-800",initial:"M",profileImage:null},{id:2,name:"João Santos",status:"Online agora",friendshipTime:"Amigos há 1 mês",avatarBg:"bg-gradient-to-r from-gray-700 to-gray-900",initial:"J",profileImage:null},{id:3,name:"Ana Oliveira",status:"Offline",friendshipTime:"Amigos há 2 meses",avatarBg:"bg-gradient-to-r from-gray-500 to-gray-700",initial:"A",profileImage:null},{id:4,name:"Pedro Costa",status:"Online há 1 hora",friendshipTime:"Amigos há 4 meses",avatarBg:"bg-gradient-to-r from-gray-800 to-black",initial:"P",profileImage:null},{id:5,name:"Carla Ferreira",status:"Offline",friendshipTime:"Amigos há 3 meses",avatarBg:"bg-gradient-to-r from-gray-600 to-gray-800",initial:"C",profileImage:null},{id:6,name:"Rafael Martins",status:"Online há 30 minutos",friendshipTime:"Amigos há 2 meses",avatarBg:"bg-gradient-to-r from-gray-700 to-gray-900",initial:"R",profileImage:null},{id:7,name:"Juliana Lima",status:"Offline",friendshipTime:"Amigos há 1 mês",avatarBg:"bg-gradient-to-r from-gray-800 to-black",initial:"J",profileImage:null},{id:8,name:"Marcelo Santos",status:"Online há 1 hora",friendshipTime:"Amigos há 3 meses",avatarBg:"bg-gradient-to-r from-gray-600 to-gray-800",initial:"M",profileImage:null},{id:9,name:"Beatriz Costa",status:"Offline",friendshipTime:"Amigos há 2 meses",avatarBg:"bg-gradient-to-r from-gray-700 to-gray-900",initial:"B",profileImage:null},{id:10,name:"Lucas Oliveira",status:"Online há 20 minutos",friendshipTime:"Amigos há 1 mês",avatarBg:"bg-gradient-to-r from-gray-800 to-black",initial:"L",profileImage:null}],[c,d]=Yt.useState([]),[h,f]=Yt.useState(!1),m=g=>{d(b=>[...b,g]),n(b=>b+1)},y=g=>{d(b=>b.filter(I=>I!==g))},E=(g=>[...o].sort((b,I)=>I.memberCount-b.memberCount).slice(0,g))(5),C=l.filter(g=>g.name.toLowerCase().includes(s.toLowerCase())),x=g=>{a(g.target.value)},w=()=>{a("")};return h?i.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando..."})]})}):i.jsxs(i.Fragment,{children:[i.jsx(gS,{trigger:r}),i.jsxs("div",{className:"space-y-6 animation-initial animate-fade-in-left animation-delay-100",children:[i.jsxs("div",{className:"group bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:from-white/10 hover:to-white/15 transition-all duration-500 hover:shadow-2xl hover:shadow-white/5",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-5 h-5 text-white/80",children:i.jsx(pt,{className:"w-5 h-5"})}),i.jsx("div",{className:"absolute -inset-1 bg-white/10 rounded-full blur opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Grupos Sugeridos"})]}),i.jsx("div",{className:"space-y-4",children:E.slice(0,3).map(g=>{const b=c.includes(g.id);return i.jsxs("div",{className:"group/item relative flex items-center justify-between p-4 bg-gradient-to-r from-white/5 to-white/10 rounded-xl border border-white/10 hover:from-white/10 hover:to-white/15 hover:border-white/20 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg hover:shadow-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-white to-white/90 flex items-center justify-center text-black font-bold text-xl shadow-lg group-hover/item:scale-110 transition-transform duration-300",children:g.icon}),i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-xl blur opacity-0 group-hover/item:opacity-100 transition-opacity duration-300"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white text-sm group-hover/item:text-white/90 transition-colors",children:g.name}),i.jsxs("p",{className:"text-white/50 text-xs font-medium",children:[g.memberCount.toLocaleString()," membros"]})]})]}),i.jsxs("button",{onClick:()=>b?y(g.id):m(g.id),className:`relative w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 cursor-pointer transform hover:scale-110 hover:rotate-3 ${b?"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 shadow-lg shadow-green-500/25":"bg-gradient-to-br from-white to-white/90 hover:from-white/80 hover:to-white shadow-lg shadow-white/25"}`,title:b?"Sair da comunidade":"Entrar na comunidade",children:[b?i.jsx(Zs,{className:"w-5 h-5 text-white"}):i.jsx(Ur,{className:"w-5 h-5 text-black"}),i.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]})]},g.id)})}),i.jsx("div",{className:"text-center pt-6",children:i.jsx("button",{onClick:()=>e("/home/groups"),className:"px-6 py-3 bg-white text-black font-medium rounded-lg transition-all duration-200 hover:bg-gray-100 hover:shadow-lg hover:scale-105 transform",children:"Ver Comunidades"})})]}),i.jsxs("div",{className:"group bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-5 transition-all duration-500 hover:shadow-2xl hover:shadow-white/5 hover:border-white/30 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 animate-pulse"}),i.jsxs("div",{className:"flex items-center space-x-3 mb-4 relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx(pt,{className:"w-5 h-5 text-white/80 group-hover:text-white transition-colors duration-300 group-hover:scale-110"}),i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-full blur opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:scale-150"}),i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-white/20 to-transparent rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),i.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-white/90 transition-all duration-300 group-hover:tracking-wide",children:"Lista de Amigos"})]}),i.jsxs("div",{className:"mb-4 relative z-10",children:[i.jsxs("div",{className:"relative group/search",children:[i.jsx("input",{type:"text",placeholder:"Buscar amigos...",className:"w-full px-4 py-3 bg-transparent border border-white/10 hover:bg-white/20 focus:bg-white text-black placeholder-white/60 focus:placeholder-black/40 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-white/20 transition-all duration-300 hover:border-white/30 focus:border-white/40",value:s,onChange:x,autoComplete:"off",spellCheck:"false"}),i.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:i.jsx(yr,{className:"w-4 h-4 text-white/40 group-hover/search:text-white/80 transition-all duration-300 group-hover/search:scale-110"})}),s&&i.jsx("button",{onClick:w,className:"absolute right-12 top-1/2 transform -translate-y-1/2 w-5 h-5 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110 cursor-pointer",title:"Limpar busca",children:i.jsx("span",{className:"text-white/80 hover:text-white text-xs font-bold",children:"×"})})]}),s&&i.jsx("div",{className:"mt-2 text-xs text-white/60",children:C.length===0?i.jsx("span",{className:"text-red-400",children:"Nenhum amigo encontrado"}):C.length===1?i.jsx("span",{children:"1 amigo encontrado"}):i.jsxs("span",{children:[C.length," amigos encontrados"]})})]}),i.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-2 relative z-10",children:C.length===0&&s?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(yr,{className:"w-8 h-8 text-white/30"})}),i.jsxs("p",{className:"text-white/50 text-sm",children:['Nenhum amigo encontrado para "',s,'"']}),i.jsx("button",{onClick:w,className:"mt-3 px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white/70 hover:text-white transition-all duration-200 text-sm",children:"Limpar busca"})]}):C.map((g,b)=>i.jsxs("div",{className:"group/friend relative p-3 bg-gradient-to-r from-white/5 to-white/10 rounded-xl border border-white/10 hover:from-white/15 hover:to-white/20 hover:border-white/30 transition-all duration-300 hover:scale-[1.01] hover:shadow-lg hover:shadow-white/20 transform hover:-translate-y-0.5 overflow-hidden",style:{animationDelay:`${b*30}ms`,transform:"translateZ(0)"},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover/friend:opacity-100 transition-opacity duration-500 group-hover/friend:animate-pulse"}),i.jsx("div",{className:"absolute top-2 right-2 w-1 h-1 bg-white/30 rounded-full opacity-0 group-hover/friend:opacity-100 group-hover/friend:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"absolute top-4 right-6 w-0.5 h-0.5 bg-white/20 rounded-full opacity-0 group-hover/friend:opacity-100 group-hover/friend:animate-bounce transition-opacity duration-300",style:{animationDelay:"0.5s"}}),i.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[i.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${g.avatarBg} flex items-center justify-center text-white font-bold text-sm shadow-lg group-hover/friend:scale-105 transition-all duration-300 group-hover/friend:shadow-xl`,children:g.initial}),i.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-white/20 to-white/5 rounded-xl blur-sm opacity-0 group-hover/friend:opacity-100 transition-all duration-500 group-hover/friend:scale-150"}),i.jsx("div",{className:"absolute -inset-1 bg-white/10 rounded-xl opacity-0 group-hover/friend:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"absolute -inset-3 border border-white/20 rounded-xl opacity-0 group-hover/friend:opacity-100 group-hover/friend:animate-pulse transition-opacity duration-300"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-semibold text-white text-sm group-hover/friend:text-white transition-all duration-300 truncate group-hover/friend:tracking-wide",children:g.name}),i.jsx("p",{className:"text-white/50 text-xs font-medium group-hover/friend:text-white/80 transition-all duration-300 truncate group-hover/friend:translate-x-0.5",children:g.status}),i.jsx("span",{className:"text-white/40 text-xs font-medium group-hover/friend:text-white/70 transition-all duration-300 group-hover/friend:translate-x-0.5",children:g.friendshipTime})]})]}),i.jsxs("button",{className:"group/msg relative w-9 h-9 rounded-xl bg-gradient-to-br from-white to-white/90 hover:from-white/90 hover:to-white flex items-center justify-center transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-white/30 flex-shrink-0 ml-3 overflow-hidden",children:[i.jsx(nt,{className:"w-4 h-4 text-black group-hover/msg:scale-110 transition-all duration-300 relative z-10"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover/msg:opacity-100 transition-opacity duration-300 group-hover/msg:animate-pulse"}),i.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/20 scale-0 group-hover/msg:scale-150 transition-transform duration-300 opacity-50"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-1 h-1 bg-white rounded-full opacity-0 group-hover/msg:opacity-100 group-hover/msg:animate-ping transition-opacity duration-300"}),i.jsx("div",{className:"absolute -bottom-1 -left-1 w-0.5 h-0.5 bg-white/80 rounded-full opacity-0 group-hover/msg:opacity-100 group-hover/msg:animate-ping transition-opacity duration-300",style:{animationDelay:"0.1s"}})]})]}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-0 group-hover/friend:opacity-100 transition-opacity duration-500"})]},g.id))})]})]})]})},_S=({isOpen:t,onClose:e,userRole:r="cliente",isFirstTime:n=!1})=>{const[s,a]=v.useState(0),[o,l]=v.useState(new Set),[c,d]=v.useState(!1),h=[{id:"welcome",title:"Bem-vindo ao Sereno! 🎉",description:"Vamos te ajudar a conhecer as principais funcionalidades do aplicativo para sua saúde mental.",icon:Lp,position:"center"},{id:"home",title:"Página Inicial",description:"Aqui você encontra posts da comunidade, grupos sugeridos e um resumo do seu humor diário.",icon:Lp,position:"center"},{id:"chat",title:"Chat e Suporte",description:"Conecte-se com psicólogos ou converse com outros usuários da comunidade para apoio emocional.",icon:nt,position:"center"},{id:"diary",title:"Diário Evolutivo",description:"Registre seus pensamentos, sentimentos e reflexões diárias com prompts guiados.",icon:Oa,position:"center"},{id:"humor",title:"Rastreador de Humor",description:"Monitore seu humor diário, visualize tendências e receba insights sobre seu bem-estar emocional.",icon:Js,position:"center"},{id:"sessions",title:r==="psicologo"?"Gerenciar Sessões":"Agendar Sessões",description:r==="psicologo"?"Gerencie sua agenda, visualize sessões agendadas e configure sua disponibilidade.":"Encontre psicólogos disponíveis e agende sessões de terapia online ou presencial.",icon:Xe,position:"center"},{id:"notifications",title:"Notificações",description:"Mantenha-se atualizado com mensagens, lembretes de sessões e atividades da comunidade.",icon:$n,position:"center"},{id:"settings",title:"Configurações",description:"Personalize seu perfil, gerencie notificações e configure suas preferências de privacidade.",icon:Di,position:"center"},{id:"community",title:"Comunidade",description:"Participe de grupos de apoio, compartilhe experiências e conecte-se com pessoas que passam por situações similares.",icon:pt,position:"center"}];v.useEffect(()=>{t&&(a(0),l(new Set),d(!1))},[t]);const f=()=>{s<h.length-1&&(l(I=>new Set([...I,h[s].id])),a(s+1))},m=()=>{s>0&&a(s-1)},y=()=>{E()},N=()=>{l(I=>new Set([...I,h[s].id])),E()},E=()=>{d(!0),setTimeout(()=>{e()},600)},C=I=>o.has(I);if(!t)return null;const x=h[s],w=x.icon,g=s===h.length-1,b=(s+1)/h.length*100;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`fixed inset-0 z-40 transition-all duration-800 ${n?"bg-black":"bg-black/80 backdrop-blur-sm"} ${c?"background-fade-out":"background-fade-in"}`}),i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:`bg-black/95 border border-white/10 rounded-2xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto ${c?"tour-modal-out":"tour-modal-in"}`,children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-white/60 mb-2",children:[i.jsxs("span",{className:"font-medium",children:["Passo ",s+1," de ",h.length]}),i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("span",{className:"font-medium",children:[Math.round(b),"%"]}),i.jsx("button",{onClick:E,className:"text-white/60 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full hover:scale-110 transition-transform duration-200",title:"Fechar tour",children:i.jsx(Zt,{className:"w-5 h-5"})})]})]}),i.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:i.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(w,{className:"w-10 h-10 text-black"})}),i.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:x.title}),i.jsx("p",{className:"text-white/80 text-lg leading-relaxed",children:x.description})]}),i.jsx("div",{className:"flex justify-center space-x-2 mb-8",children:h.map((I,M)=>i.jsx("button",{onClick:()=>a(M),className:`w-3 h-3 rounded-full transition-all duration-300 ${M===s?"bg-white scale-125":C(I.id)?"bg-white":"bg-white/20 hover:bg-white/40"}`},I.id))}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:y,className:"text-white/60 hover:text-white transition-colors text-sm",children:"Pular tour"}),i.jsxs("div",{className:"flex space-x-3",children:[s>0&&i.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-all duration-300",children:[i.jsx(Gd,{className:"w-4 h-4"}),i.jsx("span",{children:"Anterior"})]}),g?i.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-6 py-2 bg-white text-black rounded-lg hover:bg-gray-100 transition-all duration-300",children:[i.jsx(Zs,{className:"w-4 h-4"}),i.jsx("span",{children:"Começar a usar"})]}):i.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-6 py-2 bg-white text-black rounded-lg hover:bg-gray-100 transition-all duration-300",children:[i.jsx("span",{children:"Próximo"}),i.jsx(Wi,{className:"w-4 h-4"})]})]})]})]})})]})};function dn({children:t,showSidebars:e=!0}){const[r,n]=v.useState(!1),[s,a]=v.useState(!1),[o,l]=v.useState(!1),{user:c,isFirstTime:d,markTourAsSeen:h}=ze(),f=gt(),m=Sn(),N=(()=>{const b=m.pathname;return b==="/home"?"home":b==="/home/profile"?"profile":b==="/home/sessions"?"sessions":b==="/home/diary"?"diary":b==="/home/humor"?"humor":b==="/home/chat"||b.startsWith("/home/chat/")?"chat":b==="/home/groups"?"groups":b==="/home/notifications"?"notifications":b==="/home/settings"?"settings":"home"})();v.useEffect(()=>{d&&c&&n(!0)},[d,c]),v.useEffect(()=>{if(d&&c){const b=setTimeout(()=>{l(!0)},2e3);return()=>clearTimeout(b)}},[d,c]);const E=()=>{n(!0)},C=async()=>{n(!1),d&&(a(!0),await h())},x=()=>{l(!1)},w=b=>{f(b==="home"?"/home":`/home/${b}`)},g=()=>e?N==="home"?i.jsxs(i.Fragment,{children:[i.jsx("aside",{className:"lg:col-span-3",children:i.jsx("div",{className:"sticky top-24",children:i.jsx(NF,{setActiveTab:w})})}),i.jsx("section",{className:"lg:col-span-6 space-y-8",children:t}),i.jsx("aside",{className:"lg:col-span-3",children:i.jsx("div",{className:"sticky top-24",children:i.jsx(vF,{})})})]}):N==="profile"?i.jsx("section",{className:"lg:col-span-12",children:i.jsx("div",{className:"max-w-6xl mx-auto",children:t})}):i.jsx("section",{className:"lg:col-span-12",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:t})}):null;return i.jsxs(i.Fragment,{children:[i.jsx(yF,{}),i.jsxs("div",{className:"min-h-screen bg-black lg:pb-8 pb-20",children:[i.jsx(NS,{activeTab:N,setActiveTab:w,onStartTour:E}),i.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:g()})}),i.jsx(_S,{isOpen:r,onClose:C,userRole:(c==null?void 0:c.role)||"cliente",isFirstTime:d}),i.jsx(bF,{message:"Bem-vindo ao Sereno! 🎉 Estamos felizes em tê-lo conosco nesta jornada de autoconhecimento e bem-estar.",type:"success",duration:8e3,isVisible:o,onClose:x})]})]})}const I1=()=>{const{notifications:t,unreadCount:e,loading:r,markAsRead:n,markAllAsRead:s,deleteNotification:a,clearAllNotifications:o}=bS(),[l,c]=v.useState(!1),d=f=>{switch(f){case"like":return{icon:wr,color:"text-red-400"};case"comment":return{icon:nt,color:"text-blue-400"};case"follow":return{icon:tS,color:"text-green-400"};case"session":return{icon:Xe,color:"text-yellow-400"};case"mood":return{icon:wr,color:"text-pink-400"};case"diary":return{icon:Oa,color:"text-purple-400"};case"welcome":return{icon:$n,color:"text-blue-400"};default:return{icon:$n,color:"text-gray-400"}}},h=f=>{if(!f)return"Agora mesmo";const m=new Date,y=f.toDate?f.toDate():new Date(f),N=Math.floor((m-y)/(1e3*60));if(N<1)return"Agora mesmo";if(N<60)return`${N}m atrás`;const E=Math.floor(N/60);if(E<24)return`${E}h atrás`;const C=Math.floor(E/24);return C<7?`${C}d atrás`:y.toLocaleDateString("pt-BR")};return r?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando notificações..."})]}):t.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx($n,{className:"w-16 h-16 text-white/30 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white/70 mb-2",children:"Nenhuma notificação"}),i.jsx("p",{className:"text-white/50",children:"Você está em dia com tudo!"})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx($n,{className:"w-6 h-6 text-white"}),i.jsxs("h2",{className:"text-xl font-semibold text-white",children:["Notificações",e>0&&i.jsx("span",{className:"ml-2 px-2 py-1 bg-red-500 text-white text-sm rounded-full",children:e})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[e>0&&i.jsxs("button",{onClick:s,className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/30 rounded-lg text-blue-400 transition-colors flex items-center space-x-2",children:[i.jsx(Zs,{className:"w-4 h-4"}),i.jsx("span",{children:"Marcar todas como lidas"})]}),i.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg text-red-400 transition-colors flex items-center space-x-2",children:[i.jsx(Qt,{className:"w-4 h-4"}),i.jsx("span",{children:"Limpar todas"})]})]})]}),i.jsx("div",{className:"space-y-3",children:t.map(f=>{const{icon:m,color:y}=d(f.type);return i.jsx("div",{className:`p-4 rounded-lg border transition-all ${f.read?"bg-white/5 border-white/10 text-white/70":"bg-blue-500/10 border-blue-500/30 text-white"}`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`p-2 rounded-lg bg-white/10 ${y}`,children:i.jsx(m,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium mb-1",children:f.title}),i.jsx("p",{className:"text-sm opacity-80 mb-2",children:f.message}),i.jsx("span",{className:"text-xs opacity-60",children:h(f.createdAt)})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[!f.read&&i.jsx("button",{onClick:()=>n(f.id),className:"p-1 hover:bg-white/10 rounded transition-colors",title:"Marcar como lida",children:i.jsx(Zs,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>a(f.id),className:"p-1 hover:bg-red-500/20 rounded transition-colors text-red-400",title:"Deletar notificação",children:i.jsx(Qt,{className:"w-4 h-4"})})]})]})})]})},f.id)})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Limpar todas as notificações?"}),i.jsx("p",{className:"text-white/70 mb-6",children:"Esta ação não pode ser desfeita. Todas as notificações serão removidas permanentemente."}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:()=>{o(),c(!1)},className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Limpar todas"})]})]})})]})},_F=()=>{const{postId:t}=fh(),e=gt(),[r,n]=v.useState(null),[s,a]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(null),[h,f]=v.useState(!1),[m,y]=v.useState(!1);v.useState(null);const{togglePostLike:N,isPostLiked:E,deletePost:C}=Gh();v.useEffect(()=>{(async()=>{var I,M;try{a(!0);const A=vt.currentUser;if(!A){e("/login");return}l(A);const _=ye(J,"users",A.uid),S=await jt(_);if(S.exists()){const D=S.data();d(D)}const k=ye(J,"posts",t),T=await jt(k);if(T.exists()){const D=T.data(),P={id:T.id,...D,createdAt:((I=D.createdAt)==null?void 0:I.toDate())||new Date,updatedAt:(M=D.updatedAt)==null?void 0:M.toDate()};n(P),y(P.userId===A.uid)}else{e("/home");return}}catch(A){console.error("Erro ao buscar dados:",A),e("/home")}finally{a(!1)}})()},[t,e]);const x=async()=>{r&&await N(r.id)},w=async()=>{if(r)try{await C(r.id)&&e("/home")}catch(b){console.error("Erro ao deletar post:",b)}},g=b=>{const M=new Date-b,A=Math.floor(M/(1e3*60)),_=Math.floor(M/(1e3*60*60)),S=Math.floor(M/(1e3*60*60*24));return A<1?"Agora mesmo":A<60?`${A}m atrás`:_<24?`${_}h atrás`:S<7?`${S}d atrás`:b.toLocaleDateString("pt-BR")};return s?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando post..."})]}):r?i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border-b border-white/10 sticky top-0 z-10",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>e("/home"),className:"flex items-center space-x-2 text-white/70 hover:text-white transition-colors",children:[i.jsx(li,{className:"w-5 h-5"}),i.jsx("span",{children:"Voltar"})]}),m&&i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>f(!h),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(ci,{className:"w-5 h-5"})}),h&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg shadow-lg py-1 z-20 min-w-[120px]",children:[i.jsxs("button",{onClick:()=>{f(!1)},className:"w-full text-left px-3 py-2 text-sm text-white hover:bg-white/10 flex items-center space-x-2",children:[i.jsx(jc,{className:"w-3 h-3"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>{f(!1),window.confirm("Tem certeza que deseja deletar este post?")&&w()},className:"w-full text-left px-3 py-2 text-sm text-red-400 hover:bg-red-500/10 flex items-center space-x-2",children:[i.jsx(Qt,{className:"w-3 h-3"}),i.jsx("span",{children:"Deletar"})]})]})]})]})})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6 mb-8",children:[i.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:r.avatar?i.jsx("img",{src:r.avatar,alt:r.author,className:"w-12 h-12 rounded-full"}):i.jsx(He,{className:"w-6 h-6 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("h3",{className:"font-semibold text-white",children:r.author}),r.isAnonymous&&i.jsx("span",{className:"text-xs bg-white/20 text-white/70 px-2 py-1 rounded-full",children:"Anônimo"})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/50",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Lt,{className:"w-3 h-3"}),i.jsx("span",{children:g(r.createdAt)})]}),r.isEdited&&i.jsx("span",{className:"text-white/30",children:"(editado)"})]})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("p",{className:"text-white/90 text-lg leading-relaxed whitespace-pre-wrap",children:r.content})}),r.tags&&r.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:r.tags.map((b,I)=>i.jsxs("span",{className:"inline-flex items-center space-x-1 bg-white/10 text-white/70 px-3 py-1 rounded-full text-sm",children:[i.jsx(XE,{className:"w-3 h-3"}),i.jsx("span",{children:b})]},I))}),i.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("button",{onClick:x,className:`flex items-center space-x-2 transition-colors ${E(r.id)?"text-red-400":"text-white/50 hover:text-white"}`,children:[i.jsx(wr,{className:`w-5 h-5 ${E(r.id)?"fill-current":""}`}),i.jsx("span",{children:Array.isArray(r.likes)?r.likes.length:0})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-white/50",children:[i.jsx(nt,{className:"w-5 h-5"}),i.jsx("span",{children:r.commentCount||0})]}),i.jsxs("button",{className:"flex items-center space-x-2 text-white/50 hover:text-white transition-colors",children:[i.jsx(Kd,{className:"w-5 h-5"}),i.jsx("span",{children:r.shares||0})]})]}),i.jsx("button",{className:"text-white/50 hover:text-white transition-colors",children:i.jsx(rx,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[i.jsxs("h4",{className:"text-white font-semibold text-lg mb-6",children:["Comentários (",r.commentCount||0,")"]}),i.jsx(tF,{postId:t})]})]})]}):i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Post não encontrado"})})};class jF{async uploadProfilePhoto(e,r){if(!e)throw new Error("Arquivo inválido");if(!r)throw new Error("ID de usuário ausente");try{const n=await this.fileToBase64(e),s=`profile_${r}_${Date.now()}`,a=ye(J,"users",r);return await rt(a,{profilePhotoId:s,profilePhotoData:n,updatedAt:new Date}),{imageId:s,success:!0}}catch(n){throw console.error("Erro ao fazer upload da foto de perfil:",n),new Error(`Falha no upload: ${n.message}`)}}async uploadBannerPhoto(e,r){if(!e)throw new Error("Arquivo inválido");if(!r)throw new Error("ID de usuário ausente");try{const n=await this.fileToBase64(e),s=`banner_${r}_${Date.now()}`,a=ye(J,"users",r);return await rt(a,{bannerPhotoId:s,bannerPhotoData:n,updatedAt:new Date}),{imageId:s,success:!0}}catch(n){throw console.error("Erro ao fazer upload do banner:",n),new Error(`Falha no upload: ${n.message}`)}}async replaceProfilePhoto(e,r,n=null){try{return(await this.uploadProfilePhoto(e,r)).imageId}catch(s){throw console.error("Erro ao substituir foto de perfil:",s),s}}async replaceBannerPhoto(e,r,n=null){try{return(await this.uploadBannerPhoto(e,r)).imageId}catch(s){throw console.error("Erro ao substituir banner:",s),s}}async deleteProfilePhoto(e,r){try{const n=ye(J,"users",e);return await rt(n,{profilePhotoId:null,profilePhotoData:null,updatedAt:new Date}),!0}catch(n){throw console.error("Erro ao deletar foto de perfil:",n),n}}async deleteBannerPhoto(e,r){try{const n=ye(J,"users",e);return await rt(n,{bannerPhotoId:null,bannerPhotoData:null,updatedAt:new Date}),!0}catch(n){throw console.error("Erro ao deletar banner:",n),n}}async getImageFromFirestore(e,r){try{const n=ye(J,"users",r),s=await jt(n);if(s.exists()){const a=s.data();if(e===a.profilePhotoId)return a.profilePhotoData;if(e===a.bannerPhotoId)return a.bannerPhotoData}return null}catch(n){return console.error("Erro ao obter imagem do Firestore:",n),null}}async getUserImages(e){try{const r=ye(J,"users",e),n=await jt(r);if(n.exists()){const s=n.data();return{profilePhotoURL:s.profilePhotoData||null,bannerPhotoURL:s.bannerPhotoData||null,profilePhotoId:s.profilePhotoId||null,bannerPhotoId:s.bannerPhotoId||null}}return{profilePhotoURL:null,bannerPhotoURL:null,profilePhotoId:null,bannerPhotoId:null}}catch(r){return console.error("Erro ao obter imagens do usuário:",r),{profilePhotoURL:null,bannerPhotoURL:null,profilePhotoId:null,bannerPhotoId:null}}}fileToBase64(e){return new Promise((r,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>r(s.result),s.onerror=a=>n(a)})}validateFileSize(e,r){const n=r*1024*1024;if(e.size>n)throw new Error(`Arquivo muito grande. Máximo permitido: ${r}MB`);return!0}validateFileType(e){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type))throw new Error("Tipo de arquivo não suportado. Use apenas imagens (JPEG, PNG, GIF, WebP)");return!0}}const Gr=new jF,EF=t=>{const[e,r]=v.useState(null),[n,s]=v.useState(null),[a,o]=v.useState(!1),[l,c]=v.useState(null),d=v.useCallback(async()=>{if(t){o(!0),c(null);try{const m=await Gr.getUserImages(t);r(m.profilePhotoURL),s(m.bannerPhotoURL)}catch(m){console.error("Erro ao carregar imagens do usuário:",m),c(m.message)}finally{o(!1)}}},[t]),h=v.useCallback(async(m,y,N=null)=>{if(!t||!m)return null;try{Gr.validateFileType(m),y==="profilePhoto"?Gr.validateFileSize(m,2):y==="bannerPhoto"&&Gr.validateFileSize(m,5);let E;return y==="profilePhoto"?E=await Gr.replaceProfilePhoto(m,t,N):y==="bannerPhoto"&&(E=await Gr.replaceBannerPhoto(m,t,N)),await d(),E}catch(E){throw console.error(`Erro ao atualizar ${y}:`,E),E}},[t,d]),f=v.useCallback(()=>{r(null),s(null),c(null)},[]);return v.useEffect(()=>{t&&d()},[t,d]),{profilePhoto:e,bannerPhoto:n,loading:a,error:l,loadUserImages:d,updateImage:h,clearImages:f}},df=()=>{var ue,re,H,fe,xe;const{user:t,loading:e}=ze(),{createPost:r,deletePost:n}=Gh(),[s,a]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState([]),[h,f]=v.useState(!0),[m,y]=v.useState({displayName:"",username:"",bio:"",phone:"",birthDate:""}),N=v.useRef(null),E=v.useRef(null),[C,x]=v.useState(null),[w,g]=v.useState(null),{profilePhoto:b,bannerPhoto:I,loading:M,loadUserImages:A,updateImage:_}=EF(t==null?void 0:t.uid);v.useEffect(()=>{t&&(async()=>{f(!0);try{const Y=await Ns.getUserPosts(t.uid);d(Y)}catch(Y){console.error("Erro ao buscar posts do usuário:",Y),alert("Erro ao carregar posts do perfil. Tente novamente.")}finally{f(!1)}})()},[t]),v.useEffect(()=>{var K,Y,Ce,Fe,Te;t&&(y({displayName:t.displayName||((K=t.profileData)==null?void 0:K.displayName)||"",username:((Y=t.profileData)==null?void 0:Y.username)||"",bio:((Ce=t.profileData)==null?void 0:Ce.bio)||"",phone:((Fe=t.profileData)==null?void 0:Fe.phone)||"",birthDate:((Te=t.profileData)==null?void 0:Te.birthDate)||""}),A())},[t,A]),v.useEffect(()=>{t&&!s&&(async()=>{try{const Y=await E1.getUserProfile(t.uid);Y&&y({displayName:Y.displayName||"",username:Y.username||"",bio:Y.bio||"",phone:Y.phone||"",birthDate:Y.birthDate||""})}catch(Y){console.error("Erro ao recarregar dados do usuário:",Y)}})()},[t,s]);const S=()=>{a(!0)},k=async()=>{var K,Y,Ce,Fe;try{if(console.log("Salvando perfil:",m),C||w){if(console.log("Processando novas imagens..."),C)try{const Te=(K=N.current)==null?void 0:K.files[0];if(Te){const vr=(Y=t==null?void 0:t.profileData)==null?void 0:Y.profilePhotoId;await _(Te,"profilePhoto",vr),console.log("Foto de perfil substituída")}}catch(Te){console.error("Erro ao substituir foto de perfil:",Te),alert("Erro ao atualizar foto de perfil. Tente novamente.");return}if(w)try{const Te=(Ce=E.current)==null?void 0:Ce.files[0];if(Te){const vr=(Fe=t==null?void 0:t.profileData)==null?void 0:Fe.bannerPhotoId;await _(Te,"bannerPhoto",vr),console.log("Banner substituído")}}catch(Te){console.error("Erro ao substituir banner:",Te),alert("Erro ao substituir banner. Tente novamente.");return}}try{await E1.updateUserBasicProfile(t.uid,m),console.log("Perfil básico atualizado")}catch(Te){console.error("Erro ao atualizar perfil básico:",Te),alert("Erro ao atualizar dados do perfil. Tente novamente.");return}a(!1),x(null),g(null)}catch(Te){console.error("Erro ao salvar perfil:",Te),alert("Erro ao salvar perfil. Tente novamente.")}},T=()=>{var K,Y,Ce,Fe,Te;y({displayName:(t==null?void 0:t.displayName)||((K=t==null?void 0:t.profileData)==null?void 0:K.displayName)||"",username:((Y=t==null?void 0:t.profileData)==null?void 0:Y.username)||"",bio:((Ce=t==null?void 0:t.profileData)==null?void 0:Ce.bio)||"",phone:((Fe=t==null?void 0:t.profileData)==null?void 0:Fe.phone)||"",birthDate:((Te=t==null?void 0:t.profileData)==null?void 0:Te.birthDate)||""}),a(!1),x(null),g(null),A()},D=K=>{const Y=K.target.files[0];if(Y)try{Gr.validateFileType(Y),Gr.validateFileSize(Y,2);const Ce=new FileReader;Ce.onload=Fe=>{x(Fe.target.result)},Ce.readAsDataURL(Y)}catch(Ce){alert(Ce.message),K.target.value=""}},P=K=>{const Y=K.target.files[0];if(Y)try{Gr.validateFileType(Y),Gr.validateFileSize(Y,5);const Ce=new FileReader;Ce.onload=Fe=>{g(Fe.target.result)},Ce.readAsDataURL(Y)}catch(Ce){alert(Ce.message),K.target.value=""}},$=()=>{var K;(K=N.current)==null||K.click()},ae=()=>{var K;(K=E.current)==null||K.click()},oe=()=>{l(!0)},F=async K=>{try{if(await r(K)){l(!1);try{const Ce=await Ns.getUserPosts(t.uid);d(Ce)}catch(Ce){console.error("Erro ao atualizar lista de posts:",Ce);const Fe={id:Date.now().toString(),...K,createdAt:new Date,likes:[],commentCount:0,shares:0,isEdited:!1};d(Te=>[Fe,...Te])}}}catch(Y){console.error("Erro ao criar post:",Y)}},O=async K=>{if(window.confirm("Tem certeza que deseja deletar este post?"))try{await n(K)&&d(Ce=>Ce.filter(Fe=>Fe.id!==K))}catch(Y){console.error("Erro ao deletar post:",Y)}},U=K=>{if(!K)return"Data não disponível";try{let Y;if(K&&typeof K=="object"&&K.toDate)Y=K.toDate();else if(K instanceof Date)Y=K;else if(typeof K=="string"||typeof K=="number")Y=new Date(K);else return"Data inválida";return isNaN(Y.getTime())?"Data inválida":Y.toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"})}catch(Y){return console.error("Erro ao formatar data:",Y),"Data inválida"}},q=K=>{if(!K)return"";let Y;if(K&&typeof K=="object"&&K.toDate)Y=K.toDate();else if(K instanceof Date)Y=K;else if(typeof K=="string"||typeof K=="number")Y=new Date(K);else return"Data inválida";if(isNaN(Y.getTime()))return"Data inválida";const Fe=new Date-Y,Te=Math.floor(Fe/(1e3*60)),vr=Math.floor(Fe/(1e3*60*60)),ls=Math.floor(Fe/(1e3*60*60*24));return Te<1?"Agora mesmo":Te<60?`${Te}m atrás`:vr<24?`${vr}h atrás`:ls<7?`${ls}d atrás`:Y.toLocaleDateString("pt-BR")};return e||M?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando perfil..."})]}):t?i.jsxs("div",{className:"min-h-screen bg-black relative",children:[i.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-blue-600 to-purple-600",children:[(w||I)&&i.jsx("img",{src:w||I,alt:"Banner",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/20"}),s&&i.jsxs("button",{onClick:ae,className:"absolute top-4 right-4 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-white hover:bg-white/30 transition-colors flex items-center space-x-2",children:[i.jsx(Wd,{className:"w-4 h-4"}),i.jsx("span",{children:"Alterar Banner"})]})]}),i.jsx("div",{className:"relative -mt-20 px-8",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-40 h-40 rounded-full border-4 border-white bg-white/10 flex items-center justify-center overflow-hidden",children:C||b?i.jsx("img",{src:C||b,alt:"Foto de perfil",className:"w-full h-full object-cover"}):i.jsx(He,{className:"w-20 h-20 text-white/50"})}),s&&i.jsx("button",{onClick:$,className:"absolute bottom-2 right-2 w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:i.jsx(Wd,{className:"w-6 h-6 text-white"})})]})}),i.jsx("div",{className:"px-8 pb-8",children:i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsx("div",{className:"flex-1",children:s?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome"}),i.jsx("input",{type:"text",value:m.displayName,onChange:K=>y(Y=>({...Y,displayName:K.target.value})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30",placeholder:"Seu nome"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx(tx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",value:m.username,onChange:K=>y(Y=>({...Y,username:K.target.value})),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30",placeholder:"seu_username"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Biografia"}),i.jsx("textarea",{value:m.bio,onChange:K=>y(Y=>({...Y,bio:K.target.value})),rows:3,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 resize-none",placeholder:"Conte um pouco sobre você..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Telefone"}),i.jsxs("div",{className:"relative",children:[i.jsx(on,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"tel",value:m.phone,onChange:K=>y(Y=>({...Y,phone:K.target.value})),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30",placeholder:"(11) 99999-9999"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Data de Nascimento"}),i.jsxs("div",{className:"relative",children:[i.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"date",value:m.birthDate,onChange:K=>y(Y=>({...Y,birthDate:K.target.value})),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"})]})]})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{onClick:k,className:"px-6 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors flex items-center space-x-2",children:[i.jsx(Nl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar"})]}),i.jsx("button",{onClick:T,className:"px-6 py-2 bg-white/10 text-white rounded-lg font-medium hover:bg-white/20 transition-colors",children:"Cancelar"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:(t==null?void 0:t.displayName)||((ue=t==null?void 0:t.profileData)==null?void 0:ue.displayName)||"Usuário"}),i.jsxs("p",{className:"text-white/80 text-lg mb-3",children:["@",((re=t==null?void 0:t.profileData)==null?void 0:re.username)||"usuario"]}),i.jsx("p",{className:"text-white/70 mb-3",children:((H=t==null?void 0:t.profileData)==null?void 0:H.bio)||"Nenhuma biografia adicionada"}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-white/60",children:[((fe=t==null?void 0:t.profileData)==null?void 0:fe.phone)&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(on,{className:"w-4 h-4"}),i.jsx("span",{children:t.profileData.phone})]}),((xe=t==null?void 0:t.profileData)==null?void 0:xe.birthDate)&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xe,{className:"w-4 h-4"}),i.jsx("span",{children:U(t.profileData.birthDate)})]})]})]})}),!s&&i.jsxs("button",{onClick:S,className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors flex items-center space-x-2",children:[i.jsx(jc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar Perfil"})]})]})}),i.jsxs("div",{className:"px-8 pb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Posts"}),i.jsxs("button",{onClick:oe,className:"px-6 py-3 bg-white hover:bg-gray-100 text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:[i.jsx(Ur,{className:"w-4 h-4"}),i.jsx("span",{children:"Criar Post"})]})]}),h?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{className:"text-white/60 mt-4",children:"Carregando posts..."})]}):c.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(QE,{className:"w-12 h-12 text-white/30"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Nenhum post ainda"}),i.jsx("p",{className:"text-white/40 mb-6",children:"Seus posts públicos aparecerão aqui. Posts anônimos não são exibidos no perfil."}),i.jsxs("button",{onClick:oe,className:"px-6 py-3 bg-white hover:bg-gray-100 text-black rounded-lg font-medium transition-colors flex items-center space-x-2 mx-auto",children:[i.jsx(Ur,{className:"w-4 h-4"}),i.jsx("span",{children:"Criar Primeiro Post"})]})]}):i.jsx("div",{className:"space-y-6",children:c.map(K=>i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:K.avatar?i.jsx("img",{src:K.avatar,alt:K.author,className:"w-10 h-10 rounded-full"}):i.jsx(He,{className:"w-5 h-5 text-white/70"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-white",children:K.author}),i.jsx("p",{className:"text-sm text-white/50",children:q(K.createdAt)})]})]}),i.jsx("button",{onClick:()=>O(K.id),className:"p-2 text-white/50 hover:text-red-400 transition-colors rounded-full hover:bg-white/10",children:i.jsx(Qt,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:K.content}),K.tags&&K.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:K.tags.map((Y,Ce)=>i.jsx("span",{className:"inline-flex items-center space-x-1 bg-white/10 text-white/70 px-3 py-1 rounded-full text-sm",children:i.jsxs("span",{children:["#",Y]})},Ce))})]},K.id))})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-medium text-white",children:"Criar Novo Post"}),i.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(Zt,{className:"w-5 h-5 text-white/70"})})]}),i.jsx(xS,{onPostCreated:F,onCancel:()=>l(!1),isModal:!0})]})}),i.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:D,className:"hidden"}),i.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:P,className:"hidden"})]}):i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(He,{className:"w-12 h-12 text-red-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Usuário não autenticado"}),i.jsx("p",{className:"text-white/60",children:"Faça login para acessar seu perfil"})]})})},SF=()=>{const{user:t}=ze(),[e,r]=v.useState([]),[n,s]=v.useState([]),[a,o]=v.useState(!0),[l,c]=v.useState(""),[d,h]=v.useState("all");v.useState(null);const[f,m]=v.useState(!1),[y,N]=v.useState(null),[E,C]=v.useState({recipientId:"",recipientName:"",subject:"",content:"",type:"text"});v.useEffect(()=>{x()},[t==null?void 0:t.uid]),v.useEffect(()=>{let S=e;l&&(S=S.filter(k=>{var T,D,P;return((T=k.subject)==null?void 0:T.toLowerCase().includes(l.toLowerCase()))||((D=k.content)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||((P=k.senderName)==null?void 0:P.toLowerCase().includes(l.toLowerCase()))})),d==="unread"?S=S.filter(k=>!k.read):d==="read"&&(S=S.filter(k=>k.read)),s(S)},[e,l,d]);const x=async()=>{if(t!=null&&t.uid){o(!0);try{const S=await dF(t.uid);S.success&&r(S.data)}catch(S){console.error("Erro ao carregar mensagens:",S)}finally{o(!1)}}},w=async S=>{if(S.preventDefault(),!!(t!=null&&t.uid))try{const k={...E,senderId:t.uid,senderName:t.displayName||"Psicólogo"};(await hF(k)).success&&(m(!1),C({recipientId:"",recipientName:"",subject:"",content:"",type:"text"}),x())}catch(k){console.error("Erro ao enviar mensagem:",k)}},g=async S=>{try{(await mF(S)).success&&x()}catch(k){console.error("Erro ao marcar mensagem como lida:",k)}},b=S=>{N(y===S?null:S)},I=S=>{switch(S){case"phone":return i.jsx(on,{className:"w-4 h-4"});case"video":return i.jsx(Qd,{className:"w-4 h-4"});case"email":return i.jsx(fo,{className:"w-4 h-4"});default:return i.jsx(nt,{className:"w-4 h-4"})}},M=S=>{switch(S){case"phone":return"Chamada";case"video":return"Vídeo";case"email":return"Email";default:return"Mensagem"}},A=S=>{switch(S){case"phone":return"bg-green-500/20 text-green-400 border-green-500/30";case"video":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"email":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},_=S=>{const k=new Date(S),D=(new Date-k)/(1e3*60*60);return D<24?k.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):D<48?"Ontem":k.toLocaleDateString("pt-BR")};return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mensagens"}),i.jsx("p",{className:"text-white/60",children:"Gerencie suas comunicações com pacientes e colegas"})]}),i.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Ur,{className:"w-4 h-4"}),"Nova Mensagem"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar mensagens...",value:l,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:d,onChange:S=>h(S.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todas as mensagens"}),i.jsx("option",{value:"unread",children:"Não lidas"}),i.jsx("option",{value:"read",children:"Lidas"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(nt,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.length}),i.jsx("div",{className:"text-sm text-white/60",children:"Total de Mensagens"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/20 border border-red-500/30 flex items-center justify-center",children:i.jsx(Lt,{className:"w-5 h-5 text-red-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(S=>!S.read).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Não Lidas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(WE,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(S=>S.read).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Lidas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(on,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(S=>S.type==="phone"||S.type==="video").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Chamadas/Vídeos"})]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[n.map(S=>i.jsx("div",{className:`bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.07] transition-all duration-300 ${S.read?"":"bg-white/10 border-white/30"}`,children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center",children:I(S.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:`text-lg font-semibold ${S.read?"text-white/80":"text-white"}`,children:S.subject||"Sem assunto"}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${A(S.type)}`,children:M(S.type)}),!S.read&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400 border border-red-500/30",children:"Nova"})]}),i.jsxs("p",{className:"text-white/60 text-sm",children:["De: ",S.senderName]}),i.jsx("p",{className:"text-white/40 text-xs",children:_(S.createdAt)})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[!S.read&&i.jsx("button",{onClick:()=>g(S.id),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-colors duration-300",title:"Marcar como lida",children:i.jsx(Zs,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>b(S.id),className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-300",children:y===S.id?i.jsx(KE,{className:"w-4 h-4"}):i.jsx(GE,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-300",children:i.jsx(Vp,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-300",children:i.jsx(ci,{className:"w-4 h-4"})})]})]}),y===S.id&&i.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Mensagem"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:S.content})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(Vp,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Responder"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(bL,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Encaminhar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(pL,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Arquivar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg hover:bg-red-500/20 transition-colors duration-300",children:[i.jsx(Qt,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Excluir"})]})]})]})]})},S.id)),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nt,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhuma mensagem encontrada"}),i.jsx("p",{className:"text-white/40",children:"Comece enviando sua primeira mensagem"})]})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Nova Mensagem"}),i.jsx("button",{onClick:()=>m(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Zt,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Tipo de Mensagem"}),i.jsxs("select",{value:E.type,onChange:S=>C({...E,type:S.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"text",children:"Texto"}),i.jsx("option",{value:"phone",children:"Chamada"}),i.jsx("option",{value:"video",children:"Vídeo"}),i.jsx("option",{value:"email",children:"Email"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome do Destinatário"}),i.jsx("input",{type:"text",required:!0,value:E.recipientName,onChange:S=>C({...E,recipientName:S.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Nome do destinatário"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Assunto"}),i.jsx("input",{type:"text",value:E.subject,onChange:S=>C({...E,subject:S.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Assunto da mensagem (opcional)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Conteúdo da Mensagem"}),i.jsx("textarea",{required:!0,value:E.content,onChange:S=>C({...E,content:S.target.value}),rows:"6",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Digite sua mensagem..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:[i.jsx(Ec,{className:"w-4 h-4 inline mr-2"}),"Enviar"]})]})]})]})})]})},kF=()=>{const{user:t}=ze(),[e,r]=v.useState([]),[n,s]=v.useState([]),[a,o]=v.useState(!0),[l,c]=v.useState(""),[d,h]=v.useState("all"),[f,m]=v.useState(!1),[y,N]=v.useState({name:"",email:"",phone:"",birthDate:"",diagnosis:"",notes:""});v.useEffect(()=>{E()},[t==null?void 0:t.uid]),v.useEffect(()=>{let b=e;l&&(b=b.filter(I=>I.name.toLowerCase().includes(l.toLowerCase())||I.email.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(b=b.filter(I=>I.status===d)),s(b)},[e,l,d]);const E=async()=>{if(t!=null&&t.uid){o(!0);try{const b=await wS(t.uid);b.success&&r(b.data)}catch(b){console.error("Erro ao carregar pacientes:",b)}finally{o(!1)}}},C=async b=>{if(b.preventDefault(),!!(t!=null&&t.uid))try{(await oF(t.uid,y)).success&&(m(!1),N({name:"",email:"",phone:"",birthDate:"",diagnosis:"",notes:""}),E())}catch(I){console.error("Erro ao criar paciente:",I)}},x=b=>{switch(b){case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"inactive":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"urgent":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-blue-500/20 text-blue-400 border-blue-500/30"}},w=b=>{switch(b){case"active":return i.jsx(tn,{className:"w-4 h-4"});case"inactive":return i.jsx(Fp,{className:"w-4 h-4"});case"urgent":return i.jsx(HE,{className:"w-4 h-4"});default:return i.jsx(Lt,{className:"w-4 h-4"})}},g=b=>{switch(b){case"active":return"Ativo";case"inactive":return"Inativo";case"urgent":return"Urgente";default:return"Pendente"}};return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Pacientes"}),i.jsx("p",{className:"text-white/60",children:"Gerencie seus pacientes e acompanhe o progresso"})]}),i.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Ur,{className:"w-4 h-4"}),"Novo Paciente"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar pacientes...",value:l,onChange:b=>c(b.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:d,onChange:b=>h(b.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todos os status"}),i.jsx("option",{value:"active",children:"Ativos"}),i.jsx("option",{value:"inactive",children:"Inativos"}),i.jsx("option",{value:"urgent",children:"Urgentes"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(pt,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>b.status==="active").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Pacientes Ativos"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(Gn,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>b.status==="urgent").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Casos Urgentes"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 border border-yellow-500/30 flex items-center justify-center",children:i.jsx(Xe,{className:"w-5 h-5 text-yellow-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>b.lastSession&&new Date(b.lastSession)>new Date(Date.now()-7*24*60*60*1e3)).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Sessões Esta Semana"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(Lt,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(b=>!b.lastSession||new Date(b.lastSession)<new Date(Date.now()-30*24*60*60*1e3)).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Pendentes"})]})]})})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Paciente"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Última Sessão"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Progresso"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Contato"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Ações"})]})}),i.jsx("tbody",{className:"divide-y divide-white/10",children:n.map(b=>i.jsxs("tr",{className:"hover:bg-white/5 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-sm",children:b.name.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-white",children:b.name}),i.jsx("div",{className:"text-sm text-white/60",children:b.diagnosis||"Sem diagnóstico"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${x(b.status)}`,children:[w(b.status),i.jsx("span",{className:"ml-1",children:g(b.status)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white/60",children:b.lastSession?new Date(b.lastSession).toLocaleDateString("pt-BR"):"Nunca"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 bg-white/20 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-white",style:{width:`${b.progress||0}%`}})}),i.jsxs("span",{className:"text-sm text-white/60",children:[b.progress||0,"%"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(on,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(fo,{className:"w-4 h-4"})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Gi,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Wh,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(ci,{className:"w-4 h-4"})})]})})]},b.id))})]})}),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(pt,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhum paciente encontrado"}),i.jsx("p",{className:"text-white/40",children:"Comece adicionando seu primeiro paciente"})]})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Novo Paciente"}),i.jsx("button",{onClick:()=>m(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(X,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome Completo"}),i.jsx("input",{type:"text",required:!0,value:y.name,onChange:b=>N({...y,name:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Nome do paciente"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Email"}),i.jsx("input",{type:"email",required:!0,value:y.email,onChange:b=>N({...y,email:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"email@exemplo.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Telefone"}),i.jsx("input",{type:"tel",value:y.phone,onChange:b=>N({...y,phone:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"(11) 99999-9999"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Data de Nascimento"}),i.jsx("input",{type:"date",value:y.birthDate,onChange:b=>N({...y,birthDate:b.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Diagnóstico Inicial"}),i.jsx("textarea",{value:y.diagnosis,onChange:b=>N({...y,diagnosis:b.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Descreva o diagnóstico inicial..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Observações"}),i.jsx("textarea",{value:y.notes,onChange:b=>N({...y,notes:b.target.value}),rows:"2",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Observações adicionais..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:"Adicionar"})]})]})]})})]})},CF=({isOpen:t,onClose:e})=>{const{user:r}=ze(),[n,s]=v.useState(0),a=[{title:"Bem-vindo ao seu Dashboard Profissional! 👋",description:"Olá! Vamos fazer um tour rápido para você conhecer todas as funcionalidades do seu painel de psicólogo.",icon:i.jsx(En,{className:"w-8 h-8 text-yellow-400"}),highlight:null},{title:"Visão Geral - Seu Centro de Controle",description:"Aqui você encontra um resumo completo da sua prática: pacientes ativos, sessões realizadas, taxa de sucesso e muito mais.",icon:i.jsx(Js,{className:"w-8 h-8 text-blue-400"}),highlight:"overview",features:["Cards de monitoramento em tempo real","Gráficos de progresso dos pacientes","Estatísticas de desempenho","Resumo das próximas sessões"]},{title:"Gestão de Pacientes",description:"Gerencie todos os seus pacientes em um só lugar. Acompanhe progressos, histórico de sessões e informações importantes.",icon:i.jsx(pt,{className:"w-8 h-8 text-green-400"}),highlight:"patients",features:["Lista completa de pacientes","Status de tratamento","Histórico de sessões","Progresso individual"]},{title:"Agenda de Sessões",description:"Organize sua agenda profissional com facilidade. Agende, gerencie e acompanhe todas as suas sessões de terapia.",icon:i.jsx(Xe,{className:"w-8 h-8 text-purple-400"}),highlight:"sessions",features:["Agendamento de sessões","Diferentes tipos de atendimento","Controle de status","Lembretes automáticos"]},{title:"Relatórios e Análises",description:"Crie relatórios detalhados sobre o progresso dos seus pacientes e analise dados para melhorar seus tratamentos.",icon:i.jsx(Gn,{className:"w-8 h-8 text-orange-400"}),highlight:"reports",features:["Relatórios de progresso","Análises de tratamento","Métricas de sucesso","Exportação de dados"]},{title:"Sistema de Mensagens",description:"Comunique-se facilmente com seus pacientes através de mensagens, chamadas e videoconferências integradas.",icon:i.jsx(nt,{className:"w-8 h-8 text-pink-400"}),highlight:"messages",features:["Chat integrado","Chamadas de voz e vídeo","Notificações em tempo real","Histórico de conversas"]},{title:"Recursos Avançados",description:"Aproveite funcionalidades exclusivas para psicólogos: avaliações, planos de tratamento e muito mais.",icon:i.jsx(bl,{className:"w-8 h-8 text-cyan-400"}),highlight:null,features:["Avaliações psicológicas","Planos de tratamento","Rastreamento de humor","Relatórios personalizados"]},{title:"Tudo Pronto! 🎉",description:"Agora você está pronto para usar todas as funcionalidades do seu dashboard profissional. Boa sorte com sua prática!",icon:i.jsx(tn,{className:"w-8 h-8 text-green-400"}),highlight:null}],o=()=>{n<a.length-1?s(n+1):c()},l=()=>{n>0&&s(n-1)},c=async()=>{if(r!=null&&r.uid)try{await fF(r.uid)}catch(y){console.error("Erro ao marcar tour como visto:",y)}e()},d=()=>{c()},h=a[n],f=n===0,m=n===a.length-1;return t?i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-6 h-6 object-contain"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Tour do Dashboard"}),i.jsxs("p",{className:"text-sm text-white/60",children:["Passo ",n+1," de ",a.length]})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx("button",{onClick:d,className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors duration-200",title:"Pular tour",children:i.jsx(Zt,{className:"w-5 h-5"})})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex justify-center mb-4",children:h.icon}),i.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:h.title}),i.jsx("p",{className:"text-white/70 text-lg leading-relaxed",children:h.description})]}),h.features&&i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-6",children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-3 text-center",children:"Funcionalidades desta seção:"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.features.map((y,N)=>i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(tn,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:y})]},N))})]}),n===1&&i.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(En,{className:"w-3 h-3 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Dica Pro"}),i.jsx("p",{className:"text-blue-300 text-sm",children:"Use os filtros de data e status para encontrar rapidamente as informações que você precisa. Os dados são atualizados em tempo real!"})]})]})}),n===2&&i.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(pt,{className:"w-3 h-3 text-green-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-green-400 mb-1",children:"Organização"}),i.jsx("p",{className:"text-green-300 text-sm",children:"Mantenha seus pacientes organizados por status. Use as cores para identificar rapidamente casos urgentes, ativos ou inativos."})]})]})}),n===3&&i.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(Xe,{className:"w-3 h-3 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-purple-400 mb-1",children:"Agendamento"}),i.jsx("p",{className:"text-purple-300 text-sm",children:"Configure lembretes automáticos para suas sessões. O sistema notifica você e seus pacientes sobre compromissos próximos."})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-2",children:[i.jsx("span",{children:"Progresso do tour"}),i.jsxs("span",{children:[Math.round((n+1)/a.length*100),"%"]})]}),i.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500",style:{width:`${(n+1)/a.length*100}%`}})})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-white/10",children:[i.jsxs("button",{onClick:l,disabled:f,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-300 ${f?"text-white/30 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:[i.jsx(Gd,{className:"w-4 h-4"}),i.jsx("span",{children:"Anterior"})]}),i.jsx("div",{className:"flex space-x-2",children:a.map((y,N)=>i.jsx("button",{onClick:()=>s(N),className:`w-3 h-3 rounded-full transition-all duration-300 ${N===n?"bg-white":"bg-white/30 hover:bg-white/50"}`},N))}),i.jsxs("button",{onClick:o,className:"flex items-center space-x-2 bg-white text-black px-6 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx("span",{children:m?"Finalizar":"Próximo"}),!m&&i.jsx(Wi,{className:"w-4 h-4"})]})]})]})}):null},TF=()=>{const{user:t}=ze(),[e,r]=v.useState([]),[n,s]=v.useState([]),[a,o]=v.useState(!0),[l,c]=v.useState(""),[d,h]=v.useState("all"),[f,m]=v.useState("all"),[y,N]=v.useState(!1),[E,C]=v.useState(null),[x,w]=v.useState({title:"",type:"patient-progress",patientId:"",patientName:"",content:"",recommendations:"",nextSteps:""});v.useEffect(()=>{g()},[t==null?void 0:t.uid]),v.useEffect(()=>{let k=e;if(l&&(k=k.filter(T=>{var D,P;return T.title.toLowerCase().includes(l.toLowerCase())||((D=T.patientName)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||((P=T.content)==null?void 0:P.toLowerCase().includes(l.toLowerCase()))})),d!=="all"&&(k=k.filter(T=>T.type===d)),f==="week"){const T=new Date;T.setDate(T.getDate()-7),k=k.filter(D=>new Date(D.createdAt)>=T)}else if(f==="month"){const T=new Date;T.setMonth(T.getMonth()-1),k=k.filter(D=>new Date(D.createdAt)>=T)}s(k)},[e,l,d,f]);const g=async()=>{if(t!=null&&t.uid){o(!0);try{const k=await pF(t.uid);k.success&&r(k.data)}catch(k){console.error("Erro ao carregar relatórios:",k)}finally{o(!1)}}},b=async k=>{if(k.preventDefault(),!!(t!=null&&t.uid))try{const T={...x,psychologistId:t.uid};(await gF(T)).success&&(N(!1),w({title:"",type:"patient-progress",patientId:"",patientName:"",content:"",recommendations:"",nextSteps:""}),g())}catch(T){console.error("Erro ao criar relatório:",T)}},I=k=>{C(E===k?null:k)},M=k=>{switch(k){case"patient-progress":return i.jsx(pt,{className:"w-4 h-4"});case"session-summary":return i.jsx(Lt,{className:"w-4 h-4"});case"treatment-plan":return i.jsx(tn,{className:"w-4 h-4"});case"assessment":return i.jsx(Js,{className:"w-4 h-4"});default:return i.jsx(Gn,{className:"w-4 h-4"})}},A=k=>{switch(k){case"patient-progress":return"Progresso do Paciente";case"session-summary":return"Resumo da Sessão";case"treatment-plan":return"Plano de Tratamento";case"assessment":return"Avaliação";default:return"Relatório"}},_=k=>{switch(k){case"patient-progress":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"session-summary":return"bg-green-500/20 text-green-400 border-green-500/30";case"treatment-plan":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"assessment":return"bg-orange-500/20 text-orange-400 border-orange-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},S=k=>new Date(k).toLocaleDateString("pt-BR");return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Relatórios"}),i.jsx("p",{className:"text-white/60",children:"Analise dados e gere relatórios detalhados"})]}),i.jsxs("button",{onClick:()=>N(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Ur,{className:"w-4 h-4"}),"Novo Relatório"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar relatórios...",value:l,onChange:k=>c(k.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:d,onChange:k=>h(k.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todos os tipos"}),i.jsx("option",{value:"patient-progress",children:"Progresso do Paciente"}),i.jsx("option",{value:"session-summary",children:"Resumo da Sessão"}),i.jsx("option",{value:"treatment-plan",children:"Plano de Tratamento"}),i.jsx("option",{value:"assessment",children:"Avaliação"})]}),i.jsxs("select",{value:f,onChange:k=>m(k.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todas as datas"}),i.jsx("option",{value:"week",children:"Última semana"}),i.jsx("option",{value:"month",children:"Último mês"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(Js,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.length}),i.jsx("div",{className:"text-sm text-white/60",children:"Total de Relatórios"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(pt,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(k=>k.type==="patient-progress").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Progresso de Pacientes"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(Lt,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(k=>k.type==="session-summary").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Resumos de Sessões"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 border border-orange-500/30 flex items-center justify-center",children:i.jsx(Gn,{className:"w-5 h-5 text-orange-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(k=>k.type==="treatment-plan").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Planos de Tratamento"})]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[n.map(k=>i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.07] transition-all duration-300",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center",children:M(k.type)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:k.title}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${_(k.type)}`,children:A(k.type)})]}),k.patientName&&i.jsxs("p",{className:"text-white/60 text-sm",children:["Paciente: ",k.patientName]}),i.jsxs("p",{className:"text-white/40 text-xs",children:["Criado em ",S(k.createdAt)]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>I(k.id),className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:E===k.id?i.jsx(KE,{className:"w-4 h-4"}):i.jsx(GE,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:i.jsx(Xv,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300",children:i.jsx(ci,{className:"w-4 h-4"})})]})]}),E===k.id&&i.jsxs("div",{className:"border-t border-white/10 pt-4 space-y-4",children:[k.content&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Conteúdo"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:k.content})]}),k.recommendations&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Recomendações"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:k.recommendations})]}),k.nextSteps&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-white/80 mb-2",children:"Próximos Passos"}),i.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:k.nextSteps})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(Gi,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Visualizar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(Wh,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Editar"})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-white/10 border border-white/20 text-white rounded-lg hover:bg-white/20 transition-colors duration-300",children:[i.jsx(Xv,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm",children:"Exportar"})]})]})]})]})},k.id)),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Gn,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhum relatório encontrado"}),i.jsx("p",{className:"text-white/40",children:"Comece criando seu primeiro relatório"})]})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Novo Relatório"}),i.jsx("button",{onClick:()=>N(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Zt,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Título do Relatório"}),i.jsx("input",{type:"text",required:!0,value:x.title,onChange:k=>w({...x,title:k.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Título do relatório"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Tipo de Relatório"}),i.jsxs("select",{value:x.type,onChange:k=>w({...x,type:k.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"patient-progress",children:"Progresso do Paciente"}),i.jsx("option",{value:"session-summary",children:"Resumo da Sessão"}),i.jsx("option",{value:"treatment-plan",children:"Plano de Tratamento"}),i.jsx("option",{value:"assessment",children:"Avaliação"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome do Paciente"}),i.jsx("input",{type:"text",value:x.patientName,onChange:k=>w({...x,patientName:k.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Nome do paciente (opcional)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Conteúdo do Relatório"}),i.jsx("textarea",{value:x.content,onChange:k=>w({...x,content:k.target.value}),rows:"4",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Descreva o conteúdo do relatório..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Recomendações"}),i.jsx("textarea",{value:x.recommendations,onChange:k=>w({...x,recommendations:k.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Recomendações baseadas no relatório..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Próximos Passos"}),i.jsx("textarea",{value:x.nextSteps,onChange:k=>w({...x,nextSteps:k.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Próximos passos a serem tomados..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:"Criar Relatório"})]})]})]})})]})},IF=()=>{const{user:t}=ze(),[e,r]=v.useState([]),[n,s]=v.useState([]),[a,o]=v.useState(!0),[l,c]=v.useState(""),[d,h]=v.useState("all"),[f,m]=v.useState("all"),[y,N]=v.useState(!1);v.useState(new Date);const[E,C]=v.useState({patientId:"",patientName:"",scheduledDate:"",scheduledTime:"",duration:50,type:"online",notes:"",status:"scheduled"});v.useEffect(()=>{x()},[t==null?void 0:t.uid]),v.useEffect(()=>{let T=e;if(l&&(T=T.filter(D=>{var P;return D.patientName.toLowerCase().includes(l.toLowerCase())||((P=D.notes)==null?void 0:P.toLowerCase().includes(l.toLowerCase()))})),d!=="all"&&(T=T.filter(D=>D.status===d)),f==="today"){const D=new Date;T=T.filter(P=>new Date(P.scheduledDate).toDateString()===D.toDateString())}else if(f==="week"){const D=new Date,P=new Date(D.getTime()+7*24*60*60*1e3);T=T.filter($=>{const ae=new Date($.scheduledDate);return ae>=D&&ae<=P})}s(T)},[e,l,d,f]);const x=async()=>{if(t!=null&&t.uid){o(!0);try{const T=await yS(t.uid);T.success&&r(T.data)}catch(T){console.error("Erro ao carregar sessões:",T)}finally{o(!1)}}},w=async T=>{if(T.preventDefault(),!!(t!=null&&t.uid))try{const D={...E,psychologistId:t.uid,scheduledDate:new Date(E.scheduledDate+"T"+E.scheduledTime)};(await lF(D)).success&&(N(!1),C({patientId:"",patientName:"",scheduledDate:"",scheduledTime:"",duration:50,type:"online",notes:"",status:"scheduled"}),x())}catch(D){console.error("Erro ao criar sessão:",D)}},g=async(T,D)=>{try{(await cF(T,{status:D})).success&&x()}catch(P){console.error("Erro ao atualizar sessão:",P)}},b=T=>{switch(T){case"completed":return"bg-green-500/20 text-green-400 border-green-500/30";case"scheduled":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";case"in-progress":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},I=T=>{switch(T){case"completed":return i.jsx(tn,{className:"w-4 h-4"});case"scheduled":return i.jsx(Lt,{className:"w-4 h-4"});case"cancelled":return i.jsx(Fp,{className:"w-4 h-4"});case"in-progress":return i.jsx(HE,{className:"w-4 h-4"});default:return i.jsx(Lt,{className:"w-4 h-4"})}},M=T=>{switch(T){case"completed":return"Concluída";case"scheduled":return"Agendada";case"cancelled":return"Cancelada";case"in-progress":return"Em Andamento";default:return"Pendente"}},A=T=>{switch(T){case"online":return i.jsx(Qd,{className:"w-4 h-4"});case"phone":return i.jsx(on,{className:"w-4 h-4"});case"in-person":return i.jsx(to,{className:"w-4 h-4"});default:return i.jsx(Qd,{className:"w-4 h-4"})}},_=T=>{switch(T){case"online":return"Online";case"phone":return"Telefone";case"in-person":return"Presencial";default:return"Online"}},S=T=>new Date(T).toLocaleDateString("pt-BR"),k=T=>new Date(T).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sessões"}),i.jsx("p",{className:"text-white/60",children:"Gerencie sua agenda de sessões de terapia"})]}),i.jsxs("button",{onClick:()=>N(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-all duration-300",children:[i.jsx(Ur,{className:"w-4 h-4"}),"Nova Sessão"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar sessões...",value:l,onChange:T=>c(T.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("select",{value:d,onChange:T=>h(T.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todos os status"}),i.jsx("option",{value:"scheduled",children:"Agendadas"}),i.jsx("option",{value:"in-progress",children:"Em Andamento"}),i.jsx("option",{value:"completed",children:"Concluídas"}),i.jsx("option",{value:"cancelled",children:"Canceladas"})]}),i.jsxs("select",{value:f,onChange:T=>m(T.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"all",children:"Todas as datas"}),i.jsx("option",{value:"today",children:"Hoje"}),i.jsx("option",{value:"week",children:"Esta semana"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 border border-blue-500/30 flex items-center justify-center",children:i.jsx(Xe,{className:"w-5 h-5 text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(T=>T.status==="scheduled").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Agendadas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 border border-yellow-500/30 flex items-center justify-center",children:i.jsx(Lt,{className:"w-5 h-5 text-yellow-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(T=>T.status==="in-progress").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Em Andamento"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center justify-center",children:i.jsx(tn,{className:"w-5 h-5 text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(T=>T.status==="completed").length}),i.jsx("div",{className:"text-sm text-white/60",children:"Concluídas"})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 border border-purple-500/30 flex items-center justify-center",children:i.jsx(Lt,{className:"w-5 h-5 text-purple-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-white",children:e.filter(T=>T.status==="scheduled"&&new Date(T.scheduledDate)>new Date).length}),i.jsx("div",{className:"text-sm text-white/60",children:"Próximas"})]})]})})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Paciente"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Data & Hora"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Duração"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/60 uppercase tracking-wider",children:"Ações"})]})}),i.jsx("tbody",{className:"divide-y divide-white/10",children:n.map(T=>i.jsxs("tr",{className:"hover:bg-white/5 transition-colors duration-200",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-sm",children:T.patientName.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-white",children:T.patientName}),i.jsx("div",{className:"text-sm text-white/60",children:T.notes||"Sem observações"})]})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"text-sm text-white",children:S(T.scheduledDate)}),i.jsx("div",{className:"text-sm text-white/60",children:k(T.scheduledDate)})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-white/10 text-white/80 border border-white/20",children:[A(T.type),i.jsx("span",{className:"ml-1",children:_(T.type)})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white/60",children:[T.duration," min"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${b(T.status)}`,children:[I(T.status),i.jsx("span",{className:"ml-1",children:M(T.status)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[T.status==="scheduled"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>g(T.id,"in-progress"),className:"p-1 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded transition-colors duration-200",title:"Iniciar sessão",children:i.jsx(kL,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>g(T.id,"cancelled"),className:"p-1 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors duration-200",title:"Cancelar sessão",children:i.jsx(Fp,{className:"w-4 h-4"})})]}),T.status==="in-progress"&&i.jsx("button",{onClick:()=>g(T.id,"completed"),className:"p-1 text-green-400 hover:text-green-300 hover:bg-green-500/10 rounded transition-colors duration-200",title:"Finalizar sessão",children:i.jsx(tn,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Gi,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Wh,{className:"w-4 h-4"})}),i.jsx("button",{className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(ci,{className:"w-4 h-4"})})]})})]},T.id))})]})}),n.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Xe,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"Nenhuma sessão encontrada"}),i.jsx("p",{className:"text-white/40",children:"Comece agendando sua primeira sessão"})]})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 border border-white/20 rounded-xl p-6 w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Nova Sessão"}),i.jsx("button",{onClick:()=>N(!1),className:"p-1 text-white/60 hover:text-white hover:bg-white/10 rounded transition-colors duration-200",children:i.jsx(Zt,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Nome do Paciente"}),i.jsx("input",{type:"text",required:!0,value:E.patientName,onChange:T=>C({...E,patientName:T.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Nome do paciente"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Data"}),i.jsx("input",{type:"date",required:!0,value:E.scheduledDate,onChange:T=>C({...E,scheduledDate:T.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Hora"}),i.jsx("input",{type:"time",required:!0,value:E.scheduledTime,onChange:T=>C({...E,scheduledTime:T.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Duração (min)"}),i.jsxs("select",{value:E.duration,onChange:T=>C({...E,duration:parseInt(T.target.value)}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:30,children:"30 min"}),i.jsx("option",{value:45,children:"45 min"}),i.jsx("option",{value:50,children:"50 min"}),i.jsx("option",{value:60,children:"60 min"}),i.jsx("option",{value:90,children:"90 min"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Tipo"}),i.jsxs("select",{value:E.type,onChange:T=>C({...E,type:T.target.value}),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",children:[i.jsx("option",{value:"online",children:"Online"}),i.jsx("option",{value:"phone",children:"Telefone"}),i.jsx("option",{value:"in-person",children:"Presencial"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Observações"}),i.jsx("textarea",{value:E.notes,onChange:T=>C({...E,notes:T.target.value}),rows:"3",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300",placeholder:"Observações sobre a sessão..."})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-white/20 text-white rounded-lg hover:bg-white/10 transition-colors duration-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-white text-black rounded-lg font-medium hover:bg-white/90 transition-colors duration-300",children:"Agendar"})]})]})]})})]})},AF=()=>{const t=gt(),{user:e}=ze(),[r,n]=v.useState("overview"),[s,a]=v.useState(""),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[h,f]=v.useState({patients:[],sessions:[],stats:{activePatients:0,totalSessions:0,successRate:0,avgSessionTime:0,rating:0,newPatients:0}}),m=v.useMemo(()=>[{id:1,title:"Pacientes Ativos",subtitle:"Em tratamento",value:h.stats.activePatients.toString(),change:"+12%",trend:"up",icon:pt,bars:[80,60,90,70,85]},{id:2,title:"Sessões Realizadas",subtitle:"Este mês",value:h.stats.totalSessions.toString(),change:"+8%",trend:"up",icon:Xe,bars:[65,85,70,90,75]},{id:3,title:"Taxa de Sucesso",subtitle:"Tratamentos",value:`${h.stats.successRate}%`,change:"+5%",trend:"up",icon:Gn,bars:[90,85,95,80,88]},{id:4,title:"Tempo Médio",subtitle:"Por sessão",value:`${h.stats.avgSessionTime}min`,change:"-3%",trend:"down",icon:Lt,bars:[70,60,80,65,75]},{id:5,title:"Avaliações",subtitle:"Satisfação",value:h.stats.rating.toString(),change:"+0.2",trend:"up",icon:En,bars:[85,90,80,95,88]},{id:6,title:"Novos Pacientes",subtitle:"Esta semana",value:h.stats.newPatients.toString(),change:"+25%",trend:"up",icon:bl,bars:[60,75,85,70,80]}],[h.stats]),y=v.useMemo(()=>h.patients.slice(0,3),[h.patients]),N=v.useMemo(()=>h.sessions.slice(0,3),[h.sessions]),E=()=>{t("/login")},C=()=>{n("sessions")},x=b=>{n("patients")},w=b=>{n("sessions")};v.useEffect(()=>{localStorage.getItem(`psychologist-tour-${e==null?void 0:e.uid}`)||l(!0)},[e==null?void 0:e.uid]),v.useEffect(()=>{(async()=>{if(e!=null&&e.uid){d(!0);try{const I=await uF(e.uid);let M={activePatients:0,totalSessions:0,successRate:87,avgSessionTime:45,rating:4.8,newPatients:0};I.success&&(M=I.data);const A=await wS(e.uid);let _=[];A.success&&(_=A.data);const S=await yS(e.uid);let k=[];S.success&&(k=S.data),f({patients:_,sessions:k,stats:M})}catch(I){console.error("Erro ao carregar dados:",I)}finally{d(!1)}}})()},[e==null?void 0:e.uid]);const g=()=>{switch(r){case"overview":return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(b=>i.jsxs("div",{className:"monitoring-card bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:bg-white/[0.07] hover:border-white/20 transition-all duration-500 hover:scale-[1.02] hover:shadow-[0_20px_60px_rgba(255,255,255,0.1)] group",children:[i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 border border-white/20 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:i.jsx(b.icon,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-medium text-base",children:b.title}),i.jsx("p",{className:"text-white/60 text-sm",children:b.subtitle})]})]}),i.jsxs("div",{className:"text-right text-white",children:[i.jsx("div",{className:"text-xl font-bold",children:b.value}),i.jsx("div",{className:"text-xs text-white/70",children:b.change})]})]}),i.jsx("div",{className:"chart-container flex items-end justify-between space-x-1.5 h-20",children:b.bars.map((I,M)=>i.jsx("div",{className:"chart-bar flex-1 bg-white/60 rounded-t-md group-hover:bg-white transition-all duration-300",style:{height:`${I}%`}},M))})]},b.id))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:"Pacientes Recentes"}),i.jsxs("button",{onClick:()=>n("patients"),className:"text-white/60 hover:text-white text-sm font-medium transition-colors duration-300 flex items-center space-x-1",children:[i.jsx("span",{children:"Ver todos"}),i.jsx(Wi,{className:"w-4 h-4"})]})]}),i.jsxs("div",{className:"space-y-4",children:[y.map(b=>i.jsxs("div",{onClick:()=>x(b.id),className:"flex items-center justify-between p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(He,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium text-base",children:b.name}),i.jsxs("p",{className:"text-white/60 text-sm",children:["Última sessão: ",b.lastSession?new Date(b.lastSession).toLocaleDateString("pt-BR"):"Nunca"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-xs text-white/60 mb-2",children:["Próxima: ",b.nextSession||"Não agendada"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 bg-white/20 rounded-full h-2.5",children:i.jsx("div",{className:"h-2.5 rounded-full bg-white",style:{width:`${b.progress||0}%`}})}),i.jsxs("span",{className:"text-xs text-white/60",children:[b.progress||0,"%"]})]})]})]},b.id)),y.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx(pt,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("p",{className:"text-white/40 text-base",children:"Nenhum paciente ainda"})]})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:"Próximas Sessões"}),i.jsxs("button",{onClick:C,className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-xl text-sm font-bold hover:bg-white/90 transition-all duration-300",children:[i.jsx(Ur,{className:"w-4 h-4"}),i.jsx("span",{children:"Nova"})]})]}),i.jsxs("div",{className:"space-y-4",children:[N.map(b=>i.jsxs("div",{onClick:()=>w(b.id),className:"flex items-center justify-between p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(Xe,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium text-base",children:b.patientName}),i.jsxs("p",{className:"text-white/60 text-sm",children:[b.type||"Online"," • ",b.duration||50," min"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xl font-bold text-white",children:b.scheduledDate?new Date(b.scheduledDate).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"--:--"}),i.jsx("div",{className:`text-xs px-3 py-1 rounded-full ${b.status==="confirmed"?"bg-white/20 text-white":"bg-white/10 text-white/80"}`,children:b.status==="confirmed"?"Confirmado":"Pendente"})]})]},b.id)),N.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx(Xe,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),i.jsx("p",{className:"text-white/40 text-base",children:"Nenhuma sessão agendada"})]})]})]})]})]});case"patients":return i.jsx(kF,{});case"sessions":return i.jsx(IF,{});case"reports":return i.jsx(TF,{});case"messages":return i.jsx(SF,{});default:return null}};return c?i.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-2 border-white"}),i.jsx("p",{className:"text-white/70 text-lg",children:"Carregando dados..."})]})}):i.jsxs("div",{className:"min-h-screen bg-black text-white relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(30)].map((b,I)=>i.jsx("div",{className:"floating-particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*6}s`,animationDuration:`${4+Math.random()*4}s`}},I))}),i.jsx("header",{className:"bg-white/5 backdrop-blur-xl border-b border-white/10 px-6 py-5",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 border border-white/20 flex items-center justify-center",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-8 h-8 object-contain"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"MONITORAMENTO"}),i.jsxs("p",{className:"text-base text-white/60",children:["Olá, ",(e==null?void 0:e.displayName)||"Psicólogo","! 👋"]})]})]}),i.jsx("div",{className:"flex-1 max-w-md",children:i.jsxs("div",{className:"relative",children:[i.jsx(yr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/50"}),i.jsx("input",{type:"text",placeholder:"Buscar pacientes, sessões...",value:s,onChange:b=>a(b.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-300"})]})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{className:"p-2.5 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300",children:i.jsx($n,{className:"w-5 h-5"})}),i.jsx("button",{className:"p-2.5 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300",children:i.jsx(Di,{className:"w-5 h-5"})}),i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(He,{className:"w-5 h-5 text-white"})}),i.jsx("button",{onClick:E,className:"p-2.5 text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300",children:i.jsx(Op,{className:"w-5 h-5"})})]})]})}),i.jsx("nav",{className:"bg-white/5 border-b border-white/10 px-6",children:i.jsx("div",{className:"flex space-x-1",children:[{id:"overview",label:"Visão Geral",icon:Js},{id:"patients",label:"Pacientes",icon:pt},{id:"sessions",label:"Sessões",icon:Xe},{id:"reports",label:"Relatórios",icon:Gn},{id:"messages",label:"Mensagens",icon:nt}].map(b=>i.jsxs("button",{onClick:()=>n(b.id),className:`flex items-center space-x-2 py-4 px-4 border-b-2 transition-all duration-300 ${r===b.id?"border-white text-white":"border-transparent text-white/60 hover:text-white/80"}`,children:[i.jsx(b.icon,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm font-medium",children:b.label})]},b.id))})}),i.jsx("main",{className:"p-6",children:g()}),i.jsx(CF,{isOpen:o,onClose:()=>l(!1)}),i.jsx("style",{children:`
        .floating-particle {
          position: absolute;
          width: 6px;
          height: 6px;
          background: rgba(255, 255, 255, 0.15);
          border-radius: 50%;
          animation: float 6s infinite ease-in-out;
        }
        
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px);
            opacity: 0;
          }
          50% {
            transform: translateY(-30px) translateX(15px);
            opacity: 1;
          }
        }
        
        .monitoring-card {
          position: relative;
          overflow: hidden;
        }
        
        .monitoring-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
          transition: left 0.5s;
        }
        
        .monitoring-card:hover::before {
          left: 100%;
        }
        
        .chart-bar {
          transition: all 0.3s ease;
        }
        
        .chart-bar:hover {
          transform: scaleY(1.1);
        }
      `})]})},PF=()=>{const[t,e]=v.useState("cliente"),[r,n]=v.useState({name:"",username:"",email:"",birthDate:"",phone:"",password:"",confirmPassword:"",crp:"",specialty:"",yearsExperience:"",acceptsOnline:!1,bio:""}),[s,a]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState(!1),[h,f]=v.useState(null),m=gt(),y=E=>{const{name:C,value:x,type:w,checked:g}=E.target;n({...r,[C]:w==="checkbox"?g:x})},N=async E=>{if(E.preventDefault(),!r.name||!r.username||!r.email||!r.birthDate||!r.phone||!r.password||!r.confirmPassword){alert("Por favor, preencha todos os campos obrigatórios.");return}if(r.password!==r.confirmPassword){alert("As senhas não coincidem");return}if(!/^[a-zA-Z0-9_]{3,20}$/.test(r.username)){alert("O username deve ter entre 3 e 20 caracteres e conter apenas letras, números e underscore (_).");return}d(!0);try{const w=(await j_(vt,r.email,r.password)).user;await E_(w,{displayName:r.name}),await Jl(ye(J,"users",w.uid),{displayName:r.name,username:r.username.toLowerCase(),email:r.email,birthDate:r.birthDate,phone:r.phone,role:t,createdAt:Pe()}),t==="psicologo"&&await Jl(ye(J,"PsychologistAccount",w.uid),{userId:w.uid,displayName:r.name,username:r.username.toLowerCase(),email:r.email,birthDate:r.birthDate,phone:r.phone,crp:r.crp,specialty:r.specialty,yearsExperience:r.yearsExperience,acceptsOnline:r.acceptsOnline,bio:r.bio,isAvailable:!0,rating:5,totalSessions:0,availableSlots:["09:00","10:00","11:00","14:00","15:00","16:00","17:00"],languages:["Português"],education:"Psicologia",approach:r.specialty,certifications:[],insurance:!1,virtualSessions:r.acceptsOnline,inPersonSessions:!0,createdAt:Pe(),updatedAt:Pe()}),alert("Conta criada com sucesso!"),m(t==="psicologo"?"/psychologist-dashboard":"/connected")}catch(x){console.error("Erro ao registrar:",x),alert(x.message)}finally{d(!1)}};return i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden text-white",children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(8)].map((E,C)=>i.jsx("div",{className:"absolute top-0 left-1/2 w-px h-full bg-gradient-to-b from-white/20 via-white/5 to-transparent transform-gpu origin-top",style:{transform:`translateX(-50%) rotate(${C*45}deg)`,animation:`pulse ${2+C*.5}s ease-in-out infinite alternate`}},C))}),i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(15)].map((E,C)=>i.jsx("div",{className:"absolute w-1 h-1 bg-white/20 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`}},C))}),i.jsxs("div",{className:"relative w-full max-w-md z-10 animate-fade-in animate-slide-up",children:[i.jsx("button",{type:"button",onClick:()=>m("/"),className:"absolute -top-2 -left-2 p-2 text-white/80 hover:text-white transition-all duration-300 hover:scale-110 hover:rotate-12 group","aria-label":"Voltar para início",onMouseEnter:()=>f("back"),onMouseLeave:()=>f(null),children:i.jsx(li,{className:`w-6 h-6 transition-all duration-300 ${h==="back"?"drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":""}`})}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-3",children:i.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 border border-white/20 flex items-center justify-center backdrop-blur-md hover:scale-110 hover:rotate-12 transition-all duration-500 hover:bg-white/20 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] group cursor-pointer",children:i.jsx("img",{src:"/Logo-Sereno3.png",alt:"Sereno Logo",className:"w-full h-full object-contain p-1",loading:"eager"})})}),i.jsx("h1",{className:"text-2xl font-semibold text-white mb-1 hover:text-white/90 transition-colors duration-300",children:"Sereno"}),i.jsx("p",{className:"text-white/60 text-sm hover:text-white/80 transition-colors duration-300",children:"Crie sua conta e comece hoje"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl hover:bg-white/[0.07] hover:border-white/20 transition-all duration-500 hover:shadow-[0_20px_60px_rgba(255,255,255,0.1)] group",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-light text-white mb-1 group-hover:text-white/95 transition-colors duration-300",children:"Criar Conta"}),i.jsx("p",{className:"text-white/60 text-sm group-hover:text-white/70 transition-colors duration-300",children:"Leva menos de 2 minutos"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(Ki,{className:"w-3 h-3 text-white/40 animate-pulse"}),i.jsx("span",{className:"text-xs text-white/60",children:"Tipo de usuário:"}),i.jsx(Ki,{className:"w-3 h-3 text-white/40 animate-pulse",style:{animationDelay:"0.5s"}})]}),i.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1 border border-white/20 hover:border-white/30 transition-all duration-300 hover:bg-white/15",children:[i.jsxs("button",{type:"button",onClick:()=>e("cliente"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${t==="cliente"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(He,{className:"w-3 h-3 mr-1.5 transition-all duration-300 group-hover:scale-110"}),"Cliente"]}),i.jsxs("button",{type:"button",onClick:()=>e("psicologo"),className:`flex-1 flex items-center justify-center py-1.5 px-3 rounded-md transition-all duration-300 text-sm group ${t==="psicologo"?"bg-white text-black shadow-lg scale-105 shadow-white/20":"text-white/70 hover:text-white hover:bg-white/10 hover:scale-105"}`,children:[i.jsx(Ri,{className:"w-3 h-3 mr-1.5 transition-all duration-300 group-hover:scale-110"}),"Psicólogo"]})]})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"name",className:"block text-xs font-light text-white/80",children:"Nome"}),i.jsxs("div",{className:"relative",children:[i.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"Seu nome completo",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"username",className:"block text-xs font-light text-white/80",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx(tx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"seu_usuario",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"email",className:"block text-xs font-light text-white/80",children:"E-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"seu@email.com",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"birthDate",className:"block text-xs font-light text-white/80",children:"Data de Nascimento"}),i.jsxs("div",{className:"relative",children:[i.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"date",id:"birthDate",name:"birthDate",value:r.birthDate,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",required:!0})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"phone",className:"block text-xs font-light text-white/80",children:"Telefone"}),i.jsxs("div",{className:"relative",children:[i.jsx(on,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:y,className:"w-full pl-9 pr-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"(11) 99999-9999",required:!0})]})]}),t==="psicologo"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"crp",className:"block text-xs font-light text-white/80",children:"CRP"}),i.jsx("input",{type:"text",id:"crp",name:"crp",value:r.crp,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"CRP 00/00000",required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"specialty",className:"block text-xs font-light text-white/80",children:"Especialidade"}),i.jsx("input",{type:"text",id:"specialty",name:"specialty",value:r.specialty,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"Ex.: TCC, Ansiedade, Depressão",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"yearsExperience",className:"block text-xs font-light text-white/80",children:"Anos de experiência"}),i.jsx("input",{type:"number",id:"yearsExperience",name:"yearsExperience",value:r.yearsExperience,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"0",min:"0",required:!0})]}),i.jsxs("label",{className:"flex items-center justify-start gap-2 mt-5",children:[i.jsx("input",{type:"checkbox",name:"acceptsOnline",checked:r.acceptsOnline,onChange:y,className:"w-3 h-3 rounded border-white/30 bg-black/40 text-white focus:ring-white/30 focus:ring-2"}),i.jsx("span",{className:"text-xs text-white/80",children:"Atende online"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"bio",className:"block text-xs font-light text-white/80",children:"Bio (opcional)"}),i.jsx("textarea",{id:"bio",name:"bio",rows:"2",value:r.bio,onChange:y,className:"w-full px-4 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"Fale brevemente sobre sua abordagem."})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"password",className:"block text-xs font-light text-white/80",children:"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(ec,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:s?"text":"password",id:"password",name:"password",value:r.password,onChange:y,className:"w-full pl-9 pr-10 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>a(E=>!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-colors",children:s?i.jsx(Zl,{className:"w-4 h-4"}):i.jsx(Gi,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-light text-white/80",children:"Confirmar Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(ec,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50"}),i.jsx("input",{type:o?"text":"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:y,className:"w-full pl-9 pr-10 py-2.5 bg-black/40 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-white/30 transition-all duration-200 text-sm",placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>l(E=>!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-colors",children:o?i.jsx(Zl,{className:"w-4 h-4"}):i.jsx(Gi,{className:"w-4 h-4"})})]})]}),i.jsxs("button",{type:"submit",disabled:c,className:"w-full py-2.5 px-4 bg-white text-black hover:bg-white/90 disabled:bg-white/60 font-medium rounded-lg transition-all duration-300 transform hover:scale-[1.02] hover:shadow-[0_8px_30px_rgba(255,255,255,0.3)] disabled:scale-100 disabled:cursor-not-allowed shadow-lg text-sm group overflow-hidden relative",onMouseEnter:()=>f("submit"),onMouseLeave:()=>f(null),children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full transition-transform duration-1000 ${h==="submit"&&!c?"translate-x-full":""}`}),c?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin mr-2"}),"Criando..."]}):i.jsx("span",{className:"relative z-10",children:"Criar Conta"})]})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-white/70 text-sm",children:["Já tem uma conta?"," ",i.jsx("button",{onClick:()=>m("/login"),className:"text-white hover:text-white/80 font-medium transition-all duration-300 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)] hover:scale-105 inline-block",children:"Fazer login"})]})})]}),i.jsx("div",{className:"mt-6 text-center text-white/50 text-xs animate-fade-in",style:{animationDelay:"0.5s"},children:i.jsxs("p",{className:"hover:text-white/70 transition-colors duration-300 cursor-default",children:["Conecte-se, Entenda-se, ",i.jsx("span",{className:"text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.3)] transition-all duration-300",children:"Evolua."})]})})]})]})},A1=()=>{const t=gt(),{user:e}=ze(),[r,n]=v.useState("profile"),[s,a]=v.useState(!0),[o,l]=v.useState(!1),[c,d]=v.useState(""),[h,f]=v.useState(""),[m,y]=v.useState(!1),[N,E]=v.useState(""),[C,x]=v.useState(!1),[w,g]=v.useState({username:"",displayName:"",bio:"",location:"",website:"",language:"pt-BR"}),[b,I]=v.useState({emailNotifications:!0,pushNotifications:!0,messageNotifications:!0,groupNotifications:!0,sessionReminders:!0,moodReminders:!0,weeklyReports:!1}),[M,A]=v.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,allowMessages:!0,allowFriendRequests:!0,showOnlineStatus:!0,dataSharing:!1}),[_,S]=v.useState({theme:"dark",fontSize:"medium",compactMode:!1,animations:!0});v.useEffect(()=>{(async()=>{var O;try{if(a(!0),e){const U=e.profileData||{};g({username:U.username||((O=e.displayName)==null?void 0:O.toLowerCase().replace(/\s+/g,"."))||"",displayName:e.displayName||U.displayName||"",bio:U.bio||"",location:U.location||"",website:U.website||"",language:U.language||"pt-BR"}),I({emailNotifications:U.emailNotifications!==void 0?U.emailNotifications:!0,pushNotifications:U.pushNotifications!==void 0?U.pushNotifications:!0,messageNotifications:U.messageNotifications!==void 0?U.messageNotifications:!0,groupNotifications:U.groupNotifications!==void 0?U.groupNotifications:!0,sessionReminders:U.sessionReminders!==void 0?U.sessionReminders:!0,moodReminders:U.moodReminders!==void 0?U.moodReminders:!0,weeklyReports:U.weeklyReports||!1}),A({profileVisibility:U.profileVisibility||"public",showEmail:U.showEmail||!1,showPhone:U.showPhone||!1,allowMessages:U.allowMessages!==void 0?U.allowMessages:!0,allowFriendRequests:U.allowFriendRequests!==void 0?U.allowFriendRequests:!0,showOnlineStatus:U.showOnlineStatus!==void 0?U.showOnlineStatus:!0,dataSharing:U.dataSharing||!1})}}catch(U){console.error("Erro ao carregar dados do usuário:",U),f("Erro ao carregar configurações")}finally{a(!1)}})()},[e]);const k=async()=>{try{l(!0),f(""),d(""),await new Promise(F=>setTimeout(F,1e3)),d("Configurações de perfil salvas com sucesso!"),setTimeout(()=>d(""),3e3)}catch(F){console.error("Erro ao salvar configurações:",F),f("Erro ao salvar configurações")}finally{l(!1)}},T=async()=>{try{l(!0),f(""),d(""),await new Promise(F=>setTimeout(F,1e3)),d("Configurações de notificação salvas com sucesso!"),setTimeout(()=>d(""),3e3)}catch(F){console.error("Erro ao salvar configurações:",F),f("Erro ao salvar configurações")}finally{l(!1)}},D=async()=>{try{l(!0),f(""),d(""),await new Promise(F=>setTimeout(F,1e3)),d("Configurações de privacidade salvas com sucesso!"),setTimeout(()=>d(""),3e3)}catch(F){console.error("Erro ao salvar configurações:",F),f("Erro ao salvar configurações")}finally{l(!1)}},P=async()=>{if(N!=="EXCLUIR"){f("Digite EXCLUIR para confirmar a exclusão da conta");return}try{if(x(!0),f(""),!(e!=null&&e.uid))throw new Error("Usuário não autenticado");const F=ye(J,"users",e.uid);await Qr(F);const O=vt.currentUser;O&&await C_(O),t("/login")}catch(F){console.error("Erro ao excluir conta:",F),f("Erro ao excluir conta. Tente novamente.")}finally{x(!1)}},$=()=>{y(!0),E(""),f("")},ae=()=>{y(!1),E(""),f("")},oe=(F,O,U)=>{switch(F){case"profile":g(q=>({...q,[O]:U}));break;case"notifications":I(q=>({...q,[O]:U}));break;case"privacy":A(q=>({...q,[O]:U}));break;case"appearance":S(q=>({...q,[O]:U}));break}};return s?i.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{className:"ml-3 text-white/70",children:"Carregando configurações..."})]})}):e?i.jsxs("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(Di,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Configurações"})]}),i.jsx("div",{className:"flex space-x-1 bg-white/5 rounded-lg p-1",children:[{id:"profile",name:"Perfil",icon:He},{id:"notifications",name:"Notificações",icon:$n},{id:"privacy",name:"Privacidade",icon:ZE},{id:"account",name:"Conta",icon:Qt}].map(F=>{const O=F.icon;return i.jsxs("button",{onClick:()=>n(F.id),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${r===F.id?"bg-white text-black":"text-white/70 hover:text-white"}`,children:[i.jsx(O,{className:"w-4 h-4"}),i.jsx("span",{children:F.name})]},F.id)})})]}),c&&i.jsx("div",{className:"bg-green-500/20 border border-green-500/30 rounded-xl p-4 text-green-300",children:c}),h&&i.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-xl p-4 text-red-300",children:h}),r==="profile"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações do Perfil"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Username da Plataforma"}),i.jsx("input",{type:"text",value:w.username,onChange:F=>oe("profile","username",F.target.value.toLowerCase()),placeholder:"Digite seu username",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"}),i.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Este será seu identificador único na plataforma"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Nome de Exibição"}),i.jsx("input",{type:"text",value:w.displayName,onChange:F=>oe("profile","displayName",F.target.value),placeholder:"Digite seu nome completo",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Biografia"}),i.jsx("textarea",{value:w.bio,onChange:F=>oe("profile","bio",F.target.value),rows:"3",placeholder:"Conte um pouco sobre você...",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Localização"}),i.jsx("input",{type:"text",value:w.location,onChange:F=>oe("profile","location",F.target.value),placeholder:"Ex: São Paulo, SP",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Website"}),i.jsx("input",{type:"url",value:w.website,onChange:F=>oe("profile","website",F.target.value),placeholder:"https://seusite.com",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-white focus:border-transparent transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Idioma"}),i.jsxs("select",{value:w.language,onChange:F=>oe("profile","language",F.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:ring-2 focus:ring-white focus:border-transparent transition-all",children:[i.jsx("option",{value:"pt-BR",children:"Português (Brasil)"}),i.jsx("option",{value:"en-US",children:"English (US)"}),i.jsx("option",{value:"es-ES",children:"Español"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:k,disabled:o,className:"px-6 py-3 bg-white hover:bg-gray-100 disabled:bg-gray-800 disabled:cursor-not-allowed text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Salvando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Nl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Perfil"})]})})})]})]}),r==="notifications"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações de Notificação"}),i.jsxs("div",{className:"space-y-6",children:[[{key:"emailNotifications",label:"Notificações por Email",description:"Receber notificações importantes por email"},{key:"pushNotifications",label:"Notificações Push",description:"Receber notificações no dispositivo"},{key:"messageNotifications",label:"Mensagens",description:"Notificar sobre novas mensagens"},{key:"groupNotifications",label:"Atividade em Grupos",description:"Notificar sobre atividades nos grupos"},{key:"sessionReminders",label:"Lembretes de Sessão",description:"Lembrar sobre sessões agendadas"},{key:"moodReminders",label:"Lembretes de Humor",description:"Lembrar de registrar seu humor diário"},{key:"weeklyReports",label:"Relatórios Semanais",description:"Receber resumo semanal de atividades"}].map(F=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium",children:F.label}),i.jsx("p",{className:"text-white/60 text-sm",children:F.description})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:b[F.key],onChange:O=>oe("notifications",F.key,O.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},F.key)),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:T,disabled:o,className:"px-6 py-3 bg-white hover:bg-gray-100 disabled:bg-gray-800 disabled:cursor-not-allowed text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Salvando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Nl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Notificações"})]})})})]})]}),r==="privacy"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações de Privacidade"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Visibilidade do Perfil"}),i.jsxs("select",{value:M.profileVisibility,onChange:F=>oe("privacy","profileVisibility",F.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:ring-2 focus:ring-white focus:border-transparent transition-all",children:[i.jsx("option",{value:"public",children:"Público"}),i.jsx("option",{value:"friends",children:"Apenas Amigos"}),i.jsx("option",{value:"private",children:"Privado"})]})]}),[{key:"showEmail",label:"Mostrar Email",description:"Permitir que outros vejam seu email"},{key:"showPhone",label:"Mostrar Telefone",description:"Permitir que outros vejam seu telefone"},{key:"allowMessages",label:"Permitir Mensagens",description:"Permitir que outros te enviem mensagens"},{key:"allowFriendRequests",label:"Permitir Solicitações",description:"Permitir solicitações de amizade"},{key:"showOnlineStatus",label:"Mostrar Status Online",description:"Mostrar quando você está online"},{key:"dataSharing",label:"Compartilhar Dados",description:"Permitir compartilhamento de dados para pesquisas"}].map(F=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-medium",children:F.label}),i.jsx("p",{className:"text-white/60 text-sm",children:F.description})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:M[F.key],onChange:O=>oe("privacy",F.key,O.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},F.key)),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:D,disabled:o,className:"px-6 py-3 bg-white hover:bg-gray-100 disabled:bg-gray-800 disabled:cursor-not-allowed text-black rounded-lg font-medium transition-colors flex items-center space-x-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Salvando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Nl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar Privacidade"})]})})})]})]}),r==="account"&&i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Configurações da Conta"}),i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"border border-red-500/30 rounded-xl p-6 bg-red-500/5",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Qt,{className:"w-6 h-6 text-red-400"}),i.jsx("h4",{className:"text-lg font-semibold text-red-400",children:"Zona de Perigo"})]}),i.jsx("p",{className:"text-white/70 mb-4",children:"As ações abaixo são irreversíveis e resultarão na perda permanente de todos os seus dados."}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"p-4 bg-red-500/10 rounded-lg border border-red-500/20",children:[i.jsx("h5",{className:"font-medium text-red-300 mb-2",children:"Excluir Conta Permanentemente"}),i.jsx("p",{className:"text-white/60 text-sm mb-4",children:"Esta ação irá:"}),i.jsxs("ul",{className:"text-white/60 text-sm space-y-1 mb-4",children:[i.jsx("li",{children:"• Deletar todos os seus dados pessoais"}),i.jsx("li",{children:"• Remover todos os seus posts e comentários"}),i.jsx("li",{children:"• Excluir seu perfil e configurações"}),i.jsx("li",{children:"• Encerrar sua conta de autenticação"}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Esta ação não pode ser desfeita"})]})]}),i.jsxs("button",{onClick:$,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:[i.jsx(Qt,{className:"w-4 h-4"}),i.jsx("span",{children:"Excluir Minha Conta"})]})]})})]})})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full border border-red-500/30",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center",children:i.jsx(Qt,{className:"w-6 h-6 text-red-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Excluir Conta"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Esta ação é irreversível"})]})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"p-4 bg-red-500/10 rounded-lg border border-red-500/20",children:[i.jsxs("p",{className:"text-white/70 text-sm",children:[i.jsx("strong",{children:"Atenção:"})," Ao excluir sua conta, você perderá permanentemente:"]}),i.jsxs("ul",{className:"text-white/60 text-sm mt-2 space-y-1",children:[i.jsx("li",{children:"• Todos os seus posts e comentários"}),i.jsx("li",{children:"• Seu perfil e configurações"}),i.jsx("li",{children:"• Histórico de atividades"}),i.jsx("li",{children:"• Dados de sessões e humor"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-white/70 text-sm font-medium mb-2",children:["Digite ",i.jsx("strong",{children:"EXCLUIR"})," para confirmar:"]}),i.jsx("input",{type:"text",value:N,onChange:F=>E(F.target.value),placeholder:"EXCLUIR",className:"w-full px-4 py-3 bg-white/5 border border-red-500/30 rounded-lg text-white placeholder-white/30 focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"})]})]}),h&&i.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:h}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:ae,className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:P,disabled:C||N!=="EXCLUIR",className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center space-x-2",children:C?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner-small"}),i.jsx("span",{children:"Excluindo..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Qt,{className:"w-4 h-4"}),i.jsx("span",{children:"Excluir Conta"})]})})]})]})})]}):i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-24 h-24 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Hd,{className:"w-12 h-12 text-red-400"})}),i.jsx("h3",{className:"text-xl text-white/60 mb-2",children:"Usuário não autenticado"}),i.jsx("p",{className:"text-white/40 mb-6",children:"Faça login para acessar as configurações"}),i.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white transition-colors",children:"Ir para Login"})]})},P1=()=>{const[t,e]=v.useState(null),r=gt(),[n,s]=v.useState("available"),[a,o]=v.useState(""),[l,c]=v.useState("all"),d=[{id:1,name:"Dra. Ana Silva",specialty:"Psicóloga Clínica",crp:"06/123456",rating:4.9,reviews:127,experience:"8 anos",acceptsOnline:!0,location:"São Paulo, SP",avatar:null,bio:"Especialista em ansiedade, depressão e estresse. Trabalho com abordagem cognitivo-comportamental e mindfulness.",availability:[{day:"Segunda",time:"14:00 - 18:00"},{day:"Terça",time:"09:00 - 17:00"},{day:"Quarta",time:"14:00 - 18:00"},{day:"Quinta",time:"09:00 - 17:00"},{day:"Sexta",time:"14:00 - 18:00"}],price:"R$ 150,00",sessionType:"Online/Presencial"},{id:2,name:"Dr. Carlos Santos",specialty:"Psicólogo",crp:"06/789012",rating:4.8,reviews:89,experience:"12 anos",acceptsOnline:!0,location:"Rio de Janeiro, RJ",avatar:null,bio:"Especialista em TDAH, autismo e desenvolvimento infantil. Abordagem humanista e integrativa.",availability:[{day:"Segunda",time:"08:00 - 16:00"},{day:"Terça",time:"08:00 - 16:00"},{day:"Quarta",time:"08:00 - 16:00"},{day:"Quinta",time:"08:00 - 16:00"},{day:"Sexta",time:"08:00 - 16:00"}],price:"R$ 180,00",sessionType:"Online/Presencial"},{id:3,name:"Dra. Maria Costa",specialty:"Psicóloga Especialista",crp:"06/345678",rating:4.7,reviews:156,experience:"15 anos",acceptsOnline:!1,location:"Belo Horizonte, MG",avatar:null,bio:"Especialista em trauma, TEPT e EMDR. Abordagem psicodinâmica e técnicas de reprocessamento.",availability:[{day:"Segunda",time:"13:00 - 19:00"},{day:"Terça",time:"13:00 - 19:00"},{day:"Quarta",time:"13:00 - 19:00"},{day:"Quinta",time:"13:00 - 19:00"},{day:"Sexta",time:"13:00 - 19:00"}],price:"R$ 200,00",sessionType:"Presencial"}],h=[{id:1,therapist:"Dra. Ana Silva",date:"2024-01-15",time:"14:00",duration:"50 min",type:"Online",status:"confirmed"},{id:2,therapist:"Dr. Carlos Santos",date:"2024-01-18",time:"10:00",duration:"50 min",type:"Presencial",status:"pending"}];v.useEffect(()=>{(async()=>{try{const y=vt.currentUser;if(y){const N=ye(J,"users",y.uid),E=await jt(N);E.exists()&&e(E.data())}}catch(y){console.error("Erro ao buscar dados do usuário:",y)}})()},[]);const f=d.filter(m=>{const y=m.name.toLowerCase().includes(a.toLowerCase())||m.specialty.toLowerCase().includes(a.toLowerCase())||m.bio.toLowerCase().includes(a.toLowerCase()),N=l==="all"||l==="online"&&m.acceptsOnline||l==="presencial"&&!m.acceptsOnline;return y&&N});return i.jsx("div",{className:"min-h-screen bg-black py-8 animation-initial animate-fade-in-up animation-delay-100",children:i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-gray-200/50 rounded-2xl p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ri,{className:"w-6 h-6 text-gray-400"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sessões de Terapia"})]}),i.jsxs("button",{className:"bg-white/10 border border-white/30 text-white px-4 py-2 rounded-lg hover:bg-white/20 transition-all duration-300 text-sm",children:[i.jsx(Ur,{className:"w-4 h-4 inline mr-2"}),"Nova Sessão"]})]}),i.jsxs("div",{className:"flex space-x-1 mb-6 bg-white/5 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>s("available"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${n==="available"?"bg-white text-black":"text-white/70 hover:text-white"}`,children:"Terapeutas Disponíveis"}),i.jsx("button",{onClick:()=>s("scheduled"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${n==="scheduled"?"bg-white text-black":"text-white/70 hover:text-white"}`,children:"Sessões Agendadas"})]}),n==="available"?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Pesquisar terapeutas...",value:a,onChange:m=>o(m.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg pl-10 pr-4 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),i.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-white/30",children:[i.jsx("option",{value:"all",children:"Todos"}),i.jsx("option",{value:"online",children:"Online"}),i.jsx("option",{value:"presencial",children:"Presencial"})]})]}),i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:f.map(m=>i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 hover:bg-white/10 transition-all duration-200",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center flex-shrink-0",children:m.avatar?i.jsx("img",{src:m.avatar,alt:"",className:"w-full h-full rounded-full"}):i.jsx(He,{className:"w-8 h-8 text-white/70"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white text-lg",children:m.name}),i.jsx("p",{className:"text-white/70 text-sm",children:m.specialty}),i.jsxs("p",{className:"text-white/50 text-xs",children:["CRP: ",m.crp]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[i.jsx(En,{className:"w-4 h-4 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-white text-sm",children:m.rating}),i.jsxs("span",{className:"text-white/50 text-xs",children:["(",m.reviews,")"]})]}),i.jsx("p",{className:"text-white/70 text-sm",children:m.price})]})]}),i.jsx("p",{className:"text-white/80 text-sm mb-3",children:m.bio}),i.jsxs("div",{className:"flex items-center space-x-4 text-xs text-white/60 mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Lt,{className:"w-3 h-3"}),i.jsx("span",{children:m.experience})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(to,{className:"w-3 h-3"}),i.jsx("span",{children:m.location})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[m.acceptsOnline?i.jsx(Qd,{className:"w-3 h-3 text-green-400"}):i.jsx(on,{className:"w-3 h-3 text-blue-400"}),i.jsx("span",{children:m.sessionType})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>r("/user/"+encodeURIComponent(m.name).toLowerCase().replace(/%20/g,"-")),className:"bg-white/10 border border-white/30 text-white px-4 py-2 rounded-lg hover:bg-white/20 transition-all duration-300 text-sm",children:"Ver Perfil"}),i.jsx("button",{className:"bg-white text-black px-4 py-2 rounded-lg hover:bg-white/90 transition-all duration-300 text-sm",children:"Agendar"})]})]})]})},m.id))})]}):i.jsx("div",{className:"space-y-4",children:h.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Xe,{className:"w-16 h-16 text-white/20 mx-auto mb-4"}),i.jsx("p",{className:"text-white/50 text-lg",children:"Nenhuma sessão agendada"}),i.jsx("p",{className:"text-white/30 text-sm mt-2",children:"Agende sua primeira sessão com um terapeuta"})]}):h.map(m=>i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:i.jsx(He,{className:"w-6 h-6 text-white/70"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white",children:m.therapist}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[i.jsxs("span",{children:[m.date," às ",m.time]}),i.jsx("span",{children:"•"}),i.jsx("span",{children:m.duration}),i.jsx("span",{children:"•"}),i.jsx("span",{children:m.type})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m.status==="confirmed"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:m.status==="confirmed"?"Confirmada":"Pendente"}),i.jsx("button",{className:"bg-white/10 border border-white/30 text-white p-2 rounded-lg hover:bg-white/20 transition-all duration-300",children:i.jsx(gL,{className:"w-4 h-4"})})]})]})},m.id))})]})})},RF=()=>{const{userId:t}=fh(),e=gt(),{user:r}=ze();v.useState(null);const[n,s]=v.useState(null),[a,o]=v.useState([]),[l,c]=v.useState(!0),[d,h]=v.useState(!1),[f,m]=v.useState(!1),[y,N]=v.useState(!1),[E,C]=v.useState(""),[x,w]=v.useState(""),[g,b]=v.useState(!1),[I,M]=v.useState({displayName:"",bio:"",location:"",website:"",birthDate:""});v.useEffect(()=>{(async()=>{try{const $=vt.currentUser;let ae=t||($==null?void 0:$.uid);if(!ae){e("/login");return}let oe=ae,F=null;const O=ye(J,"users",ae),U=await jt(O);if(U.exists())oe=ae,F=U.data();else if(t){const H=je(Ne(J,"users"),Me("username","==",t)),fe=await Le(H);if(!fe.empty){const xe=fe.docs[0];oe=xe.id,F=xe.data()}}if(b(($==null?void 0:$.uid)===oe),F)s(F),M({displayName:F.displayName||"",bio:F.bio||"",location:F.location||"",website:F.website||"",birthDate:F.birthDate||""});else if(t){const H=decodeURIComponent(t).replace(/-/g," ");s({displayName:H,username:t}),M(fe=>({...fe,displayName:H})),oe=t}const q=je(Ne(J,"posts"),Me("userId","==",oe),ht("createdAt","desc")),re=(await Le(q)).docs.map(H=>({id:H.id,...H.data()}));o(re)}catch($){console.error("Erro ao buscar dados do usuário:",$),C("Erro ao carregar dados do perfil")}finally{c(!1)}})()},[t,e]);const A=P=>{const{name:$,value:ae}=P.target;M(oe=>({...oe,[$]:ae}))},_=async()=>{try{C(""),w("");const P=vt.currentUser;if(!P)return;const $=ye(J,"users",P.uid);await rt($,{...I,updatedAt:new Date}),w("Perfil atualizado com sucesso!"),h(!1),s(ae=>({...ae,...I}))}catch(P){console.error("Erro ao atualizar perfil:",P),C("Erro ao atualizar perfil. Tente novamente.")}},S=async P=>{var ae,oe;const $=P.target.files[0];if($){m(!0);try{const F=(ae=r==null?void 0:r.backend)==null?void 0:ae.id,O=(r==null?void 0:r.idToken)||await((oe=vt.currentUser)==null?void 0:oe.getIdToken());if(!F)throw new Error("Usuário do backend não identificado");await Gr.uploadProfilePhoto($,F,O),w("Foto de perfil atualizada com sucesso!")}catch{C("Erro ao fazer upload da foto")}finally{m(!1)}}},k=async P=>{if(P.target.files[0]){N(!0);try{w("Banner atualizado com sucesso!")}catch{C("Erro ao fazer upload do banner")}finally{N(!1)}}},T=P=>P?new Date(P).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"",D=P=>{if(!P)return"";const $=new Date(P),oe=Math.floor((new Date-$)/(1e3*60*60));return oe<1?"Agora mesmo":oe<24?`${oe}h`:oe<48?"Ontem":$.toLocaleDateString("pt-BR",{day:"numeric",month:"short"})};return l?i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Carregando perfil..."})}):i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"bg-black/95 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:i.jsx("div",{className:"max-w-2xl mx-auto px-4",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs("button",{onClick:()=>e(-1),className:"flex items-center space-x-2 text-white/70 hover:text-white transition-colors",children:[i.jsx(li,{className:"w-5 h-5"}),i.jsx("span",{children:"Voltar"})]}),i.jsx("h1",{className:"text-xl font-light",children:"Perfil"}),i.jsx("div",{className:"w-20"})]})})}),i.jsxs("div",{className:"max-w-2xl mx-auto",children:[E&&i.jsx("div",{className:"mx-4 mt-4 p-4 bg-red-500/20 border border-red-500/30 rounded-xl text-red-300",children:E}),x&&i.jsx("div",{className:"mx-4 mt-4 p-4 bg-green-500/20 border border-green-500/30 rounded-xl text-green-300",children:x}),i.jsx("div",{className:"relative h-48 bg-white",children:g&&i.jsxs("label",{className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 p-2 rounded-full cursor-pointer transition-all duration-300 backdrop-blur-md",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",disabled:y}),y?i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):i.jsx(nx,{className:"w-5 h-5 text-white"})]})}),i.jsxs("div",{className:"px-4 -mt-16 relative z-10",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx("div",{className:"w-32 h-32 rounded-full bg-white/10 border-4 border-black overflow-hidden",children:n!=null&&n.photoURL?i.jsx("img",{src:n.photoURL,alt:"Foto de perfil",className:"w-full h-full object-cover"}):i.jsx(He,{className:"w-full h-full text-white/50 p-8"})}),g&&i.jsxs("label",{className:"absolute bottom-0 right-0 bg-black/50 hover:bg-black/70 p-2 rounded-full cursor-pointer transition-all duration-300 backdrop-blur-md",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",disabled:f}),f?i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):i.jsx(Wd,{className:"w-5 h-5 text-white"})]})]}),g&&i.jsx("div",{className:"flex justify-end mt-4",children:d?i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:_,className:"bg-white text-black px-4 py-2 rounded-full font-medium hover:bg-white/90 transition-all duration-300 flex items-center space-x-2",children:[i.jsx(Nl,{className:"w-4 h-4"}),i.jsx("span",{children:"Salvar"})]}),i.jsxs("button",{onClick:()=>h(!1),className:"bg-transparent border border-white/30 text-white px-4 py-2 rounded-full font-medium hover:bg-white/10 transition-all duration-300 flex items-center space-x-2",children:[i.jsx(Zt,{className:"w-4 h-4"}),i.jsx("span",{children:"Cancelar"})]})]}):i.jsxs("button",{onClick:()=>h(!0),className:"bg-transparent border border-white/30 text-white px-4 py-2 rounded-full font-medium hover:bg-white/10 transition-all duration-300 flex items-center space-x-2",children:[i.jsx(jc,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar perfil"})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:d?i.jsx("input",{type:"text",name:"displayName",value:I.displayName,onChange:A,className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 w-full",placeholder:"Seu nome"}):(n==null?void 0:n.displayName)||"Usuário"}),i.jsxs("p",{className:"text-white/70 mt-1",children:["@",(n==null?void 0:n.username)||"usuario"]}),d?i.jsx("textarea",{name:"bio",value:I.bio,onChange:A,rows:3,className:"mt-4 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/30 w-full resize-none",placeholder:"Conte um pouco sobre você..."}):i.jsx("p",{className:"text-white mt-4",children:(n==null?void 0:n.bio)||"Nenhuma biografia adicionada"}),i.jsx("div",{className:"mt-4 space-y-2",children:d?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(to,{className:"w-4 h-4"}),i.jsx("input",{type:"text",name:"location",value:I.location,onChange:A,className:"bg-transparent border-none text-white/70 placeholder-white/50 focus:outline-none focus:ring-0 flex-1",placeholder:"Adicionar localização"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(Zv,{className:"w-4 h-4"}),i.jsx("input",{type:"url",name:"website",value:I.website,onChange:A,className:"bg-transparent border-none text-white/70 placeholder-white/50 focus:outline-none focus:ring-0 flex-1",placeholder:"Adicionar website"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(Xe,{className:"w-4 h-4"}),i.jsx("input",{type:"date",name:"birthDate",value:I.birthDate,onChange:A,className:"bg-transparent border-none text-white/70 placeholder-white/50 focus:outline-none focus:ring-0 flex-1"})]})]}):i.jsxs(i.Fragment,{children:[(n==null?void 0:n.location)&&i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(to,{className:"w-4 h-4"}),i.jsx("span",{children:n.location})]}),(n==null?void 0:n.website)&&i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(Zv,{className:"w-4 h-4"}),i.jsx("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:n.website})]}),(n==null?void 0:n.birthDate)&&i.jsxs("div",{className:"flex items-center space-x-2 text-white/70",children:[i.jsx(Xe,{className:"w-4 h-4"}),i.jsxs("span",{children:["Nascido em ",T(n.birthDate)]})]})]})}),i.jsxs("div",{className:"mt-4 text-white/70",children:["Entrou em ",T(n==null?void 0:n.createdAt)]})]})]}),i.jsxs("div",{className:"mt-8 border-t border-white/10",children:[i.jsx("div",{className:"px-4 py-4",children:i.jsx("h3",{className:"text-xl font-bold",children:"Posts"})}),a.length===0?i.jsxs("div",{className:"px-4 py-8 text-center",children:[i.jsx("p",{className:"text-white/50",children:"Nenhum post ainda"}),i.jsx("p",{className:"text-white/30 text-sm mt-2",children:"Quando você postar algo, aparecerá aqui"})]}):i.jsx("div",{className:"space-y-0",children:a.map(P=>i.jsx("div",{className:"border-b border-white/10 p-4 hover:bg-white/5 transition-colors",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center flex-shrink-0",children:n!=null&&n.photoURL?i.jsx("img",{src:n.photoURL,alt:"",className:"w-full h-full rounded-full object-cover"}):i.jsx(He,{className:"w-6 h-6 text-white/50"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("span",{className:"font-bold text-white",children:(n==null?void 0:n.displayName)||"Usuário"}),i.jsxs("span",{className:"text-white/50",children:["@",(n==null?void 0:n.username)||"usuario"]}),i.jsx("span",{className:"text-white/50",children:"•"}),i.jsx("span",{className:"text-white/50",children:D(P.createdAt)})]}),i.jsx("p",{className:"text-white mb-3",children:P.content}),P.image&&i.jsx("div",{className:"mb-3 rounded-xl overflow-hidden",children:i.jsx("img",{src:P.image,alt:"",className:"w-full max-h-96 object-cover"})}),i.jsxs("div",{className:"flex items-center space-x-8 text-white/50",children:[i.jsxs("button",{className:"flex items-center space-x-2 hover:text-blue-400 transition-colors",children:[i.jsx(nt,{className:"w-5 h-5"}),i.jsx("span",{children:P.commentCount||0})]}),i.jsxs("button",{className:"flex items-center space-x-2 hover:text-red-400 transition-colors",children:[i.jsx(wr,{className:"w-5 h-5"}),i.jsx("span",{children:Array.isArray(P.likes)?P.likes.length:0})]}),i.jsx("button",{className:"flex items-center space-x-2 hover:text-green-400 transition-colors",children:i.jsx(Kd,{className:"w-5 h-5"})})]})]})]})},P.id))})]})]})]})},DF=v.createContext(),Eu=({children:t})=>{const{user:e}=ze(),[r,n]=v.useState([]),[s,a]=v.useState(!1),[o,l]=v.useState(null),c=v.useCallback(async()=>{if(e){a(!0),l(null);try{const N=await Ns.getUserPosts(e.uid,100,e.uid);n(N)}catch(N){l("Erro ao carregar posts do usuário"),console.error("Erro ao carregar posts:",N)}finally{a(!1)}}},[e]),d=v.useCallback(N=>{n(E=>[N,...E])},[]),h=v.useCallback((N,E)=>{n(C=>C.map(x=>x.id===N?{...x,...E}:x))},[]),f=v.useCallback(N=>{n(E=>E.filter(C=>C.id!==N))},[]),m=v.useCallback(()=>{c()},[c]);v.useEffect(()=>{e?c():n([])},[e,c]);const y={userPosts:r,loading:s,error:o,addUserPost:d,updateUserPost:h,removeUserPost:f,refreshUserPosts:m,loadUserPosts:c};return i.jsx(DF.Provider,{value:y,children:t})},MF=({children:t})=>{const{user:e,loading:r}=ze();return r?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):e?t:i.jsx(Wa,{to:"/login",replace:!0})},LF=({children:t})=>{const{user:e,loading:r}=ze();return r?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):e?e.role!=="psicologo"?i.jsx(Wa,{to:"/home",replace:!0}):t:i.jsx(Wa,{to:"/login",replace:!0})},Je=({children:t})=>{const{user:e,loading:r,needsProfileCompletion:n}=ze();return r?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):e?n?i.jsx(Wa,{to:"/complete-profile",replace:!0}):t:i.jsx(Wa,{to:"/login",replace:!0})},OF=[{path:"/",element:i.jsx(aV,{}),public:!0,title:"Sereno - Início"},{path:"/login",element:i.jsx(wF,{}),public:!0,title:"Sereno - Login"},{path:"/register",element:i.jsx(PF,{}),public:!0,title:"Sereno - Registro"},{path:"/connected",element:i.jsx(QV,{}),public:!0,title:"Sereno - Conectado"},{path:"/complete-profile",element:i.jsx(MF,{children:i.jsx(KV,{})}),protected:!0,title:"Sereno - Completar Perfil",category:"profile"},{path:"/home",element:i.jsx(Je,{children:i.jsx(Eu,{children:i.jsx(dn,{children:i.jsx(xF,{})})})}),protected:!0,title:"Sereno - Home",category:"main"},{path:"/psychologist-dashboard",element:i.jsx(LF,{children:i.jsx(AF,{})}),protected:!0,title:"Sereno - Dashboard do Psicólogo",category:"psychologist"},{path:"/home/profile",element:i.jsx(Je,{children:i.jsx(Eu,{children:i.jsx(dn,{children:i.jsx(df,{})})})}),protected:!0,title:"Sereno - Meu Perfil",category:"main"},{path:"/home/sessions",element:i.jsx(Je,{children:i.jsx(dn,{children:i.jsx(P1,{})})}),protected:!0,title:"Sereno - Sessões de Terapia",category:"main"},{path:"/home/diary",element:i.jsx(Je,{children:i.jsx(dn,{children:i.jsx(XV,{})})}),protected:!0,title:"Sereno - Diário Evolutivo",category:"main"},{path:"/home/humor",element:i.jsx(Je,{children:i.jsx(dn,{children:i.jsx(T1,{})})}),protected:!0,title:"Sereno - Rastreador de Humor",category:"main"},{path:"/home/chat/:roomCode",element:i.jsx(Je,{children:i.jsx(dn,{children:i.jsx(ju,{})})}),protected:!0,title:"Sereno - Chat ao Vivo",category:"main"},{path:"/home/chat",element:i.jsx(Je,{children:i.jsx(dn,{children:i.jsx(ju,{})})}),protected:!0,title:"Sereno - Chat ao Vivo",category:"main"},{path:"/home/groups",element:i.jsx(Je,{children:i.jsx(Eu,{children:i.jsx(dn,{children:i.jsx(b1,{})})})}),protected:!0,title:"Sereno - Grupos",category:"main"},{path:"/home/notifications",element:i.jsx(Je,{children:i.jsx(dn,{children:i.jsx(I1,{})})}),protected:!0,title:"Sereno - Notificações",category:"main"},{path:"/home/settings",element:i.jsx(Je,{children:i.jsx(dn,{children:i.jsx(A1,{})})}),protected:!0,title:"Sereno - Configurações",category:"main"},{path:"/profile",element:i.jsx(Je,{children:i.jsx(Eu,{children:i.jsx(df,{})})}),protected:!0,title:"Sereno - Meu Perfil",category:"main"},{path:"/profile/:userId",element:i.jsx(Je,{children:i.jsx(df,{})}),protected:!0,title:"Sereno - Perfil",category:"main"},{path:"/user/:userId",element:i.jsx(Je,{children:i.jsx(RF,{})}),protected:!0,title:"Sereno - Perfil do Usuário",category:"main"},{path:"/welcome-tour",element:i.jsx(Je,{children:i.jsx(_S,{})}),protected:!0,title:"Sereno - Tour de Boas-vindas",category:"main"},{path:"/groups",element:i.jsx(Je,{children:i.jsx(b1,{})}),protected:!0,title:"Sereno - Grupos",category:"community"},{path:"/explore",element:i.jsx(Je,{children:i.jsx(JV,{})}),protected:!0,title:"Sereno - Explorar Comunidades",category:"community"},{path:"/community/:communityId",element:i.jsx(Je,{children:i.jsx(oV,{})}),protected:!0,title:"Sereno - Comunidade",category:"community"},{path:"/humor-tracker",element:i.jsx(Je,{children:i.jsx(T1,{})}),protected:!0,title:"Sereno - Rastreador de Humor",category:"mental-health"},{path:"/therapy-sessions",element:i.jsx(Je,{children:i.jsx(P1,{})}),protected:!0,title:"Sereno - Sessões de Terapia",category:"mental-health"},{path:"/live-chat",element:i.jsx(Je,{children:i.jsx(ju,{})}),protected:!0,title:"Sereno - Chat ao Vivo",category:"communication"},{path:"/chat/:roomCode",element:i.jsx(Je,{children:i.jsx(ju,{})}),protected:!0,title:"Sereno - Chat",category:"communication"},{path:"/post/:postId",element:i.jsx(Je,{children:i.jsx(_F,{})}),protected:!0,title:"Sereno - Post",category:"communication"},{path:"/settings",element:i.jsx(Je,{children:i.jsx(A1,{})}),protected:!0,title:"Sereno - Configurações",category:"settings"},{path:"/notifications",element:i.jsx(Je,{children:i.jsx(I1,{})}),protected:!0,title:"Sereno - Notificações",category:"settings"},{path:"*",element:i.jsx(Wa,{to:"/",replace:!0}),public:!0,title:"Sereno - Página não encontrada"}],R1=document.getElementById("root"),D1=R1?K2(R1):null;function VF(){const{user:t,loading:e}=ze();return e?i.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("div",{className:"text-white ml-3",children:"Carregando..."})]}):i.jsx(iI,{children:OF.map(r=>i.jsx(sN,{path:r.path,element:r.element},r.path))})}D1&&D1.render(i.jsx(v.StrictMode,{children:i.jsx(CI,{children:i.jsx(hL,{children:i.jsx(VF,{})})})}));
